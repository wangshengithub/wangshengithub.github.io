var e,t,n=Object.defineProperty,r=Object.defineProperties,s=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&c(e,n,t[n]);if(a)for(var n of a(t))l.call(t,n)&&c(e,n,t[n]);return e},d=(e,t)=>r(e,s(t)),h=(e,t,n)=>c(e,"symbol"!=typeof t?t+"":t,n),m=(e,t,n)=>new Promise((r,s)=>{var i=e=>{try{o(n.next(e))}catch(t){s(t)}},a=e=>{try{o(n.throw(e))}catch(t){s(t)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,a);o((n=n.apply(e,t)).next())}),g=(e={"assets/index-ByAex1Rt.js"(e){function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var n={exports:{}},r={},s={exports:{}},i={},c=Symbol.for("react.element"),g=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),y=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),k=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),N=Symbol.iterator,C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,M={};function _(e,t,n){this.props=e,this.context=t,this.refs=M,this.updater=n||C}function P(){}function T(e,t,n){this.props=e,this.context=t,this.refs=M,this.updater=n||C}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},P.prototype=_.prototype;var E=T.prototype=new P;E.constructor=T,S(E,_.prototype),E.isPureReactComponent=!0;var R=Array.isArray,A=Object.prototype.hasOwnProperty,L={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,n){var r,s={},i=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)A.call(t,r)&&!F.hasOwnProperty(r)&&(s[r]=t[r]);var o=arguments.length-2;if(1===o)s.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===s[r]&&(s[r]=o[r]);return{$$typeof:c,type:e,key:i,ref:a,props:s,_owner:L.current}}function I(e){return"object"==typeof e&&null!==e&&e.$$typeof===c}var D=/\/+/g;function z(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function q(e,t,n,r,s){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var a=!1;if(null===e)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case c:case g:a=!0}}if(a)return s=s(a=e),e=""===r?"."+z(a,0):r,R(s)?(n="",null!=e&&(n=e.replace(D,"$&/")+"/"),q(s,t,n,"",function(e){return e})):null!=s&&(I(s)&&(s=function(e,t){return{$$typeof:c,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(D,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=""===r?".":r+":",R(e))for(var o=0;o<e.length;o++){var l=r+z(i=e[o],o);a+=q(i,t,n,l,s)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=N&&e[N]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),o=0;!(i=e.next()).done;)a+=q(i=i.value,t,n,l=r+z(i,o++),s);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function $(e,t,n){if(null==e)return e;var r=[],s=0;return q(e,r,"","",function(e){return t.call(n,e,s++)}),r}function B(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var H={current:null},W={transition:null},U={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:W,ReactCurrentOwner:L};function V(){throw Error("act(...) is not supported in production builds of React.")}i.Children={map:$,forEach:function(e,t,n){$(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return $(e,function(){t++}),t},toArray:function(e){return $(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},i.Component=_,i.Fragment=p,i.Profiler=x,i.PureComponent=T,i.StrictMode=f,i.Suspense=w,i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,i.act=V,i.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=S({},e.props),s=e.key,i=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,a=L.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)A.call(t,l)&&!F.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==o?o[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:c,type:e.type,key:s,ref:i,props:r,_owner:a}},i.createContext=function(e){return(e={$$typeof:y,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:b,_context:e},e.Consumer=e},i.createElement=O,i.createFactory=function(e){var t=O.bind(null,e);return t.type=e,t},i.createRef=function(){return{current:null}},i.forwardRef=function(e){return{$$typeof:v,render:e}},i.isValidElement=I,i.lazy=function(e){return{$$typeof:j,_payload:{_status:-1,_result:e},_init:B}},i.memo=function(e,t){return{$$typeof:k,type:e,compare:void 0===t?null:t}},i.startTransition=function(e){var t=W.transition;W.transition={};try{e()}finally{W.transition=t}},i.unstable_act=V,i.useCallback=function(e,t){return H.current.useCallback(e,t)},i.useContext=function(e){return H.current.useContext(e)},i.useDebugValue=function(){},i.useDeferredValue=function(e){return H.current.useDeferredValue(e)},i.useEffect=function(e,t){return H.current.useEffect(e,t)},i.useId=function(){return H.current.useId()},i.useImperativeHandle=function(e,t,n){return H.current.useImperativeHandle(e,t,n)},i.useInsertionEffect=function(e,t){return H.current.useInsertionEffect(e,t)},i.useLayoutEffect=function(e,t){return H.current.useLayoutEffect(e,t)},i.useMemo=function(e,t){return H.current.useMemo(e,t)},i.useReducer=function(e,t,n){return H.current.useReducer(e,t,n)},i.useRef=function(e){return H.current.useRef(e)},i.useState=function(e){return H.current.useState(e)},i.useSyncExternalStore=function(e,t,n){return H.current.useSyncExternalStore(e,t,n)},i.useTransition=function(){return H.current.useTransition()},i.version="18.3.1",s.exports=i;var G=s.exports;const Y=t(G);
/**
     * @license React
     * react-jsx-runtime.production.min.js
     *
     * Copyright (c) Facebook, Inc. and its affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     */var Q=G,X=Symbol.for("react.element"),K=Symbol.for("react.fragment"),J=Object.prototype.hasOwnProperty,Z=Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ee={key:!0,ref:!0,__self:!0,__source:!0};function te(e,t,n){var r,s={},i=null,a=null;for(r in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(a=t.ref),t)J.call(t,r)&&!ee.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:X,type:e,key:i,ref:a,props:s,_owner:Z.current}}r.Fragment=K,r.jsx=te,r.jsxs=te,n.exports=r;var ne=n.exports,re={exports:{}},se={},ie={exports:{}},ae={};
/**
     * @license React
     * scheduler.production.min.js
     *
     * Copyright (c) Facebook, Inc. and its affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,m=!1,g=!1,p=!1,f="function"==typeof setTimeout?setTimeout:null,x="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var s=n(c);null!==s;){if(null===s.callback)r(c);else{if(!(s.startTime<=e))break;r(c),s.sortIndex=s.expirationTime,t(l,s)}s=n(c)}}function v(e){if(p=!1,y(e),!g)if(null!==n(l))g=!0,R(w);else{var t=n(c);null!==t&&A(v,t.startTime-e)}}function w(t,s){g=!1,p&&(p=!1,x(C),C=-1),m=!0;var i=h;try{for(y(s),d=n(l);null!==d&&(!(d.expirationTime>s)||t&&!_());){var a=d.callback;if("function"==typeof a){d.callback=null,h=d.priorityLevel;var o=a(d.expirationTime<=s);s=e.unstable_now(),"function"==typeof o?d.callback=o:d===n(l)&&r(l),y(s)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var f=n(c);null!==f&&A(v,f.startTime-s),u=!1}return u}finally{d=null,h=i,m=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,j=!1,N=null,C=-1,S=5,M=-1;function _(){return!(e.unstable_now()-M<S)}function P(){if(null!==N){var t=e.unstable_now();M=t;var n=!0;try{n=N(!0,t)}finally{n?k():(j=!1,N=null)}}else j=!1}if("function"==typeof b)k=function(){b(P)};else if("undefined"!=typeof MessageChannel){var T=new MessageChannel,E=T.port2;T.port1.onmessage=P,k=function(){E.postMessage(null)}}else k=function(){f(P,0)};function R(e){N=e,j||(j=!0,k())}function A(t,n){C=f(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,R(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,s,i){var a=e.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?a+i:a,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:s,priorityLevel:r,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(r.sortIndex=i,t(c,r),null===n(l)&&r===n(c)&&(p?(x(C),C=-1):p=!0,A(v,i-a))):(r.sortIndex=o,t(l,r),g||m||(g=!0,R(w))),r},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(ae),ie.exports=ae;var oe=ie.exports,le=G,ce=oe;
/**
     * @license React
     * react-dom.production.min.js
     *
     * Copyright (c) Facebook, Inc. and its affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     */function ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var de=new Set,he={};function me(e,t){ge(e,t),ge(e+"Capture",t)}function ge(e,t){for(he[e]=t,e=0;e<t.length;e++)de.add(t[e])}var pe=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),fe=Object.prototype.hasOwnProperty,xe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,be={},ye={};function ve(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var we={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){we[e]=new ve(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];we[t]=new ve(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){we[e]=new ve(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){we[e]=new ve(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){we[e]=new ve(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){we[e]=new ve(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){we[e]=new ve(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){we[e]=new ve(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){we[e]=new ve(e,5,!1,e.toLowerCase(),null,!1,!1)});var ke=/[\-:]([a-z])/g;function je(e){return e[1].toUpperCase()}function Ne(e,t,n,r){var s=we.hasOwnProperty(t)?we[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!fe.call(ye,e)||!fe.call(be,e)&&(xe.test(e)?ye[e]=!0:(be[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ke,je);we[t]=new ve(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ke,je);we[t]=new ve(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ke,je);we[t]=new ve(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){we[e]=new ve(e,1,!1,e.toLowerCase(),null,!1,!1)}),we.xlinkHref=new ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){we[e]=new ve(e,1,!1,e.toLowerCase(),null,!0,!0)});var Ce=le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),Me=Symbol.for("react.portal"),_e=Symbol.for("react.fragment"),Pe=Symbol.for("react.strict_mode"),Te=Symbol.for("react.profiler"),Ee=Symbol.for("react.provider"),Re=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),Le=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),Oe=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),ze=Symbol.iterator;function qe(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=ze&&e[ze]||e["@@iterator"])?e:null}var $e,Be=Object.assign;function He(e){if(void 0===$e)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$e=t&&t[1]||""}return"\n"+$e+e}var We=!1;function Ue(e,t){if(!e||We)return"";We=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{We=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?He(e):""}function Ve(e){switch(e.tag){case 5:return He(e.type);case 16:return He("Lazy");case 13:return He("Suspense");case 19:return He("SuspenseList");case 0:case 2:case 15:return e=Ue(e.type,!1);case 11:return e=Ue(e.type.render,!1);case 1:return e=Ue(e.type,!0);default:return""}}function Ge(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case _e:return"Fragment";case Me:return"Portal";case Te:return"Profiler";case Pe:return"StrictMode";case Le:return"Suspense";case Fe:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Re:return(e.displayName||"Context")+".Consumer";case Ee:return(e._context.displayName||"Context")+".Provider";case Ae:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Oe:return null!==(t=e.displayName||null)?t:Ge(e.type)||"Memo";case Ie:t=e._payload,e=e._init;try{return Ge(e(t))}catch(n){}}return null}function Ye(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ge(t);case 8:return t===Pe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Qe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Xe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ke(e){e._valueTracker||(e._valueTracker=function(e){var t=Xe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Je(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Xe(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ze(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function et(e,t){var n=t.checked;return Be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function tt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Qe(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function nt(e,t){null!=(t=t.checked)&&Ne(e,"checked",t,!1)}function rt(e,t){nt(e,t);var n=Qe(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?it(e,t.type,n):t.hasOwnProperty("defaultValue")&&it(e,t.type,Qe(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function st(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function it(e,t,n){"number"===t&&Ze(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var at=Array.isArray;function ot(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Qe(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function lt(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(ue(91));return Be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ct(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(ue(92));if(at(n)){if(1<n.length)throw Error(ue(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Qe(n)}}function ut(e,t){var n=Qe(t.value),r=Qe(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function dt(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ht(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ht(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var gt,pt,ft=(pt=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((gt=gt||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return pt(e,t)})}:pt);function xt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var bt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yt=["Webkit","ms","Moz","O"];function vt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||bt.hasOwnProperty(e)&&bt[e]?(""+t).trim():t+"px"}function wt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=vt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(bt).forEach(function(e){yt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bt[t]=bt[e]})});var kt=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jt(e,t){if(t){if(kt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(ue(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(ue(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(ue(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(ue(62))}}function Nt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=null;function St(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,_t=null,Pt=null;function Tt(e){if(e=Ni(e)){if("function"!=typeof Mt)throw Error(ue(280));var t=e.stateNode;t&&(t=Si(t),Mt(e.stateNode,e.type,t))}}function Et(e){_t?Pt?Pt.push(e):Pt=[e]:_t=e}function Rt(){if(_t){var e=_t,t=Pt;if(Pt=_t=null,Tt(e),t)for(e=0;e<t.length;e++)Tt(t[e])}}function At(e,t){return e(t)}function Lt(){}var Ft=!1;function Ot(e,t,n){if(Ft)return e(t,n);Ft=!0;try{return At(e,t,n)}finally{Ft=!1,(null!==_t||null!==Pt)&&(Lt(),Rt())}}function It(e,t){var n=e.stateNode;if(null===n)return null;var r=Si(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(ue(231,t,typeof n));return n}var Dt=!1;if(pe)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Dt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(pt){Dt=!1}function qt(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var $t=!1,Bt=null,Ht=!1,Wt=null,Ut={onError:function(e){$t=!0,Bt=e}};function Vt(e,t,n,r,s,i,a,o,l){$t=!1,Bt=null,qt.apply(Ut,arguments)}function Gt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Yt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Qt(e){if(Gt(e)!==e)throw Error(ue(188))}function Xt(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Gt(e)))throw Error(ue(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Qt(s),e;if(i===r)return Qt(s),t;i=i.sibling}throw Error(ue(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(ue(189))}}if(n.alternate!==r)throw Error(ue(190))}if(3!==n.tag)throw Error(ue(188));return n.stateNode.current===n?e:t}(e))?Kt(e):null}function Kt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Kt(e);if(null!==t)return t;e=e.sibling}return null}var Jt=ce.unstable_scheduleCallback,Zt=ce.unstable_cancelCallback,en=ce.unstable_shouldYield,tn=ce.unstable_requestPaint,nn=ce.unstable_now,rn=ce.unstable_getCurrentPriorityLevel,sn=ce.unstable_ImmediatePriority,an=ce.unstable_UserBlockingPriority,on=ce.unstable_NormalPriority,ln=ce.unstable_LowPriority,cn=ce.unstable_IdlePriority,un=null,dn=null,hn=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(mn(e)/gn|0)|0},mn=Math.log,gn=Math.LN2,pn=64,fn=4194304;function xn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bn(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=xn(o):0!==(i&=a)&&(r=xn(i))}else 0!==(a=n&~s)?r=xn(a):0!==i&&(r=xn(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&4194240&i))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-hn(t)),r|=e[n],t&=~s;return r}function yn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vn(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function wn(){var e=pn;return!(4194240&(pn<<=1))&&(pn=64),e}function kn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function jn(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-hn(t)]=n}function Nn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-hn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Cn=0;function Sn(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var Mn,_n,Pn,Tn,En,Rn=!1,An=[],Ln=null,Fn=null,On=null,In=new Map,Dn=new Map,zn=[],qn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $n(e,t){switch(e){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":In.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dn.delete(t.pointerId)}}function Bn(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&null!==(t=Ni(t))&&_n(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Hn(e){var t=ji(e.target);if(null!==t){var n=Gt(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Yt(n)))return e.blockedOn=t,void En(e.priority,function(){Pn(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Wn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=tr(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Ni(n))&&_n(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ct=r,n.target.dispatchEvent(r),Ct=null,t.shift()}return!0}function Un(e,t,n){Wn(e)&&n.delete(t)}function Vn(){Rn=!1,null!==Ln&&Wn(Ln)&&(Ln=null),null!==Fn&&Wn(Fn)&&(Fn=null),null!==On&&Wn(On)&&(On=null),In.forEach(Un),Dn.forEach(Un)}function Gn(e,t){e.blockedOn===t&&(e.blockedOn=null,Rn||(Rn=!0,ce.unstable_scheduleCallback(ce.unstable_NormalPriority,Vn)))}function Yn(e){function t(t){return Gn(t,e)}if(0<An.length){Gn(An[0],e);for(var n=1;n<An.length;n++){var r=An[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ln&&Gn(Ln,e),null!==Fn&&Gn(Fn,e),null!==On&&Gn(On,e),In.forEach(t),Dn.forEach(t),n=0;n<zn.length;n++)(r=zn[n]).blockedOn===e&&(r.blockedOn=null);for(;0<zn.length&&null===(n=zn[0]).blockedOn;)Hn(n),null===n.blockedOn&&zn.shift()}var Qn=Ce.ReactCurrentBatchConfig,Xn=!0;function Kn(e,t,n,r){var s=Cn,i=Qn.transition;Qn.transition=null;try{Cn=1,Zn(e,t,n,r)}finally{Cn=s,Qn.transition=i}}function Jn(e,t,n,r){var s=Cn,i=Qn.transition;Qn.transition=null;try{Cn=4,Zn(e,t,n,r)}finally{Cn=s,Qn.transition=i}}function Zn(e,t,n,r){if(Xn){var s=tr(e,t,n,r);if(null===s)Qs(e,t,r,er,n),$n(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Ln=Bn(Ln,e,t,n,r,s),!0;case"dragenter":return Fn=Bn(Fn,e,t,n,r,s),!0;case"mouseover":return On=Bn(On,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return In.set(i,Bn(In.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Dn.set(i,Bn(Dn.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if($n(e,r),4&t&&-1<qn.indexOf(e)){for(;null!==s;){var i=Ni(s);if(null!==i&&Mn(i),null===(i=tr(e,t,n,r))&&Qs(e,t,r,er,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Qs(e,t,r,null,n)}}var er=null;function tr(e,t,n,r){if(er=null,null!==(e=ji(e=St(r))))if(null===(t=Gt(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Yt(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return er=e,null}function nr(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rn()){case sn:return 1;case an:return 4;case on:case ln:return 16;case cn:return 536870912;default:return 16}default:return 16}}var rr=null,sr=null,ir=null;function ar(){if(ir)return ir;var e,t,n=sr,r=n.length,s="value"in rr?rr.value:rr.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return ir=s.slice(e,1<t?1-t:void 0)}function or(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function lr(){return!0}function cr(){return!1}function ur(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?lr:cr,this.isPropagationStopped=cr,this}return Be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=lr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=lr)},persist:function(){},isPersistent:lr}),t}var dr,hr,mr,gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pr=ur(gr),fr=Be({},gr,{view:0,detail:0}),xr=ur(fr),br=Be({},fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mr&&(mr&&"mousemove"===e.type?(dr=e.screenX-mr.screenX,hr=e.screenY-mr.screenY):hr=dr=0,mr=e),dr)},movementY:function(e){return"movementY"in e?e.movementY:hr}}),yr=ur(br),vr=ur(Be({},br,{dataTransfer:0})),wr=ur(Be({},fr,{relatedTarget:0})),kr=ur(Be({},gr,{animationName:0,elapsedTime:0,pseudoElement:0})),jr=Be({},gr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nr=ur(jr),Cr=ur(Be({},gr,{data:0})),Sr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_r[e])&&!!t[e]}function Tr(){return Pr}var Er=Be({},fr,{key:function(e){if(e.key){var t=Sr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=or(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Mr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tr,charCode:function(e){return"keypress"===e.type?or(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?or(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rr=ur(Er),Ar=ur(Be({},br,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Lr=ur(Be({},fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tr})),Fr=ur(Be({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Or=Be({},br,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ir=ur(Or),Dr=[9,13,27,32],zr=pe&&"CompositionEvent"in window,qr=null;pe&&"documentMode"in document&&(qr=document.documentMode);var $r=pe&&"TextEvent"in window&&!qr,Br=pe&&(!zr||qr&&8<qr&&11>=qr),Hr=String.fromCharCode(32),Wr=!1;function Ur(e,t){switch(e){case"keyup":return-1!==Dr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Gr=!1,Yr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Yr[e.type]:"textarea"===t}function Xr(e,t,n,r){Et(r),0<(t=Ks(t,"onChange")).length&&(n=new pr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kr=null,Jr=null;function Zr(e){Hs(e,0)}function es(e){if(Je(Ci(e)))return e}function ts(e,t){if("change"===e)return t}var ns=!1;if(pe){var rs;if(pe){var ss="oninput"in document;if(!ss){var is=document.createElement("div");is.setAttribute("oninput","return;"),ss="function"==typeof is.oninput}rs=ss}else rs=!1;ns=rs&&(!document.documentMode||9<document.documentMode)}function as(){Kr&&(Kr.detachEvent("onpropertychange",os),Jr=Kr=null)}function os(e){if("value"===e.propertyName&&es(Jr)){var t=[];Xr(t,Jr,e,St(e)),Ot(Zr,t)}}function ls(e,t,n){"focusin"===e?(as(),Jr=n,(Kr=t).attachEvent("onpropertychange",os)):"focusout"===e&&as()}function cs(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return es(Jr)}function us(e,t){if("click"===e)return es(t)}function ds(e,t){if("input"===e||"change"===e)return es(t)}var hs="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ms(e,t){if(hs(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!fe.call(t,s)||!hs(e[s],t[s]))return!1}return!0}function gs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ps(e,t){var n,r=gs(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=gs(r)}}function fs(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fs(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function xs(){for(var e=window,t=Ze();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Ze((e=t.contentWindow).document)}return t}function bs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ys(e){var t=xs(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fs(n.ownerDocument.documentElement,n)){if(null!==r&&bs(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ps(n,i);var a=ps(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vs=pe&&"documentMode"in document&&11>=document.documentMode,ws=null,ks=null,js=null,Ns=!1;function Cs(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Ns||null==ws||ws!==Ze(r)||(r="selectionStart"in(r=ws)&&bs(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},js&&ms(js,r)||(js=r,0<(r=Ks(ks,"onSelect")).length&&(t=new pr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ws)))}function Ss(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ms={animationend:Ss("Animation","AnimationEnd"),animationiteration:Ss("Animation","AnimationIteration"),animationstart:Ss("Animation","AnimationStart"),transitionend:Ss("Transition","TransitionEnd")},_s={},Ps={};function Ts(e){if(_s[e])return _s[e];if(!Ms[e])return e;var t,n=Ms[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ps)return _s[e]=n[t];return e}pe&&(Ps=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);var Es=Ts("animationend"),Rs=Ts("animationiteration"),As=Ts("animationstart"),Ls=Ts("transitionend"),Fs=new Map,Os="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(e,t){Fs.set(e,t),me(t,[e])}for(var Ds=0;Ds<Os.length;Ds++){var zs=Os[Ds];Is(zs.toLowerCase(),"on"+(zs[0].toUpperCase()+zs.slice(1)))}Is(Es,"onAnimationEnd"),Is(Rs,"onAnimationIteration"),Is(As,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(Ls,"onTransitionEnd"),ge("onMouseEnter",["mouseout","mouseover"]),ge("onMouseLeave",["mouseout","mouseover"]),ge("onPointerEnter",["pointerout","pointerover"]),ge("onPointerLeave",["pointerout","pointerover"]),me("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),me("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),me("onBeforeInput",["compositionend","keypress","textInput","paste"]),me("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),me("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),me("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$s=new Set("cancel close invalid load scroll toggle".split(" ").concat(qs));function Bs(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,i,a,o,l){if(Vt.apply(this,arguments),$t){if(!$t)throw Error(ue(198));var c=Bt;$t=!1,Bt=null,Ht||(Ht=!0,Wt=c)}}(r,t,void 0,e),e.currentTarget=null}function Hs(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Bs(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Bs(s,o,c),i=l}}}if(Ht)throw e=Wt,Ht=!1,Wt=null,e}function Ws(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Ys(t,e,2,!1),n.add(r))}function Us(e,t,n){var r=0;t&&(r|=4),Ys(n,e,r,t)}var Vs="_reactListening"+Math.random().toString(36).slice(2);function Gs(e){if(!e[Vs]){e[Vs]=!0,de.forEach(function(t){"selectionchange"!==t&&($s.has(t)||Us(t,!1,e),Us(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vs]||(t[Vs]=!0,Us("selectionchange",!1,t))}}function Ys(e,t,n,r){switch(nr(t)){case 1:var s=Kn;break;case 4:s=Jn;break;default:s=Zn}n=s.bind(null,t,n,e),s=void 0,!Dt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Qs(e,t,n,r,s){var i=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=ji(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Ot(function(){var r=i,s=St(n),a=[];e:{var o=Fs.get(e);if(void 0!==o){var l=pr,c=e;switch(e){case"keypress":if(0===or(n))break e;case"keydown":case"keyup":l=Rr;break;case"focusin":c="focus",l=wr;break;case"focusout":c="blur",l=wr;break;case"beforeblur":case"afterblur":l=wr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=yr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Lr;break;case Es:case Rs:case As:l=kr;break;case Ls:l=Fr;break;case"scroll":l=xr;break;case"wheel":l=Ir;break;case"copy":case"cut":case"paste":l=Nr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ar}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var m,g=r;null!==g;){var p=(m=g).stateNode;if(5===m.tag&&null!==p&&(m=p,null!==h&&null!=(p=It(g,h))&&u.push(Xs(g,p,m))),d)break;g=g.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Ct||!(c=n.relatedTarget||n.fromElement)||!ji(c)&&!c[yi])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ji(c):null)&&(c!==(d=Gt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=yr,p="onMouseLeave",h="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(u=Ar,p="onPointerLeave",h="onPointerEnter",g="pointer"),d=null==l?o:Ci(l),m=null==c?o:Ci(c),(o=new u(p,g+"leave",l,n,s)).target=d,o.relatedTarget=m,p=null,ji(s)===r&&((u=new u(h,g+"enter",c,n,s)).target=m,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,g=0,m=u=l;m;m=Js(m))g++;for(m=0,p=h;p;p=Js(p))m++;for(;0<g-m;)u=Js(u),g--;for(;0<m-g;)h=Js(h),m--;for(;g--;){if(u===h||null!==h&&u===h.alternate)break e;u=Js(u),h=Js(h)}u=null}else u=null;null!==l&&Zs(a,o,l,u,!1),null!==c&&null!==d&&Zs(a,d,c,u,!0)}if("select"===(l=(o=r?Ci(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var f=ts;else if(Qr(o))if(ns)f=ds;else{f=cs;var x=ls}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(f=us);switch(f&&(f=f(e,r))?Xr(a,f,n,s):(x&&x(e,o,r),"focusout"===e&&(x=o._wrapperState)&&x.controlled&&"number"===o.type&&it(o,"number",o.value)),x=r?Ci(r):window,e){case"focusin":(Qr(x)||"true"===x.contentEditable)&&(ws=x,ks=r,js=null);break;case"focusout":js=ks=ws=null;break;case"mousedown":Ns=!0;break;case"contextmenu":case"mouseup":case"dragend":Ns=!1,Cs(a,n,s);break;case"selectionchange":if(vs)break;case"keydown":case"keyup":Cs(a,n,s)}var b;if(zr)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Gr?Ur(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Br&&"ko"!==n.locale&&(Gr||"onCompositionStart"!==y?"onCompositionEnd"===y&&Gr&&(b=ar()):(sr="value"in(rr=s)?rr.value:rr.textContent,Gr=!0)),0<(x=Ks(r,y)).length&&(y=new Cr(y,e,null,n,s),a.push({event:y,listeners:x}),(b||null!==(b=Vr(n)))&&(y.data=b))),(b=$r?function(e,t){switch(e){case"compositionend":return Vr(t);case"keypress":return 32!==t.which?null:(Wr=!0,Hr);case"textInput":return(e=t.data)===Hr&&Wr?null:e;default:return null}}(e,n):function(e,t){if(Gr)return"compositionend"===e||!zr&&Ur(e,t)?(e=ar(),ir=sr=rr=null,Gr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Br&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Ks(r,"onBeforeInput")).length&&(s=new Cr("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=b)}Hs(a,t)})}function Xs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ks(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=It(e,n))&&r.unshift(Xs(e,i,s)),null!=(i=It(e,t))&&r.push(Xs(e,i,s))),e=e.return}return r}function Js(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zs(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=It(n,i))&&a.unshift(Xs(n,l,o)):s||null!=(l=It(n,i))&&a.push(Xs(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ei=/\r\n?/g,ti=/\u0000|\uFFFD/g;function ni(e){return("string"==typeof e?e:""+e).replace(ei,"\n").replace(ti,"")}function ri(e,t,n){if(t=ni(t),ni(e)!==t&&n)throw Error(ue(425))}function si(){}var ii=null,ai=null;function oi(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var li="function"==typeof setTimeout?setTimeout:void 0,ci="function"==typeof clearTimeout?clearTimeout:void 0,ui="function"==typeof Promise?Promise:void 0,di="function"==typeof queueMicrotask?queueMicrotask:void 0!==ui?function(e){return ui.resolve(null).then(e).catch(hi)}:li;function hi(e){setTimeout(function(){throw e})}function mi(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Yn(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Yn(t)}function gi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function pi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),xi="__reactFiber$"+fi,bi="__reactProps$"+fi,yi="__reactContainer$"+fi,vi="__reactEvents$"+fi,wi="__reactListeners$"+fi,ki="__reactHandles$"+fi;function ji(e){var t=e[xi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yi]||n[xi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=pi(e);null!==e;){if(n=e[xi])return n;e=pi(e)}return t}n=(e=n).parentNode}return null}function Ni(e){return!(e=e[xi]||e[yi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ci(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(ue(33))}function Si(e){return e[bi]||null}var Mi=[],_i=-1;function Pi(e){return{current:e}}function Ti(e){0>_i||(e.current=Mi[_i],Mi[_i]=null,_i--)}function Ei(e,t){_i++,Mi[_i]=e.current,e.current=t}var Ri={},Ai=Pi(Ri),Li=Pi(!1),Fi=Ri;function Oi(e,t){var n=e.type.contextTypes;if(!n)return Ri;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ii(e){return null!=(e=e.childContextTypes)}function Di(){Ti(Li),Ti(Ai)}function zi(e,t,n){if(Ai.current!==Ri)throw Error(ue(168));Ei(Ai,t),Ei(Li,n)}function qi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(ue(108,Ye(e)||"Unknown",s));return Be({},n,r)}function $i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ri,Fi=Ai.current,Ei(Ai,e),Ei(Li,Li.current),!0}function Bi(e,t,n){var r=e.stateNode;if(!r)throw Error(ue(169));n?(e=qi(e,t,Fi),r.__reactInternalMemoizedMergedChildContext=e,Ti(Li),Ti(Ai),Ei(Ai,e)):Ti(Li),Ei(Li,n)}var Hi=null,Wi=!1,Ui=!1;function Vi(e){null===Hi?Hi=[e]:Hi.push(e)}function Gi(){if(!Ui&&null!==Hi){Ui=!0;var e=0,t=Cn;try{var n=Hi;for(Cn=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Hi=null,Wi=!1}catch(s){throw null!==Hi&&(Hi=Hi.slice(e+1)),Jt(sn,Gi),s}finally{Cn=t,Ui=!1}}return null}var Yi=[],Qi=0,Xi=null,Ki=0,Ji=[],Zi=0,ea=null,ta=1,na="";function ra(e,t){Yi[Qi++]=Ki,Yi[Qi++]=Xi,Xi=e,Ki=t}function sa(e,t,n){Ji[Zi++]=ta,Ji[Zi++]=na,Ji[Zi++]=ea,ea=e;var r=ta;e=na;var s=32-hn(r)-1;r&=~(1<<s),n+=1;var i=32-hn(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ta=1<<32-hn(t)+s|n<<s|r,na=i+e}else ta=1<<i|n<<s|r,na=e}function ia(e){null!==e.return&&(ra(e,1),sa(e,1,0))}function aa(e){for(;e===Xi;)Xi=Yi[--Qi],Yi[Qi]=null,Ki=Yi[--Qi],Yi[Qi]=null;for(;e===ea;)ea=Ji[--Zi],Ji[Zi]=null,na=Ji[--Zi],Ji[Zi]=null,ta=Ji[--Zi],Ji[Zi]=null}var oa=null,la=null,ca=!1,ua=null;function da(e,t){var n=Fu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ha(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,oa=e,la=gi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,oa=e,la=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==ea?{id:ta,overflow:na}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Fu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,oa=e,la=null,!0);default:return!1}}function ma(e){return!(!(1&e.mode)||128&e.flags)}function ga(e){if(ca){var t=la;if(t){var n=t;if(!ha(e,t)){if(ma(e))throw Error(ue(418));t=gi(n.nextSibling);var r=oa;t&&ha(e,t)?da(r,n):(e.flags=-4097&e.flags|2,ca=!1,oa=e)}}else{if(ma(e))throw Error(ue(418));e.flags=-4097&e.flags|2,ca=!1,oa=e}}}function pa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;oa=e}function fa(e){if(e!==oa)return!1;if(!ca)return pa(e),ca=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!oi(e.type,e.memoizedProps)),t&&(t=la)){if(ma(e))throw xa(),Error(ue(418));for(;t;)da(e,t),t=gi(t.nextSibling)}if(pa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(ue(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){la=gi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}la=null}}else la=oa?gi(e.stateNode.nextSibling):null;return!0}function xa(){for(var e=la;e;)e=gi(e.nextSibling)}function ba(){la=oa=null,ca=!1}function ya(e){null===ua?ua=[e]:ua.push(e)}var va=Ce.ReactCurrentBatchConfig;function wa(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(ue(309));var r=n.stateNode}if(!r)throw Error(ue(147,e));var s=r,i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=s.refs;null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(ue(284));if(!n._owner)throw Error(ue(290,e))}return e}function ka(e,t){throw e=Object.prototype.toString.call(t),Error(ue(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ja(e){return(0,e._init)(e._payload)}function Na(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Iu(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=$u(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===_e?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===Ie&&ja(i)===t.type)?((r=s(t,n.props)).ref=wa(e,t,n),r.return=e,r):((r=Du(n.type,n.key,n.props,null,e.mode,r)).ref=wa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bu(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,r,i){return null===t||7!==t.tag?((t=zu(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=$u(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Se:return(n=Du(t.type,t.key,t.props,null,e.mode,n)).ref=wa(e,null,t),n.return=e,n;case Me:return(t=Bu(t,e.mode,n)).return=e,t;case Ie:return d(e,(0,t._init)(t._payload),n)}if(at(t)||qe(t))return(t=zu(t,e.mode,n,null)).return=e,t;ka(e,t)}return null}function h(e,t,n,r){var s=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==s?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Se:return n.key===s?l(e,t,n,r):null;case Me:return n.key===s?c(e,t,n,r):null;case Ie:return h(e,t,(s=n._init)(n._payload),r)}if(at(n)||qe(n))return null!==s?null:u(e,t,n,r,null);ka(e,n)}return null}function m(e,t,n,r,s){if("string"==typeof r&&""!==r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,s);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Se:return l(t,e=e.get(null===r.key?n:r.key)||null,r,s);case Me:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case Ie:return m(e,t,n,(0,r._init)(r._payload),s)}if(at(r)||qe(r))return u(t,e=e.get(n)||null,r,s,null);ka(t,r)}return null}return function o(l,c,u,g){if("object"==typeof u&&null!==u&&u.type===_e&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case Se:e:{for(var p=u.key,f=c;null!==f;){if(f.key===p){if((p=u.type)===_e){if(7===f.tag){n(l,f.sibling),(c=s(f,u.props.children)).return=l,l=c;break e}}else if(f.elementType===p||"object"==typeof p&&null!==p&&p.$$typeof===Ie&&ja(p)===f.type){n(l,f.sibling),(c=s(f,u.props)).ref=wa(l,f,u),c.return=l,l=c;break e}n(l,f);break}t(l,f),f=f.sibling}u.type===_e?((c=zu(u.props.children,l.mode,g,u.key)).return=l,l=c):((g=Du(u.type,u.key,u.props,null,l.mode,g)).ref=wa(l,c,u),g.return=l,l=g)}return a(l);case Me:e:{for(f=u.key;null!==c;){if(c.key===f){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(c=s(c,u.children||[])).return=l,l=c;break e}n(l,c);break}t(l,c),c=c.sibling}(c=Bu(u,l.mode,g)).return=l,l=c}return a(l);case Ie:return o(l,c,(f=u._init)(u._payload),g)}if(at(u))return function(s,a,o,l){for(var c=null,u=null,g=a,p=a=0,f=null;null!==g&&p<o.length;p++){g.index>p?(f=g,g=null):f=g.sibling;var x=h(s,g,o[p],l);if(null===x){null===g&&(g=f);break}e&&g&&null===x.alternate&&t(s,g),a=i(x,a,p),null===u?c=x:u.sibling=x,u=x,g=f}if(p===o.length)return n(s,g),ca&&ra(s,p),c;if(null===g){for(;p<o.length;p++)null!==(g=d(s,o[p],l))&&(a=i(g,a,p),null===u?c=g:u.sibling=g,u=g);return ca&&ra(s,p),c}for(g=r(s,g);p<o.length;p++)null!==(f=m(g,s,p,o[p],l))&&(e&&null!==f.alternate&&g.delete(null===f.key?p:f.key),a=i(f,a,p),null===u?c=f:u.sibling=f,u=f);return e&&g.forEach(function(e){return t(s,e)}),ca&&ra(s,p),c}(l,c,u,g);if(qe(u))return function(s,a,o,l){var c=qe(o);if("function"!=typeof c)throw Error(ue(150));if(null==(o=c.call(o)))throw Error(ue(151));for(var u=c=null,g=a,p=a=0,f=null,x=o.next();null!==g&&!x.done;p++,x=o.next()){g.index>p?(f=g,g=null):f=g.sibling;var b=h(s,g,x.value,l);if(null===b){null===g&&(g=f);break}e&&g&&null===b.alternate&&t(s,g),a=i(b,a,p),null===u?c=b:u.sibling=b,u=b,g=f}if(x.done)return n(s,g),ca&&ra(s,p),c;if(null===g){for(;!x.done;p++,x=o.next())null!==(x=d(s,x.value,l))&&(a=i(x,a,p),null===u?c=x:u.sibling=x,u=x);return ca&&ra(s,p),c}for(g=r(s,g);!x.done;p++,x=o.next())null!==(x=m(g,s,p,x.value,l))&&(e&&null!==x.alternate&&g.delete(null===x.key?p:x.key),a=i(x,a,p),null===u?c=x:u.sibling=x,u=x);return e&&g.forEach(function(e){return t(s,e)}),ca&&ra(s,p),c}(l,c,u,g);ka(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(c=s(c,u)).return=l,l=c):(n(l,c),(c=$u(u,l.mode,g)).return=l,l=c),a(l)):n(l,c)}}var Ca=Na(!0),Sa=Na(!1),Ma=Pi(null),_a=null,Pa=null,Ta=null;function Ea(){Ta=Pa=_a=null}function Ra(e){var t=Ma.current;Ti(Ma),e._currentValue=t}function Aa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function La(e,t){_a=e,Ta=Pa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Nl=!0),e.firstContext=null)}function Fa(e){var t=e._currentValue;if(Ta!==e)if(e={context:e,memoizedValue:t,next:null},null===Pa){if(null===_a)throw Error(ue(308));Pa=e,_a.dependencies={lanes:0,firstContext:e}}else Pa=Pa.next=e;return t}var Oa=null;function Ia(e){null===Oa?Oa=[e]:Oa.push(e)}function Da(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Ia(t)):(n.next=s.next,s.next=n),t.interleaved=n,za(e,r)}function za(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var qa=!1;function $a(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ba(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ha(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Rc){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,za(e,n)}return null===(s=r.interleaved)?(t.next=t,Ia(r)):(t.next=s.next,s.next=t),r.interleaved=t,za(e,n)}function Ua(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Nn(e,n)}}function Va(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ga(e,t,n,r){var s=e.updateQueue;qa=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&(o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l)}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,m=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,p=o;switch(h=t,m=n,p.tag){case 1:if("function"==typeof(g=p.payload)){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(h="function"==typeof(g=p.payload)?g.call(m,d,h):g))break e;d=Be({},d,h);break e;case 2:qa=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);qc|=a,e.lanes=a,e.memoizedState=d}}function Ya(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!=typeof s)throw Error(ue(191,s));s.call(r)}}}var Qa={},Xa=Pi(Qa),Ka=Pi(Qa),Ja=Pi(Qa);function Za(e){if(e===Qa)throw Error(ue(174));return e}function eo(e,t){switch(Ei(Ja,t),Ei(Ka,e),Ei(Xa,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mt(null,"");break;default:t=mt(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Xa),Ei(Xa,t)}function to(){Ti(Xa),Ti(Ka),Ti(Ja)}function no(e){Za(Ja.current);var t=Za(Xa.current),n=mt(t,e.type);t!==n&&(Ei(Ka,e),Ei(Xa,n))}function ro(e){Ka.current===e&&(Ti(Xa),Ti(Ka))}var so=Pi(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var lo=Ce.ReactCurrentDispatcher,co=Ce.ReactCurrentBatchConfig,uo=0,ho=null,mo=null,go=null,po=!1,fo=!1,xo=0,bo=0;function yo(){throw Error(ue(321))}function vo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!hs(e[n],t[n]))return!1;return!0}function wo(e,t,n,r,s,i){if(uo=i,ho=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lo.current=null===e||null===e.memoizedState?sl:il,e=n(r,s),fo){i=0;do{if(fo=!1,xo=0,25<=i)throw Error(ue(301));i+=1,go=mo=null,t.updateQueue=null,lo.current=al,e=n(r,s)}while(fo)}if(lo.current=rl,t=null!==mo&&null!==mo.next,uo=0,go=mo=ho=null,po=!1,t)throw Error(ue(300));return e}function ko(){var e=0!==xo;return xo=0,e}function jo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?ho.memoizedState=go=e:go=go.next=e,go}function No(){if(null===mo){var e=ho.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?ho.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(ue(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?ho.memoizedState=go=e:go=go.next=e}return go}function Co(e,t){return"function"==typeof t?t(e):t}function So(e){var t=No(),n=t.queue;if(null===n)throw Error(ue(311));n.lastRenderedReducer=e;var r=mo,s=r.baseQueue,i=n.pending;if(null!==i){if(null!==s){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(null!==s){i=s.next,r=r.baseState;var o=a=null,l=null,c=i;do{var u=c.lane;if((uo&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=d,a=r):l=l.next=d,ho.lanes|=u,qc|=u}c=c.next}while(null!==c&&c!==i);null===l?a=r:l.next=o,hs(r,t.memoizedState)||(Nl=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{i=s.lane,ho.lanes|=i,qc|=i,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Mo(e){var t=No(),n=t.queue;if(null===n)throw Error(ue(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var a=s=s.next;do{i=e(i,a.action),a=a.next}while(a!==s);hs(i,t.memoizedState)||(Nl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function _o(){}function Po(e,t){var n=ho,r=No(),s=t(),i=!hs(r.memoizedState,s);if(i&&(r.memoizedState=s,Nl=!0),r=r.queue,$o(Ro.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Oo(9,Eo.bind(null,n,r,s,t),void 0,null),null===Ac)throw Error(ue(349));30&uo||To(n,t,s)}return s}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ho.updateQueue)?(t={lastEffect:null,stores:null},ho.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Eo(e,t,n,r){t.value=n,t.getSnapshot=r,Ao(t)&&Lo(e)}function Ro(e,t,n){return n(function(){Ao(t)&&Lo(e)})}function Ao(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!hs(e,n)}catch(r){return!0}}function Lo(e){var t=za(e,1);null!==t&&au(t,e,1,-1)}function Fo(e){var t=jo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=Zo.bind(null,ho,e),[t.memoizedState,e]}function Oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ho.updateQueue)?(t={lastEffect:null,stores:null},ho.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Io(){return No().memoizedState}function Do(e,t,n,r){var s=jo();ho.flags|=e,s.memoizedState=Oo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var s=No();r=void 0===r?null:r;var i=void 0;if(null!==mo){var a=mo.memoizedState;if(i=a.destroy,null!==r&&vo(r,a.deps))return void(s.memoizedState=Oo(t,n,i,r))}ho.flags|=e,s.memoizedState=Oo(1|t,n,i,r)}function qo(e,t){return Do(8390656,8,e,t)}function $o(e,t){return zo(2048,8,e,t)}function Bo(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Wo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,n){return n=null!=n?n.concat([e]):null,zo(4,4,Wo.bind(null,t,e),n)}function Vo(){}function Go(e,t){var n=No();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&vo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=No();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&vo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qo(e,t,n){return 21&uo?(hs(n,t)||(n=wn(),ho.lanes|=n,qc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nl=!0),e.memoizedState=n)}function Xo(e,t){var n=Cn;Cn=0!==n&&4>n?n:4,e(!0);var r=co.transition;co.transition={};try{e(!1),t()}finally{Cn=n,co.transition=r}}function Ko(){return No().memoizedState}function Jo(e,t,n){var r=iu(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},el(e)?tl(t,n):null!==(n=Da(e,t,n,r))&&(au(n,e,r,su()),nl(n,t,r))}function Zo(e,t,n){var r=iu(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(el(e))tl(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,hs(o,a)){var l=t.interleaved;return null===l?(s.next=s,Ia(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Da(e,t,s,r))&&(au(n,e,r,s=su()),nl(n,t,r))}}function el(e){var t=e.alternate;return e===ho||null!==t&&t===ho}function tl(e,t){fo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function nl(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Nn(e,n)}}var rl={readContext:Fa,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},sl={readContext:Fa,useCallback:function(e,t){return jo().memoizedState=[e,void 0===t?null:t],e},useContext:Fa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Do(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=jo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=jo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Jo.bind(null,ho,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},jo().memoizedState=e},useState:Fo,useDebugValue:Vo,useDeferredValue:function(e){return jo().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Xo.bind(null,e[1]),jo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ho,s=jo();if(ca){if(void 0===n)throw Error(ue(407));n=n()}else{if(n=t(),null===Ac)throw Error(ue(349));30&uo||To(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,qo(Ro.bind(null,r,i,e),[e]),r.flags|=2048,Oo(9,Eo.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=jo(),t=Ac.identifierPrefix;if(ca){var n=na;t=":"+t+"R"+(n=(ta&~(1<<32-hn(ta)-1)).toString(32)+n),0<(n=xo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},il={readContext:Fa,useCallback:Go,useContext:Fa,useEffect:$o,useImperativeHandle:Uo,useInsertionEffect:Bo,useLayoutEffect:Ho,useMemo:Yo,useReducer:So,useRef:Io,useState:function(){return So(Co)},useDebugValue:Vo,useDeferredValue:function(e){return Qo(No(),mo.memoizedState,e)},useTransition:function(){return[So(Co)[0],No().memoizedState]},useMutableSource:_o,useSyncExternalStore:Po,useId:Ko,unstable_isNewReconciler:!1},al={readContext:Fa,useCallback:Go,useContext:Fa,useEffect:$o,useImperativeHandle:Uo,useInsertionEffect:Bo,useLayoutEffect:Ho,useMemo:Yo,useReducer:Mo,useRef:Io,useState:function(){return Mo(Co)},useDebugValue:Vo,useDeferredValue:function(e){var t=No();return null===mo?t.memoizedState=e:Qo(t,mo.memoizedState,e)},useTransition:function(){return[Mo(Co)[0],No().memoizedState]},useMutableSource:_o,useSyncExternalStore:Po,useId:Ko,unstable_isNewReconciler:!1};function ol(e,t){if(e&&e.defaultProps){for(var n in t=Be({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ll(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Be({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var cl={isMounted:function(e){return!!(e=e._reactInternals)&&Gt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=su(),s=iu(e),i=Ha(r,s);i.payload=t,null!=n&&(i.callback=n),null!==(t=Wa(e,i,s))&&(au(t,e,s,r),Ua(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=su(),s=iu(e),i=Ha(r,s);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=Wa(e,i,s))&&(au(t,e,s,r),Ua(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=su(),r=iu(e),s=Ha(n,r);s.tag=2,null!=t&&(s.callback=t),null!==(t=Wa(e,s,r))&&(au(t,e,r,n),Ua(t,e,r))}};function ul(e,t,n,r,s,i,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!(t.prototype&&t.prototype.isPureReactComponent&&ms(n,r)&&ms(s,i))}function dl(e,t,n){var r=!1,s=Ri,i=t.contextType;return"object"==typeof i&&null!==i?i=Fa(i):(s=Ii(t)?Fi:Ai.current,i=(r=null!=(r=t.contextTypes))?Oi(e,s):Ri),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=cl,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function hl(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&cl.enqueueReplaceState(t,t.state,null)}function ml(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},$a(e);var i=t.contextType;"object"==typeof i&&null!==i?s.context=Fa(i):(i=Ii(t)?Fi:Ai.current,s.context=Oi(e,i)),s.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(ll(e,t,i,n),s.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(t=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&cl.enqueueReplaceState(s,s.state,null),Ga(e,n,s,r),s.state=e.memoizedState),"function"==typeof s.componentDidMount&&(e.flags|=4194308)}function gl(e,t){try{var n="",r=t;do{n+=Ve(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function pl(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var xl="function"==typeof WeakMap?WeakMap:Map;function bl(e,t,n){(n=Ha(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yc||(Yc=!0,Qc=r),fl(0,t)},n}function yl(e,t,n){(n=Ha(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){fl(0,t)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){fl(0,t),"function"!=typeof r&&(null===Xc?Xc=new Set([this]):Xc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new xl;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Pu.bind(null,e,t,n),t.then(e,e))}function wl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function kl(e,t,n,r,s){return 1&e.mode?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ha(-1,1)).tag=2,Wa(n,t,1))),n.lanes|=1),e)}var jl=Ce.ReactCurrentOwner,Nl=!1;function Cl(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ca(t,e.child,n,r)}function Sl(e,t,n,r,s){n=n.render;var i=t.ref;return La(t,s),r=wo(e,t,n,r,i,s),n=ko(),null===e||Nl?(ca&&n&&ia(t),t.flags|=1,Cl(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Yl(e,t,s))}function Ml(e,t,n,r,s){if(null===e){var i=n.type;return"function"!=typeof i||Ou(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Du(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,_l(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:ms)(a,r)&&e.ref===t.ref)return Yl(e,t,s)}return t.flags|=1,(e=Iu(i,r)).ref=t.ref,e.return=t,t.child=e}function _l(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(ms(i,r)&&e.ref===t.ref){if(Nl=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Yl(e,t,s);131072&e.flags&&(Nl=!0)}}return El(e,t,n,r,s)}function Pl(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ic,Oc),Oc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ei(Ic,Oc),Oc|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ic,Oc),Oc|=n;else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ei(Ic,Oc),Oc|=r;return Cl(e,t,s,n),t.child}function Tl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function El(e,t,n,r,s){var i=Ii(n)?Fi:Ai.current;return i=Oi(t,i),La(t,s),n=wo(e,t,n,r,i,s),r=ko(),null===e||Nl?(ca&&r&&ia(t),t.flags|=1,Cl(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Yl(e,t,s))}function Rl(e,t,n,r,s){if(Ii(n)){var i=!0;$i(t)}else i=!1;if(La(t,s),null===t.stateNode)Gl(e,t),dl(t,n,r),ml(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;c="object"==typeof c&&null!==c?Fa(c):Oi(t,c=Ii(n)?Fi:Ai.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==r||l!==c)&&hl(t,a,r,c),qa=!1;var h=t.memoizedState;a.state=h,Ga(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Li.current||qa?("function"==typeof u&&(ll(t,n,u,r),l=t.memoizedState),(o=qa||ul(t,n,o,r,h,l,c))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ba(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:ol(t.type,o),a.props=c,d=t.pendingProps,h=a.context,l="object"==typeof(l=n.contextType)&&null!==l?Fa(l):Oi(t,l=Ii(n)?Fi:Ai.current);var m=n.getDerivedStateFromProps;(u="function"==typeof m||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==d||h!==l)&&hl(t,a,r,l),qa=!1,h=t.memoizedState,a.state=h,Ga(t,r,a,s);var g=t.memoizedState;o!==d||h!==g||Li.current||qa?("function"==typeof m&&(ll(t,n,m,r),g=t.memoizedState),(c=qa||ul(t,n,c,r,h,g,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,g,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,g,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Al(e,t,n,r,i,s)}function Al(e,t,n,r,s,i){Tl(e,t);var a=!!(128&t.flags);if(!r&&!a)return s&&Bi(t,n,!1),Yl(e,t,i);r=t.stateNode,jl.current=t;var o=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ca(t,e.child,null,i),t.child=Ca(t,null,o,i)):Cl(e,t,o,i),t.memoizedState=r.state,s&&Bi(t,n,!0),t.child}function Ll(e){var t=e.stateNode;t.pendingContext?zi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&zi(0,t.context,!1),eo(e,t.containerInfo)}function Fl(e,t,n,r,s){return ba(),ya(s),t.flags|=256,Cl(e,t,n,r),t.child}var Ol,Il,Dl,zl={dehydrated:null,treeContext:null,retryLane:0};function ql(e){return{baseLanes:e,cachePool:null,transitions:null}}function $l(e,t,n){var r,s=t.pendingProps,i=so.current,a=!1,o=!!(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&!!(2&i)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ei(so,1&i),null===e)return ga(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,a?(s=t.mode,a=t.child,o={mode:"hidden",children:o},1&s||null===a?a=qu(o,s,0,null):(a.childLanes=0,a.pendingProps=o),e=zu(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ql(n),t.memoizedState=zl,e):Bl(t,o));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,s,i,a){if(n)return 256&t.flags?(t.flags&=-257,Hl(e,t,a,r=pl(Error(ue(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=qu({mode:"visible",children:r.children},s,0,null),(i=zu(i,s,a,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,1&t.mode&&Ca(t,e.child,null,a),t.child.memoizedState=ql(a),t.memoizedState=zl,i);if(!(1&t.mode))return Hl(e,t,a,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var o=r.dgst;return r=o,Hl(e,t,a,r=pl(i=Error(ue(419)),r,void 0))}if(o=0!==(a&e.childLanes),Nl||o){if(null!==(r=Ac)){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|a))?0:s)&&s!==i.retryLane&&(i.retryLane=s,za(e,s),au(r,e,s,-1))}return yu(),Hl(e,t,a,r=pl(Error(ue(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Eu.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,la=gi(s.nextSibling),oa=t,ca=!0,ua=null,null!==e&&(Ji[Zi++]=ta,Ji[Zi++]=na,Ji[Zi++]=ea,ta=e.id,na=e.overflow,ea=t),(t=Bl(t,r.children)).flags|=4096,t)}(e,t,o,s,r,i,n);if(a){a=s.fallback,o=t.mode,r=(i=e.child).sibling;var l={mode:"hidden",children:s.children};return 1&o||t.child===i?(s=Iu(i,l)).subtreeFlags=14680064&i.subtreeFlags:((s=t.child).childLanes=0,s.pendingProps=l,t.deletions=null),null!==r?a=Iu(r,a):(a=zu(a,o,n,null)).flags|=2,a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,o=null===(o=e.child.memoizedState)?ql(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=zl,s}return e=(a=e.child).sibling,s=Iu(a,{mode:"visible",children:s.children}),!(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Bl(e,t){return(t=qu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Hl(e,t,n,r){return null!==r&&ya(r),Ca(t,e.child,null,n),(e=Bl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Aa(e.return,t,n)}function Ul(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Vl(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Cl(e,t,r.children,n),2&(r=so.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wl(e,n,t);else if(19===e.tag)Wl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(so,r),1&t.mode)switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ul(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===io(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ul(t,!0,n,null,i);break;case"together":Ul(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Gl(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(ue(153));if(null!==t.child){for(n=Iu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Iu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ql(e,t){if(!ca)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Kl(e,t,n){var r=t.pendingProps;switch(aa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xl(t),null;case 1:case 17:return Ii(t.type)&&Di(),Xl(t),null;case 3:return r=t.stateNode,to(),Ti(Li),Ti(Ai),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ua&&(uu(ua),ua=null))),Xl(t),null;case 5:ro(t);var s=Za(Ja.current);if(n=t.type,null!==e&&null!=t.stateNode)Il(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(ue(166));return Xl(t),null}if(e=Za(Xa.current),fa(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[xi]=t,r[bi]=i,e=!!(1&t.mode),n){case"dialog":Ws("cancel",r),Ws("close",r);break;case"iframe":case"object":case"embed":Ws("load",r);break;case"video":case"audio":for(s=0;s<qs.length;s++)Ws(qs[s],r);break;case"source":Ws("error",r);break;case"img":case"image":case"link":Ws("error",r),Ws("load",r);break;case"details":Ws("toggle",r);break;case"input":tt(r,i),Ws("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ws("invalid",r);break;case"textarea":ct(r,i),Ws("invalid",r)}for(var a in jt(n,i),s=null,i)if(i.hasOwnProperty(a)){var o=i[a];"children"===a?"string"==typeof o?r.textContent!==o&&(!0!==i.suppressHydrationWarning&&ri(r.textContent,o,e),s=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(!0!==i.suppressHydrationWarning&&ri(r.textContent,o,e),s=["children",""+o]):he.hasOwnProperty(a)&&null!=o&&"onScroll"===a&&Ws("scroll",r)}switch(n){case"input":Ke(r),st(r,i,!0);break;case"textarea":Ke(r),dt(r);break;case"select":case"option":break;default:"function"==typeof i.onClick&&(r.onclick=si)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{a=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ht(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[xi]=t,e[bi]=r,Ol(e,t),t.stateNode=e;e:{switch(a=Nt(n,r),n){case"dialog":Ws("cancel",e),Ws("close",e),s=r;break;case"iframe":case"object":case"embed":Ws("load",e),s=r;break;case"video":case"audio":for(s=0;s<qs.length;s++)Ws(qs[s],e);s=r;break;case"source":Ws("error",e),s=r;break;case"img":case"image":case"link":Ws("error",e),Ws("load",e),s=r;break;case"details":Ws("toggle",e),s=r;break;case"input":tt(e,r),s=et(e,r),Ws("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),Ws("invalid",e);break;case"textarea":ct(e,r),s=lt(e,r),Ws("invalid",e)}for(i in jt(n,s),o=s)if(o.hasOwnProperty(i)){var l=o[i];"style"===i?wt(e,l):"dangerouslySetInnerHTML"===i?null!=(l=l?l.__html:void 0)&&ft(e,l):"children"===i?"string"==typeof l?("textarea"!==n||""!==l)&&xt(e,l):"number"==typeof l&&xt(e,""+l):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(he.hasOwnProperty(i)?null!=l&&"onScroll"===i&&Ws("scroll",e):null!=l&&Ne(e,i,l,a))}switch(n){case"input":Ke(e),st(e,r,!1);break;case"textarea":Ke(e),dt(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Qe(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ot(e,!!r.multiple,i,!1):null!=r.defaultValue&&ot(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=si)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xl(t),null;case 6:if(e&&null!=t.stateNode)Dl(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(ue(166));if(n=Za(Ja.current),Za(Xa.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[xi]=t,(i=r.nodeValue!==n)&&null!==(e=oa))switch(e.tag){case 3:ri(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ri(r.nodeValue,n,!!(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[xi]=t,t.stateNode=r}return Xl(t),null;case 13:if(Ti(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ca&&null!==la&&1&t.mode&&!(128&t.flags))xa(),ba(),t.flags|=98560,i=!1;else if(i=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(ue(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(ue(317));i[xi]=t}else ba(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xl(t),i=!1}else null!==ua&&(uu(ua),ua=null),i=!0;if(!i)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&so.current?0===Dc&&(Dc=3):yu())),null!==t.updateQueue&&(t.flags|=4),Xl(t),null);case 4:return to(),null===e&&Gs(t.stateNode.containerInfo),Xl(t),null;case 10:return Ra(t.type._context),Xl(t),null;case 19:if(Ti(so),null===(i=t.memoizedState))return Xl(t),null;if(r=!!(128&t.flags),null===(a=i.rendering))if(r)Ql(i,!1);else{if(0!==Dc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=io(e))){for(t.flags|=128,Ql(i,!1),null!==(r=a.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(a=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(so,1&so.current|2),t.child}e=e.sibling}null!==i.tail&&nn()>Vc&&(t.flags|=128,r=!0,Ql(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(a))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ql(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!ca)return Xl(t),null}else 2*nn()-i.renderingStartTime>Vc&&1073741824!==n&&(t.flags|=128,r=!0,Ql(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=i.last)?n.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=nn(),t.sibling=null,n=so.current,Ei(so,r?1&n|2:1&n),t):(Xl(t),null);case 22:case 23:return pu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Oc)&&(Xl(t),6&t.subtreeFlags&&(t.flags|=8192)):Xl(t),null;case 24:case 25:return null}throw Error(ue(156,t.tag))}function Jl(e,t){switch(aa(t),t.tag){case 1:return Ii(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return to(),Ti(Li),Ti(Ai),oo(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ro(t),null;case 13:if(Ti(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(ue(340));ba()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(so),null;case 4:return to(),null;case 10:return Ra(t.type._context),null;case 22:case 23:return pu(),null;default:return null}}Ol=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Il=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Za(Xa.current);var i,a=null;switch(n){case"input":s=et(e,s),r=et(e,r),a=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),a=[];break;case"textarea":s=lt(e,s),r=lt(e,r),a=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(e.onclick=si)}for(c in jt(n,r),n=null,s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var o=s[c];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(he.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(o=null!=s?s[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(i in o)!o.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&o[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(a||(a=[]),a.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(he.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Ws("scroll",e),a||o===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Dl=function(e,t,n,r){n!==r&&(t.flags|=4)};var Zl=!1,ec=!1,tc="function"==typeof WeakSet?WeakSet:Set,nc=null;function rc(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){_u(e,t,r)}else n.current=null}function sc(e,t,n){try{n()}catch(r){_u(e,t,r)}}var ic=!1;function ac(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&sc(t,n,i)}s=s.next}while(s!==r)}}function oc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function lc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function cc(e){var t=e.alternate;null!==t&&(e.alternate=null,cc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[xi],delete t[bi],delete t[vi],delete t[wi],delete t[ki]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uc(e){return 5===e.tag||3===e.tag||4===e.tag}function dc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||uc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function hc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=si));else if(4!==r&&null!==(e=e.child))for(hc(e,t,n),e=e.sibling;null!==e;)hc(e,t,n),e=e.sibling}function mc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(mc(e,t,n),e=e.sibling;null!==e;)mc(e,t,n),e=e.sibling}var gc=null,pc=!1;function fc(e,t,n){for(n=n.child;null!==n;)xc(e,t,n),n=n.sibling}function xc(e,t,n){if(dn&&"function"==typeof dn.onCommitFiberUnmount)try{dn.onCommitFiberUnmount(un,n)}catch(o){}switch(n.tag){case 5:ec||rc(n,t);case 6:var r=gc,s=pc;gc=null,fc(e,t,n),pc=s,null!==(gc=r)&&(pc?(e=gc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):gc.removeChild(n.stateNode));break;case 18:null!==gc&&(pc?(e=gc,n=n.stateNode,8===e.nodeType?mi(e.parentNode,n):1===e.nodeType&&mi(e,n),Yn(e)):mi(gc,n.stateNode));break;case 4:r=gc,s=pc,gc=n.stateNode.containerInfo,pc=!0,fc(e,t,n),gc=r,pc=s;break;case 0:case 11:case 14:case 15:if(!ec&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(2&i||4&i)&&sc(n,t,a),s=s.next}while(s!==r)}fc(e,t,n);break;case 1:if(!ec&&(rc(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){_u(n,t,o)}fc(e,t,n);break;case 21:fc(e,t,n);break;case 22:1&n.mode?(ec=(r=ec)||null!==n.memoizedState,fc(e,t,n),ec=r):fc(e,t,n);break;default:fc(e,t,n)}}function bc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new tc),t.forEach(function(t){var r=Ru.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function yc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,o=a;e:for(;null!==o;){switch(o.tag){case 5:gc=o.stateNode,pc=!1;break e;case 3:case 4:gc=o.stateNode.containerInfo,pc=!0;break e}o=o.return}if(null===gc)throw Error(ue(160));xc(i,a,s),gc=null,pc=!1;var l=s.alternate;null!==l&&(l.return=null),s.return=null}catch(c){_u(s,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vc(t,e),t=t.sibling}function vc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yc(t,e),wc(e),4&r){try{ac(3,e,e.return),oc(3,e)}catch(p){_u(e,e.return,p)}try{ac(5,e,e.return)}catch(p){_u(e,e.return,p)}}break;case 1:yc(t,e),wc(e),512&r&&null!==n&&rc(n,n.return);break;case 5:if(yc(t,e),wc(e),512&r&&null!==n&&rc(n,n.return),32&e.flags){var s=e.stateNode;try{xt(s,"")}catch(p){_u(e,e.return,p)}}if(4&r&&null!=(s=e.stateNode)){var i=e.memoizedProps,a=null!==n?n.memoizedProps:i,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===i.type&&null!=i.name&&nt(s,i),Nt(o,a);var c=Nt(o,i);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];"style"===u?wt(s,d):"dangerouslySetInnerHTML"===u?ft(s,d):"children"===u?xt(s,d):Ne(s,u,d,c)}switch(o){case"input":rt(s,i);break;case"textarea":ut(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?ot(s,!!i.multiple,m,!1):h!==!!i.multiple&&(null!=i.defaultValue?ot(s,!!i.multiple,i.defaultValue,!0):ot(s,!!i.multiple,i.multiple?[]:"",!1))}s[bi]=i}catch(p){_u(e,e.return,p)}}break;case 6:if(yc(t,e),wc(e),4&r){if(null===e.stateNode)throw Error(ue(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(p){_u(e,e.return,p)}}break;case 3:if(yc(t,e),wc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Yn(t.containerInfo)}catch(p){_u(e,e.return,p)}break;case 4:default:yc(t,e),wc(e);break;case 13:yc(t,e),wc(e),8192&(s=e.child).flags&&(i=null!==s.memoizedState,s.stateNode.isHidden=i,!i||null!==s.alternate&&null!==s.alternate.memoizedState||(Uc=nn())),4&r&&bc(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(ec=(c=ec)||u,yc(t,e),ec=c):yc(t,e),wc(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&1&e.mode)for(nc=e,u=e.child;null!==u;){for(d=nc=u;null!==nc;){switch(m=(h=nc).child,h.tag){case 0:case 11:case 14:case 15:ac(4,h,h.return);break;case 1:rc(h,h.return);var g=h.stateNode;if("function"==typeof g.componentWillUnmount){r=h,n=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){_u(r,n,p)}}break;case 5:rc(h,h.return);break;case 22:if(null!==h.memoizedState){Cc(d);continue}}null!==m?(m.return=h,nc=m):Cc(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{s=d.stateNode,c?"function"==typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none":(o=d.stateNode,a=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=vt("display",a))}catch(p){_u(e,e.return,p)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(p){_u(e,e.return,p)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yc(t,e),wc(e),4&r&&bc(e);case 21:}}function wc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(uc(n)){var r=n;break e}n=n.return}throw Error(ue(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(xt(s,""),r.flags&=-33),mc(e,dc(e),s);break;case 3:case 4:var i=r.stateNode.containerInfo;hc(e,dc(e),i);break;default:throw Error(ue(161))}}catch(a){_u(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function kc(e,t,n){nc=e,jc(e)}function jc(e,t,n){for(var r=!!(1&e.mode);null!==nc;){var s=nc,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Zl;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||ec;o=Zl;var c=ec;if(Zl=a,(ec=l)&&!c)for(nc=s;null!==nc;)l=(a=nc).child,22===a.tag&&null!==a.memoizedState?Sc(s):null!==l?(l.return=a,nc=l):Sc(s);for(;null!==i;)nc=i,jc(i),i=i.sibling;nc=s,Zl=o,ec=c}Nc(e)}else 8772&s.subtreeFlags&&null!==i?(i.return=s,nc=i):Nc(e)}}function Nc(e){for(;null!==nc;){var t=nc;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:ec||oc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!ec)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ol(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ya(t,i,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ya(t,a,n)}break;case 5:var o=t.stateNode;if(null===n&&4&t.flags){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Yn(d)}}}break;default:throw Error(ue(163))}ec||512&t.flags&&lc(t)}catch(h){_u(t,t.return,h)}}if(t===e){nc=null;break}if(null!==(n=t.sibling)){n.return=t.return,nc=n;break}nc=t.return}}function Cc(e){for(;null!==nc;){var t=nc;if(t===e){nc=null;break}var n=t.sibling;if(null!==n){n.return=t.return,nc=n;break}nc=t.return}}function Sc(e){for(;null!==nc;){var t=nc;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{oc(4,t)}catch(l){_u(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){_u(t,s,l)}}var i=t.return;try{lc(t)}catch(l){_u(t,i,l)}break;case 5:var a=t.return;try{lc(t)}catch(l){_u(t,a,l)}}}catch(l){_u(t,t.return,l)}if(t===e){nc=null;break}var o=t.sibling;if(null!==o){o.return=t.return,nc=o;break}nc=t.return}}var Mc,_c=Math.ceil,Pc=Ce.ReactCurrentDispatcher,Tc=Ce.ReactCurrentOwner,Ec=Ce.ReactCurrentBatchConfig,Rc=0,Ac=null,Lc=null,Fc=0,Oc=0,Ic=Pi(0),Dc=0,zc=null,qc=0,$c=0,Bc=0,Hc=null,Wc=null,Uc=0,Vc=1/0,Gc=null,Yc=!1,Qc=null,Xc=null,Kc=!1,Jc=null,Zc=0,eu=0,tu=null,nu=-1,ru=0;function su(){return 6&Rc?nn():-1!==nu?nu:nu=nn()}function iu(e){return 1&e.mode?2&Rc&&0!==Fc?Fc&-Fc:null!==va.transition?(0===ru&&(ru=wn()),ru):0!==(e=Cn)?e:e=void 0===(e=window.event)?16:nr(e.type):1}function au(e,t,n,r){if(50<eu)throw eu=0,tu=null,Error(ue(185));jn(e,n,r),2&Rc&&e===Ac||(e===Ac&&(!(2&Rc)&&($c|=n),4===Dc&&du(e,Fc)),ou(e,r),1===n&&0===Rc&&!(1&t.mode)&&(Vc=nn()+500,Wi&&Gi()))}function ou(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-hn(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=yn(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=bn(e,e===Ac?Fc:0);if(0===r)null!==n&&Zt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Zt(n),1===t)0===e.tag?function(e){Wi=!0,Vi(e)}(hu.bind(null,e)):Vi(hu.bind(null,e)),di(function(){!(6&Rc)&&Gi()}),n=null;else{switch(Sn(r)){case 1:n=sn;break;case 4:n=an;break;case 16:default:n=on;break;case 536870912:n=cn}n=Au(n,lu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function lu(e,t){if(nu=-1,ru=0,6&Rc)throw Error(ue(327));var n=e.callbackNode;if(Su()&&e.callbackNode!==n)return null;var r=bn(e,e===Ac?Fc:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=vu(e,r);else{t=r;var s=Rc;Rc|=2;var i=bu();for(Ac===e&&Fc===t||(Gc=null,Vc=nn()+500,fu(e,t));;)try{ku();break}catch(o){xu(e,o)}Ea(),Pc.current=i,Rc=s,null!==Lc?t=0:(Ac=null,Fc=0,t=Dc)}if(0!==t){if(2===t&&0!==(s=vn(e))&&(r=s,t=cu(e,s)),1===t)throw n=zc,fu(e,0),du(e,r),ou(e,nn()),n;if(6===t)du(e,r);else{if(s=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!hs(i(),s))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)||(t=vu(e,r),2===t&&(i=vn(e),0!==i&&(r=i,t=cu(e,i))),1!==t)))throw n=zc,fu(e,0),du(e,r),ou(e,nn()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(ue(345));case 2:case 5:Cu(e,Wc,Gc);break;case 3:if(du(e,r),(130023424&r)===r&&10<(t=Uc+500-nn())){if(0!==bn(e,0))break;if(((s=e.suspendedLanes)&r)!==r){su(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=li(Cu.bind(null,e,Wc,Gc),t);break}Cu(e,Wc,Gc);break;case 4:if(du(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-hn(r);i=1<<a,(a=t[a])>s&&(s=a),r&=~i}if(r=s,10<(r=(120>(r=nn()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_c(r/1960))-r)){e.timeoutHandle=li(Cu.bind(null,e,Wc,Gc),r);break}Cu(e,Wc,Gc);break;default:throw Error(ue(329))}}}return ou(e,nn()),e.callbackNode===n?lu.bind(null,e):null}function cu(e,t){var n=Hc;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=vu(e,t))&&(t=Wc,Wc=n,null!==t&&uu(t)),e}function uu(e){null===Wc?Wc=e:Wc.push.apply(Wc,e)}function du(e,t){for(t&=~Bc,t&=~$c,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-hn(t),r=1<<n;e[n]=-1,t&=~r}}function hu(e){if(6&Rc)throw Error(ue(327));Su();var t=bn(e,0);if(!(1&t))return ou(e,nn()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var r=vn(e);0!==r&&(t=r,n=cu(e,r))}if(1===n)throw n=zc,fu(e,0),du(e,t),ou(e,nn()),n;if(6===n)throw Error(ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cu(e,Wc,Gc),ou(e,nn()),null}function mu(e,t){var n=Rc;Rc|=1;try{return e(t)}finally{0===(Rc=n)&&(Vc=nn()+500,Wi&&Gi())}}function gu(e){null!==Jc&&0===Jc.tag&&!(6&Rc)&&Su();var t=Rc;Rc|=1;var n=Ec.transition,r=Cn;try{if(Ec.transition=null,Cn=1,e)return e()}finally{Cn=r,Ec.transition=n,!(6&(Rc=t))&&Gi()}}function pu(){Oc=Ic.current,Ti(Ic)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ci(n)),null!==Lc)for(n=Lc.return;null!==n;){var r=n;switch(aa(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Di();break;case 3:to(),Ti(Li),Ti(Ai),oo();break;case 5:ro(r);break;case 4:to();break;case 13:case 19:Ti(so);break;case 10:Ra(r.type._context);break;case 22:case 23:pu()}n=n.return}if(Ac=e,Lc=e=Iu(e.current,null),Fc=Oc=t,Dc=0,zc=null,Bc=$c=qc=0,Wc=Hc=null,null!==Oa){for(t=0;t<Oa.length;t++)if(null!==(r=(n=Oa[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Oa=null}return e}function xu(e,t){for(;;){var n=Lc;try{if(Ea(),lo.current=rl,po){for(var r=ho.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}po=!1}if(uo=0,go=mo=ho=null,fo=!1,xo=0,Tc.current=null,null===n||null===n.return){Dc=1,zc=t,Lc=null;break}e:{var i=e,a=n.return,o=n,l=t;if(t=Fc,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=o,d=u.tag;if(!(1&u.mode||0!==d&&11!==d&&15!==d)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=wl(a);if(null!==m){m.flags&=-257,kl(m,a,o,0,t),1&m.mode&&vl(i,c,t),l=c;var g=(t=m).updateQueue;if(null===g){var p=new Set;p.add(l),t.updateQueue=p}else g.add(l);break e}if(!(1&t)){vl(i,c,t),yu();break e}l=Error(ue(426))}else if(ca&&1&o.mode){var f=wl(a);if(null!==f){!(65536&f.flags)&&(f.flags|=256),kl(f,a,o,0,t),ya(gl(l,o));break e}}i=l=gl(l,o),4!==Dc&&(Dc=2),null===Hc?Hc=[i]:Hc.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Va(i,bl(0,l,t));break e;case 1:o=l;var x=i.type,b=i.stateNode;if(!(128&i.flags||"function"!=typeof x.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==Xc&&Xc.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Va(i,yl(i,o,t));break e}}i=i.return}while(null!==i)}Nu(n)}catch(y){t=y,Lc===n&&null!==n&&(Lc=n=n.return);continue}break}}function bu(){var e=Pc.current;return Pc.current=rl,null===e?rl:e}function yu(){0!==Dc&&3!==Dc&&2!==Dc||(Dc=4),null===Ac||!(268435455&qc)&&!(268435455&$c)||du(Ac,Fc)}function vu(e,t){var n=Rc;Rc|=2;var r=bu();for(Ac===e&&Fc===t||(Gc=null,fu(e,t));;)try{wu();break}catch(s){xu(e,s)}if(Ea(),Rc=n,Pc.current=r,null!==Lc)throw Error(ue(261));return Ac=null,Fc=0,Dc}function wu(){for(;null!==Lc;)ju(Lc)}function ku(){for(;null!==Lc&&!en();)ju(Lc)}function ju(e){var t=Mc(e.alternate,e,Oc);e.memoizedProps=e.pendingProps,null===t?Nu(e):Lc=t,Tc.current=null}function Nu(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Jl(n,t)))return n.flags&=32767,void(Lc=n);if(null===e)return Dc=6,void(Lc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Kl(n,t,Oc)))return void(Lc=n);if(null!==(t=t.sibling))return void(Lc=t);Lc=t=e}while(null!==t);0===Dc&&(Dc=5)}function Cu(e,t,n){var r=Cn,s=Ec.transition;try{Ec.transition=null,Cn=1,function(e,t,n,r){do{Su()}while(null!==Jc);if(6&Rc)throw Error(ue(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ue(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-hn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,i),e===Ac&&(Lc=Ac=null,Fc=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Kc||(Kc=!0,Au(on,function(){return Su(),null})),i=!!(15990&n.flags),15990&n.subtreeFlags||i){i=Ec.transition,Ec.transition=null;var a=Cn;Cn=1;var o=Rc;Rc|=4,Tc.current=null,function(e,t){if(ii=Xn,bs(e=xs())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(v){n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var m;d!==n||0!==s&&3!==d.nodeType||(o=a+s),d!==i||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(m=d.firstChild);)h=d,d=m;for(;;){if(d===e)break t;if(h===n&&++c===s&&(o=a),h===i&&++u===r&&(l=a),null!==(m=d.nextSibling))break;h=(d=h).parentNode}d=m}n=-1===o||-1===l?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ai={focusedElem:e,selectionRange:n},Xn=!1,nc=t;null!==nc;)if(e=(t=nc).child,1028&t.subtreeFlags&&null!==e)e.return=t,nc=e;else for(;null!==nc;){t=nc;try{var g=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var p=g.memoizedProps,f=g.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?p:ol(t.type,p),f);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(ue(163))}}catch(v){_u(t,t.return,v)}if(null!==(e=t.sibling)){e.return=t.return,nc=e;break}nc=t.return}g=ic,ic=!1}(e,n),vc(n,e),ys(ai),Xn=!!ii,ai=ii=null,e.current=n,kc(n),tn(),Rc=o,Cn=a,Ec.transition=i}else e.current=n;if(Kc&&(Kc=!1,Jc=e,Zc=s),0===(i=e.pendingLanes)&&(Xc=null),function(e){if(dn&&"function"==typeof dn.onCommitFiberRoot)try{dn.onCommitFiberRoot(un,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),ou(e,nn()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Yc)throw Yc=!1,e=Qc,Qc=null,e;!!(1&Zc)&&0!==e.tag&&Su(),1&(i=e.pendingLanes)?e===tu?eu++:(eu=0,tu=e):eu=0,Gi()}(e,t,n,r)}finally{Ec.transition=s,Cn=r}return null}function Su(){if(null!==Jc){var e=Sn(Zc),t=Ec.transition,n=Cn;try{if(Ec.transition=null,Cn=16>e?16:e,null===Jc)var r=!1;else{if(e=Jc,Jc=null,Zc=0,6&Rc)throw Error(ue(331));var s=Rc;for(Rc|=4,nc=e.current;null!==nc;){var i=nc,a=i.child;if(16&nc.flags){var o=i.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(nc=c;null!==nc;){var u=nc;switch(u.tag){case 0:case 11:case 15:ac(8,u,i)}var d=u.child;if(null!==d)d.return=u,nc=d;else for(;null!==nc;){var h=(u=nc).sibling,m=u.return;if(cc(u),u===c){nc=null;break}if(null!==h){h.return=m,nc=h;break}nc=m}}}var g=i.alternate;if(null!==g){var p=g.child;if(null!==p){g.child=null;do{var f=p.sibling;p.sibling=null,p=f}while(null!==p)}}nc=i}}if(2064&i.subtreeFlags&&null!==a)a.return=i,nc=a;else e:for(;null!==nc;){if(2048&(i=nc).flags)switch(i.tag){case 0:case 11:case 15:ac(9,i,i.return)}var x=i.sibling;if(null!==x){x.return=i.return,nc=x;break e}nc=i.return}}var b=e.current;for(nc=b;null!==nc;){var y=(a=nc).child;if(2064&a.subtreeFlags&&null!==y)y.return=a,nc=y;else e:for(a=b;null!==nc;){if(2048&(o=nc).flags)try{switch(o.tag){case 0:case 11:case 15:oc(9,o)}}catch(w){_u(o,o.return,w)}if(o===a){nc=null;break e}var v=o.sibling;if(null!==v){v.return=o.return,nc=v;break e}nc=o.return}}if(Rc=s,Gi(),dn&&"function"==typeof dn.onPostCommitFiberRoot)try{dn.onPostCommitFiberRoot(un,e)}catch(w){}r=!0}return r}finally{Cn=n,Ec.transition=t}}return!1}function Mu(e,t,n){e=Wa(e,t=bl(0,t=gl(n,t),1),1),t=su(),null!==e&&(jn(e,1,t),ou(e,t))}function _u(e,t,n){if(3===e.tag)Mu(e,e,n);else for(;null!==t;){if(3===t.tag){Mu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Xc||!Xc.has(r))){t=Wa(t,e=yl(t,e=gl(n,e),1),1),e=su(),null!==t&&(jn(t,1,e),ou(t,e));break}}t=t.return}}function Pu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=su(),e.pingedLanes|=e.suspendedLanes&n,Ac===e&&(Fc&n)===n&&(4===Dc||3===Dc&&(130023424&Fc)===Fc&&500>nn()-Uc?fu(e,0):Bc|=n),ou(e,t)}function Tu(e,t){0===t&&(1&e.mode?(t=fn,!(130023424&(fn<<=1))&&(fn=4194304)):t=1);var n=su();null!==(e=za(e,t))&&(jn(e,t,n),ou(e,n))}function Eu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tu(e,n)}function Ru(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ue(314))}null!==r&&r.delete(t),Tu(e,n)}function Au(e,t){return Jt(e,t)}function Lu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fu(e,t,n,r){return new Lu(e,t,n,r)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Iu(e,t){var n=e.alternate;return null===n?((n=Fu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Du(e,t,n,r,s,i){var a=2;if(r=e,"function"==typeof e)Ou(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case _e:return zu(n.children,s,i,t);case Pe:a=8,s|=8;break;case Te:return(e=Fu(12,n,t,2|s)).elementType=Te,e.lanes=i,e;case Le:return(e=Fu(13,n,t,s)).elementType=Le,e.lanes=i,e;case Fe:return(e=Fu(19,n,t,s)).elementType=Fe,e.lanes=i,e;case De:return qu(n,s,i,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Ee:a=10;break e;case Re:a=9;break e;case Ae:a=11;break e;case Oe:a=14;break e;case Ie:a=16,r=null;break e}throw Error(ue(130,null==e?e:typeof e,""))}return(t=Fu(a,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function zu(e,t,n,r){return(e=Fu(7,e,r,t)).lanes=n,e}function qu(e,t,n,r){return(e=Fu(22,e,r,t)).elementType=De,e.lanes=n,e.stateNode={isHidden:!1},e}function $u(e,t,n){return(e=Fu(6,e,null,t)).lanes=n,e}function Bu(e,t,n){return(t=Fu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hu(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kn(0),this.expirationTimes=kn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kn(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wu(e,t,n,r,s,i,a,o,l){return e=new Hu(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Fu(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$a(i),e}function Uu(e){if(!e)return Ri;e:{if(Gt(e=e._reactInternals)!==e||1!==e.tag)throw Error(ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ii(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(ue(171))}if(1===e.tag){var n=e.type;if(Ii(n))return qi(e,n,t)}return t}function Vu(e,t,n,r,s,i,a,o,l){return(e=Wu(n,r,!0,e,0,i,0,o,l)).context=Uu(null),n=e.current,(i=Ha(r=su(),s=iu(n))).callback=null!=t?t:null,Wa(n,i,s),e.current.lanes=s,jn(e,s,r),ou(e,r),e}function Gu(e,t,n,r){var s=t.current,i=su(),a=iu(s);return n=Uu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ha(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Wa(s,t,a))&&(au(e,s,a,i),Ua(e,s,a)),a}function Yu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xu(e,t){Qu(e,t),(e=e.alternate)&&Qu(e,t)}Mc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Li.current)Nl=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return Nl=!1,function(e,t,n){switch(t.tag){case 3:Ll(t),ba();break;case 5:no(t);break;case 1:Ii(t.type)&&$i(t);break;case 4:eo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ei(Ma,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?$l(e,t,n):(Ei(so,1&so.current),null!==(e=Yl(e,t,n))?e.sibling:null);Ei(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Vl(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ei(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Pl(e,t,n)}return Yl(e,t,n)}(e,t,n);Nl=!!(131072&e.flags)}else Nl=!1,ca&&1048576&t.flags&&sa(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gl(e,t),e=t.pendingProps;var s=Oi(t,Ai.current);La(t,n),s=wo(null,t,r,e,s,n);var i=ko();return t.flags|=1,"object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ii(r)?(i=!0,$i(t)):i=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,$a(t),s.updater=cl,t.stateNode=s,s._reactInternals=t,ml(t,r,e,n),t=Al(null,t,r,!0,i,n)):(t.tag=0,ca&&i&&ia(t),Cl(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gl(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"==typeof e)return Ou(e)?1:0;if(null!=e){if((e=e.$$typeof)===Ae)return 11;if(e===Oe)return 14}return 2}(r),e=ol(r,e),s){case 0:t=El(null,t,r,e,n);break e;case 1:t=Rl(null,t,r,e,n);break e;case 11:t=Sl(null,t,r,e,n);break e;case 14:t=Ml(null,t,r,ol(r.type,e),n);break e}throw Error(ue(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,El(e,t,r,s=t.elementType===r?s:ol(r,s),n);case 1:return r=t.type,s=t.pendingProps,Rl(e,t,r,s=t.elementType===r?s:ol(r,s),n);case 3:e:{if(Ll(t),null===e)throw Error(ue(387));r=t.pendingProps,s=(i=t.memoizedState).element,Ba(e,t),Ga(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Fl(e,t,r,n,s=gl(Error(ue(423)),t));break e}if(r!==s){t=Fl(e,t,r,n,s=gl(Error(ue(424)),t));break e}for(la=gi(t.stateNode.containerInfo.firstChild),oa=t,ca=!0,ua=null,n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ba(),r===s){t=Yl(e,t,n);break e}Cl(e,t,r,n)}t=t.child}return t;case 5:return no(t),null===e&&ga(t),r=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,a=s.children,oi(r,s)?a=null:null!==i&&oi(r,i)&&(t.flags|=32),Tl(e,t),Cl(e,t,a,n),t.child;case 6:return null===e&&ga(t),null;case 13:return $l(e,t,n);case 4:return eo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ca(t,null,r,n):Cl(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,Sl(e,t,r,s=t.elementType===r?s:ol(r,s),n);case 7:return Cl(e,t,t.pendingProps,n),t.child;case 8:case 12:return Cl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Ei(Ma,r._currentValue),r._currentValue=a,null!==i)if(hs(i.value,a)){if(i.children===s.children&&!Li.current){t=Yl(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var o=i.dependencies;if(null!==o){a=i.child;for(var l=o.firstContext;null!==l;){if(l.context===r){if(1===i.tag){(l=Ha(-1,n&-n)).tag=2;var c=i.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Aa(i.return,n,t),o.lanes|=n;break}l=l.next}}else if(10===i.tag)a=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(a=i.return))throw Error(ue(341));a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),Aa(a,n,t),a=i.sibling}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===t){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}Cl(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,La(t,n),r=r(s=Fa(s)),t.flags|=1,Cl(e,t,r,n),t.child;case 14:return s=ol(r=t.type,t.pendingProps),Ml(e,t,r,s=ol(r.type,s),n);case 15:return _l(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ol(r,s),Gl(e,t),t.tag=1,Ii(r)?(e=!0,$i(t)):e=!1,La(t,n),dl(t,r,s),ml(t,r,s,n),Al(null,t,r,!0,e,n);case 19:return Vl(e,t,n);case 22:return Pl(e,t,n)}throw Error(ue(156,t.tag))};var Ku="function"==typeof reportError?reportError:function(e){console.error(e)};function Ju(e){this._internalRoot=e}function Zu(e){this._internalRoot=e}function ed(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function td(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function nd(){}function rd(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"==typeof s){var o=s;s=function(){var e=Yu(a);o.call(e)}}Gu(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"==typeof r){var i=r;r=function(){var e=Yu(a);i.call(e)}}var a=Vu(t,r,e,0,null,!1,0,"",nd);return e._reactRootContainer=a,e[yi]=a.current,Gs(8===e.nodeType?e.parentNode:e),gu(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"==typeof r){var o=r;r=function(){var e=Yu(l);o.call(e)}}var l=Wu(e,0,!1,null,0,!1,0,"",nd);return e._reactRootContainer=l,e[yi]=l.current,Gs(8===e.nodeType?e.parentNode:e),gu(function(){Gu(t,l,n,r)}),l}(n,t,e,s,r);return Yu(a)}Zu.prototype.render=Ju.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(ue(409));Gu(e,t,null,null)},Zu.prototype.unmount=Ju.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gu(function(){Gu(null,e,null,null)}),t[yi]=null}},Zu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tn();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zn.length&&0!==t&&t<zn[n].priority;n++);zn.splice(n,0,e),0===n&&Hn(e)}},Mn=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=xn(t.pendingLanes);0!==n&&(Nn(t,1|n),ou(t,nn()),!(6&Rc)&&(Vc=nn()+500,Gi()))}break;case 13:gu(function(){var t=za(e,1);if(null!==t){var n=su();au(t,e,1,n)}}),Xu(e,1)}},_n=function(e){if(13===e.tag){var t=za(e,134217728);null!==t&&au(t,e,134217728,su()),Xu(e,134217728)}},Pn=function(e){if(13===e.tag){var t=iu(e),n=za(e,t);null!==n&&au(n,e,t,su()),Xu(e,t)}},Tn=function(){return Cn},En=function(e,t){var n=Cn;try{return Cn=e,t()}finally{Cn=n}},Mt=function(e,t,n){switch(t){case"input":if(rt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Si(r);if(!s)throw Error(ue(90));Je(r),rt(r,s)}}}break;case"textarea":ut(e,n);break;case"select":null!=(t=n.value)&&ot(e,!!n.multiple,t,!1)}},At=mu,Lt=gu;var sd={usingClientEntryPoint:!1,Events:[Ni,Ci,Si,Et,Rt,mu]},id={findFiberByHostInstance:ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ad={bundleType:id.bundleType,version:id.version,rendererPackageName:id.rendererPackageName,rendererConfig:id.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xt(e))?null:e.stateNode},findFiberByHostInstance:id.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{un=od.inject(ad),dn=od}catch(pt){}}se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sd,se.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ed(t))throw Error(ue(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Me,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},se.createRoot=function(e,t){if(!ed(e))throw Error(ue(299));var n=!1,r="",s=Ku;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Wu(e,1,!1,null,0,n,0,r,s),e[yi]=t.current,Gs(8===e.nodeType?e.parentNode:e),new Ju(t)},se.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(ue(188));throw e=Object.keys(e).join(","),Error(ue(268,e))}return e=null===(e=Xt(t))?null:e.stateNode},se.flushSync=function(e){return gu(e)},se.hydrate=function(e,t,n){if(!td(t))throw Error(ue(200));return rd(null,e,t,!0,n)},se.hydrateRoot=function(e,t,n){if(!ed(e))throw Error(ue(405));var r=null!=n&&n.hydratedSources||null,s=!1,i="",a=Ku;if(null!=n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Vu(t,null,e,1,null!=n?n:null,s,0,i,a),e[yi]=t.current,Gs(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Zu(t)},se.render=function(e,t,n){if(!td(t))throw Error(ue(200));return rd(null,e,t,!1,n)},se.unmountComponentAtNode=function(e){if(!td(e))throw Error(ue(40));return!!e._reactRootContainer&&(gu(function(){rd(null,null,e,!1,function(){e._reactRootContainer=null,e[yi]=null})}),!0)},se.unstable_batchedUpdates=mu,se.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!td(n))throw Error(ue(200));if(null==e||void 0===e._reactInternals)throw Error(ue(38));return rd(e,t,n,!1,r)},se.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),re.exports=se;var ld=re.exports;const cd=t(ld);var ud,dd=ld;ud=dd.createRoot,dd.hydrateRoot;const hd=({activeTab:e,setActiveTab:t})=>ne.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-900 border-t border-gray-700 z-50",children:ne.jsx("div",{className:"flex justify-around items-center h-14 lg:h-16",children:[{id:"resources",icon:"",label:"Resources"},{id:"buildings",icon:"",label:"Buildings"},{id:"research",icon:"",label:"Research"},{id:"trading",icon:"",label:"Trading"},{id:"automation",icon:"",label:"Automation"},{id:"prestige",icon:"",label:"Prestige"},{id:"achievements",icon:"",label:"Achievements"},{id:"stats",icon:"",label:"Statistics"},{id:"settings",icon:"",label:"Settings"}].map(n=>ne.jsxs("button",{onClick:()=>t(n.id),className:"flex flex-col lg:flex-row items-center justify-center flex-1 h-full transition-colors "+(e===n.id?"text-blue-400 bg-gray-800":"text-gray-400 hover:text-gray-200"),title:n.label,children:[ne.jsx("span",{className:"text-2xl lg:text-xl lg:mr-2 emoji-icon",children:n.icon}),ne.jsx("span",{className:"hidden lg:block text-sm font-medium",children:n.label})]},n.id))})}),md={wood:0,stone:1,iron:2,copper:3,circuit:4,gear:5,steel:6,plastic:7,glass:8,computer:9,robot:10,quantum:11,nanite:12,fusion:13,antimatter:14,singularity:15};function gd(e){const t=md[e];return void 0===t?(console.warn(`Unknown resource type: ${e}`),"./sprites/resources/icon_00.png"):`./sprites/resources/icon_${t.toString().padStart(2,"0")}.png`}Object.fromEntries(Object.entries(md).map(([e,t])=>[t,e]));const pd={efficiencyCatalyst:{id:"efficiencyCatalyst",name:"Efficiency Catalyst",description:"Doubles production speed for 5 minutes",icon:"",craftCost:{circuit:10,gear:15,steel:20},duration:300,cooldown:600,effect:{type:"productionMultiplier",value:2},unlockRequirement:{research:"massProduction"}},quantumAmplifier:{id:"quantumAmplifier",name:"Quantum Amplifier",description:"5x research speed for 10 minutes",icon:"",craftCost:{quantum:2,computer:20,circuit:30},duration:600,cooldown:1800,effect:{type:"researchSpeedMultiplier",value:5},unlockRequirement:{research:"quantumComputing"}},naniteSwarmPack:{id:"naniteSwarmPack",name:"Nanite Swarm Pack",description:"Instantly completes the next building in queue",icon:"",craftCost:{nanite:1,robot:5,computer:10},duration:0,cooldown:3600,effect:{type:"instantQueueComplete",value:1},unlockRequirement:{research:"nanotechnology"}},timeDilationField:{id:"timeDilationField",name:"Time Dilation Field",description:"Reduces mini-game cooldowns by 50% for 30 minutes",icon:"",craftCost:{antimatter:1,fusion:2,quantum:5},duration:1800,cooldown:7200,effect:{type:"miniGameCooldownReduction",value:.5},unlockRequirement:{research:"antimatterPhysics"},disabled:!0},resourceMagnet:{id:"resourceMagnet",name:"Resource Magnet",description:"Doubles manual gathering for 3 minutes",icon:"",craftCost:{circuit:15,gear:10,iron:25,copper:20},duration:180,cooldown:300,effect:{type:"gatheringMultiplier",value:2},unlockRequirement:{research:"advancedClickMechanics"}}},fd=100,xd=100,bd=50,yd=50,vd=25,wd=25,kd=25,jd=25,Nd=25,Cd=10,Sd=5,Md=10,_d=5,Pd=3,Td=2,Ed=1,Rd={resources:{wood:{id:"wood",name:"Wood",description:"Basic building material",value:0,icon:gd("wood"),unlocked:!0,baseStorageLimit:fd,storageLimit:fd,lockedAmount:0},stone:{id:"stone",name:"Stone",description:"Heavy and sturdy material",value:0,icon:gd("stone"),unlocked:!0,baseStorageLimit:xd,storageLimit:xd,lockedAmount:0},iron:{id:"iron",name:"Iron",description:"Basic metal",value:0,icon:gd("iron"),unlocked:!1,baseStorageLimit:bd,storageLimit:bd,lockedAmount:0},copper:{id:"copper",name:"Copper",description:"Conductive metal",value:0,icon:gd("copper"),unlocked:!1,baseStorageLimit:yd,storageLimit:yd,lockedAmount:0},circuit:{id:"circuit",name:"Circuit",description:"Electronic component",value:0,icon:gd("circuit"),unlocked:!1,baseStorageLimit:vd,storageLimit:vd,lockedAmount:0},gear:{id:"gear",name:"Gear",description:"Mechanical component",value:0,icon:gd("gear"),unlocked:!1,baseStorageLimit:wd,storageLimit:wd,lockedAmount:0},steel:{id:"steel",name:"Steel",description:"Refined metal alloy",value:0,icon:gd("steel"),unlocked:!1,baseStorageLimit:kd,storageLimit:kd,lockedAmount:0},plastic:{id:"plastic",name:"Plastic",description:"Synthetic material",value:0,icon:gd("plastic"),unlocked:!1,baseStorageLimit:jd,storageLimit:jd,lockedAmount:0},glass:{id:"glass",name:"Glass",description:"Transparent material",value:0,icon:gd("glass"),unlocked:!1,baseStorageLimit:Nd,storageLimit:Nd,lockedAmount:0},computer:{id:"computer",name:"Computer",description:"Advanced electronic device",value:0,icon:gd("computer"),unlocked:!1,baseStorageLimit:Cd,storageLimit:Cd,lockedAmount:0},robot:{id:"robot",name:"Robot",description:"Automated worker",value:0,icon:gd("robot"),unlocked:!1,baseStorageLimit:Sd,storageLimit:Sd,lockedAmount:0},quantum:{id:"quantum",name:"Quantum Core",description:"Advanced quantum computing component",value:0,icon:gd("quantum"),unlocked:!1,baseStorageLimit:Md,storageLimit:Md,lockedAmount:0},nanite:{id:"nanite",name:"Nanite Swarm",description:"Self-replicating nanomachines",value:0,icon:gd("nanite"),unlocked:!1,baseStorageLimit:_d,storageLimit:_d,lockedAmount:0},fusion:{id:"fusion",name:"Fusion Core",description:"Controlled nuclear fusion reactor",value:0,icon:gd("fusion"),unlocked:!1,baseStorageLimit:Pd,storageLimit:Pd,lockedAmount:0},antimatter:{id:"antimatter",name:"Antimatter",description:"Exotic matter with immense energy",value:0,icon:gd("antimatter"),unlocked:!1,baseStorageLimit:Td,storageLimit:Td,lockedAmount:0},singularity:{id:"singularity",name:"Singularity",description:"Artificial superintelligence",value:0,icon:gd("singularity"),unlocked:!1,baseStorageLimit:Ed,storageLimit:Ed,lockedAmount:0}},buildings:{woodcutter:{id:"woodcutter",name:"Woodcutter",description:"Automatically harvests wood",cost:{wood:10,stone:5},baseCost:{wood:10,stone:5},production:{wood:.5},consumption:{},costMultiplier:1.15,productionTime:1,level:0,maxLevel:500,unlocked:!0,enabled:!0},stoneMine:{id:"stoneMine",name:"Stone Mine",description:"Extracts stone from the ground",cost:{wood:15,stone:10},baseCost:{wood:15,stone:10},production:{stone:.4},consumption:{},costMultiplier:1.2,productionTime:1,level:0,maxLevel:500,unlocked:!0,enabled:!0},woodStorage:{id:"woodStorage",name:"Wood Storage",description:"Increases wood storage capacity",cost:{wood:20,stone:10},baseCost:{wood:20,stone:10},production:{},consumption:{},costMultiplier:1.3,productionTime:0,level:0,maxLevel:500,unlocked:!0,enabled:!0,storageBonus:{resource:"wood",baseAmount:100,amountPerLevel:100}},stoneStorage:{id:"stoneStorage",name:"Stone Storage",description:"Increases stone storage capacity",cost:{wood:25,stone:15},baseCost:{wood:25,stone:15},production:{},consumption:{},costMultiplier:1.3,productionTime:0,level:0,maxLevel:500,unlocked:!0,enabled:!0,storageBonus:{resource:"stone",baseAmount:100,amountPerLevel:100}},metalStorage:{id:"metalStorage",name:"Metal Storage",description:"Increases storage for iron, copper and steel",cost:{wood:50,stone:25,iron:10},baseCost:{wood:50,stone:25,iron:10},production:{},consumption:{},costMultiplier:1.35,productionTime:0,level:0,maxLevel:500,unlocked:!1,enabled:!0,storageBonus:{resources:["iron","copper","steel"],baseAmount:50,amountPerLevel:50}},componentStorage:{id:"componentStorage",name:"Component Storage",description:"Increases storage for gears, circuits, plastic, and glass",cost:{wood:100,stone:50,iron:25},baseCost:{wood:100,stone:50,iron:25},production:{},consumption:{},costMultiplier:1.4,productionTime:0,level:0,maxLevel:500,unlocked:!1,enabled:!0,storageBonus:{resources:["gear","circuit","plastic","glass"],baseAmount:25,amountPerLevel:25}},highTechStorage:{id:"highTechStorage",name:"High-Tech Storage",description:"Increases storage for computers and robots",cost:{steel:75,circuit:50,computer:10},baseCost:{steel:75,circuit:50,computer:10},production:{},consumption:{},costMultiplier:1.5,productionTime:0,level:0,maxLevel:250,unlocked:!1,enabled:!0,storageBonus:{resources:["computer","robot"],baseAmount:10,amountPerLevel:10}},ironMine:{id:"ironMine",name:"Iron Mine",description:"Extracts iron ore",cost:{wood:20,stone:15},baseCost:{wood:20,stone:15},production:{iron:.3},consumption:{},costMultiplier:1.25,productionTime:1,level:0,maxLevel:500,unlocked:!1,enabled:!0},copperMine:{id:"copperMine",name:"Copper Mine",description:"Extracts copper ore",cost:{wood:25,stone:20},baseCost:{wood:25,stone:20},production:{copper:.3},consumption:{},costMultiplier:1.25,productionTime:1,level:0,maxLevel:500,unlocked:!1,enabled:!0},gearFactory:{id:"gearFactory",name:"Gear Factory",description:"Produces gears from iron",cost:{wood:50,iron:25},baseCost:{wood:50,iron:25},production:{gear:.2},consumption:{iron:.5},costMultiplier:1.3,productionTime:2,level:0,maxLevel:500,unlocked:!1,enabled:!0},steelFoundry:{id:"steelFoundry",name:"Steel Foundry",description:"Produces steel from iron",cost:{stone:100,iron:75},baseCost:{stone:100,iron:75},production:{steel:.15},consumption:{iron:.6},costMultiplier:1.35,productionTime:3,level:0,maxLevel:500,unlocked:!1,enabled:!0},circuitFactory:{id:"circuitFactory",name:"Circuit Factory",description:"Produces electronic circuits",cost:{wood:75,copper:50},baseCost:{wood:75,copper:50},production:{circuit:.1},consumption:{copper:.4},costMultiplier:1.4,productionTime:4,level:0,maxLevel:500,unlocked:!1,enabled:!0},plasticFactory:{id:"plasticFactory",name:"Plastic Factory",description:"Produces plastic materials",cost:{stone:150,iron:100},baseCost:{stone:150,iron:100},production:{plastic:.1},consumption:{},costMultiplier:1.4,productionTime:5,level:0,maxLevel:500,unlocked:!1,enabled:!0},glassFactory:{id:"glassFactory",name:"Glass Factory",description:"Produces glass from stone and iron",cost:{stone:200,iron:120},baseCost:{stone:200,iron:120},production:{glass:.1},consumption:{},costMultiplier:1.45,productionTime:5,level:0,maxLevel:500,unlocked:!1,enabled:!0},computerFactory:{id:"computerFactory",name:"Computer Factory",description:"Assembles computers",cost:{plastic:100,circuit:75,steel:50},baseCost:{plastic:100,circuit:75,steel:50},production:{computer:.05},consumption:{circuit:.3,plastic:.2},costMultiplier:1.5,productionTime:10,level:0,maxLevel:500,unlocked:!1,enabled:!0},robotFactory:{id:"robotFactory",name:"Robot Factory",description:"Assembles robots",cost:{computer:50,steel:100,gear:150},baseCost:{computer:50,steel:100,gear:150},production:{robot:.01},consumption:{computer:.1,steel:.3,gear:.4},costMultiplier:1.6,productionTime:30,level:0,maxLevel:500,unlocked:!1,enabled:!0},quantumLab:{id:"quantumLab",name:"Quantum Laboratory",description:"Produces quantum computing cores",cost:{computer:50,robot:10,steel:100},baseCost:{computer:50,robot:10,steel:100},production:{quantum:.001},consumption:{computer:.05,robot:.01},costMultiplier:1.8,productionTime:60,level:0,maxLevel:100,unlocked:!1,enabled:!0},naniteFactory:{id:"naniteFactory",name:"Nanite Factory",description:"Produces self-replicating nanomachines",cost:{quantum:2,computer:100,robot:20},baseCost:{quantum:2,computer:100,robot:20},production:{nanite:5e-4},consumption:{quantum:.002,computer:.1},costMultiplier:2,productionTime:120,level:0,maxLevel:50,unlocked:!1,enabled:!0},fusionReactor:{id:"fusionReactor",name:"Fusion Reactor",description:"Generates fusion cores for advanced energy",cost:{nanite:1,quantum:5,steel:200},baseCost:{nanite:1,quantum:5,steel:200},production:{fusion:2e-4},consumption:{nanite:.001,quantum:.005},costMultiplier:2.2,productionTime:300,level:0,maxLevel:25,unlocked:!1,enabled:!0},antimatterCollector:{id:"antimatterCollector",name:"Antimatter Collector",description:"Harvests antimatter from space",cost:{fusion:1,nanite:2,quantum:5},baseCost:{fusion:1,nanite:2,quantum:5},production:{antimatter:1e-4},consumption:{fusion:.001,nanite:.005},costMultiplier:2.5,productionTime:600,level:0,maxLevel:10,unlocked:!1,enabled:!0},singularityCore:{id:"singularityCore",name:"Singularity Core",description:"Creates artificial superintelligence",cost:{antimatter:1,quantum:5,nanite:5},baseCost:{antimatter:1,quantum:5,nanite:5},production:{singularity:1e-5},consumption:{antimatter:1e-4,quantum:.01,nanite:.002},costMultiplier:3,productionTime:1800,level:0,maxLevel:10,unlocked:!1,enabled:!0},quantumStorage:{id:"quantumStorage",name:"Quantum Storage",description:"Advanced storage for quantum and nanite resources",cost:{quantum:1,computer:25,steel:50},baseCost:{quantum:1,computer:25,steel:50},production:{},consumption:{},costMultiplier:1.6,productionTime:0,level:0,maxLevel:200,unlocked:!1,enabled:!0,storageBonus:{resources:["quantum","nanite"],baseAmount:1,amountPerLevel:1}},exoticStorage:{id:"exoticStorage",name:"Exotic Storage",description:"Storage for fusion, antimatter, and singularity",cost:{nanite:2,quantum:5,fusion:1},baseCost:{nanite:2,quantum:5,fusion:1},production:{},consumption:{},costMultiplier:1.8,productionTime:0,level:0,maxLevel:150,unlocked:!1,enabled:!0,storageBonus:{resources:["fusion","antimatter","singularity"],baseAmount:1,amountPerLevel:1}}},research:{mining:{id:"mining",name:"Mining Technology",description:"Unlocks iron and copper mining",cost:{wood:200,stone:150},unlocks:{resources:["iron","copper"],buildings:["ironMine","copperMine","metalStorage"]},completed:!1,unlocked:!0},metalworking:{id:"metalworking",name:"Metal Working",description:"Enables gear production",cost:{iron:200,wood:400},unlocks:{buildings:["gearFactory","componentStorage"],resources:["gear"]},completed:!1,unlocked:!1,requiredResearch:["mining"]},steelProduction:{id:"steelProduction",name:"Steel Production",description:"Learn how to create steel",cost:{iron:400,gear:100},unlocks:{buildings:["steelFoundry"],resources:["steel"],research:["advancedMaterials"]},completed:!1,unlocked:!1,requiredResearch:["metalworking"]},electronics:{id:"electronics",name:"Electronics",description:"Enables circuit production",cost:{copper:400,gear:200},unlocks:{buildings:["circuitFactory"],resources:["circuit"],research:["computerScience"]},completed:!1,unlocked:!1,requiredResearch:["mining"]},advancedMaterials:{id:"advancedMaterials",name:"Advanced Materials",description:"Enables plastic and glass production",cost:{steel:200,gear:300},unlocks:{buildings:["plasticFactory","glassFactory"],resources:["plastic","glass"]},completed:!1,unlocked:!1,requiredResearch:["steelProduction"]},computerScience:{id:"computerScience",name:"Computer Science",description:"Enables computer production",cost:{circuit:200,plastic:150,glass:100},unlocks:{buildings:["computerFactory","highTechStorage"],resources:["computer"],research:["robotics"]},completed:!1,unlocked:!1,requiredResearch:["electronics","advancedMaterials"]},computing:{id:"computing",name:"Computing Technology",description:"Enables manual gathering of computers",cost:{computer:25,circuit:150,plastic:100},unlocks:{features:["computerManualGathering"]},completed:!1,unlocked:!1,requiredResearch:["computerScience"]},robotics:{id:"robotics",name:"Robotics",description:"Enables robot production",cost:{computer:75,steel:300,gear:400},unlocks:{buildings:["robotFactory"],resources:["robot"]},completed:!1,unlocked:!1,requiredResearch:["computerScience"]},quantumPhysics:{id:"quantumPhysics",name:"Quantum Physics",description:"Unlocks quantum computing technology",cost:{robot:75,computer:150,steel:300},unlocks:{buildings:["quantumLab","quantumStorage"],resources:["quantum"],research:["nanotechnology"]},completed:!1,unlocked:!1,requiredResearch:["robotics"]},nanotechnology:{id:"nanotechnology",name:"Nanotechnology",description:"Enables nanite production and manipulation",cost:{quantum:3,robot:75,computer:300},unlocks:{buildings:["naniteFactory"],resources:["nanite"]},completed:!1,unlocked:!1,requiredResearch:["quantumPhysics"]},fusionTechnology:{id:"fusionTechnology",name:"Fusion Technology",description:"Unlocks controlled nuclear fusion",cost:{nanite:2,quantum:8,robot:150},unlocks:{buildings:["fusionReactor"],resources:["fusion"]},completed:!1,unlocked:!1,requiredResearch:["nanotechnology"]},antimatterPhysics:{id:"antimatterPhysics",name:"Antimatter Physics",description:"Enables antimatter collection and storage",cost:{fusion:2,nanite:3,quantum:15},unlocks:{buildings:["antimatterCollector"],resources:["antimatter"]},completed:!1,unlocked:!1,requiredResearch:["fusionTechnology"]},artificialIntelligence:{id:"artificialIntelligence",name:"Artificial Intelligence",description:"Creates artificial superintelligence",cost:{antimatter:2,quantum:8,nanite:15},unlocks:{buildings:["singularityCore","exoticStorage"],resources:["singularity"]},completed:!1,unlocked:!1,requiredResearch:["antimatterPhysics"]},advancedMining:{id:"advancedMining",name:"Advanced Mining",description:"Improves mining efficiency and unlocks advanced mining techniques",cost:{iron:600,copper:400,stone:800},unlocks:{features:["advancedMining"]},completed:!1,unlocked:!1,requiredResearch:["mining","metalworking"]},massProduction:{id:"massProduction",name:"Mass Production",description:"Unlocks batch production and improved factory efficiency",cost:{steel:400,gear:600,circuit:300},unlocks:{features:["massProduction"]},completed:!1,unlocked:!1,requiredResearch:["steelProduction","electronics"]},quantumComputing:{id:"quantumComputing",name:"Quantum Computing",description:"Unlocks quantum computing applications and advanced processing",cost:{quantum:5,computer:100,robot:50},unlocks:{features:["quantumComputing"]},completed:!1,unlocked:!1,requiredResearch:["quantumPhysics","robotics"]},basicAutomation:{id:"basicAutomation",name:"Basic Automation",description:"Unlocks the ability to create automation rules for your factory (consumes robots)",cost:{wood:800,stone:500,iron:200,robot:10},unlocks:{features:["automation"]},completed:!1,unlocked:!1,requiredResearch:["mining","robotics"],permanent:!0},advancedAutomation:{id:"advancedAutomation",name:"Advanced Automation",description:"Improves automation efficiency and unlocks more complex rules (25% robot cost reduction)",cost:{iron:200,copper:150,gear:50,robot:10},unlocks:{features:["advancedAutomation"]},completed:!1,unlocked:!1,requiredResearch:["basicAutomation","metalworking"],permanent:!0},intelligentAutomation:{id:"intelligentAutomation",name:"Intelligent Automation",description:"AI-powered automation with predictive capabilities (50% robot cost reduction)",cost:{computer:25,robot:10,steel:100},unlocks:{features:["intelligentAutomation"]},completed:!1,unlocked:!1,requiredResearch:["advancedAutomation","robotics"],permanent:!0},basicClickPower:{id:"basicClickPower",name:"Basic Click Efficiency",description:"Double the resources gained per click",cost:{wood:250,stone:200},unlocks:{},completed:!1,unlocked:!0},stoneClickPower:{id:"stoneClickPower",name:"Stone Tool Enhancement",description:"Triple the resources gained per click",cost:{wood:500,stone:400},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["basicClickPower"]},ironClickPower:{id:"ironClickPower",name:"Iron Reinforced Tools",description:"Gain 3 resources per click",cost:{wood:600,stone:400,iron:250},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["mining","stoneClickPower"]},copperClickPower:{id:"copperClickPower",name:"Copper Conductive Tools",description:"Gain 4 resources per click",cost:{iron:500,copper:400,stone:600},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["mining","ironClickPower"]},gearClickPower:{id:"gearClickPower",name:"Mechanical Click Amplifier",description:"Gain 4 resources per click",cost:{iron:300,copper:200,gear:100},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["metalworking","copperClickPower"]},steelClickPower:{id:"steelClickPower",name:"Steel-Enhanced Collection",description:"Gain 5 resources per click",cost:{iron:500,gear:300,steel:200},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["steelProduction","gearClickPower"]},circuitClickPower:{id:"circuitClickPower",name:"Electronic Click Accelerator",description:"Gain 8 resources per click",cost:{copper:600,circuit:200,plastic:150},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["electronics","advancedMaterials","steelClickPower"]},plasticClickPower:{id:"plasticClickPower",name:"Polymer Click Enhancement",description:"Gain 10 resources per click",cost:{plastic:300,glass:200,steel:400},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["advancedMaterials","circuitClickPower"]},computerClickPower:{id:"computerClickPower",name:"Computer Processing Enhancement",description:"Gain 12 resources per click",cost:{computer:50,circuit:300,plastic:200},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["computing","plasticClickPower"]},roboticClickPower:{id:"roboticClickPower",name:"Robotic Click Automation",description:"Gain 12 resources per click",cost:{steel:800,computer:75,robot:25},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["robotics","computerClickPower"]},quantumClickPower:{id:"quantumClickPower",name:"Quantum Click Manipulation",description:"Gain 18 resources per click",cost:{quantum:3,robot:100,computer:300},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["quantumPhysics","roboticClickPower"]},naniteClickPower:{id:"naniteClickPower",name:"Nanite Click Replication",description:"Gain 25 resources per click",cost:{nanite:1,quantum:10,robot:300},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["nanotechnology","quantumClickPower"]},fusionClickPower:{id:"fusionClickPower",name:"Fusion Click Energy",description:"Gain 35 resources per click",cost:{fusion:1,nanite:5,quantum:50},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["fusionTechnology","naniteClickPower"]},antimatterClickPower:{id:"antimatterClickPower",name:"Antimatter Click Annihilation",description:"Gain 50 resources per click",cost:{antimatter:1,fusion:1,nanite:25},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["antimatterPhysics","fusionClickPower"]},singularityClickPower:{id:"singularityClickPower",name:"Singularity Click Transcendence",description:"Gain 75 resources per click",cost:{singularity:1,antimatter:1,quantum:100},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["artificialIntelligence","antimatterClickPower"]},basicComboSystem:{id:"basicComboSystem",name:"Basic Combo System",description:"Unlock basic combo system for manual gathering (max 2x multiplier)",cost:{steel:50,gear:25},unlocks:{features:["basicCombo"]},completed:!1,unlocked:!1,requiredResearch:["steelClickPower"]},advancedClickMechanics:{id:"advancedClickMechanics",name:"Advanced Click Mechanics",description:"Unlock advanced combo system and critical hits for manual gathering",cost:{steel:100,circuit:50,gear:75},unlocks:{features:["advancedClicking"]},completed:!1,unlocked:!1,requiredResearch:["basicComboSystem","circuitClickPower"]},multiClicking:{id:"multiClicking",name:"Multi-Resource Clicking",description:"Click multiple resources simultaneously with reduced efficiency",cost:{computer:25,robot:10,circuit:100},unlocks:{features:["multiClicking"]},completed:!1,unlocked:!1,requiredResearch:["advancedClickMechanics","computing"]},clickMastery:{id:"clickMastery",name:"Click Mastery",description:"Master the art of manual gathering - 10x click power bonus",cost:{singularity:1,antimatter:2,quantum:500},unlocks:{features:["clickMastery"]},completed:!1,unlocked:!1,requiredResearch:["singularityClickPower","multiClicking"]},comboMastery:{id:"comboMastery",name:"Combo Mastery",description:"Increase maximum combo multiplier to 10x",cost:{quantum:10,robot:50,computer:200},unlocks:{features:["comboMastery"]},completed:!1,unlocked:!1,requiredResearch:["advancedClickMechanics","quantumPhysics"]},ultimateCombo:{id:"ultimateCombo",name:"Ultimate Combo",description:"Increase maximum combo multiplier to 20x",cost:{singularity:1,antimatter:1,quantum:100},unlocks:{features:["ultimateCombo"]},completed:!1,unlocked:!1,requiredResearch:["comboMastery","artificialIntelligence"]},basicTrading:{id:"basicTrading",name:"Basic Trading",description:"Unlock the ability to trade resources with nearby settlements",cost:{wood:400,stone:300},unlocks:{tradePairs:["woodToStone","stoneToWood"]},completed:!1,unlocked:!0},improvedTrading:{id:"improvedTrading",name:"Improved Trading",description:"Establish trade routes for more resources",cost:{wood:800,stone:500,iron:250},unlocks:{tradePairs:["woodToIron","stoneToIron"]},completed:!1,unlocked:!1,requiredResearch:["basicTrading","mining"]},advancedTrading:{id:"advancedTrading",name:"Advanced Trading",description:"Develop complex trade networks for advanced resources",cost:{iron:300,copper:200,gear:50},unlocks:{tradePairs:["ironToCopper","copperToGear","ironToGear","ironToSteel"]},completed:!1,unlocked:!1,requiredResearch:["improvedTrading","metalworking"]},globalTrading:{id:"globalTrading",name:"Global Trading",description:"Establish worldwide trade networks for all resources",cost:{steel:150,circuit:100,glass:100},unlocks:{tradePairs:["copperToCircuit","stoneToGlass","circuitToComputer","gearToRobot"]},completed:!1,unlocked:!1,requiredResearch:["advancedTrading","electronics"]},quantumTrading:{id:"quantumTrading",name:"Quantum Trading",description:"Establish quantum-entangled trade networks",cost:{quantum:5,robot:100,computer:500},unlocks:{tradePairs:["quantumToNanite","robotToQuantum","computerToQuantum"]},completed:!1,unlocked:!1,requiredResearch:["globalTrading","quantumPhysics"]},exoticTrading:{id:"exoticTrading",name:"Exotic Trading",description:"Trade in exotic matter and energy",cost:{nanite:2,fusion:1,antimatter:1},unlocks:{tradePairs:["fusionToAntimatter","naniteToSingularity","antimatterToSingularity"]},completed:!1,unlocked:!1,requiredResearch:["quantumTrading","fusionTechnology"]},automateWood:{id:"automateWood",name:"Wood Automation",description:"Automate lumber mill operations",cost:{wood:200,stone:100,robot:2},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["basicAutomation"],permanent:!0},automateStone:{id:"automateStone",name:"Stone Automation",description:"Automate quarry operations",cost:{wood:150,stone:200,robot:2},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["basicAutomation"],permanent:!0},automateIron:{id:"automateIron",name:"Iron Automation",description:"Automate iron mine operations",cost:{iron:100,robot:3,circuit:25},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["basicAutomation","mining"],permanent:!0},automateCopper:{id:"automateCopper",name:"Copper Automation",description:"Automate copper mine operations",cost:{copper:75,robot:3,circuit:30},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["basicAutomation","mining"],permanent:!0},automateSteel:{id:"automateSteel",name:"Steel Automation",description:"Automate steel furnace operations",cost:{steel:50,robot:5,circuit:40},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["advancedAutomation","steelProduction"],permanent:!0},automateCircuit:{id:"automateCircuit",name:"Circuit Automation",description:"Automate circuit factory operations",cost:{circuit:100,robot:4,gear:50},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["advancedAutomation","electronics"],permanent:!0},automateGear:{id:"automateGear",name:"Gear Automation",description:"Automate gear workshop operations",cost:{gear:75,robot:4,steel:25},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["advancedAutomation","metalworking"],permanent:!0},automatePlastic:{id:"automatePlastic",name:"Plastic Automation",description:"Automate plastic factory operations",cost:{plastic:50,robot:4,circuit:50},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["advancedAutomation"],permanent:!0},automateGlass:{id:"automateGlass",name:"Glass Automation",description:"Automate glass factory operations",cost:{glass:50,robot:4,steel:30},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["advancedAutomation"],permanent:!0},automateComputer:{id:"automateComputer",name:"Computer Automation",description:"Automate computer factory operations",cost:{computer:25,robot:8,circuit:100},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["intelligentAutomation","computing"],permanent:!0},automateRobot:{id:"automateRobot",name:"Robot Automation",description:"Automate robot factory operations (meta-automation)",cost:{robot:20,computer:15,steel:100},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["intelligentAutomation","robotics"],permanent:!0},automateQuantum:{id:"automateQuantum",name:"Quantum Automation",description:"Automate quantum lab operations",cost:{quantum:5,robot:15,computer:50},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["intelligentAutomation","quantumPhysics"],permanent:!0},automateNanite:{id:"automateNanite",name:"Nanite Automation",description:"Automate nanite factory operations",cost:{nanite:2,quantum:10,robot:25},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["intelligentAutomation","nanotechnology"],permanent:!0},automateFusion:{id:"automateFusion",name:"Fusion Automation",description:"Automate fusion reactor operations",cost:{fusion:1,nanite:3,robot:30},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["intelligentAutomation","fusionTechnology"],permanent:!0},automateAntimatter:{id:"automateAntimatter",name:"Antimatter Automation",description:"Automate antimatter collector operations",cost:{antimatter:1,fusion:2,robot:40},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["intelligentAutomation","antimatterPhysics"],permanent:!0},automateSingularity:{id:"automateSingularity",name:"Singularity Automation",description:"Automate singularity core operations",cost:{singularity:1,antimatter:5,robot:50},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["intelligentAutomation","singularityPhysics"],permanent:!0},automateResearch:{id:"automateResearch",name:"Research Automation",description:"Automate research completion",cost:{computer:100,robot:50,quantum:10},unlocks:{},completed:!1,unlocked:!1,requiredResearch:["intelligentAutomation","computing"],permanent:!0},manualMining:{id:"manualMining",name:"Manual Mining Techniques",description:"Learn advanced techniques to manually extract iron and copper",cost:{gear:200,steel:150,wood:600},unlocks:{features:["ironManualGathering","copperManualGathering"]},completed:!1,unlocked:!1,requiredResearch:["steelProduction","metalworking"]},manualMetalworking:{id:"manualMetalworking",name:"Manual Metalworking",description:"Craft gears by hand using advanced techniques",cost:{circuit:150,plastic:100,steel:200},unlocks:{features:["gearManualGathering"]},completed:!1,unlocked:!1,requiredResearch:["advancedMaterials","electronics"]},manualSteelwork:{id:"manualSteelwork",name:"Manual Steelwork",description:"Forge steel manually with precision techniques",cost:{computer:50,circuit:200,robot:10},unlocks:{features:["steelManualGathering"]},completed:!1,unlocked:!1,requiredResearch:["computerScience","robotics"]},manualElectronics:{id:"manualElectronics",name:"Manual Electronics Assembly",description:"Assemble circuits by hand with robotic assistance",cost:{robot:10,quantum:1,computer:50},unlocks:{features:["circuitManualGathering"]},completed:!1,unlocked:!1,requiredResearch:["robotics","quantumPhysics"]},manualMaterials:{id:"manualMaterials",name:"Manual Material Synthesis",description:"Create plastic and glass using quantum-enhanced techniques",cost:{quantum:2,nanite:1,robot:25},unlocks:{features:["plasticManualGathering","glassManualGathering"]},completed:!1,unlocked:!1,requiredResearch:["quantumPhysics","nanotechnology"]},manualRobotics:{id:"manualRobotics",name:"Manual Robot Assembly",description:"Build robots by hand using fusion-powered tools",cost:{fusion:1,antimatter:1,nanite:5},unlocks:{features:["robotManualGathering"]},completed:!1,unlocked:!1,requiredResearch:["fusionTechnology","antimatterPhysics"]},manualQuantum:{id:"manualQuantum",name:"Manual Quantum Manipulation",description:"Manipulate quantum states by hand using singularity insights",cost:{singularity:1,antimatter:2,fusion:3},unlocks:{features:["quantumManualGathering"]},completed:!1,unlocked:!1,requiredResearch:["artificialIntelligence","antimatterPhysics"]},manualNanotechnology:{id:"manualNanotechnology",name:"Manual Nanite Control",description:"Direct nanite assembly through direct neural interface",cost:{singularity:2,antimatter:5,quantum:20},unlocks:{features:["naniteManualGathering"]},completed:!1,unlocked:!1,requiredResearch:["artificialIntelligence","manualQuantum"]},manualFusion:{id:"manualFusion",name:"Manual Fusion Control",description:"Control fusion reactions through enhanced consciousness",cost:{singularity:3,antimatter:10,nanite:20},unlocks:{features:["fusionManualGathering"]},completed:!1,unlocked:!1,requiredResearch:["manualNanotechnology","artificialIntelligence"]},manualAntimatter:{id:"manualAntimatter",name:"Manual Antimatter Harvesting",description:"Harvest antimatter through transcendent understanding",cost:{singularity:5,quantum:100,nanite:50},unlocks:{features:["antimatterManualGathering"]},completed:!1,unlocked:!1,requiredResearch:["manualFusion","manualQuantum"]},manualSingularity:{id:"manualSingularity",name:"Manual Singularity Creation",description:"Create singularities through pure consciousness manipulation",cost:{singularity:10,antimatter:50,fusion:50},unlocks:{features:["singularityManualGathering"]},completed:!1,unlocked:!1,requiredResearch:["manualAntimatter","manualNanotechnology"]}},unlockedFeatures:[],queues:{building:[],research:[]},lastTick:Date.now(),gameSpeed:1,offlineProgress:!0,clickPower:1,tutorial:{isActive:!1,currentStep:0,completed:!1,skipped:!1},settings:{darkMode:!1,soundEnabled:!0,sound:{masterVolume:.6,musicVolume:.7,sfxVolume:.8,uiVolume:.6,musicEnabled:!0,sfxEnabled:!0,uiEnabled:!0}},prestige:{level:0,points:0,totalPoints:0,bankedPrestigePoints:0,multipliers:{production:1,storage:1,clickPower:1,researchCost:1,buildingCooldownMultiplier:1,buildingCostMultiplier:1},upgrades:{productionBonus:0,storageBonus:0,clickBonus:0,researchDiscount:0,buildingCooldownReduction:0,buildingCostReduction:0}},statistics:{totalResourcesProduced:{wood:0,stone:0,iron:0,copper:0,circuit:0,gear:0,steel:0,plastic:0,glass:0,computer:0,robot:0,quantum:0,nanite:0,fusion:0,antimatter:0,singularity:0},totalResourcesSpent:{wood:0,stone:0,iron:0,copper:0,circuit:0,gear:0,steel:0,plastic:0,glass:0,computer:0,robot:0,quantum:0,nanite:0,fusion:0,antimatter:0,singularity:0},buildingsConstructed:{},researchCompleted:[],playTime:0,tradesCompleted:0,resourcesTraded:{wood:0,stone:0,iron:0,copper:0,circuit:0,gear:0,steel:0,plastic:0,glass:0,computer:0,robot:0,quantum:0,nanite:0,fusion:0,antimatter:0,singularity:0}},achievements:{unlocked:[],progress:{},lastUnlocked:null},antiCheat:{suspicionLevel:0,isBlocked:!1,blockedUntil:0,violationCount:0,lastWarning:null,warningTime:0},tradePairs:{woodToStone:{from:"wood",to:"stone",baseRate:.8,batchSize:100,volatility:.2,unlocked:!1},stoneToWood:{from:"stone",to:"wood",baseRate:.9,batchSize:100,volatility:.2,unlocked:!1},woodToIron:{from:"wood",to:"iron",baseRate:.5,batchSize:200,volatility:.25,unlocked:!1},stoneToIron:{from:"stone",to:"iron",baseRate:.6,batchSize:150,volatility:.2,unlocked:!1},ironToCopper:{from:"iron",to:"copper",baseRate:.9,batchSize:50,volatility:.3,unlocked:!1},copperToGear:{from:"copper",to:"gear",baseRate:.4,batchSize:75,volatility:.15,unlocked:!1},ironToGear:{from:"iron",to:"gear",baseRate:.5,batchSize:60,volatility:.2,unlocked:!1},ironToSteel:{from:"iron",to:"steel",baseRate:.4,batchSize:100,volatility:.3,unlocked:!1},copperToCircuit:{from:"copper",to:"circuit",baseRate:.3,batchSize:100,volatility:.25,unlocked:!1},stoneToGlass:{from:"stone",to:"glass",baseRate:.4,batchSize:150,volatility:.2,unlocked:!1},circuitToComputer:{from:"circuit",to:"computer",baseRate:.15,batchSize:80,volatility:.4,unlocked:!1},gearToRobot:{from:"gear",to:"robot",baseRate:.1,batchSize:120,volatility:.35,unlocked:!1},quantumToNanite:{from:"quantum",to:"nanite",baseRate:.3,batchSize:5,volatility:.4,unlocked:!1},robotToQuantum:{from:"robot",to:"quantum",baseRate:.05,batchSize:20,volatility:.5,unlocked:!1},computerToQuantum:{from:"computer",to:"quantum",baseRate:.02,batchSize:50,volatility:.6,unlocked:!1},fusionToAntimatter:{from:"fusion",to:"antimatter",baseRate:.2,batchSize:2,volatility:.7,unlocked:!1},naniteToSingularity:{from:"nanite",to:"singularity",baseRate:.01,batchSize:10,volatility:.8,unlocked:!1},antimatterToSingularity:{from:"antimatter",to:"singularity",baseRate:.005,batchSize:5,volatility:.9,unlocked:!1}},boosters:{inventory:{},active:[],cooldowns:{},unlocked:[]}},Ad=({x:e,y:t,type:n,onComplete:r})=>{const[s,i]=G.useState([]),[a,o]=G.useState(!1);return G.useEffect(()=>{const e="research"===n?30:15,t=[];for(let r=0;r<e;r++){let e="",s=0,i=0,a=0;switch(n){case"resource":e=["#34D399","#10B981","#059669"][Math.floor(3*Math.random())],s=4*Math.random()+2,i=2*Math.random()+.5,a=1e3*Math.random()+500;break;case"research":e=["#A78BFA","#8B5CF6","#7C3AED"][Math.floor(3*Math.random())],s=5*Math.random()+3,i=3*Math.random()+1,a=1500*Math.random()+700;break;case"building":e=["#60A5FA","#3B82F6","#2563EB"][Math.floor(3*Math.random())],s=4*Math.random()+2,i=2*Math.random()+.8,a=1200*Math.random()+600}const o=Math.random()*Math.PI*2,l=i;t.push({id:`p-${r}-${Date.now()}-${Math.random()}`,x:0,y:0,vx:Math.cos(o)*l,vy:Math.sin(o)*l,size:s,color:e,opacity:1,life:0,maxLife:a})}return i(t),()=>{r&&!a&&r()}},[]),G.useEffect(()=>{if(0===s.length||a)return;let e;const t=()=>{i(e=>{const t=e.map(e=>{const t=e.life+16,n=t/e.maxLife;return d(u({},e),{x:e.x+e.vx,y:e.y+e.vy,vy:e.vy+.02,opacity:1-n,life:t})}).filter(e=>e.life<e.maxLife);return 0!==t.length||a||(o(!0),r&&r()),t}),a||(e=requestAnimationFrame(t))};return e=requestAnimationFrame(t),()=>{cancelAnimationFrame(e)}},[s,a,r]),0===s.length?null:ne.jsx("div",{className:"absolute pointer-events-none",style:{transform:`translate(${e}px, ${t}px)`,zIndex:9e3},children:s.map(e=>ne.jsx("div",{className:"absolute rounded-full",style:{left:e.x,top:e.y,width:e.size,height:e.size,backgroundColor:e.color,opacity:e.opacity,transform:"translate(-50%, -50%)"}},e.id))})},Ld=class e{constructor(){h(this,"audioContext",null),h(this,"sounds",new Map),h(this,"musicTracks",new Map),h(this,"currentMusicLayers",new Map),h(this,"currentBackgroundMusic",null),h(this,"currentMusicTrack",null),h(this,"settings"),h(this,"isInitialized",!1),h(this,"hasUserInteracted",!1),h(this,"isMobile",!1),this.settings={masterVolume:.6,musicVolume:.7,sfxVolume:.8,uiVolume:.6,musicEnabled:!0,sfxEnabled:!0,uiEnabled:!0},this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.isMobile&&this.setupMobileAudioHandling()}static getInstance(){return e.instance||(e.instance=new e),e.instance}setupMobileAudioHandling(){const e=()=>{this.hasUserInteracted||(this.hasUserInteracted=!0,this.resumeAudioContext(),this.unmuteAllAudio(),console.log("Mobile audio enabled after user interaction"),setTimeout(()=>{this.startBackgroundMusicAfterInteraction().catch(e=>{console.log("Background music failed to start:",e)})},500))};["touchstart","touchend","click","keydown","scroll"].forEach(t=>{document.addEventListener(t,e,{once:!0,passive:!0})}),document.addEventListener("click",()=>{this.resumeAudioContext()},{passive:!0}),document.addEventListener("visibilitychange",()=>{!document.hidden&&this.hasUserInteracted&&this.resumeAudioContext()})}resumeAudioContext(){return m(this,null,function*(){if(this.audioContext&&"suspended"===this.audioContext.state)try{yield this.audioContext.resume(),console.log("AudioContext resumed successfully")}catch(e){console.warn("Failed to resume AudioContext:",e)}})}unmuteAllAudio(){this.sounds.forEach(e=>{e.muted=!1}),this.musicTracks.forEach(e=>{e.muted=!1}),this.currentMusicLayers.forEach(e=>{e.muted=!1})}initialize(){return m(this,null,function*(){if(!this.isInitialized)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),yield this.preloadSounds(),this.isInitialized=!0,this.isMobile&&console.log("Mobile device detected - audio will be enabled after user interaction")}catch(e){console.warn("Audio context initialization failed:",e)}})}preloadSounds(){return m(this,null,function*(){const e=[{id:"wood_chop",src:"/sounds/wood_chop.mp3",category:"sfx"},{id:"stone_crack",src:"/sounds/stone_crack.mp3",category:"sfx"},{id:"metal_clang",src:"/sounds/metal_clang.mp3",category:"sfx"},{id:"gear_click",src:"/sounds/gear_click.mp3",category:"sfx"},{id:"circuit_buzz",src:"/sounds/circuit_buzz.mp3",category:"sfx"},{id:"steel_forge",src:"/sounds/steel_forge.mp3",category:"sfx"},{id:"plastic_pop",src:"/sounds/plastic_pop.mp3",category:"sfx"},{id:"glass_tinkle",src:"/sounds/glass_tinkle.mp3",category:"sfx"},{id:"computer_beep",src:"/sounds/computer_beep.mp3",category:"sfx"},{id:"robot_whir",src:"/sounds/robot_whir.mp3",category:"sfx"},{id:"quantum_hum",src:"/sounds/quantum_hum.mp3",category:"sfx"},{id:"nanite_swarm",src:"/sounds/nanite_swarm.mp3",category:"sfx"},{id:"fusion_pulse",src:"/sounds/fusion_pulse.mp3",category:"sfx"},{id:"antimatter_crackle",src:"/sounds/antimatter_crackle.mp3",category:"sfx"},{id:"singularity_whisper",src:"/sounds/singularity_whisper.mp3",category:"sfx"},{id:"building_place",src:"/sounds/building_place.mp3",category:"sfx"},{id:"building_upgrade",src:"/sounds/building_upgrade.mp3",category:"sfx"},{id:"storage_full",src:"/sounds/storage_full.mp3",category:"sfx"},{id:"research_complete",src:"/sounds/research_complete.mp3",category:"sfx"},{id:"achievement_pop",src:"/sounds/achievement_pop.mp3",category:"sfx"},{id:"prestige_available",src:"/sounds/prestige_available.mp3",category:"sfx"},{id:"prestige_confirm",src:"/sounds/prestige_confirm.mp3",category:"sfx"},{id:"prestige_execute",src:"/sounds/prestige_execute.mp3",category:"sfx"},{id:"prestige_complete",src:"/sounds/prestige_complete.mp3",category:"sfx"},{id:"trade_offer",src:"/sounds/trade_offer.mp3",category:"sfx"},{id:"trade_complete",src:"/sounds/trade_complete.mp3",category:"sfx"},{id:"trade_failed",src:"/sounds/trade_failed.mp3",category:"sfx"},{id:"market_fluctuation",src:"/sounds/market_fluctuation.mp3",category:"sfx"},{id:"button_click",src:"/sounds/button_click.mp3",category:"ui"},{id:"tab_switch",src:"/sounds/tab_switch.mp3",category:"ui"},{id:"menu_open",src:"/sounds/menu_open.mp3",category:"ui"},{id:"menu_close",src:"/sounds/menu_close.mp3",category:"ui"},{id:"notification",src:"/sounds/notification.mp3",category:"ui"},{id:"error",src:"/sounds/error.mp3",category:"ui"},{id:"success",src:"/sounds/success.mp3",category:"ui"},{id:"combo_start",src:"/sounds/combo_start.mp3",category:"sfx"},{id:"combo_build",src:"/sounds/combo_build.mp3",category:"sfx"},{id:"combo_break",src:"/sounds/combo_break.mp3",category:"sfx"},{id:"critical_hit",src:"/sounds/critical_hit.mp3",category:"sfx"},{id:"multi_click",src:"/sounds/multi_click.mp3",category:"sfx"},{id:"particle_effect",src:"/sounds/particle_effect.mp3",category:"sfx"},{id:"gear_animation",src:"/sounds/gear_animation.mp3",category:"sfx"},{id:"resource_float",src:"/sounds/resource_float.mp3",category:"sfx"},{id:"sparkle_effect",src:"/sounds/sparkle_effect.mp3",category:"sfx"},{id:"level_up",src:"/sounds/level_up.mp3",category:"sfx"},{id:"milestone_reached",src:"/sounds/milestone_reached.mp3",category:"sfx"},{id:"new_era",src:"/sounds/new_era.mp3",category:"sfx"},{id:"breakthrough",src:"/sounds/breakthrough.mp3",category:"sfx"},{id:"sound_toggle",src:"/sounds/sound_toggle.mp3",category:"ui"},{id:"music_toggle",src:"/sounds/music_toggle.mp3",category:"ui"},{id:"settings_save",src:"/sounds/settings_save.mp3",category:"ui"},{id:"reset_confirm",src:"/sounds/reset_confirm.mp3",category:"ui"}],t=[{id:"factory_dawn",src:"/music/factory_dawn.mp3",volume:.7,loop:!0},{id:"metal_forge",src:"/music/metal_forge.mp3",volume:.7,loop:!0},{id:"circuit_symphony",src:"/music/circuit_symphony.mp3",volume:.7,loop:!0},{id:"quantum_resonance",src:"/music/quantum_resonance.mp3",volume:.7,loop:!0},{id:"singularity_ascension",src:"/music/singularity_ascension.mp3",volume:.7,loop:!0},{id:"prestige_triumph",src:"/music/prestige_triumph.mp3",volume:.8,loop:!1},{id:"achievement_unlocked",src:"/music/achievement_unlocked.mp3",volume:.6,loop:!1},{id:"research_breakthrough",src:"/music/research_breakthrough.mp3",volume:.7,loop:!1},{id:"trading_prosperity",src:"/music/trading_prosperity.mp3",volume:.7,loop:!0},{id:"factory_management",src:"/music/factory_management.mp3",volume:.6,loop:!0},{id:"statistics_suite",src:"/music/statistics_suite.mp3",volume:.6,loop:!0}];for(const n of e)yield this.preloadSound(n);for(const n of t)yield this.preloadMusic(n)})}preloadSound(e){return m(this,null,function*(){try{let t=e.src;t="./"+e.src.replace(/^\//,"");const n=new Audio(t);n.preload="auto",n.volume=(e.volume||1)*this.getCategoryVolume(e.category),n.style.display="none",document.body.appendChild(n),this.isMobile&&(n.muted=!0,n.playsInline=!0,n.setAttribute("webkit-playsinline","true"),n.setAttribute("x-webkit-airplay","deny")),n.addEventListener("error",n=>{console.warn(`Audio loading failed for ${e.id}:`,n),console.warn(`Attempted to load: ${t}`),console.warn(`Current location: ${window.location.href}`)}),n.addEventListener("canplaythrough",()=>{console.log(`Audio loaded successfully: ${e.id}`)}),this.sounds.set(e.id,n)}catch(t){console.warn(`Failed to preload sound: ${e.id}`,t),console.warn(`Attempted path: ${e.src}`)}})}preloadMusic(e){return m(this,null,function*(){try{let t=e.src;t="./"+e.src.replace(/^\//,"");const n=new Audio(t);n.preload="auto",n.volume=e.volume*this.settings.musicVolume*this.settings.masterVolume,n.loop=e.loop,n.style.display="none",document.body.appendChild(n),this.isMobile&&(n.muted=!0,n.playsInline=!0,n.setAttribute("webkit-playsinline","true"),n.setAttribute("x-webkit-airplay","deny")),n.addEventListener("error",n=>{console.warn(`Music loading failed for ${e.id}:`,n),console.warn(`Attempted to load: ${t}`),console.warn(`Current location: ${window.location.href}`)}),n.addEventListener("canplaythrough",()=>{console.log(`Music loaded successfully: ${e.id}`)}),this.musicTracks.set(e.id,n)}catch(t){console.warn(`Failed to preload music: ${e.id}`,t),console.warn(`Attempted path: ${e.src}`)}})}playSound(e){return m(this,null,function*(){var t;if(!this.isInitialized)return;if(this.isMobile&&!this.hasUserInteracted)return void console.log("Sound blocked - waiting for user interaction on mobile");const n=this.getSoundCategory(e);if("sfx"===n&&!this.settings.sfxEnabled)return;if("ui"===n&&!this.settings.uiEnabled)return;if("music"===n&&!this.settings.musicEnabled)return;const r=this.sounds.get(e);if(r)try{this.isMobile&&(yield this.resumeAudioContext()),r.currentTime=0,r.volume=this.getSoundVolume(e),this.isMobile&&this.hasUserInteracted&&(r.muted=!1),this.isMobile&&(r.playsInline=!0,r.setAttribute("webkit-playsinline","true")),yield r.play()}catch(s){if(console.warn(`Failed to play sound: ${e}`,s),this.isMobile&&"suspended"===(null==(t=this.audioContext)?void 0:t.state))try{yield this.resumeAudioContext(),yield r.play()}catch(i){console.warn(`Retry failed for sound: ${e}`,i)}}else console.warn(`Sound not found: ${e}`)})}playMusic(e,t=1e3){return m(this,null,function*(){var n;if(!this.isInitialized||!this.settings.musicEnabled)return;if(this.currentMusicTrack===e&&this.currentBackgroundMusic)return;if(this.isMobile&&!this.hasUserInteracted)return void console.log("Music blocked - waiting for user interaction on mobile");const r=this.musicTracks.get(e);if(r)try{this.currentBackgroundMusic&&this.fadeOut(this.currentBackgroundMusic,1e3),this.isMobile&&(yield this.resumeAudioContext()),r.currentTime=0;const n=this.getMusicVolume();console.log(`Target music volume: ${n} (master: ${this.settings.masterVolume}, music: ${this.settings.musicVolume})`),r.volume=0,this.isMobile&&this.hasUserInteracted&&(r.muted=!1),yield r.play(),this.fadeInToVolume(r,n,t),this.currentBackgroundMusic=r,this.currentMusicTrack=e,console.log(`Now playing background music: ${e}`)}catch(s){if(console.warn(`Failed to play music: ${e}`,s),this.isMobile&&"suspended"===(null==(n=this.audioContext)?void 0:n.state))try{yield this.resumeAudioContext(),yield r.play(),this.fadeInToVolume(r,this.getMusicVolume(),t),this.currentBackgroundMusic=r,this.currentMusicTrack=e}catch(i){console.warn(`Retry failed for music: ${e}`,i)}}})}playLayeredMusic(e,t,n=.5){return m(this,null,function*(){var r;if(!this.isInitialized||!this.settings.musicEnabled)return;if(this.isMobile&&!this.hasUserInteracted)return void console.log("Layered music blocked - waiting for user interaction on mobile");const s=this.musicTracks.get(t);if(s)try{this.isMobile&&(yield this.resumeAudioContext());let t=s.src;t="./"+s.src.replace(/^\//,"");const r=new Audio(t);r.volume=n*this.settings.musicVolume*this.settings.masterVolume,r.loop=s.loop,r.style.display="none",document.body.appendChild(r),this.isMobile&&(this.hasUserInteracted?r.muted=!1:r.muted=!0,r.playsInline=!0,r.setAttribute("webkit-playsinline","true"),r.setAttribute("x-webkit-airplay","deny")),yield r.play(),this.currentMusicLayers.set(e,r)}catch(i){if(console.warn(`Failed to play music layer: ${t}`,i),this.isMobile&&"suspended"===(null==(r=this.audioContext)?void 0:r.state))try{yield this.resumeAudioContext();let t=s.src;t="./"+s.src.replace(/^\//,"");const r=new Audio(t);r.volume=n*this.settings.musicVolume*this.settings.masterVolume,r.loop=s.loop,r.style.display="none",document.body.appendChild(r),this.hasUserInteracted&&(r.muted=!1),r.playsInline=!0,r.setAttribute("webkit-playsinline","true"),r.setAttribute("x-webkit-airplay","deny"),yield r.play(),this.currentMusicLayers.set(e,r)}catch(a){console.warn(`Retry failed for music layer: ${t}`,a)}}})}stopMusic(e=1e3){this.musicTracks.forEach(t=>{this.fadeOut(t,e)})}stopMusicLayer(e,t=1e3){const n=this.currentMusicLayers.get(e);n&&(this.fadeOut(n,t),this.currentMusicLayers.delete(e))}stopAllMusicLayers(e=1e3){this.currentMusicLayers.forEach(t=>{this.fadeOut(t,e)}),this.currentMusicLayers.clear()}getMusicVolume(){return this.settings.musicVolume*this.settings.masterVolume}fadeInToVolume(e,t,n){const r=Date.now(),s=setInterval(()=>{const i=Date.now()-r,a=Math.min(i/n,1);e.volume=0+(t-0)*a,a>=1&&(clearInterval(s),console.log(`Fade-in complete. Final volume: ${e.volume}`))},16)}fadeOut(e,t){const n=e.volume,r=Date.now(),s=setInterval(()=>{const i=Date.now()-r,a=Math.min(i/t,1);e.volume=n*(1-a),a>=1&&(e.pause(),clearInterval(s))},16)}getCategoryVolume(e){switch(e){case"music":return this.settings.musicVolume*this.settings.masterVolume;case"sfx":return this.settings.sfxVolume*this.settings.masterVolume;case"ui":return this.settings.uiVolume*this.settings.masterVolume;default:return this.settings.masterVolume}}getSoundCategory(e){return["button_click","tab_switch","menu_open","menu_close","notification","error","success","sound_toggle","music_toggle","settings_save","reset_confirm"].includes(e)?"ui":e.includes("music_")||e.includes("_music")?"music":"sfx"}getSoundVolume(e){if(!this.sounds.get(e))return 0;const t=this.getSoundCategory(e);return this.getCategoryVolume(t)}updateSettings(e){this.settings=u(u({},this.settings),e),this.updateAllVolumes()}getSettings(){return u({},this.settings)}syncFromGameState(e){this.settings=u({},e),this.updateAllVolumes()}updateAllVolumes(){this.sounds.forEach((e,t)=>{e.volume=this.getSoundVolume(t)}),this.musicTracks.forEach(e=>{e.volume=e.volume*this.settings.musicVolume*this.settings.masterVolume}),this.currentMusicLayers.forEach(e=>{e.volume=e.volume*this.settings.musicVolume*this.settings.masterVolume})}getCurrentMusicTrack(){return this.currentMusicTrack}startBackgroundMusic(){return m(this,null,function*(){!this.currentMusicTrack&&this.hasUserInteracted?yield this.playMusic("factory_dawn",2e3):this.hasUserInteracted||console.log("Background music delayed - waiting for user interaction")})}startBackgroundMusicAfterInteraction(){return m(this,null,function*(){if(this.audioContext&&"suspended"===this.audioContext.state&&(yield this.resumeAudioContext(),console.log("Audio context resumed for music playback")),!this.currentMusicTrack){let t=3;for(;t>0;)try{yield this.playMusic("factory_dawn",2e3);break}catch(e){if(console.warn(`Music start attempt failed (${4-t}/3):`,e),t--,!(t>0))throw console.error("Failed to start background music after 3 attempts"),e;yield new Promise(e=>setTimeout(e,200))}}})}switchToProgressiveMusic(e){return m(this,null,function*(){console.log(`Switching to progressive music: ${e}`),yield this.playMusic(e,2e3)})}toggleMusic(){this.settings.musicEnabled=!this.settings.musicEnabled,this.settings.musicEnabled?this.currentBackgroundMusic&&this.currentMusicTrack&&this.currentBackgroundMusic.play().catch(e=>{console.warn("Failed to resume background music:",e)}):(this.stopAllMusicLayers(500),this.currentBackgroundMusic&&this.currentBackgroundMusic.pause())}toggleSFX(){this.settings.sfxEnabled=!this.settings.sfxEnabled}toggleUI(){this.settings.uiEnabled=!this.settings.uiEnabled}setMasterVolume(e){this.settings.masterVolume=Math.max(0,Math.min(1,e)),this.updateAllVolumes()}setMusicVolume(e){this.settings.musicVolume=Math.max(0,Math.min(1,e)),this.updateAllVolumes()}setSFXVolume(e){this.settings.sfxVolume=Math.max(0,Math.min(1,e)),this.updateAllVolumes()}setUIVolume(e){this.settings.uiVolume=Math.max(0,Math.min(1,e)),this.updateAllVolumes()}cleanup(){this.sounds.forEach(e=>{e.pause(),e.currentTime=0,e.parentNode&&e.parentNode.removeChild(e)}),this.musicTracks.forEach(e=>{e.pause(),e.currentTime=0,e.parentNode&&e.parentNode.removeChild(e)}),this.currentMusicLayers.forEach(e=>{e.pause(),e.currentTime=0,e.parentNode&&e.parentNode.removeChild(e)}),this.currentMusicLayers.clear()}};h(Ld,"instance");let Fd=Ld;const Od=G.createContext(null),Id=()=>{const e=G.useContext(Od);if(!e)throw new Error("useSound must be used within a SoundProvider");return e},Dd=({children:t})=>{const[n]=G.useState(()=>Fd.getInstance()),[r,s]=G.useState(n.getSettings()),[i,a]=G.useState(!1),[o,l]=G.useState(null);G.useEffect(()=>{m(e,null,function*(){if(yield n.initialize(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){const e=()=>{const t=n.audioContext;t&&"running"===t.state&&(a(!0),document.removeEventListener("click",e),document.removeEventListener("touchstart",e))};document.addEventListener("click",e,{passive:!0}),document.addEventListener("touchstart",e,{passive:!0})}else a(!0)})},[n]);const c={soundManager:n,settings:r,updateSettings:e=>{n.updateSettings(e);const t=n.getSettings();s(t),o&&o(t)},syncSettingsFromGameState:e=>{n.syncFromGameState(e),s(n.getSettings())},setOnSettingsChange:e=>{l(()=>e)},playSound:t=>m(e,null,function*(){yield n.playSound(t)}),playMusic:(t,r=1e3)=>m(e,null,function*(){yield n.playMusic(t,r)}),playLayeredMusic:(t,r,s=.5)=>m(e,null,function*(){yield n.playLayeredMusic(t,r,s)}),stopMusic:(e=1e3)=>{n.stopMusic(e)},stopMusicLayer:(e,t=1e3)=>{n.stopMusicLayer(e,t)},startBackgroundMusic:()=>m(e,null,function*(){yield n.startBackgroundMusic()}),startBackgroundMusicAfterInteraction:()=>m(e,null,function*(){yield n.startBackgroundMusicAfterInteraction()}),switchToProgressiveMusic:t=>m(e,null,function*(){yield n.switchToProgressiveMusic(t)}),getCurrentMusicTrack:()=>n.getCurrentMusicTrack(),toggleMusic:()=>{n.toggleMusic();const e=n.getSettings();s(e),o&&o(e)},toggleSFX:()=>{n.toggleSFX();const e=n.getSettings();s(e),o&&o(e)},toggleUI:()=>{n.toggleUI();const e=n.getSettings();s(e),o&&o(e)},setMasterVolume:e=>{n.setMasterVolume(e);const t=n.getSettings();s(t),o&&o(t)},setMusicVolume:e=>{n.setMusicVolume(e);const t=n.getSettings();s(t),o&&o(t)},setSFXVolume:e=>{n.setSFXVolume(e);const t=n.getSettings();s(t),o&&o(t)},setUIVolume:e=>{n.setUIVolume(e);const t=n.getSettings();s(t),o&&o(t)},isMobileAudioReady:i};return ne.jsx(Od.Provider,{value:c,children:t})},zd=()=>{const{playSound:t}=Id();return{playButtonClick:()=>m(e,null,function*(){return yield t("button_click")}),playTabSwitch:()=>m(e,null,function*(){return yield t("tab_switch")}),playMenuOpen:()=>m(e,null,function*(){return yield t("menu_open")}),playMenuClose:()=>m(e,null,function*(){return yield t("menu_close")}),playNotification:()=>m(e,null,function*(){return yield t("notification")}),playError:()=>m(e,null,function*(){return yield t("error")}),playSuccess:()=>m(e,null,function*(){return yield t("success")})}},qd=Y.createContext(null);let $d=null;const Bd=e=>{$d=e},Hd=(e,t,n,r)=>!!$d&&($d(e,t,n,r),!0),Wd=()=>{const e=Y.useContext(qd);if(!e)throw new Error("useEffects must be used within an EffectManagerProvider");return e},Ud=({children:t})=>{const[n,r]=G.useState([]),[s,i]=G.useState(null),{playParticleEffect:a,playResourceFloat:o,playSparkleEffect:l}=(()=>{const{playSound:t}=Id();return{playParticleEffect:()=>m(e,null,function*(){return yield t("particle_effect")}),playGearAnimation:()=>m(e,null,function*(){return yield t("gear_animation")}),playResourceFloat:()=>m(e,null,function*(){return yield t("resource_float")}),playSparkleEffect:()=>m(e,null,function*(){return yield t("sparkle_effect")})}})();G.useEffect(()=>{let e=document.getElementById("effects-container");return e||(e=document.createElement("div"),e.id="effects-container",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.pointerEvents="none",e.style.zIndex="9999",document.body.appendChild(e)),i(e),()=>{e&&e.parentNode&&e.parentNode.removeChild(e)}},[]),G.useEffect(()=>{const e=setInterval(()=>{const e=Date.now();r(t=>t.filter(t=>e-t.createdAt<t.duration))},100);return()=>clearInterval(e)},[]);const c=(e,t,n,s)=>{const i=`effect-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;switch(e){case"resource-collect":o();break;case"research-complete":case"achievement-unlock":l();break;case"building-upgrade":a()}let c="",u=1500;switch(e){case"resource-collect":c="from-green-500 to-green-300";break;case"research-complete":c="from-purple-500 to-indigo-300";break;case"building-upgrade":c="from-blue-500 to-cyan-300";break;case"achievement-unlock":c="from-yellow-400 to-orange-400",u=2500}r(r=>[...r,{id:i,type:e,x:t,y:n,content:s,color:c,createdAt:Date.now(),duration:u}]),console.log(`Added effect: ${e} at (${t}, ${n}) with content "${s}" (duration: ${u}ms)`)};return G.useEffect(()=>(Bd(c),()=>{Bd(()=>{})}),[]),ne.jsxs(qd.Provider,{value:{addEffect:c},children:[t,s&&ne.jsx(Vd,{effects:n,container:s})]})},Vd=({effects:e,container:t})=>ld.createPortal(ne.jsx("div",{className:"effects-wrapper",children:e.map(e=>ne.jsx(Gd,{effect:e},e.id))}),t),Gd=({effect:e})=>{const[t,n]=G.useState(0),[r,s]=G.useState(!0);G.useEffect(()=>{const t=e.createdAt,r=requestAnimationFrame(function r(){const s=Date.now(),i=Math.min((s-t)/e.duration,1);n(i),i<1&&requestAnimationFrame(r)});return()=>cancelAnimationFrame(r)},[e.createdAt,e.duration]);let i={},a="resource";switch(e.type){case"resource-collect":i={transform:`translate(${e.x}px, ${e.y-100*t}px) scale(${1-.5*t})`,opacity:1-t},a="resource";break;case"research-complete":i={transform:`translate(${e.x}px, ${e.y}px) scale(${1+1.5*t})`,opacity:1-t},a="research";break;case"building-upgrade":i={transform:`translate(${e.x}px, ${e.y-60*t}px) scale(${1+.3*t})`,opacity:1-t},a="building";break;case"achievement-unlock":const n=1.2+.15*Math.sin(t*Math.PI*6),r=.7,s=t<r?1:1-(t-r)/(1-r);i={transform:`translate(${e.x}px, ${e.y-120*t}px) scale(${n})`,opacity:s,textShadow:"0 0 10px currentColor, 0 0 20px currentColor, 0 0 30px currentColor"},a="research"}return ne.jsxs(ne.Fragment,{children:[r&&ne.jsx(Ad,{x:e.x,y:e.y,type:a,onComplete:()=>s(!1)}),ne.jsx("div",{className:`fixed pointer-events-none z-50 font-bold bg-gradient-to-r ${e.color} px-3 py-2 rounded-xl shadow-2xl ${"resource-collect"===e.type?"text-green-100 text-sm":"achievement-unlock"===e.type?"text-yellow-100 text-lg border-2 border-yellow-300":"text-white"}`,style:d(u({},i),{left:0,top:0,transformOrigin:"center center",filter:"achievement-unlock"===e.type?"drop-shadow(0 0 10px rgba(255,215,0,0.8))":"none"}),children:e.content})]})},Yd=new class{constructor(){h(this,"achievements",new Map)}register(e){this.achievements.set(e.id,e)}getAll(){return Array.from(this.achievements.values())}getById(e){return this.achievements.get(e)}getByCategory(e){return Array.from(this.achievements.values()).filter(t=>t.category===e)}checkAll(e){const t=[];return this.achievements.forEach(n=>{e.achievements.unlocked.includes(n.id)||n.condition(e)&&t.push(n.id)}),t}};Yd.register({id:"first_click",name:"First Click",description:"Click to gather your first resource",icon:"",category:"production",rarity:"common",points:1,condition:e=>e.statistics.totalResourcesProduced.wood>0}),Yd.register({id:"wood_collector",name:"Wood Collector",description:"Gather 100 wood",iconImage:gd("wood"),category:"production",rarity:"common",points:5,condition:e=>e.statistics.totalResourcesProduced.wood>=100,progress:e=>e.statistics.totalResourcesProduced.wood,maxProgress:100}),Yd.register({id:"stone_collector",name:"Stone Collector",description:"Gather 100 stone",iconImage:gd("stone"),category:"production",rarity:"common",points:5,condition:e=>e.statistics.totalResourcesProduced.stone>=100,progress:e=>e.statistics.totalResourcesProduced.stone,maxProgress:100}),Yd.register({id:"iron_collector",name:"Iron Collector",description:"Gather 100 iron",iconImage:gd("iron"),category:"production",rarity:"uncommon",points:10,condition:e=>e.statistics.totalResourcesProduced.iron>=100,progress:e=>e.statistics.totalResourcesProduced.iron,maxProgress:100}),Yd.register({id:"mass_producer",name:"Mass Producer",description:"Produce 10,000 total resources",icon:"",category:"production",rarity:"rare",points:25,condition:e=>Object.values(e.statistics.totalResourcesProduced).reduce((e,t)=>e+t,0)>=1e4,progress:e=>Object.values(e.statistics.totalResourcesProduced).reduce((e,t)=>e+t,0),maxProgress:1e4}),Yd.register({id:"first_building",name:"First Building",description:"Construct your first building",icon:"",category:"building",rarity:"common",points:5,condition:e=>Object.values(e.buildings).some(e=>e.level>0)}),Yd.register({id:"building_master",name:"Building Master",description:"Reach level 10 with any building",icon:"",category:"building",rarity:"uncommon",points:15,condition:e=>Object.values(e.buildings).some(e=>e.level>=10)}),Yd.register({id:"factory_owner",name:"Factory Owner",description:"Have 5 buildings at level 5 or higher",icon:"",category:"building",rarity:"rare",points:30,condition:e=>Object.values(e.buildings).filter(e=>e.level>=5).length>=5}),Yd.register({id:"first_research",name:"First Research",description:"Complete your first research project",icon:"",category:"research",rarity:"common",points:10,condition:e=>e.statistics.researchCompleted.length>=1}),Yd.register({id:"researcher",name:"Researcher",description:"Complete 10 research projects",icon:"",category:"research",rarity:"uncommon",points:25,condition:e=>e.statistics.researchCompleted.length>=10,progress:e=>e.statistics.researchCompleted.length,maxProgress:10}),Yd.register({id:"scientist",name:"Scientist",description:"Complete 25 research projects",icon:"",category:"research",rarity:"rare",points:50,condition:e=>e.statistics.researchCompleted.length>=25,progress:e=>e.statistics.researchCompleted.length,maxProgress:25}),Yd.register({id:"first_prestige",name:"First Prestige",description:"Perform your first prestige",icon:"",category:"prestige",rarity:"uncommon",points:20,condition:e=>e.prestige.level>0}),Yd.register({id:"prestige_master",name:"Prestige Master",description:"Reach prestige level 5",icon:"",category:"prestige",rarity:"rare",points:50,condition:e=>e.prestige.level>=5,progress:e=>e.prestige.level,maxProgress:5}),Yd.register({id:"first_trade",name:"First Trade",description:"Complete your first trade",icon:"",category:"trading",rarity:"common",points:5,condition:e=>e.statistics.tradesCompleted>=1}),Yd.register({id:"trader",name:"Trader",description:"Complete 50 trades",icon:"",category:"trading",rarity:"uncommon",points:20,condition:e=>e.statistics.tradesCompleted>=50,progress:e=>e.statistics.tradesCompleted,maxProgress:50}),Yd.register({id:"playtime_1h",name:"Dedicated Player",description:"Play for 1 hour",icon:"",category:"milestone",rarity:"common",points:10,condition:e=>e.statistics.playTime>=3600,progress:e=>e.statistics.playTime,maxProgress:3600}),Yd.register({id:"playtime_10h",name:"Hardcore Player",description:"Play for 10 hours",icon:"",category:"milestone",rarity:"rare",points:50,condition:e=>e.statistics.playTime>=36e3,progress:e=>e.statistics.playTime,maxProgress:36e3}),Yd.register({id:"click_master",name:"Click Master",description:"Reach 100 click power",icon:"",category:"special",rarity:"epic",points:75,condition:e=>e.clickPower>=100,progress:e=>e.clickPower,maxProgress:100}),Yd.register({id:"storage_king",name:"Storage King",description:"Have 10,000 total storage capacity",icon:"",category:"special",rarity:"rare",points:40,condition:e=>Object.values(e.resources).reduce((e,t)=>e+t.storageLimit,0)>=1e4,progress:e=>Object.values(e.resources).reduce((e,t)=>e+t.storageLimit,0),maxProgress:1e4}),Yd.register({id:"speed_clicker",name:"Speed Clicker",description:"Click 100 times in 10 seconds",icon:"",category:"special",rarity:"legendary",points:100,condition:e=>!1,hidden:!0}),Yd.register({id:"easter_egg",name:"Easter Egg",description:"Find the hidden achievement",icon:"",category:"special",rarity:"legendary",points:25,condition:e=>!1,secret:!0});const Qd="factoryflow_save.json",Xd={FIRST_CLICK:"first_click",WOOD_COLLECTOR:"wood_collector",STONE_COLLECTOR:"stone_collector",IRON_COLLECTOR:"iron_collector",MASS_PRODUCER:"mass_producer",FIRST_BUILDING:"first_building",BUILDING_MASTER:"building_master",FACTORY_OWNER:"factory_owner",FIRST_RESEARCH:"first_research",RESEARCHER:"researcher",SCIENTIST:"scientist",FIRST_PRESTIGE:"first_prestige",PRESTIGE_MASTER:"prestige_master",FIRST_TRADE:"first_trade",TRADER:"trader",PLAYTIME_1H:"playtime_1h",PLAYTIME_10H:"playtime_10h",CLICK_MASTER:"click_master",STORAGE_KING:"storage_king",SPEED_CLICKER:"speed_clicker",EASTER_EGG:"easter_egg"},Kd=()=>{var e;return"undefined"!=typeof window&&!0===(null==(e=window.electronAPI)?void 0:e.isElectron)},Jd=()=>{var e;return null==(e=window.electronAPI)?void 0:e.steam},Zd=()=>{const e=Jd();return Kd()&&!0===(null==e?void 0:e.isAvailable())},eh=t=>m(e,null,function*(){if(!Zd())return console.log(`Steam: Achievement unlock skipped - Steam not available: ${t}`),!1;const e=Jd();if(!e)return!1;const n=(r=t,{first_click:Xd.FIRST_CLICK,wood_collector:Xd.WOOD_COLLECTOR,stone_collector:Xd.STONE_COLLECTOR,iron_collector:Xd.IRON_COLLECTOR,mass_producer:Xd.MASS_PRODUCER,first_building:Xd.FIRST_BUILDING,building_master:Xd.BUILDING_MASTER,factory_owner:Xd.FACTORY_OWNER,first_research:Xd.FIRST_RESEARCH,researcher:Xd.RESEARCHER,scientist:Xd.SCIENTIST,first_prestige:Xd.FIRST_PRESTIGE,prestige_master:Xd.PRESTIGE_MASTER,first_trade:Xd.FIRST_TRADE,trader:Xd.TRADER,playtime_1h:Xd.PLAYTIME_1H,playtime_10h:Xd.PLAYTIME_10H,click_master:Xd.CLICK_MASTER,storage_king:Xd.STORAGE_KING,speed_clicker:Xd.SPEED_CLICKER,easter_egg:Xd.EASTER_EGG}[r]||r);var r;console.log(`Steam: Mapping achievement ${t} -> ${n}`);try{if(e.getAchievement(n))return console.log(`Steam: Achievement already unlocked: ${n} (game: ${t})`),!0;const r=e.setAchievement(n),s=e.storeStats();return console.log(`Steam: Achievement unlocked: ${n} (game: ${t}), setResult: ${r}, storeResult: ${s}`),r}catch(s){return console.error(`Steam: Achievement unlock failed: ${n} (game: ${t})`,s),!1}}),th=G.createContext(void 0),nh=({children:t})=>{const[n,r]=G.useState(!1),[s,i]=G.useState(!1),[a,o]=G.useState(null);G.useEffect(()=>{m(e,null,function*(){let t=!1;try{if(t=yield m(e,null,function*(){if(!Kd())return console.log("Steam: Not running in Electron, Steam features disabled"),!1;const e=Jd();if(!e)return console.log("Steam: Steam API not available from preload script"),!1;if("function"!=typeof e.isAvailable)return console.error("Steam: isAvailable is not a function"),!1;try{if(e.isAvailable()){console.log("Steam: Initialized successfully via preload script");try{"function"==typeof e.requestCurrentStats&&e.requestCurrentStats()}catch(t){console.error("Steam: Failed to request current stats:",t)}return!0}return console.log("Steam: Steam client not available (Steam may not be running)"),!1}catch(t){return console.error("Steam: Error checking Steam availability:",t),!1}}),t){try{const e=(()=>{if(!Kd())return!1;const e=Jd();if(!e)return!1;try{return e.isAvailable()&&e.isLoggedOn()}catch(t){return!1}})();i(e)}catch(n){i(!1)}try{const e=(()=>{if(!Zd())return null;const e=Jd();if(!e)return null;try{return{steamId:e.getSteamId()||"Unknown",playerName:e.getPlayerName()||"Unknown",isLoggedOn:e.isLoggedOn()}}catch(t){return console.error("Steam: Error getting user info:",t),null}})();o(e)}catch(s){o(null)}r(!0),console.log("Steam: Context initialized successfully")}else r(!1)}catch(a){console.error("Steam: Error initializing context:",a),r(!!t)}});const t=()=>{console.log("Steam: Cleaning up Steam context"),console.log("Steam: Callback polling managed by preload script")};return window.addEventListener("beforeunload",t),()=>{t(),window.removeEventListener("beforeunload",t)}},[]);const l={isSteamEnabled:n,isSteamRunning:s,steamUserInfo:a,steamSaveGame:t=>m(e,null,function*(){return Zd()?yield(t=>m(e,null,function*(){if(!Zd())return console.log("Steam: Cloud save skipped - Steam not available"),!1;const e=Jd();if(!e)return!1;try{const n=JSON.stringify(t),r=Qd;return n&&0!==n.length?e.isCloudEnabled()?e.writeFile(r,n)?(console.log("Steam: Game saved to cloud successfully"),!0):(console.error("Steam: Cloud write operation failed"),!1):(console.log("Steam: Cloud save not enabled for user"),!1):(console.error("Steam: Invalid save data, skipping save"),!1)}catch(n){return console.error("Steam: Cloud save failed:",n),!1}}))(t):(console.log("Steam: Save skipped - Steam not available"),!1)}),steamLoadGame:()=>m(e,null,function*(){return Zd()?yield m(e,null,function*(){if(!Zd())return console.log("Steam: Cloud load skipped - Steam not available"),null;const e=Jd();if(!e)return null;try{const t=Qd;if(!e.isCloudEnabled())return console.log("Steam: Cloud load not enabled for user"),null;if(!e.fileExists(t))return console.log("Steam: No cloud save found"),null;const n=e.readFile(t);if(!n)return console.log("Steam: Cloud file exists but could not be read"),null;const r=JSON.parse(n);return console.log("Steam: Game loaded from cloud successfully"),r}catch(t){return console.error("Steam: Cloud load failed:",t),null}}):(console.log("Steam: Load skipped - Steam not available"),null)}),steamUnlockAchievement:t=>m(e,null,function*(){return Zd()?yield eh(t):(console.log(`Steam: Achievement unlock skipped - Steam not available: ${t}`),!1)}),steamSetAchievementProgress:(t,n,r)=>m(e,null,function*(){return Zd()?yield((t,n,r)=>m(e,null,function*(){return Zd()?n>=r?yield eh(t):(console.log(`Steam: Achievement progress: ${t} (${n}/${r})`),!0):(console.log(`Steam: Achievement progress skipped - Steam not available: ${t}`),!1)}))(t,n,r):(console.log(`Steam: Achievement progress skipped - Steam not available: ${t}`),!1)})};return ne.jsx(th.Provider,{value:l,children:t})},rh=({achievement:e,onComplete:t})=>{const[n,r]=G.useState(!1),[s,i]=G.useState("entering"),a=(e=>{switch(e){case"rare":return{primary:"from-blue-400 to-blue-600",glowClass:"shadow-blue-500/50",accent:"border-blue-400",bgGradient:"from-blue-900/20 to-blue-800/20"};case"epic":return{primary:"from-purple-400 to-purple-600",glowClass:"shadow-purple-500/50",accent:"border-purple-400",bgGradient:"from-purple-900/20 to-purple-800/20"};case"legendary":return{primary:"from-orange-400 to-orange-600",glowClass:"shadow-orange-500/50",accent:"border-orange-400",bgGradient:"from-orange-900/20 to-orange-800/20"};default:return{primary:"from-green-400 to-green-600",glowClass:"shadow-green-500/50",accent:"border-green-400",bgGradient:"from-green-900/20 to-green-800/20"}}})(e.rarity);return G.useEffect(()=>{r(!0),i("entering");const e=setTimeout(()=>{i("visible")},300),n=setTimeout(()=>{i("exiting")},3500),s=setTimeout(()=>{r(!1),t()},4e3);return()=>{clearTimeout(e),clearTimeout(n),clearTimeout(s)}},[t]),n?ne.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:[ne.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm transition-opacity duration-300 "+("visible"===s?"opacity-100":"opacity-0"),children:ne.jsx("div",{className:"absolute inset-0 opacity-10",children:ne.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${a.bgGradient} animate-pulse`})})}),ne.jsx("div",{className:`relative z-10 transition-all duration-500 ease-out ${(()=>{switch(s){case"entering":return"opacity-0 scale-50 translate-y-10";case"visible":return"opacity-100 scale-100 translate-y-0";case"exiting":return"opacity-0 scale-110 -translate-y-5";default:return"opacity-0"}})()}`,children:ne.jsxs("div",{className:`bg-gray-900/95 rounded-2xl p-8 border-2 ${a.accent} shadow-2xl ${a.glowClass} backdrop-blur-sm max-w-md mx-4`,children:[ne.jsxs("div",{className:"text-center mb-6",children:[e.iconImage?ne.jsx("img",{src:e.iconImage,alt:e.name,className:"w-16 h-16 mx-auto mb-4 animate-bounce object-contain"}):ne.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:e.icon||""}),ne.jsx("h2",{className:`text-2xl font-bold mb-2 bg-gradient-to-r ${a.primary} bg-clip-text text-transparent`,children:"Achievement Unlocked!"}),ne.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:e.name}),ne.jsx("p",{className:"text-sm text-gray-300 mb-3",children:e.description}),ne.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[ne.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r ${a.primary} text-white`,children:(o=e.rarity,o.charAt(0).toUpperCase()+o.slice(1))}),ne.jsxs("span",{className:"text-lg font-bold text-yellow-400",children:["+",e.points," points"]})]})]}),ne.jsx("div",{className:"flex justify-center space-x-4 mb-6",children:Array.from({length:5}).map((e,t)=>ne.jsx("div",{className:`w-2 h-2 rounded-full bg-gradient-to-r ${a.primary} animate-pulse`,style:{animationDelay:.15*t+"s"}},t))}),ne.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-2",children:ne.jsx("div",{className:`h-2 rounded-full bg-gradient-to-r ${a.primary} transition-all duration-3000 ease-out`,style:{width:"entering"===s?"0%":"100%",transitionDuration:"3500ms"}})})]})})]}):null;var o},sh=G.createContext(null),ih=({children:e})=>{const[t,n]=G.useState(null);return ne.jsxs(sh.Provider,{value:{showAchievementNotification:e=>{["rare","epic","legendary"].includes(e.rarity)&&n(e)}},children:[e,t&&ne.jsx(rh,{achievement:t,onComplete:()=>{n(null)}})]})},ah=()=>null,oh=G.createContext(void 0),lh=()=>{const e=G.useContext(oh);if(!e)throw new Error("useGame must be used within a GameProvider");return e},ch=(e,t)=>{if(e<=0)return 0;let n=0;for(let r=1;r<=e;r++){let e=1;r>200?e=10:r>100?e=5:r>25&&(e=2),n+=t*e}return n},uh=({children:t})=>{const{playSound:n,switchToProgressiveMusic:r,getCurrentMusicTrack:s,syncSettingsFromGameState:i,setOnSettingsChange:a}=Id(),{steamSaveGame:o,steamUnlockAchievement:l}=(()=>{const e=G.useContext(th);if(void 0===e)throw new Error("useSteam must be used within a SteamProvider");return e})(),{showAchievementNotification:c}=(()=>{const e=G.useContext(sh);if(!e)throw new Error("useAchievementNotifications must be used within AchievementNotificationProvider");return e})(),[h,g]=Y.useState(new Set),p=Y.useRef(new Set),f=Y.useRef(null),x=e=>{const t=structuredClone(e);t.unlockedFeatures||(t.unlockedFeatures=[]),Object.keys(Rd.research).forEach(e=>{t.research[e]||(t.research[e]=structuredClone(Rd.research[e]))}),Object.keys(Rd.research).forEach(e=>{const n=Rd.research[e];n.requiredResearch&&0!==n.requiredResearch.length||(t.research[e].unlocked=n.unlocked)});for(let r=0;r<5;r++)Object.keys(Rd.research).forEach(e=>{const n=Rd.research[e];n.requiredResearch&&n.requiredResearch.length>0&&n.requiredResearch.every(e=>t.research[e]&&t.research[e].completed)&&(t.research[e].unlocked=!0)});t.research.basicTrading&&t.research.basicTrading.completed&&t.research.mining&&t.research.mining.completed&&(t.research.improvedTrading.unlocked=!0),t.research.mining&&t.research.mining.completed&&(t.unlockedFeatures.includes("automation")||t.unlockedFeatures.push("automation")),t.research.metalworking&&t.research.metalworking.completed&&(t.unlockedFeatures.includes("advancedAutomation")||t.unlockedFeatures.push("advancedAutomation")),t.research.robotics&&t.research.robotics.completed&&(t.unlockedFeatures.includes("intelligentAutomation")||t.unlockedFeatures.push("intelligentAutomation")),t.research.basicComboSystem&&t.research.basicComboSystem.completed&&(t.unlockedFeatures.includes("basicCombo")||t.unlockedFeatures.push("basicCombo")),t.research.advancedClickMechanics&&t.research.advancedClickMechanics.completed&&(t.unlockedFeatures.includes("advancedClicking")||t.unlockedFeatures.push("advancedClicking")),t.research.multiClicking&&t.research.multiClicking.completed&&(t.unlockedFeatures.includes("multiClicking")||t.unlockedFeatures.push("multiClicking")),t.research.clickMastery&&t.research.clickMastery.completed&&(t.unlockedFeatures.includes("clickMastery")||t.unlockedFeatures.push("clickMastery")),t.research.comboMastery&&t.research.comboMastery.completed&&(t.unlockedFeatures.includes("comboMastery")||t.unlockedFeatures.push("comboMastery")),t.research.ultimateCombo&&t.research.ultimateCombo.completed&&(t.unlockedFeatures.includes("ultimateCombo")||t.unlockedFeatures.push("ultimateCombo")),t.research.massProduction&&t.research.massProduction.completed&&(t.unlockedFeatures.includes("massProduction")||t.unlockedFeatures.push("massProduction")),t.research.improvedTrading&&t.research.improvedTrading.completed&&t.research.metalworking&&t.research.metalworking.completed&&(t.research.advancedTrading.unlocked=!0),t.research.advancedTrading&&t.research.advancedTrading.completed&&t.research.electronics&&t.research.electronics.completed&&(t.research.globalTrading.unlocked=!0),Object.keys(t.research).forEach(e=>{if(t.research[e].completed){const n=Rd.research[e];n&&(n.unlocks.resources&&n.unlocks.resources.forEach(e=>{t.resources[e]&&(t.resources[e].unlocked=!0)}),n.unlocks.buildings&&n.unlocks.buildings.forEach(e=>{t.buildings[e]&&(t.buildings[e].unlocked=!0)}),n.unlocks.tradePairs&&n.unlocks.tradePairs.forEach(e=>{t.tradePairs[e]&&(t.tradePairs[e].unlocked=!0)}),n.unlocks.features&&n.unlocks.features.forEach(e=>{t.unlockedFeatures.includes(e)||t.unlockedFeatures.push(e)}))}}),t.research.mining&&t.research.mining.completed&&(t.unlockedFeatures.includes("automation")||t.unlockedFeatures.push("automation")),t.research.metalworking&&t.research.metalworking.completed&&(t.unlockedFeatures.includes("advancedAutomation")||t.unlockedFeatures.push("advancedAutomation")),t.research.robotics&&t.research.robotics.completed&&(t.unlockedFeatures.includes("intelligentAutomation")||t.unlockedFeatures.push("intelligentAutomation")),["ironManualGathering","copperManualGathering","gearManualGathering","steelManualGathering","circuitManualGathering","plasticManualGathering","glassManualGathering","robotManualGathering","quantumManualGathering","naniteManualGathering","fusionManualGathering","antimatterManualGathering","singularityManualGathering"].forEach(e=>{var n;const r=t.unlockedFeatures.indexOf(e);if(r>-1){const s={ironManualGathering:"manualMining",copperManualGathering:"manualMining",gearManualGathering:"manualMetalworking",steelManualGathering:"manualSteelwork",circuitManualGathering:"manualElectronics",plasticManualGathering:"manualMaterials",glassManualGathering:"manualMaterials",robotManualGathering:"manualRobotics",quantumManualGathering:"manualQuantum",naniteManualGathering:"manualNanotechnology",fusionManualGathering:"manualFusion",antimatterManualGathering:"manualAntimatter",singularityManualGathering:"manualSingularity"}[e];s&&(null==(n=t.research[s])?void 0:n.completed)||t.unlockedFeatures.splice(r,1)}});let n=1;return t.research.singularityClickPower&&t.research.singularityClickPower.completed?n=75:t.research.antimatterClickPower&&t.research.antimatterClickPower.completed?n=50:t.research.fusionClickPower&&t.research.fusionClickPower.completed?n=35:t.research.naniteClickPower&&t.research.naniteClickPower.completed?n=25:t.research.quantumClickPower&&t.research.quantumClickPower.completed?n=18:t.research.roboticClickPower&&t.research.roboticClickPower.completed?n=12:t.research.circuitClickPower&&t.research.circuitClickPower.completed?n=8:t.research.steelClickPower&&t.research.steelClickPower.completed?n=5:t.research.gearClickPower&&t.research.gearClickPower.completed?n=4:t.research.ironClickPower&&t.research.ironClickPower.completed?n=3:t.research.basicClickPower&&t.research.basicClickPower.completed&&(n=2),t.unlockedFeatures.includes("clickMastery")&&(n*=10),t.clickPower=n,t},b=(e,t=1)=>{const n=v.buildings[e];if(!n)return 0;const r=n.level;let s=0;for(let i=0;i<t;i++){const e=r+i;s+=3e3+e*Math.pow(e,1.1)*50}return s*=.5,s*=v.prestige.multipliers.buildingCooldownMultiplier,Math.floor(s)},y=e=>{const t=v.research[e];if(!t)return 0;const n=1e4+50*Object.values(t.cost).reduce((e,t)=>e+(t||0),0);let r=0;const s=(e,t=0)=>{if(!e||0===e.length)return t;let n=t;return e.forEach(e=>{const r=v.research[e];r&&r.requiredResearch&&(n=Math.max(n,s(r.requiredResearch,t+1)))}),n};t.requiredResearch&&(r=s(t.requiredResearch));const i=1+.2*r;return Math.floor(n*i)},[v,w]=G.useState(()=>{const e=localStorage.getItem("factoryFlowSave"),t=e?JSON.parse(e):Rd;if(e){if(t.tradePairs||(t.tradePairs=Rd.tradePairs),t.statistics.tradesCompleted||(t.statistics.tradesCompleted=0),t.statistics.resourcesTraded||(t.statistics.resourcesTraded={wood:0,stone:0,iron:0,copper:0,circuit:0,gear:0,steel:0,plastic:0,glass:0,computer:0,robot:0,quantum:0,nanite:0,fusion:0,antimatter:0,singularity:0}),t.prestige){void 0===t.prestige.bankedPrestigePoints&&(t.prestige.bankedPrestigePoints=0),t.prestige.multipliers?(void 0===t.prestige.multipliers.buildingCooldownMultiplier&&(t.prestige.multipliers.buildingCooldownMultiplier=1),void 0===t.prestige.multipliers.buildingCostMultiplier&&(t.prestige.multipliers.buildingCostMultiplier=1)):t.prestige.multipliers=Rd.prestige.multipliers,t.prestige.upgrades?(void 0===t.prestige.upgrades.buildingCooldownReduction&&(t.prestige.upgrades.buildingCooldownReduction=0),void 0===t.prestige.upgrades.buildingCostReduction&&(t.prestige.upgrades.buildingCostReduction=0)):t.prestige.upgrades=Rd.prestige.upgrades,t.prestige.multipliers.production=1+.02*t.prestige.upgrades.productionBonus,t.prestige.multipliers.storage=1+.03*t.prestige.upgrades.storageBonus,t.prestige.multipliers.clickPower=1+.03*t.prestige.upgrades.clickBonus;const e=Math.min(.01*t.prestige.upgrades.researchDiscount,.5);t.prestige.multipliers.researchCost=1-e,t.prestige.multipliers.buildingCooldownMultiplier=1-Math.min(.02*t.prestige.upgrades.buildingCooldownReduction,1);const n=Math.min(.01*t.prestige.upgrades.buildingCostReduction,.5);t.prestige.multipliers.buildingCostMultiplier=1-n}else t.prestige=Rd.prestige;if(Object.keys(Rd.resources).forEach(e=>{if(t.resources[e]){const n=t.resources[e];void 0===n.lockedAmount&&(n.lockedAmount=0)}else t.resources[e]=Rd.resources[e]}),Object.keys(Rd.buildings).forEach(e=>{if(t.buildings[e]){const n=Rd.buildings[e],r=t.buildings[e];r.production=u({},n.production),r.consumption=u({},n.consumption),void 0!==r.baseCost&&0!==Object.keys(r.baseCost).length||(r.baseCost=u({},n.baseCost)),void 0===r.costMultiplier&&(r.costMultiplier=n.costMultiplier),r.maxLevel=n.maxLevel,void 0===r.enabled&&(r.enabled=!0),n.storageBonus&&(r.storageBonus=u({},n.storageBonus))}else t.buildings[e]=Rd.buildings[e]}),Object.keys(Rd.research).forEach(e=>{if(t.research[e]){const n=Rd.research[e],r=t.research[e];r.completed||(r.cost=u({},n.cost))}else t.research[e]=Rd.research[e]}),t.achievements||(t.achievements=Rd.achievements),t.queues||(t.queues=Rd.queues),t.tutorial||(t.tutorial=Rd.tutorial),t.settings.sound||(t.settings.sound=Rd.settings.sound),t.boosters){const e=Date.now();t.boosters.active=t.boosters.active.filter(t=>t.expiresAt>e),t.boosters.inventory||(t.boosters.inventory={}),t.boosters.active||(t.boosters.active=[]),t.boosters.cooldowns||(t.boosters.cooldowns={}),t.boosters.unlocked||(t.boosters.unlocked=[])}else t.boosters=Rd.boosters;let e=x(t);e=(e=>{const t=structuredClone(e);return Object.keys(t.buildings).forEach(e=>{const n=t.buildings[e],r=Rd.buildings[e];if(r&&(r.storageBonus&&n.storageBonus&&(n.storageBonus.amountPerLevel=r.storageBonus.amountPerLevel,n.storageBonus.baseAmount=r.storageBonus.baseAmount),n.costMultiplier=r.costMultiplier,n.production=structuredClone(r.production),n.consumption=structuredClone(r.consumption),n.level>0)){const r=["woodcutter","stoneMine","ironMine","copperMine"],s=t.unlockedFeatures.includes("advancedMining")&&r.includes(e)?.9:1;Object.keys(n.baseCost).forEach(e=>{const t=e,r=n.baseCost[t];void 0!==r&&(n.cost[t]=Math.floor(r*(1+Math.pow(n.level,.99))*s))})}}),Object.keys(t.resources).forEach(e=>{const n=e;let r=t.resources[n].baseStorageLimit;Object.values(t.buildings).forEach(e=>{var t;e.level<=0||!e.storageBonus||(e.storageBonus.resource===n||(null==(t=e.storageBonus.resources)?void 0:t.includes(n)))&&(r+=ch(e.level,e.storageBonus.amountPerLevel))});const s=t.prestige.multipliers.storage;t.resources[n].storageLimit=Math.floor(r*s)}),t})(e);const n=new Map,r=new Map;e.queues.building.forEach(e=>{Object.entries(e.costs).forEach(([e,t])=>{if(void 0!==t){const r=e,s=n.get(r)||0;n.set(r,s+t)}})}),e.queues.research.forEach(e=>{Object.entries(e.costs).forEach(([e,t])=>{if(void 0!==t){const n=e,s=r.get(n)||0;r.set(n,s+t)}})});let s=0;return Object.keys(e.resources).forEach(t=>{const i=t,a=e.resources[i],o=(n.get(i)||0)+(r.get(i)||0);if(a.lockedAmount>o){const e=a.lockedAmount-o;console.log(`[AUTO-FIX] Unlocking ${e} orphaned ${i}`),a.lockedAmount=o,s+=e}}),s>0&&console.log(`[AUTO-FIX]  Unlocked ${s} total orphaned resources on game load`),e}return t}),[k,j]=G.useState(!1);G.useEffect(()=>{try{const{logAntiCheatConfig:e}=require("../utils/antiCheatConfig");e()}catch(e){console.error("Failed to log anti-cheat config:",e)}setTimeout(()=>{I()},1500),setTimeout(()=>{f.current&&f.current()},1600),localStorage.getItem("factoryFlowSave")||v.tutorial.completed||v.tutorial.skipped||v.tutorial.isActive||setTimeout(()=>{w(e=>d(u({},e),{tutorial:d(u({},e.tutorial),{isActive:!0})}))},1e3)},[]),G.useEffect(()=>{v.settings.sound&&i(v.settings.sound),a(e=>{w(t=>d(u({},t),{settings:d(u({},t.settings),{sound:e})}))})},[]);const N=G.useCallback(()=>m(e,null,function*(){try{const e=JSON.stringify(v);localStorage.setItem("factoryFlowSave",e),localStorage.setItem("factoryFlowSaveTimestamp",Date.now().toString()),yield o(v),console.log("Game saved successfully at",(new Date).toLocaleTimeString())}catch(e){console.error("Failed to save game:",e)}}),[v,o]),C=G.useCallback(()=>{try{const e=JSON.stringify(v,null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=`factory-flow-save-${(new Date).toISOString().replace(/[:.]/g,"-").slice(0,19)}.json`,s=document.createElement("a");s.href=n,s.download=r,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n),console.log("Save file exported successfully:",r)}catch(e){throw console.error("Failed to export save file:",e),e}},[v]),S=G.useCallback(t=>m(e,null,function*(){var e,n,r;try{const s=JSON.parse(t);if(!s.resources||"object"!=typeof s.resources)return{success:!1,error:"Invalid save file: missing resources data"};if(!s.buildings||"object"!=typeof s.buildings)return{success:!1,error:"Invalid save file: missing buildings data"};if(!s.research||"object"!=typeof s.research)return{success:!1,error:"Invalid save file: missing research data"};const a=d(u(u({},Rd),s),{resources:u(u({},Rd.resources),s.resources),buildings:u(u({},Rd.buildings),s.buildings),research:u(u({},Rd.research),s.research),tradePairs:s.tradePairs||Rd.tradePairs,statistics:d(u(u({},Rd.statistics),s.statistics),{tradesCompleted:(null==(e=s.statistics)?void 0:e.tradesCompleted)||0,resourcesTraded:(null==(n=s.statistics)?void 0:n.resourcesTraded)||{wood:0,stone:0,iron:0,copper:0,circuit:0,gear:0,steel:0,plastic:0,glass:0,computer:0,robot:0,quantum:0,nanite:0,fusion:0,antimatter:0,singularity:0}}),prestige:u(u({},Rd.prestige),s.prestige),achievements:u(u({},Rd.achievements),s.achievements),antiCheat:u(u({},Rd.antiCheat),s.antiCheat),boosters:s.boosters||Rd.boosters});w(a);const l=JSON.stringify(a);return localStorage.setItem("factoryFlowSave",l),yield o(a),(null==(r=a.settings)?void 0:r.sound)&&i(a.settings.sound),setTimeout(()=>{w(e=>{const t=structuredClone(e);return Object.keys(t.resources).forEach(e=>{const n=e;let r=t.resources[n].baseStorageLimit;Object.values(t.buildings).forEach(e=>{var t;e.level<=0||!e.storageBonus||(e.storageBonus.resource===n||(null==(t=e.storageBonus.resources)?void 0:t.includes(n)))&&(r+=ch(e.level,e.storageBonus.amountPerLevel))});const s=t.prestige.multipliers.storage;t.resources[n].storageLimit=Math.floor(r*s)}),t})},0),console.log("Save file imported successfully"),{success:!0}}catch(s){return console.error("Failed to import save file:",s),s instanceof SyntaxError?{success:!1,error:"Invalid JSON format"}:{success:!1,error:"Failed to import save file: "+s.message}}}),[o,i]);G.useEffect(()=>{const t=setInterval(()=>m(e,null,function*(){yield N()}),3e4);return()=>clearInterval(t)},[N]);const M=Y.useRef(null);G.useEffect(()=>{w(e=>x(e))},[]);const _=Y.useRef(!1);G.useEffect(()=>{if(_.current)return;const t=setTimeout(()=>m(e,null,function*(){_.current=!0,console.log("Starting Steam achievement synchronization..."),yield z(),console.log("Steam achievement synchronization complete")}),3e3);return()=>clearTimeout(t)},[]);const P=(e,t)=>{!isFinite(t)||isNaN(t)||t<=0?console.error(`Invalid amount for addResource: ${t} for ${e}`):v.resources[e].unlocked&&(w(n=>{const r=structuredClone(n),s=r.resources[e].value,i=r.resources[e].storageLimit;let a=r.resources[e].lockedAmount;(!isFinite(a)||isNaN(a)||a<0)&&(console.warn(`Invalid lockedAmount for ${e}: ${a}, using 0`),a=0,r.resources[e].lockedAmount=0);let o=r.prestige.multipliers.clickPower;(!isFinite(o)||isNaN(o)||o<=0)&&(console.warn(`Invalid prestige clickPower multiplier: ${o}, using 1`),o=1,r.prestige.multipliers.clickPower=1);const l=t*o;if(!isFinite(l)||isNaN(l))return console.error(`Calculated NaN adjustedAmount: ${t} * ${o} = ${l}`),n;const c=i-a,u=Math.min(s+l,c),d=u-s;return!isFinite(u)||isNaN(u)?(console.error(`Calculated NaN newValue for ${e}: ${u}`),n):d<=0?n:(r.resources[e].value=u,r.statistics.totalResourcesProduced[e]+=d,r)}),I())},T=()=>{w(e=>{const t=structuredClone(e);return Object.keys(t.resources).forEach(e=>{const n=e;let r=t.resources[n].baseStorageLimit;Object.values(t.buildings).forEach(e=>{var t;e.level<=0||!e.storageBonus||(e.storageBonus.resource===n||(null==(t=e.storageBonus.resources)?void 0:t.includes(n)))&&(r+=ch(e.level,e.storageBonus.amountPerLevel))});const s=t.prestige.multipliers.storage;t.resources[n].storageLimit=Math.floor(r*s)}),t})},E=(e,t)=>t<=0||!!v.resources[e].unlocked&&!(v.resources[e].value<t)&&(!isFinite(t)||isNaN(t)?(console.error(`Invalid amount for spendResource: ${t} for ${e}`),!1):!isFinite(v.resources[e].value)||isNaN(v.resources[e].value)?(console.error(`Corrupted resource value detected for ${e}: ${v.resources[e].value}`),w(t=>{const n=u({},t);return n.resources[e]=d(u({},n.resources[e]),{value:0}),n}),!1):(w(n=>{const r=u({},n),s=r.resources[e].value-t;r.resources[e]=d(u({},r.resources[e]),{value:isFinite(s)&&!isNaN(s)?Math.max(0,s):0});const i=r.statistics.totalResourcesSpent[e]||0,a=i+t;return r.statistics.totalResourcesSpent[e]=isFinite(a)&&!isNaN(a)?a:i,r}),!0)),R=e=>Object.entries(e).every(([e,t])=>{const n=e,r=v.resources[n];return void 0===t||t<=0||(null==r?void 0:r.unlocked)&&r.value-r.lockedAmount>=t}),A=e=>{const t=v.buildings[e];if(!t||!t.unlocked||t.level>=t.maxLevel)return!1;const n={};if(Object.keys(t.cost).forEach(e=>{const r=e;void 0!==t.cost[r]&&(n[r]=Math.floor(t.cost[r]*v.prestige.multipliers.buildingCostMultiplier))}),!R(n))return!1;const r=u({},n);return w(n=>{const s=structuredClone(n),i=s.buildings[e].level;Object.entries(r).forEach(([e,t])=>{if(void 0!==t){const n=e;s.resources[n].value>=t&&(s.resources[n].value-=t,s.statistics.totalResourcesSpent[n]=(s.statistics.totalResourcesSpent[n]||0)+t)}}),s.buildings[e].level=i+1;const a=i+1,o=s.unlockedFeatures.includes("advancedMining")&&["woodcutter","stoneMine","ironMine","copperMine"].includes(e)?.9:1;return Object.keys(t.baseCost).forEach(n=>{const r=n,i=t.baseCost[r];void 0!==i&&(s.buildings[e].cost[r]=Math.floor(i*(1+Math.pow(a,.99))*o))}),t.storageBonus&&Object.keys(s.resources).forEach(e=>{const t=e;let n=s.resources[t].baseStorageLimit;Object.values(s.buildings).forEach(e=>{var r;e.level<=0||!e.storageBonus||(e.storageBonus.resource===t||(null==(r=e.storageBonus.resources)?void 0:r.includes(t)))&&(n+=ch(e.level,e.storageBonus.amountPerLevel))});const r=s.prestige.multipliers.storage;s.resources[t].storageLimit=Math.floor(n*r)}),s.statistics.buildingsConstructed[e]=(s.statistics.buildingsConstructed[e]||0)+1,s}),setTimeout(()=>T(),0),setTimeout(N,100),I(),!0},L=()=>{const e=Date.now();w(t=>{const r=isFinite(t.lastTick)&&!isNaN(t.lastTick)?t.lastTick:e,s=e-r;if(!isFinite(s)||isNaN(s)||s<0)return console.error(`Invalid time difference in tick: ${s}, skipping tick`),d(u({},t),{lastTick:e});const i=Math.min(s/1e3,5);if(i<.1)return t;const a={},o=structuredClone(t);o.lastTick=e,o.statistics.playTime+=i,o.boosters.active=o.boosters.active.filter(t=>t.expiresAt>e);let l=1,c=1;o.boosters.active.forEach(e=>{const t=pd[e.boosterId];t&&("productionMultiplier"===t.effect.type?l*=t.effect.value:"researchSpeedMultiplier"===t.effect.type&&(c*=t.effect.value))});const h=[];if(o.queues.building.length>0){const t=o.queues.building[0];e-t.startTime>=t.duration&&(h.push(t),o.queues.building.shift(),o.queues.building.length>0&&(o.queues.building[0].startTime=e))}h.forEach(e=>{const t=o.buildings[e.targetId];if(t){const n=e.quantity||1;t.level+=n,Object.entries(e.costs).forEach(([e,t])=>{if(void 0!==t){const n=e;o.resources[n].lockedAmount=Math.max(0,o.resources[n].lockedAmount-t),o.resources[n].value=Math.max(0,o.resources[n].value-t),o.statistics.totalResourcesSpent[n]=(o.statistics.totalResourcesSpent[n]||0)+t}}),o.statistics.buildingsConstructed[e.targetId]=(o.statistics.buildingsConstructed[e.targetId]||0)+n;const r=["woodcutter","stoneMine","ironMine","copperMine"],s=o.unlockedFeatures.includes("advancedMining")&&r.includes(e.targetId)?.9:1;Object.keys(t.baseCost).forEach(e=>{const n=e,r=t.baseCost[n];void 0!==r&&(t.cost[n]=Math.floor(r*(1+Math.pow(t.level,.99))*s))}),t.storageBonus&&Object.keys(o.resources).forEach(e=>{const t=e;let n=o.resources[t].baseStorageLimit;Object.values(o.buildings).forEach(e=>{var r;e.level<=0||!e.storageBonus||(e.storageBonus.resource===t||(null==(r=e.storageBonus.resources)?void 0:r.includes(t)))&&(n+=ch(e.level,e.storageBonus.amountPerLevel))});const r=o.prestige.multipliers.storage;o.resources[t].storageLimit=Math.floor(n*r)})}});const m=[],g=o.unlockedFeatures.includes("quantumComputing")?2:1;for(let n=0;n<Math.min(o.queues.research.length,g);n++){const t=o.queues.research[n];0===t.startTime&&(t.startTime=e);const r=e-t.startTime;let s=c;o.unlockedFeatures.includes("quantumComputing")&&o.queues.research.length>=2&&(s*=1.2),r>=t.duration/s&&m.push(t)}m.forEach(e=>{const t=o.queues.research.findIndex(t=>t.id===e.id);-1!==t&&o.queues.research.splice(t,1)});for(let n=0;n<o.queues.research.length;n++)n<g&&0===o.queues.research[n].startTime&&(o.queues.research[n].startTime=e);if(m.forEach(e=>{const t=o.research[e.targetId];if(t&&!t.completed){Object.entries(e.costs).forEach(([e,t])=>{if(void 0!==t){const n=e;o.resources[n].lockedAmount=Math.max(0,o.resources[n].lockedAmount-t),o.resources[n].value=Math.max(0,o.resources[n].value-t),o.statistics.totalResourcesSpent[n]=(o.statistics.totalResourcesSpent[n]||0)+t}}),t.completed=!0,o.statistics.researchCompleted.push(e.targetId),setTimeout(()=>{const e=Math.random()*window.innerWidth*.8+.1*window.innerWidth,r=Math.random()*window.innerHeight*.4+.3*window.innerHeight;Hd("research-complete",e,r,`${t.name} Complete!`),n("research_complete")},100);const r=t.unlocks;switch(r.resources&&r.resources.forEach(e=>{o.resources[e]&&(o.resources[e].unlocked=!0)}),r.buildings&&r.buildings.forEach(e=>{o.buildings[e]&&(o.buildings[e].unlocked=!0)}),r.tradePairs&&r.tradePairs.forEach(e=>{o.tradePairs[e]&&(o.tradePairs[e].unlocked=!0)}),r.features&&r.features.forEach(e=>{o.unlockedFeatures.includes(e)||o.unlockedFeatures.push(e)}),e.targetId){case"basicClickPower":o.clickPower=2;break;case"stoneClickPower":case"ironClickPower":o.clickPower=3;break;case"copperClickPower":case"gearClickPower":o.clickPower=4;break;case"steelClickPower":o.clickPower=5;break;case"circuitClickPower":o.clickPower=8;break;case"plasticClickPower":o.clickPower=10;break;case"computerClickPower":case"roboticClickPower":o.clickPower=12;break;case"quantumClickPower":o.clickPower=18;break;case"naniteClickPower":o.clickPower=25;break;case"fusionClickPower":o.clickPower=35;break;case"antimatterClickPower":o.clickPower=50;break;case"singularityClickPower":o.clickPower=75;break;case"clickMastery":o.clickPower*=10}Object.entries(o.research).forEach(([e,t])=>{!t.unlocked&&t.requiredResearch&&t.requiredResearch.every(e=>o.research[e]&&o.research[e].completed)&&(t.unlocked=!0)})}}),m.length>0){const e=[...o.boosters.unlocked];let t=!1;Object.values(pd).forEach(n=>{if(e.includes(n.id))return;if(n.disabled)return;let r=!0;if(n.unlockRequirement){if(n.unlockRequirement.research){const e=o.research[n.unlockRequirement.research];e&&e.completed||(r=!1)}if(n.unlockRequirement.building){const e=o.buildings[n.unlockRequirement.building];(!e||e.level<(n.unlockRequirement.buildingLevel||1))&&(r=!1)}}r&&(e.push(n.id),t=!0)}),t&&(o.boosters.unlocked=e)}return Object.values(o.buildings).forEach(e=>{if(e.level<=0||!1===e.enabled)return;const t=[];if(Object.entries(e.production).forEach(([e,n])=>{const r=e;if(!n||n<=0||!o.resources[r].unlocked)return;const s=o.resources[r].storageLimit;o.resources[r].value<s-o.resources[r].lockedAmount&&t.push(r)}),0===t.length)return;const n={};Object.keys(e.consumption).forEach(e=>{n[e]=[]}),t.forEach(t=>{Object.keys(e.consumption).forEach(e=>{n[e].push(t)})}),Object.entries(e.consumption).every(([t,r])=>{const s=t;if(0===n[t].length)return!0;const a=(null!=r?r:0)*e.level*i;return a<=0||o.resources[s].value>=a})&&(Object.entries(e.consumption).forEach(([t,r])=>{const s=t;if(void 0!==r&&n[t].length>0){const t=r*e.level*i;if(t>0){const e=o.resources[s].value;if(!isFinite(e)||isNaN(e))console.error(`Corrupted resource value detected during consumption for ${s}: ${e}`),o.resources[s].value=0;else{const n=e-t;o.resources[s].value=isFinite(n)&&!isNaN(n)?Math.max(0,n):0}const n=o.statistics.totalResourcesSpent[s]||0,r=n+t;o.statistics.totalResourcesSpent[s]=isFinite(r)&&!isNaN(r)?r:n}}}),t.forEach(t=>{const n=e.production[t];if(void 0!==n){const r=o.resources[t].storageLimit-o.resources[t].lockedAmount-o.resources[t].value;if(r>=0){const s=o.prestige.multipliers.production;let c=n*e.level*i*s*l;const u=["woodcutter","stoneMine","ironMine","copperMine"];o.unlockedFeatures.includes("advancedMining")&&u.includes(e.id)&&(c*=1.15,Math.random()<.05&&(c*=2,setTimeout(()=>{const e=Math.random()*window.innerWidth*.8+.1*window.innerWidth,t=Math.random()*window.innerHeight*.4+.3*window.innerHeight;Hd("resource-collect",e,t,"CRITICAL! x2")},50)));const d=n*e.level*2*s*l,h=Math.min(Math.min(c,d),r),m=o.resources[t].value;if(!isFinite(m)||isNaN(m))console.error(`Corrupted resource value detected during production for ${t}: ${m}`),o.resources[t].value=0;else{const e=m+h;o.resources[t].value=isFinite(e)&&!isNaN(e)?e:m}const g=o.statistics.totalResourcesProduced[t]||0,p=g+h;o.statistics.totalResourcesProduced[t]=isFinite(p)&&!isNaN(p)?p:g,h>=.5&&(a[t]||(a[t]=[]),a[t].push({amount:h,buildingId:e.id}))}}}))}),Math.random()<.2&&Object.entries(a).forEach(([e,t])=>{const n=o.resources[e];n.unlocked&&t.forEach(e=>{if(!o.buildings[e.buildingId])return;const t=Math.random()*window.innerWidth*.8+.1*window.innerWidth,r=Math.random()*window.innerHeight*.5+.2*window.innerHeight;Hd("resource-collect",t,r,`+${Math.floor(e.amount)} ${n.name}`)})}),Object.keys(o.resources).forEach(e=>{const t=e,n=o.resources[t].value;o.resources[t].value=((e,t)=>!isFinite(e)||isNaN(e)?(console.error(`Invalid resource value for ${t}: ${e}, resetting to 0`),0):Math.max(0,e))(n,t);const r=o.resources[t].storageLimit;(!isFinite(r)||isNaN(r)||r<0)&&(console.error(`Invalid storage limit for ${t}: ${r}, resetting to base limit`),o.resources[t].storageLimit=o.resources[t].baseStorageLimit)}),o}),Math.random()<.01&&I()};G.useEffect(()=>{M.current=L},[L]),G.useEffect(()=>{const e=setInterval(()=>{M.current&&M.current()},1e3);return()=>clearInterval(e)},[]);const F=e=>{["rare","epic","legendary"].includes(e.rarity)?c(e):setTimeout(()=>{const t=.5*window.innerWidth,n=.3*window.innerHeight,r=e.icon||"";Hd("achievement-unlock",t,n,`${r} ${e.name}`),setTimeout(()=>{const r=t+200*(Math.random()-.5),s=n+100*(Math.random()-.5);Hd("achievement-unlock",Math.max(50,Math.min(window.innerWidth-50,r)),Math.max(50,Math.min(window.innerHeight-50,s)),` +${e.points} pts`)},300)},100)};let O=null;const I=()=>{O&&clearTimeout(O),O=setTimeout(D,1e3)},D=()=>m(e,null,function*(){if(!v.achievements)return void w(e=>d(u({},e),{achievements:Rd.achievements}));const e=Yd.checkAll(v).filter(e=>{const t=v.achievements.unlocked.includes(e);return t&&console.log("Achievement already unlocked, skipping:",e),!t}),t=[...new Set(e)];if(0===t.length)return;console.log("Processing truly new achievements:",t),w(e=>{const n=structuredClone(e);n.achievements||(n.achievements=Rd.achievements),n.achievements.unlocked=[...new Set(n.achievements.unlocked)];const r=t.filter(e=>!n.achievements.unlocked.includes(e));return r.length>0&&(n.achievements.unlocked.push(...r),n.achievements.lastUnlocked=r[r.length-1],Yd.getAll().forEach(e=>{e.progress&&(n.achievements.progress[e.id]=e.progress(n))})),n});for(const r of t)yield l(r);const n=t.filter(e=>!p.current.has(e));n.length>0&&(n.forEach(e=>p.current.add(e)),g(e=>{const t=new Set(e);return n.forEach(e=>t.add(e)),t}),n.forEach((e,t)=>{const n=Yd.getById(e);n&&setTimeout(()=>{F(n)},500*t)}))}),z=()=>m(e,null,function*(){var e;if(!(null==(e=v.achievements)?void 0:e.unlocked)||0===v.achievements.unlocked.length)return void console.log("Steam Sync: No achievements earned yet, skipping synchronization");const t=v.achievements.unlocked.length;console.log(`Steam Sync: Synchronizing ${t} earned achievement(s) to Steam...`),console.log("Steam Sync: Achievement IDs:",v.achievements.unlocked);let n=0,r=0;for(const i of v.achievements.unlocked)if("string"==typeof i&&i)if(Yd.getById(i))try{yield l(i),n++}catch(s){console.error(`Steam Sync: Failed to unlock achievement ${i}:`,s)}else console.warn("Steam Sync: Skipping unknown achievement:",i),r++;else console.warn("Steam Sync: Skipping invalid achievement ID:",i),r++;console.log(`Steam Sync: Complete - ${n} synced, ${r} skipped out of ${t} total`)}),q={gameState:v,addResource:P,spendResource:E,canAfford:R,purchaseBuilding:A,purchaseBuildingBatch:(e,t)=>{console.log("Batch purchase attempt:",e,"quantity:",t);const n=v.buildings[e];if(!n||!n.unlocked||t<=0||n.level>=n.maxLevel)return console.log("Early return - building:",null==n?void 0:n.name,"unlocked:",null==n?void 0:n.unlocked,"quantity:",t,"level:",null==n?void 0:n.level,"maxLevel:",null==n?void 0:n.maxLevel),0;const r={};let s=n.level;console.log("Current level:",s);for(let o=0;o<t;o++){const e=s+o;Object.keys(n.baseCost).forEach(t=>{const s=t,i=n.baseCost[s];if(void 0!==i){const t=Math.floor(i*(1+Math.pow(e,.99)));r[s]=(r[s]||0)+t}})}console.log("Total costs for batch:",r),console.log("Available resources:",Object.entries(v.resources).map(([e,t])=>`${e}: ${t.value}`));let i=t;const a={};return Object.entries(r).forEach(([e,n])=>{const r=e,s=v.resources[r],a=s.value-s.lockedAmount,o=n/t,l=Math.floor(a/o);i=Math.min(i,l),console.log(`Resource ${e}: available=${a}, costPerUnit=${o}, maxAffordable=${l}`)}),console.log("Final affordable quantity:",i),i<=0?(console.log("Cannot afford any upgrades"),0):(Object.keys(n.baseCost).forEach(e=>{const t=e,r=n.baseCost[t];if(void 0!==r){let e=0;for(let t=0;t<i;t++){const n=s+t;e+=Math.floor(r*(1+Math.pow(n,.99)))}a[t]=e}}),Object.keys(a).forEach(e=>{const t=e;void 0!==a[t]&&(a[t]=Math.floor(a[t]*v.prestige.multipliers.buildingCostMultiplier))}),w(t=>{const r=structuredClone(t);Object.entries(a).forEach(([e,t])=>{if(void 0!==t){const n=e;r.resources[n].value-=t,r.statistics.totalResourcesSpent[n]=(r.statistics.totalResourcesSpent[n]||0)+t}}),r.buildings[e].level=s+i;const o=s+i;return Object.keys(n.baseCost).forEach(t=>{const s=t,i=n.baseCost[s];void 0!==i&&(r.buildings[e].cost[s]=Math.floor(i*(1+Math.pow(o,.99))))}),n.storageBonus&&Object.keys(r.resources).forEach(e=>{const t=e;let n=r.resources[t].baseStorageLimit;Object.values(r.buildings).forEach(e=>{var r;e.level<=0||!e.storageBonus||(e.storageBonus.resource===t||(null==(r=e.storageBonus.resources)?void 0:r.includes(t)))&&(n+=ch(e.level,e.storageBonus.amountPerLevel))});const s=r.prestige.multipliers.storage;r.resources[t].storageLimit=Math.floor(n*s)}),r.statistics.buildingsConstructed[e]=(r.statistics.buildingsConstructed[e]||0)+i,r}),setTimeout(()=>T(),0),setTimeout(N,100),I(),i)},calculateMaxAffordableQuantity:e=>{const t=v.buildings[e];if(!t||!t.unlocked)return 0;let n=0,r=t.level;const s=t.maxLevel-r;if(s<=0)return 0;for(let i=1;i<=Math.min(100,s);i++){const e={};for(let n=0;n<i;n++){const s=r+n;Object.keys(t.baseCost).forEach(n=>{const r=n,i=t.baseCost[r];if(void 0!==i){const t=Math.floor(i*(1+Math.pow(s,.99)));e[r]=(e[r]||0)+t}})}if(!Object.entries(e).every(([e,t])=>{const n=e,r=v.resources[n];return r.value-r.lockedAmount>=t}))break;n=i}return n},upgradeBuilding:e=>A(e),toggleBuildingEnabled:e=>{w(t=>d(u({},t),{buildings:d(u({},t.buildings),{[e]:d(u({},t.buildings[e]),{enabled:!1===t.buildings[e].enabled})})}))},completeResearch:e=>{if(!v.research[e]||!v.research[e].unlocked||v.research[e].completed)return!1;const t=v.research[e],n=Object.entries(t.cost).reduce((e,[t,n])=>{if(n&&n>0){const r=Math.floor(n*v.prestige.multipliers.researchCost);e[t]=r}return e},{});return console.log("Research attempt:",e),console.log("Current resources:",{wood:v.resources.wood.value,stone:v.resources.stone.value}),console.log("Original cost:",t.cost),console.log("Discounted cost:",n),R(n)?(w(i=>{const a=u({},i);if(a.research[e].completed)return console.log("Research already completed, skipping"),a;console.log("Before spending - Wood:",a.resources.wood.value,"Stone:",a.resources.stone.value),Object.entries(n).forEach(([e,t])=>{const n=e;if(t&&t>0){if(console.log(`Spending ${t} ${n} (discounted)`),!(a.resources[n].value>=t))return console.log(`Not enough ${n} to spend ${t}`),a;a.resources[n].value-=t,a.statistics.totalResourcesSpent[n]=(a.statistics.totalResourcesSpent[n]||0)+t}}),console.log("After spending - Wood:",a.resources.wood.value,"Stone:",a.resources.stone.value),a.research[e].completed=!0,a.statistics.researchCompleted.push(e),(()=>{const t=s(),n={steelProduction:"metal_forge",electronics:"circuit_symphony",quantumPhysics:"quantum_resonance",artificialIntelligence:"singularity_ascension"}[e];n&&t!==n&&(console.log(`Research milestone reached: ${e} -> switching to ${n}`),setTimeout(()=>{r(n).catch(e=>{console.warn("Failed to switch music:",e)})},1500))})();const o=t.unlocks;switch(o.resources&&o.resources.forEach(e=>{a.resources[e]&&(a.resources[e].unlocked=!0)}),o.buildings&&o.buildings.forEach(e=>{a.buildings[e]&&(a.buildings[e].unlocked=!0)}),o.tradePairs&&o.tradePairs.forEach(e=>{a.tradePairs[e]&&(a.tradePairs[e].unlocked=!0)}),o.features&&o.features.forEach(e=>{a.unlockedFeatures.includes(e)||a.unlockedFeatures.push(e)}),e){case"basicClickPower":a.clickPower=2;break;case"stoneClickPower":case"ironClickPower":a.clickPower=3;break;case"copperClickPower":case"gearClickPower":a.clickPower=4;break;case"steelClickPower":a.clickPower=5;break;case"circuitClickPower":a.clickPower=8;break;case"plasticClickPower":a.clickPower=10;break;case"computerClickPower":case"roboticClickPower":a.clickPower=12;break;case"quantumClickPower":a.clickPower=18;break;case"naniteClickPower":a.clickPower=25;break;case"fusionClickPower":a.clickPower=35;break;case"antimatterClickPower":a.clickPower=50;break;case"singularityClickPower":a.clickPower=75;break;case"clickMastery":a.clickPower*=10}return Object.entries(a.research).forEach(([e,t])=>{!t.unlocked&&t.requiredResearch&&t.requiredResearch.every(e=>a.research[e]&&a.research[e].completed)&&(t.unlocked=!0)}),"basicTrading"===e&&a.research.mining&&a.research.mining.completed&&(a.research.improvedTrading.unlocked=!0),"improvedTrading"===e&&a.research.metalworking&&a.research.metalworking.completed&&(a.research.advancedTrading.unlocked=!0),"advancedTrading"===e&&a.research.electronics&&a.research.electronics.completed&&(a.research.globalTrading.unlocked=!0),"mining"===e&&a.research.basicTrading&&a.research.basicTrading.completed&&(a.research.improvedTrading.unlocked=!0),"metalworking"===e&&a.research.improvedTrading&&a.research.improvedTrading.completed&&(a.research.advancedTrading.unlocked=!0),"electronics"===e&&a.research.advancedTrading&&a.research.advancedTrading.completed&&(a.research.globalTrading.unlocked=!0),a}),console.log("Research completed successfully"),setTimeout(N,100),I(),setTimeout(()=>{f.current&&f.current()},150),!0):(console.log("Cannot afford research (even with discount)"),!1)},resetGame:()=>{const e=d(u({},Rd),{tutorial:d(u({},Rd.tutorial),{isActive:!0})});w(e),localStorage.removeItem("factoryFlowSave")},saveGame:N,exportSaveFile:C,importSaveFile:S,tick:L,updateStorageLimits:T,executeTrade:(e,t,n)=>{const r=v.tradePairs[e];if(!r||!r.unlocked)return!1;const{from:s,to:i,batchSize:a}=r,o=n||r.baseRate*(1+(2*Math.random()-1)*r.volatility),l=a*t,c=a*o*t;if(l<=0||c<=0)return!1;const d=v.resources[s].value;return d<l?(Math.floor(d/a),!1):!(v.resources[i].value+c>v.resources[i].storageLimit||!E(s,l)||(P(i,c),w(e=>{const t=u({},e);return t.statistics.tradesCompleted+=1,t.statistics.resourcesTraded[s]=(t.statistics.resourcesTraded[s]||0)+l,t}),setTimeout(N,100),I(),0))},queueBuilding:(e,t=1)=>{var n;const r=v.buildings[e];if(!r||!r.unlocked||r.level>=r.maxLevel)return!1;const s={};let i=r.level;v.queues.building.forEach(t=>{t.targetId===e&&(i+=t.quantity||1)});for(let o=0;o<t;o++){const e=i+o;Object.keys(r.baseCost).forEach(t=>{const n=t,i=r.baseCost[n];if(void 0!==i){const t=Math.floor(i*(1+Math.pow(e,.99)));s[n]=(s[n]||0)+t}})}if(Object.keys(s).forEach(e=>{const t=e;void 0!==s[t]&&(s[t]=Math.floor(s[t]*v.prestige.multipliers.buildingCostMultiplier))}),(null==(n=v.research.massProduction)?void 0:n.completed)&&t>=2){const e=Math.min(.05*t,.25);Object.keys(s).forEach(t=>{const n=t;void 0!==s[n]&&(s[n]=Math.floor(s[n]*(1-e)))})}if(!R(s))return!1;const a=b(e,t);return w(n=>{const r=structuredClone(n);Object.entries(s).forEach(([e,t])=>{if(void 0!==t){const n=e;r.resources[n].lockedAmount+=t}});const i=0===r.queues.building.length,o={id:`building-${Date.now()}-${Math.random()}`,type:"building",targetId:e,quantity:t,startTime:i?Date.now():0,duration:a,costs:s};return r.queues.building.push(o),r}),setTimeout(N,100),!0},queueResearch:e=>{const t=v.research[e];if(!t||!t.unlocked||t.completed)return!1;const n=v.unlockedFeatures.includes("quantumComputing")?2:1;if(v.queues.research.length>=n)return!1;if(v.queues.research.some(t=>t.targetId===e))return!1;const r=Object.entries(t.cost).reduce((e,[t,n])=>{if(n&&n>0){const r=Math.floor(n*v.prestige.multipliers.researchCost);e[t]=r}return e},{});if(!R(r))return!1;const s=y(e);return w(t=>{const n=structuredClone(t);Object.entries(r).forEach(([e,t])=>{if(void 0!==t){const r=e;n.resources[r].lockedAmount+=t}});const i=0===n.queues.research.length,a={id:`research-${Date.now()}-${Math.random()}`,type:"research",targetId:e,startTime:i?Date.now():0,duration:s,costs:r};return n.queues.research.push(a),n}),setTimeout(N,100),!0},cancelQueueItem:(e,t)=>(w(n=>{const r=structuredClone(n),s=r.queues[e],i=s.findIndex(e=>e.id===t);if(-1===i)return n;const a=s[i];return Object.entries(a.costs).forEach(([e,t])=>{if(void 0!==t){const n=e;r.resources[n].lockedAmount=Math.max(0,r.resources[n].lockedAmount-t)}}),s.splice(i,1),0===i&&s.length>0&&(s[0].startTime=Date.now()),r}),!0),reorderBuildingQueue:(e,t)=>e!==t&&0!==e&&0!==t&&!(e<0||t<0)&&!(e>=v.queues.building.length||t>=v.queues.building.length)&&(w(n=>{const r=structuredClone(n),s=r.queues.building,[i]=s.splice(e,1);return s.splice(t,0,i),r}),setTimeout(N,100),!0),calculateBuildingTime:b,calculateResearchTime:y,checkAchievements:D,unlockAchievement:t=>m(e,null,function*(){if(v.achievements){if(!v.achievements.unlocked.includes(t)){if(n("achievement_pop"),w(e=>{const n=structuredClone(e);return n.achievements||(n.achievements=Rd.achievements),n.achievements.unlocked.includes(t)||(n.achievements.unlocked.push(t),n.achievements.lastUnlocked=t),n}),!p.current.has(t)){p.current.add(t),g(e=>new Set(e).add(t));const e=Yd.getById(t);e&&setTimeout(()=>{F(e)},100)}yield l(t)}}else w(e=>d(u({},e),{achievements:Rd.achievements}))}),calculatePrestigePoints:()=>{var e;let t=0;if(!(null==(e=v.resources.singularity)?void 0:e.unlocked))return 0;Object.values(v.buildings).forEach(e=>{e.level>=50&&(t+=Math.floor(.1*Math.sqrt(e.level-50)))});const n=v.statistics.researchCompleted.length;n>=40&&(t+=.5*(n-40));const r=Object.values(v.buildings).reduce((e,t)=>e+t.level,0);return r>=500&&(t+=2),r>=1e3&&(t+=5),r>=2e3&&(t+=10),n>=50&&(t+=3),n>=60&&(t+=7),n>=70&&(t+=15),t+=v.prestige.bankedPrestigePoints,Math.floor(t)},performPrestige:()=>{const e=(()=>{var e;let t=0;if(!(null==(e=v.resources.singularity)?void 0:e.unlocked))return 0;Object.values(v.buildings).forEach(e=>{e.level>=50&&(t+=Math.floor(.1*Math.sqrt(e.level-50)))});const n=v.statistics.researchCompleted.length;n>=40&&(t+=.5*(n-40));const r=Object.values(v.buildings).reduce((e,t)=>e+t.level,0);return r>=500&&(t+=2),r>=1e3&&(t+=5),r>=2e3&&(t+=10),n>=50&&(t+=3),n>=60&&(t+=7),n>=70&&(t+=15),t+=v.prestige.bankedPrestigePoints,Math.floor(t)})();return!(e<10||(w(t=>{const n=structuredClone(Rd);n.prestige=d(u({},t.prestige),{level:t.prestige.level+1,points:t.prestige.points+e,totalPoints:t.prestige.totalPoints+e,bankedPrestigePoints:0}),Object.keys(t.research).forEach(e=>{const r=t.research[e];r.permanent&&r.completed&&(n.research[e]=d(u({},r),{unlocked:!0}))}),n.statistics.researchCompleted=[],Object.keys(t.research).forEach(e=>{const r=t.research[e];r.permanent&&r.completed&&n.statistics.researchCompleted.push(e)}),n.unlockedFeatures=[],Object.keys(t.research).forEach(e=>{const r=t.research[e];r.permanent&&r.completed&&r.unlocks.features&&r.unlocks.features.forEach(e=>{n.unlockedFeatures.includes(e)||n.unlockedFeatures.push(e)})}),n.boosters.unlocked=[...t.boosters.unlocked],n.prestige.multipliers.production=1+.02*n.prestige.upgrades.productionBonus,n.prestige.multipliers.storage=1+.03*n.prestige.upgrades.storageBonus,n.prestige.multipliers.clickPower=1+.03*n.prestige.upgrades.clickBonus;const r=Math.min(.01*n.prestige.upgrades.researchDiscount,.5);n.prestige.multipliers.researchCost=1-r,n.prestige.multipliers.buildingCooldownMultiplier=1-Math.min(.02*n.prestige.upgrades.buildingCooldownReduction,1);const s=Math.min(.01*n.prestige.upgrades.buildingCostReduction,.5);return n.prestige.multipliers.buildingCostMultiplier=1-s,n}),I(),0))},purchasePrestigeUpgrade:e=>{const t={productionBonus:3,storageBonus:2,clickBonus:5,researchDiscount:8,buildingCooldownReduction:2,buildingCostReduction:8}[e];return!(v.prestige.points<t||(w(n=>{const r=u({},n);r.prestige.points-=t,r.prestige.upgrades[e]++,r.prestige.multipliers.production=1+.02*r.prestige.upgrades.productionBonus,r.prestige.multipliers.storage=1+.03*r.prestige.upgrades.storageBonus,r.prestige.multipliers.clickPower=1+.03*r.prestige.upgrades.clickBonus;const s=Math.min(.01*r.prestige.upgrades.researchDiscount,.5);r.prestige.multipliers.researchCost=1-s,r.prestige.multipliers.buildingCooldownMultiplier=1-Math.min(.02*r.prestige.upgrades.buildingCooldownReduction,1);const i=Math.min(.01*r.prestige.upgrades.buildingCostReduction,.5);return r.prestige.multipliers.buildingCostMultiplier=1-i,r}),setTimeout(N,100),0))},resetPrestigeUpgrades:()=>(w(e=>{const t=u({},e),n=3,r=2,s=5,i=8,a=2,o=8;let l=0;return l+=t.prestige.upgrades.productionBonus*n,l+=t.prestige.upgrades.storageBonus*r,l+=t.prestige.upgrades.clickBonus*s,l+=t.prestige.upgrades.researchDiscount*i,l+=t.prestige.upgrades.buildingCooldownReduction*a,l+=t.prestige.upgrades.buildingCostReduction*o,t.prestige.upgrades={productionBonus:0,storageBonus:0,clickBonus:0,researchDiscount:0,buildingCooldownReduction:0,buildingCostReduction:0},t.prestige.multipliers={production:1,storage:1,clickPower:1,researchCost:1,buildingCooldownMultiplier:1,buildingCostMultiplier:1},t.prestige.points+=l,t}),setTimeout(N,100),!0),bankResourceForPrestige:e=>{const t={quantum:0,nanite:0,fusion:0,antimatter:200,singularity:50}[e];return 0!==t&&!(v.resources[e].value<t||(w(n=>{const r=u({},n);return r.resources[e].value-=t,r.prestige.bankedPrestigePoints+=1,r}),setTimeout(N,100),0))},calculateDiscountedResearchCost:e=>{const t=v.research[e];if(!t)return{};const n={};return Object.entries(t.cost).forEach(([e,t])=>{if(t&&t>0){const r=Math.floor(t*v.prestige.multipliers.researchCost);n[e]=r}}),n},calculateDiscountedBuildingCost:e=>{const t=v.buildings[e];if(!t)return{};const n={};return Object.entries(t.cost).forEach(([e,t])=>{if(t&&t>0){const r=Math.floor(t*v.prestige.multipliers.buildingCostMultiplier);n[e]=r}}),n},startTutorial:()=>{w(e=>d(u({},e),{tutorial:{isActive:!0,currentStep:0,completed:!1,skipped:!1}}))},nextTutorialStep:()=>{w(e=>d(u({},e),{tutorial:d(u({},e.tutorial),{currentStep:e.tutorial.currentStep+1})}))},previousTutorialStep:()=>{w(e=>d(u({},e),{tutorial:d(u({},e.tutorial),{currentStep:Math.max(0,e.tutorial.currentStep-1)})}))},skipTutorial:()=>{w(e=>d(u({},e),{tutorial:d(u({},e.tutorial),{isActive:!1,skipped:!0})}))},completeTutorial:()=>{w(e=>d(u({},e),{tutorial:d(u({},e.tutorial),{isActive:!1,completed:!0})}))},resetTutorial:()=>{w(e=>d(u({},e),{tutorial:{isActive:!1,currentStep:0,completed:!1,skipped:!1}}))},developerTools:{maxResources:()=>{w(e=>{const t=structuredClone(e);return Object.keys(t.resources).forEach(e=>{const n=e;let r=t.resources[n].baseStorageLimit;Object.values(t.buildings).forEach(e=>{var t;e.level<=0||!e.storageBonus||(e.storageBonus.resource===n||(null==(t=e.storageBonus.resources)?void 0:t.includes(n)))&&(r+=ch(e.level,e.storageBonus.amountPerLevel))});const s=t.prestige.multipliers.storage;t.resources[n].storageLimit=Math.floor(r*s)}),Object.keys(t.resources).forEach(e=>{const n=e,r=t.resources[n];r.unlocked&&(r.value=r.storageLimit)}),t})},unlockAll:()=>{localStorage.removeItem("factoryFlowAutomationModules"),w(e=>{const t=structuredClone(e);Object.keys(t.resources).forEach(e=>{const n=e;t.resources[n].unlocked=!0}),Object.keys(t.buildings).forEach(e=>{t.buildings[e].unlocked=!0}),Object.keys(t.research).forEach(e=>{t.research[e].unlocked=!0,t.research[e].completed=!0}),t.unlockedFeatures||(t.unlockedFeatures=[]),["automation","advancedAutomation","intelligentAutomation","basicCombo","advancedClicking","multiClicking","clickMastery","comboMastery","ultimateCombo","advancedMining"].forEach(e=>{t.unlockedFeatures.includes(e)||t.unlockedFeatures.push(e)}),t.tradePairs&&Object.keys(t.tradePairs).forEach(e=>{t.tradePairs[e].unlocked=!0}),t.clickPower=750;const n=Object.values(pd).filter(e=>!e.disabled).map(e=>e.id);return t.boosters.unlocked=n,t})},instantUpgradeBuilding:e=>{w(t=>{const r=structuredClone(t),s=r.buildings[e];if(!s)return console.warn(`Building ${e} not found`),t;if(s.level>=s.maxLevel)return console.warn(`Building ${e} is already at max level`),t;const i=Rd.buildings[e];return i&&(s.production=u({},i.production),s.consumption=u({},i.consumption),s.baseCost=u({},i.baseCost),s.costMultiplier=i.costMultiplier,i.storageBonus&&(s.storageBonus=u({},i.storageBonus))),s.level+=1,Object.keys(s.baseCost).forEach(e=>{const t=e,n=s.baseCost[t];void 0!==n&&(s.cost[t]=Math.floor(n*(1+Math.pow(s.level,.99))))}),s.storageBonus&&Object.keys(r.resources).forEach(e=>{const t=e;let n=r.resources[t].baseStorageLimit;Object.values(r.buildings).forEach(e=>{var r;e.level<=0||!e.storageBonus||(e.storageBonus.resource===t||(null==(r=e.storageBonus.resources)?void 0:r.includes(t)))&&(n+=ch(e.level,e.storageBonus.amountPerLevel))});const s=r.prestige.multipliers.storage;r.resources[t].storageLimit=Math.floor(n*s)}),n("building_upgrade"),console.log(`Instantly upgraded ${s.name} to level ${s.level}`),r})},instantCompleteResearch:e=>{w(t=>{const r=structuredClone(t),s=r.research[e];return s?s.completed?(console.warn(`Research ${e} is already completed`),t):(s.completed=!0,s.unlocks.resources&&s.unlocks.resources.forEach(e=>{r.resources[e]&&(r.resources[e].unlocked=!0)}),s.unlocks.buildings&&s.unlocks.buildings.forEach(e=>{r.buildings[e]&&(r.buildings[e].unlocked=!0)}),s.unlocks.research&&s.unlocks.research.forEach(e=>{r.research[e]&&(r.research[e].unlocked=!0)}),Object.entries(r.research).forEach(([e,t])=>{!t.unlocked&&t.requiredResearch&&t.requiredResearch.every(e=>r.research[e]&&r.research[e].completed)&&(t.unlocked=!0)}),"basicTrading"===e&&r.research.mining&&r.research.mining.completed&&(r.research.improvedTrading.unlocked=!0),"improvedTrading"===e&&r.research.metalworking&&r.research.metalworking.completed&&(r.research.advancedTrading.unlocked=!0),"advancedTrading"===e&&r.research.electronics&&r.research.electronics.completed&&(r.research.globalTrading.unlocked=!0),"mining"===e&&r.research.basicTrading&&r.research.basicTrading.completed&&(r.research.improvedTrading.unlocked=!0),"metalworking"===e&&r.research.improvedTrading&&r.research.improvedTrading.completed&&(r.research.advancedTrading.unlocked=!0),"electronics"===e&&r.research.advancedTrading&&r.research.advancedTrading.completed&&(r.research.globalTrading.unlocked=!0),s.unlocks.tradePairs&&r.tradePairs&&s.unlocks.tradePairs.forEach(e=>{r.tradePairs[e]&&(r.tradePairs[e].unlocked=!0)}),s.unlocks.features&&(r.unlockedFeatures||(r.unlockedFeatures=[]),s.unlocks.features.forEach(e=>{r.unlockedFeatures.includes(e)||r.unlockedFeatures.push(e)})),r.statistics.researchCompleted.includes(e)||r.statistics.researchCompleted.push(e),n("research_complete"),console.log(`Instantly completed research: ${s.name}`),r):(console.warn(`Research ${e} not found`),t)})},addPrestigePoints:e=>{w(t=>d(u({},t),{prestige:d(u({},t.prestige),{points:t.prestige.points+e,totalPoints:t.prestige.totalPoints+e})})),console.log(`Added ${e} prestige points. Total: ${v.prestige.points+e}`)},unlockPrestige:()=>{console.log("[DEV] Starting developerUnlockPrestige..."),w(e=>{var t,n;const r=structuredClone(e);console.log("[DEV] Before - Singularity unlocked:",null==(t=r.resources.singularity)?void 0:t.unlocked),console.log("[DEV] Before - Singularity produced:",r.statistics.totalResourcesProduced.singularity),["singularity","antimatter","fusion","nanite","quantum","robot","computer"].forEach(e=>{r.resources[e]&&(r.resources[e].unlocked=!0,r.resources[e].value=Math.max(1e3,r.resources[e].value))}),r.statistics.totalResourcesProduced.singularity||(r.statistics.totalResourcesProduced.singularity=0),r.statistics.totalResourcesProduced.singularity=Math.max(500,r.statistics.totalResourcesProduced.singularity),r.statistics.totalResourcesProduced.antimatter||(r.statistics.totalResourcesProduced.antimatter=0),r.statistics.totalResourcesProduced.antimatter=Math.max(1500,r.statistics.totalResourcesProduced.antimatter),r.statistics.totalResourcesProduced.fusion||(r.statistics.totalResourcesProduced.fusion=0),r.statistics.totalResourcesProduced.fusion=Math.max(3e3,r.statistics.totalResourcesProduced.fusion);let s=0;Object.entries(r.buildings).forEach(([e,t])=>{t.unlocked=!0,t.level<50&&(t.level=50,s++,Object.keys(t.baseCost).forEach(e=>{const n=e,r=t.baseCost[n];void 0!==r&&(t.cost[n]=Math.floor(r*(1+Math.pow(t.level,.99))))}))});let i=0;return Object.values(r.research).forEach(e=>{i<45&&(e.unlocked=!0,e.completed=!0,r.statistics.researchCompleted.includes(e.id)||r.statistics.researchCompleted.push(e.id),i++)}),console.log("[DEV] After - Singularity unlocked:",null==(n=r.resources.singularity)?void 0:n.unlocked),console.log("[DEV] After - Singularity produced:",r.statistics.totalResourcesProduced.singularity),console.log("[DEV] Buildings leveled to 50:",s),console.log("[DEV] Research completed:",i),console.log("[DEV]  Prestige requirements met!"),r}),setTimeout(()=>{N(),console.log("[DEV] Game saved")},100)},unlockOrphanedResources:()=>{w(e=>{const t=structuredClone(e);let n=0;const r=new Map,s=new Map;return t.queues.building.forEach(e=>{Object.entries(e.costs).forEach(([e,t])=>{if(void 0!==t){const n=e,s=r.get(n)||0;r.set(n,s+t)}})}),t.queues.research.forEach(e=>{Object.entries(e.costs).forEach(([e,t])=>{if(void 0!==t){const n=e,r=s.get(n)||0;s.set(n,r+t)}})}),Object.keys(t.resources).forEach(e=>{const i=e,a=t.resources[i],o=(r.get(i)||0)+(s.get(i)||0);if(a.lockedAmount>o){const e=a.lockedAmount-o;console.log(`[DEV] Unlocking ${e} orphaned ${i}`),a.lockedAmount=o,n+=e}}),console.log(`[DEV]  Unlocked ${n} total orphaned resources`),t}),N()}},updateAntiCheatState:e=>{w(t=>d(u({},t),{antiCheat:u(u({},t.antiCheat),e)}))},validateClick:(e,t)=>{const{isAntiCheatEnabled:n}=require("../utils/antiCheatConfig");if(!n())return!0;const{autoClickerDetection:r}=require("../services/AutoClickerDetection"),s=r.validateClick(e,t);return s||w(e=>d(u({},e),{antiCheat:d(u({},e.antiCheat),{suspicionLevel:r.getSuspicionLevel(),isBlocked:r.isCurrentlyBlocked(),blockedUntil:Date.now()+r.getTimeUntilUnblocked(),violationCount:r.getViolationCount(),lastWarning:"Auto-clicker detected - clicking disabled",warningTime:Date.now()})})),s},clearAntiCheatWarning:()=>{w(e=>d(u({},e),{antiCheat:d(u({},e.antiCheat),{lastWarning:null,warningTime:0})}))},craftBooster:e=>{const t=pd[e];if(!t)return!1;if(!v.boosters.unlocked.includes(e))return!1;if(!R(t.craftCost))return!1;for(const[n,r]of Object.entries(t.craftCost))r&&E(n,r);return w(t=>d(u({},t),{boosters:d(u({},t.boosters),{inventory:d(u({},t.boosters.inventory),{[e]:(t.boosters.inventory[e]||0)+1})})})),!0},activateBooster:e=>{const t=pd[e];if(!t)return!1;if((v.boosters.inventory[e]||0)<=0)return!1;const r=v.boosters.cooldowns[e],s=Date.now();if(r&&s<r)return!1;if("instantQueueComplete"===t.effect.type){if(v.queues.building.length>0){const r=v.queues.building[0];w(n=>{const i=structuredClone(n);i.queues.building.shift();const a=i.buildings[r.targetId],o=r.quantity||1;a.level+=o,Object.entries(r.costs).forEach(([e,t])=>{if(void 0!==t){const n=e;i.resources[n].lockedAmount=Math.max(0,i.resources[n].lockedAmount-t),i.resources[n].value=Math.max(0,i.resources[n].value-t),i.statistics.totalResourcesSpent[n]=(i.statistics.totalResourcesSpent[n]||0)+t}}),i.statistics.buildingsConstructed[r.targetId]=(i.statistics.buildingsConstructed[r.targetId]||0)+o;const l=i.unlockedFeatures.includes("advancedMining")&&["woodcutter","stoneMine","ironMine","copperMine"].includes(r.targetId)?.9:1;for(const e in a.baseCost){const t=e,n=a.baseCost[t]||0;a.cost[t]=Math.floor(n*(1+Math.pow(a.level,.99))*l)}if(a.storageBonus){const e=a.storageBonus;if(e.resource){const t=e.resource,n=i.resources[t].baseStorageLimit,r=Math.floor(n+(e.baseAmount+e.amountPerLevel*a.level));i.resources[t].storageLimit=r}}return i.boosters.inventory[e]=(i.boosters.inventory[e]||1)-1,i.boosters.cooldowns[e]=s+1e3*t.cooldown,i}),T(),n("build")}return!0}return w(n=>d(u({},n),{boosters:d(u({},n.boosters),{inventory:d(u({},n.boosters.inventory),{[e]:(n.boosters.inventory[e]||1)-1}),active:[...n.boosters.active,{boosterId:e,startTime:s,expiresAt:s+1e3*t.duration}],cooldowns:d(u({},n.boosters.cooldowns),{[e]:s+1e3*t.cooldown})})})),n("research_complete"),!0},getActiveBoosterMultiplier:e=>{let t=1;const n=Date.now();return v.boosters.active.forEach(r=>{if(r.expiresAt>n){const n=pd[r.boosterId];n&&n.effect.type===e&&(t*=n.effect.value)}}),t},isBoosterOnCooldown:e=>{const t=v.boosters.cooldowns[e];return!!t&&Date.now()<t},getBoosterCooldownRemaining:e=>{const t=v.boosters.cooldowns[e];if(!t)return 0;const n=t-Date.now();return Math.max(0,Math.ceil(n/1e3))},checkBoosterUnlocks:()=>{const e=[...v.boosters.unlocked];let t=!1;Object.values(pd).forEach(n=>{if(e.includes(n.id))return;if(n.disabled)return;let r=!0;if(n.unlockRequirement){if(n.unlockRequirement.research){const e=v.research[n.unlockRequirement.research];e&&e.completed||(r=!1)}if(n.unlockRequirement.building){const e=v.buildings[n.unlockRequirement.building];(!e||e.level<(n.unlockRequirement.buildingLevel||1))&&(r=!1)}}r&&(e.push(n.id),t=!0)}),t&&w(t=>d(u({},t),{boosters:d(u({},t.boosters),{unlocked:e})}))}};return f.current=q.checkBoosterUnlocks,ne.jsx(oh.Provider,{value:q,children:t})},dh=e=>{const t=[];return e.resources.wood.unlocked&&t.push("wood"),e.resources.stone.unlocked&&t.push("stone"),e.unlockedFeatures.includes("ironManualGathering")&&e.resources.iron.unlocked&&t.push("iron"),e.unlockedFeatures.includes("copperManualGathering")&&e.resources.copper.unlocked&&t.push("copper"),e.unlockedFeatures.includes("gearManualGathering")&&e.resources.gear.unlocked&&t.push("gear"),e.unlockedFeatures.includes("steelManualGathering")&&e.resources.steel.unlocked&&t.push("steel"),e.unlockedFeatures.includes("circuitManualGathering")&&e.resources.circuit.unlocked&&t.push("circuit"),e.unlockedFeatures.includes("plasticManualGathering")&&e.resources.plastic.unlocked&&t.push("plastic"),e.unlockedFeatures.includes("glassManualGathering")&&e.resources.glass.unlocked&&t.push("glass"),e.unlockedFeatures.includes("computerManualGathering")&&e.resources.computer.unlocked&&t.push("computer"),e.unlockedFeatures.includes("robotManualGathering")&&e.resources.robot.unlocked&&t.push("robot"),e.unlockedFeatures.includes("quantumManualGathering")&&e.resources.quantum.unlocked&&t.push("quantum"),e.unlockedFeatures.includes("naniteManualGathering")&&e.resources.nanite.unlocked&&t.push("nanite"),e.unlockedFeatures.includes("fusionManualGathering")&&e.resources.fusion.unlocked&&t.push("fusion"),e.unlockedFeatures.includes("antimatterManualGathering")&&e.resources.antimatter.unlocked&&t.push("antimatter"),e.unlockedFeatures.includes("singularityManualGathering")&&e.resources.singularity.unlocked&&t.push("singularity"),t},hh=({resourceType:e,size:t="md",className:n,onClick:r,title:s})=>{const i=function(e,t="md",n){return{src:gd(e),alt:`${e} icon`,className:`${{xs:"w-4 h-4",sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"}[t]} ${n||""}`.trim(),size:t}}(e,t,n);return ne.jsx("img",{src:i.src,alt:i.alt,className:i.className,onClick:r,title:s,style:{imageRendering:"pixelated",objectFit:"contain"}})},mh=({resourceType:e,gameState:t,position:n})=>{const r=t.resources[e],s=Object.values(t.buildings),i=G.useRef(null),[a,o]=G.useState(n);G.useEffect(()=>{if(i.current){const e=i.current,t=e.getBoundingClientRect(),r=window.innerWidth;let s=n.x,a=n.y,l="-50%",c="-120%";s+t.width/2>r-10&&(s=r-t.width/2-10,l="-50%"),s-t.width/2<10&&(s=t.width/2+10,l="-50%"),a-t.height-20<10&&(c="20px"),o({x:s,y:a}),e.style.transform=`translate(${l}, ${c})`}},[n,e]);const l=[],c=[],u=e=>Object.entries(e.production).every(([e,n])=>{if(n<=0)return!0;const r=t.resources[e];return r.value>=r.storageLimit});s.forEach(t=>{const n=t.production[e],r=t.consumption[e];n&&n>0&&l.push({building:t,rate:n,type:"producer"}),r&&r>0&&c.push({building:t,rate:r,type:"consumer"})});const d=e=>{const t=Math.abs(e);return t>=.1?e.toFixed(1):t>=.01?e.toFixed(2):e.toFixed(4)},h=()=>l.reduce((e,{building:n,rate:r})=>n.level>0&&!1!==n.enabled&&!u(n)?e+r*n.level*t.prestige.multipliers.production:e,0),m=()=>c.reduce((e,{building:t,rate:n})=>t.level>0&&!1!==t.enabled&&!u(t)?e+n*t.level:e,0),g=h()-m();return ne.jsxs("div",{ref:i,className:"fixed bg-gray-800 border-2 border-gray-600 rounded-lg shadow-2xl p-3 min-w-[240px] max-w-[320px] pointer-events-none animate-fadeIn",style:{left:`${a.x}px`,top:`${a.y}px`,transform:"translate(-50%, -120%)",zIndex:9999},children:[ne.jsx("div",{className:"mb-2 pb-2 border-b border-gray-600",children:ne.jsxs("div",{className:"flex items-center gap-2",children:[ne.jsx(hh,{resourceType:e,size:"lg"}),ne.jsxs("div",{className:"flex-1",children:[ne.jsx("h3",{className:"text-sm font-bold text-white",children:r.name}),ne.jsxs("div",{className:"text-xs text-gray-400",children:["Net: ",ne.jsxs("span",{className:"font-semibold "+(g>0?"text-green-400":g<0?"text-red-400":"text-gray-400"),children:[g>0?"+":"",d(g),"/s"]})]})]})]})}),l.length>0&&ne.jsxs("div",{className:"mb-2",children:[ne.jsxs("h4",{className:"text-xs font-semibold text-green-400 mb-1",children:["Producers (",l.length,")"]}),ne.jsx("div",{className:"space-y-0.5",children:l.map(({building:e,rate:n})=>{const r=u(e),s=e.level>0&&!1!==e.enabled&&!r,i=s?n*e.level*t.prestige.multipliers.production:0;return ne.jsxs("div",{className:"flex items-center justify-between text-xs px-1.5 py-0.5 rounded "+(e.unlocked?s?"bg-green-900/20":"bg-gray-700/30 opacity-60":"bg-gray-800/50 opacity-40"),children:[ne.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[!e.unlocked&&ne.jsx("span",{className:"text-[10px]",children:""}),e.unlocked&&(!1===e.enabled||r)&&ne.jsx("span",{className:"text-[10px] text-gray-500",title:r?"Paused: Output storage full":"Disabled",children:""}),ne.jsx("span",{className:"truncate "+(e.unlocked?"text-gray-200":"text-gray-500"),children:e.name}),e.unlocked&&e.level>0&&ne.jsxs("span",{className:"text-[10px] text-gray-400 shrink-0",children:["Lv.",e.level]})]}),ne.jsx("div",{className:"text-right shrink-0",children:e.unlocked?e.level>0?ne.jsxs("div",{className:"font-medium "+(s?"text-green-400":"text-gray-500"),children:["+",d(i),"/s",r&&ne.jsx("span",{className:"text-[9px] text-yellow-400 ml-0.5",title:"Currently paused",children:"()"})]}):ne.jsxs("div",{className:"text-gray-500 font-medium",children:["+",d(n),"/s"]}):ne.jsx("span",{className:"text-[10px] text-gray-500",children:"Locked"})})]},e.id)})}),l.some(({building:e})=>e.level>0&&!1!==e.enabled&&!u(e))&&ne.jsx("div",{className:"mt-1 pt-1 border-t border-green-900/30",children:ne.jsxs("div",{className:"flex justify-between text-xs",children:[ne.jsx("span",{className:"text-gray-400",children:"Total:"}),ne.jsxs("span",{className:"text-green-400 font-bold",children:["+",d(h()),"/s"]})]})})]}),c.length>0&&ne.jsxs("div",{children:[ne.jsxs("h4",{className:"text-xs font-semibold text-red-400 mb-1",children:["Consumers (",c.length,")"]}),ne.jsx("div",{className:"space-y-0.5",children:c.map(({building:e,rate:t})=>{const n=u(e),r=e.level>0&&!1!==e.enabled&&!n,s=r?t*e.level:0;return ne.jsxs("div",{className:"flex items-center justify-between text-xs px-1.5 py-0.5 rounded "+(e.unlocked?r?"bg-red-900/20":"bg-gray-700/30 opacity-60":"bg-gray-800/50 opacity-40"),children:[ne.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[!e.unlocked&&ne.jsx("span",{className:"text-[10px]",children:""}),e.unlocked&&(!1===e.enabled||n)&&ne.jsx("span",{className:"text-[10px] text-gray-500",title:n?"Paused: Output storage full":"Disabled",children:""}),ne.jsx("span",{className:"truncate "+(e.unlocked?"text-gray-200":"text-gray-500"),children:e.name}),e.unlocked&&e.level>0&&ne.jsxs("span",{className:"text-[10px] text-gray-400 shrink-0",children:["Lv.",e.level]})]}),ne.jsx("div",{className:"text-right shrink-0",children:e.unlocked?e.level>0?ne.jsxs("div",{className:"font-medium "+(r?"text-red-400":"text-gray-500"),children:["-",d(s),"/s",n&&ne.jsx("span",{className:"text-[9px] text-yellow-400 ml-0.5",title:"Currently paused",children:"()"})]}):ne.jsxs("div",{className:"text-gray-500 font-medium",children:["-",d(t),"/s"]}):ne.jsx("span",{className:"text-[10px] text-gray-500",children:"Locked"})})]},e.id)})}),c.some(({building:e})=>e.level>0&&!1!==e.enabled&&!u(e))&&ne.jsx("div",{className:"mt-1 pt-1 border-t border-red-900/30",children:ne.jsxs("div",{className:"flex justify-between text-xs",children:[ne.jsx("span",{className:"text-gray-400",children:"Total:"}),ne.jsxs("span",{className:"text-red-400 font-bold",children:["-",d(m()),"/s"]})]})})]}),0===l.length&&0===c.length&&ne.jsx("div",{className:"text-center text-gray-400 text-xs py-2",children:"No buildings produce or consume this resource"})]})},gh=({compact:t=!1})=>{const{gameState:n,addResource:r,getActiveBoosterMultiplier:s}=lh(),{addEffect:i}=Wd(),{playResourceSound:a}=(()=>{const{playSound:t}=Id();return{playResourceSound:n=>m(e,null,function*(){const e={wood:"wood_chop",stone:"stone_crack",iron:"metal_clang",copper:"metal_clang",gear:"gear_click",circuit:"circuit_buzz",steel:"steel_forge",plastic:"plastic_pop",glass:"glass_tinkle",computer:"computer_beep",robot:"robot_whir",quantum:"quantum_hum",nanite:"nanite_swarm",fusion:"fusion_pulse",antimatter:"antimatter_crackle",singularity:"singularity_whisper"}[n];e&&(yield t(e))})}})(),{playComboStart:o,playComboBuild:l,playComboBreak:c,playCriticalHit:h,playMultiClick:g}=(()=>{const{playSound:t}=Id();return{playComboStart:()=>m(e,null,function*(){return yield t("combo_start")}),playComboBuild:()=>m(e,null,function*(){return yield t("combo_build")}),playComboBreak:()=>m(e,null,function*(){return yield t("combo_break")}),playCriticalHit:()=>m(e,null,function*(){return yield t("critical_hit")}),playMultiClick:()=>m(e,null,function*(){return yield t("multi_click")})}})(),{isMobileAudioReady:p}=Id(),[f,x]=G.useState({}),[b,y]=G.useState({}),[v,w]=G.useState({}),[k,j]=G.useState(.05),[N,C]=G.useState(null),[S,M]=G.useState({x:0,y:0}),_=G.useRef(null),[P,T]=G.useState(!1),[E,R]=G.useState(null);G.useEffect(()=>{const e=()=>{T("ontouchstart"in window||navigator.maxTouchPoints>0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const A=Object.values(n.resources).filter(e=>e.unlocked),L=Object.values(n.resources).filter(e=>!e.unlocked),F=(e,t)=>Math.min(Math.max(e/t*100,0),100),O=e=>e>0?"text-green-400":e<0?"text-red-400":"text-gray-400",I=e=>{const t=e>0?"+":"",n=Math.abs(e),r=n>=.1?1:n>=.01?2:4;return`${t}${e.toFixed(r)}/s`},D=()=>n.unlockedFeatures.includes("basicCombo"),z=()=>n.unlockedFeatures.includes("advancedClicking"),q=()=>n.unlockedFeatures.includes("multiClicking"),$=e=>{const t=b[e]||1;return n.unlockedFeatures.includes("ultimateCombo")?Math.min(t/5,20):n.unlockedFeatures.includes("comboMastery")?Math.min(t/5,10):z()?Math.min(t/5,5):D()?Math.min(t/5,2):1},B=e=>({wood:1,stone:1,iron:.8,copper:.8,gear:.6,steel:.5,circuit:.4,plastic:.4,glass:.4,computer:.1,robot:.08,quantum:.06,nanite:.04,fusion:.03,antimatter:.02,singularity:.01}[e]||.5),H=t=>m(e,null,function*(){if(!q())return;yield g();const e=dh(n),s=Math.floor(.3*n.clickPower);e.forEach(e=>{const t=n.resources[e];if(t.unlocked&&t.value<t.storageLimit){const t=s*B(e);r(e,t)}}),i("resource-collect",t.clientX,t.clientY,`MULTI +${s}`)}),W=(t,g)=>m(e,null,function*(){const e=Date.now();if(e-(f[t]||0)<100)return;x(d(u({},f),{[t]:e}));const m=e-(v[t]||0);let p=1;D()&&m<2e3?(p=(b[t]||0)+1,1===p?yield o():yield l()):D()&&m>=2e3&&b[t]>1&&(yield c()),y(d(u({},b),{[t]:p})),w(d(u({},v),{[t]:e}));let j=n.clickPower;(!isFinite(j)||isNaN(j)||j<=0)&&(console.error(`Invalid clickPower: ${j}, using default value 1`),j=1);const N=B(t);if(!isFinite(N)||isNaN(N))return void console.error(`Invalid resourceScaling for ${t}: ${N}`);j*=N;const C=$(t);if(!isFinite(C)||isNaN(C))return void console.error(`Invalid comboMultiplier for ${t}: ${C}`);j*=C;const S=s("gatheringMultiplier");isFinite(S)&&!isNaN(S)&&S>0&&(j*=S);let M=!1;if(z()){const e=k;!isFinite(e)||isNaN(e)?console.error(`Invalid criticalChance: ${e}`):(M=Math.random()<e,M&&(j*=3,yield h()))}if(!isFinite(j)||isNaN(j)||j<=0)console.error(`Calculated invalid baseAmount: ${j} for ${t}`);else if(n.resources[t].unlocked){const e=j;r(t,e),yield a(t),i("resource-collect",g.clientX,g.clientY,`${M?"CRIT! ":""}+${e<1?e.toFixed(2):Math.floor(e)}`)}}),U=e=>{const t=n.resources[e];return t.value>=t.storageLimit},V=(e,t)=>{if(P)return;_.current&&clearTimeout(_.current);const n=t.currentTarget.getBoundingClientRect();_.current=setTimeout(()=>{M({x:n.left+n.width/2,y:n.top}),C(e)},300)},Y=()=>{_.current&&clearTimeout(_.current),C(null)},Q=(e,t)=>{const r=dh(n).includes(e);if(P&&!r)if(E===e)R(null);else{const n=t.currentTarget.getBoundingClientRect();M({x:n.left+n.width/2,y:n.top}),R(e)}else r&&(C(null),W(e,t))};G.useEffect(()=>{const e=()=>{E&&R(null)};if(P&&E)return document.addEventListener("touchstart",e),()=>document.removeEventListener("touchstart",e)},[E,P]);const X=e=>{const t=Object.values(n.buildings);let r=0;for(const n of t)n.level<=0||!1===n.enabled||Object.entries(n.production).every(([e,t])=>t<=0||U(e))||n.consumption[e]&&(r+=n.consumption[e]*n.level);return r};return t?ne.jsxs("div",{className:"space-y-1","data-tutorial":"resource-display",children:[ne.jsxs("div",{className:"flex items-center justify-between p-2 bg-yellow-600/20 rounded-lg border border-yellow-500/30",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("span",{className:"text-yellow-400",children:""}),ne.jsx("span",{className:"text-sm font-semibold text-gray-300",children:"Click Power"})]}),ne.jsxs("span",{className:"text-lg font-bold text-yellow-400",children:[n.clickPower,"x"]})]}),q()&&ne.jsxs("button",{className:"w-full flex items-center justify-between p-2 bg-purple-600/20 hover:bg-purple-600/30 rounded-lg border border-purple-500/30 transition-colors",onClick:H,children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("span",{className:"text-purple-400",children:""}),ne.jsx("span",{className:"text-sm font-semibold text-gray-300",children:"Multi-Gather"})]}),ne.jsxs("span",{className:"text-xs bg-purple-600/50 text-purple-200 px-2 py-1 rounded",children:[Math.floor(.3*n.clickPower),"x (30% efficiency)"]})]}),A.map(e=>{const t=F(e.value,e.storageLimit),r=K(e.id),s=O(r),i=t>=100,a=X(e.id),o=e.lockedAmount||0;e.storageLimit;const l=t>=90?"text-red-400":t>=75?"text-yellow-400":"text-gray-300",c=dh(n).includes(e.id);return ne.jsxs("div",{"data-tutorial":"wood"===e.id?"wood-click":"stone"===e.id?"stone-click":void 0,className:"flex items-center justify-between p-2 bg-gray-700/30 rounded-lg transition-colors "+(c?"hover:bg-gray-700/50 cursor-pointer":"cursor-default"),onClick:t=>Q(e.id,t),onMouseEnter:t=>V(e.id,t),onMouseLeave:Y,children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx(hh,{resourceType:e.id,size:"md"}),ne.jsxs("div",{className:"flex flex-col",children:[ne.jsx("span",{className:"font-semibold text-sm",children:e.name}),ne.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[ne.jsxs("span",{className:l,children:[e.value<10?e.value.toFixed(2):Math.floor(e.value),"/",e.storageLimit,o>0&&ne.jsxs("span",{className:"text-orange-400 ml-1",title:`${o} resources locked in queue`,children:["(-",o,")"]})]}),ne.jsx("span",{className:`${s} font-medium`,children:I(r)}),i&&a>0&&ne.jsx("span",{className:"bg-yellow-600/50 text-yellow-200 px-1 rounded text-xs",children:"paused"})]})]})]}),ne.jsx("div",{className:"w-16 h-1.5 bg-gray-600 rounded-full overflow-hidden",children:ne.jsx("div",{className:"h-full rounded-full transition-all duration-300 "+(t>=90?"bg-red-500":t>=75?"bg-yellow-500":"bg-green-500"),style:{width:`${t}%`}})})]},e.id)}),(N||E)&&cd.createPortal(ne.jsx(mh,{resourceType:N||E,gameState:n,position:S}),document.body),L.slice(0,2).map(e=>ne.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800/50 rounded-lg opacity-50 cursor-not-allowed",title:`${e.description} - Locked. Research required to unlock.`,children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsxs("div",{className:"relative",children:[ne.jsx(hh,{resourceType:e.id,size:"md"}),ne.jsx("div",{className:"absolute inset-0 bg-gray-900/60 rounded flex items-center justify-center",children:ne.jsx("span",{className:"text-xl",children:""})})]}),ne.jsxs("div",{className:"flex flex-col",children:[ne.jsx("span",{className:"font-semibold text-sm text-gray-500",children:e.name}),ne.jsx("span",{className:"text-xs text-gray-600",children:"Locked"})]})]}),ne.jsx("div",{className:"text-xs bg-gray-700 text-gray-400 px-2 py-1 rounded",children:"Research Required"})]},e.id))]}):ne.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4","data-tutorial":"resource-display",children:[A.map(e=>{const t=F(e.value,e.storageLimit),n=K(e.id),r=O(n),s=t>=100,i=X(e.id),a=t>=90?"text-red-400":t>=75?"text-yellow-400":"text-gray-300",o=t>=90?"bg-red-500":t>=75?"bg-yellow-500":"bg-green-500";return ne.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4 hover:bg-gray-700/50 transition-all duration-200 border border-gray-600/30",onMouseEnter:t=>V(e.id,t),onMouseLeave:Y,onClick:t=>{P&&Q(e.id,t)},children:[ne.jsxs("div",{className:"flex items-start justify-between mb-3",children:[ne.jsxs("div",{className:"flex items-center space-x-3",children:[ne.jsx(hh,{resourceType:e.id,size:"xl"}),ne.jsxs("div",{children:[ne.jsx("h3",{className:"text-lg font-bold text-white",children:e.name}),ne.jsx("p",{className:"text-gray-400 text-sm",children:e.description})]})]}),ne.jsxs("div",{className:`text-right ${r}`,children:[ne.jsx("div",{className:"text-2xl font-bold",children:I(n)}),i>0&&ne.jsxs("div",{className:"text-lg text-orange-400 font-semibold",children:["-",i>=.1?i.toFixed(1):i>=.01?i.toFixed(2):i.toFixed(4),"/s"]}),s&&i>0&&ne.jsx("div",{className:"text-xs bg-yellow-600/50 text-yellow-200 px-2 py-1 rounded mt-1",children:"production paused"})]})]}),ne.jsxs("div",{className:"space-y-2",children:[ne.jsxs("div",{className:"flex justify-between items-center",children:[ne.jsx("span",{className:"text-sm text-gray-400",children:"Storage"}),ne.jsxs("span",{className:`text-lg font-semibold ${a}`,children:[Math.floor(e.value)," / ",e.storageLimit,(e.lockedAmount||0)>0&&ne.jsxs("span",{className:"text-orange-400 ml-1 text-sm",title:`${e.lockedAmount} resources locked in queue`,children:["(-",e.lockedAmount,")"]})]})]}),ne.jsx("div",{className:"w-full bg-gray-600 rounded-full h-3 overflow-hidden",children:ne.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${o}`,style:{width:`${t}%`}})}),ne.jsx("div",{className:"text-right",children:ne.jsxs("span",{className:`text-sm font-medium ${a}`,children:[t.toFixed(1),"% full"]})})]}),i>0&&ne.jsxs("div",{className:"mt-3 p-2 bg-gray-600/30 rounded",children:[ne.jsxs("div",{className:"flex items-center justify-between text-sm",children:[ne.jsx("span",{className:"text-gray-400",children:"Consuming:"}),ne.jsxs("span",{className:"text-red-400 font-medium",children:[i>=.1?i.toFixed(1):i>=.01?i.toFixed(2):i.toFixed(4),"/s"]})]}),s&&ne.jsx("div",{className:"text-xs text-yellow-300 mt-1",children:" Consumption paused due to full storage"})]}),t>=80&&ne.jsx("div",{className:"mt-3 p-2 bg-yellow-600/20 border border-yellow-500/30 rounded",children:ne.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[ne.jsx("span",{className:"text-yellow-400",children:""}),ne.jsx("span",{className:"text-yellow-200",children:"Storage nearly full! Consider upgrading storage buildings."})]})})]},e.id)}),(N||E)&&cd.createPortal(ne.jsx(mh,{resourceType:N||E,gameState:n,position:S}),document.body)]});function K(e){const t=Object.values(n.buildings);let r=0,s=0;for(const i of t){if(i.level<=0||!1===i.enabled)continue;const t=Object.entries(i.production).every(([e,t])=>t<=0||U(e));i.production[e]&&(r+=i.production[e]*i.level*n.prestige.multipliers.production),!t&&i.consumption[e]&&(s+=i.consumption[e]*i.level)}return r-s}},ph=[{id:"basic",name:"Stone Age",description:"Basic resource gathering and simple tools",unlockCondition:()=>!0,theme:{primary:"from-amber-600 to-orange-700",secondary:"from-yellow-600 to-amber-700",accent:"border-amber-500/50",background:"bg-gradient-to-br from-gray-900 via-amber-900/20 to-gray-900",gradientClass:"bg-gradient-to-r from-amber-600 to-orange-700",particleColor:"#d97706",glowClass:"shadow-amber-500/20",icon:""}},{id:"mining",name:"Iron Age",description:"Metal extraction and forging",unlockCondition:e=>e.includes("iron"),theme:{primary:"from-gray-500 to-gray-700",secondary:"from-slate-600 to-gray-700",accent:"border-gray-500/50",background:"bg-gradient-to-br from-gray-900 via-slate-800/30 to-gray-900",gradientClass:"bg-gradient-to-r from-gray-500 to-gray-700",particleColor:"#6b7280",glowClass:"shadow-gray-500/20",icon:""}},{id:"electronics",name:"Electronics Era",description:"Circuits and electronic components",unlockCondition:e=>e.includes("circuit"),theme:{primary:"from-blue-500 to-blue-700",secondary:"from-cyan-600 to-blue-700",accent:"border-blue-500/50",background:"bg-gradient-to-br from-gray-900 via-blue-900/20 to-gray-900",gradientClass:"bg-gradient-to-r from-blue-500 to-blue-700",particleColor:"#3b82f6",glowClass:"shadow-blue-500/30",icon:""}},{id:"computing",name:"Digital Age",description:"Advanced computing and digital systems",unlockCondition:e=>e.includes("computer"),theme:{primary:"from-indigo-500 to-purple-600",secondary:"from-blue-600 to-indigo-700",accent:"border-indigo-500/50",background:"bg-gradient-to-br from-gray-900 via-indigo-900/20 to-gray-900",gradientClass:"bg-gradient-to-r from-indigo-500 to-purple-600",particleColor:"#6366f1",glowClass:"shadow-indigo-500/30",icon:""}},{id:"robotics",name:"Robotics Era",description:"Automation and intelligent machines",unlockCondition:e=>e.includes("robot"),theme:{primary:"from-emerald-500 to-green-600",secondary:"from-teal-600 to-emerald-700",accent:"border-emerald-500/50",background:"bg-gradient-to-br from-gray-900 via-emerald-900/20 to-gray-900",gradientClass:"bg-gradient-to-r from-emerald-500 to-green-600",particleColor:"#10b981",glowClass:"shadow-emerald-500/30",icon:""}},{id:"quantum",name:"Quantum Age",description:"Quantum physics and computing",unlockCondition:e=>e.includes("quantum"),theme:{primary:"from-violet-500 to-purple-700",secondary:"from-purple-600 to-violet-700",accent:"border-violet-500/50",background:"bg-gradient-to-br from-gray-900 via-violet-900/20 to-gray-900",gradientClass:"bg-gradient-to-r from-violet-500 to-purple-700",particleColor:"#8b5cf6",glowClass:"shadow-violet-500/40",icon:""}},{id:"nano",name:"Nano Era",description:"Molecular engineering and nanotechnology",unlockCondition:e=>e.includes("nanite"),theme:{primary:"from-pink-500 to-rose-600",secondary:"from-rose-600 to-pink-700",accent:"border-pink-500/50",background:"bg-gradient-to-br from-gray-900 via-pink-900/20 to-gray-900",gradientClass:"bg-gradient-to-r from-pink-500 to-rose-600",particleColor:"#ec4899",glowClass:"shadow-pink-500/40",icon:""}},{id:"fusion",name:"Fusion Age",description:"Controlled nuclear fusion and energy mastery",unlockCondition:e=>e.includes("fusion"),theme:{primary:"from-orange-500 to-red-600",secondary:"from-red-600 to-orange-700",accent:"border-orange-500/50",background:"bg-gradient-to-br from-gray-900 via-orange-900/20 to-gray-900",gradientClass:"bg-gradient-to-r from-orange-500 to-red-600",particleColor:"#ea580c",glowClass:"shadow-orange-500/40",icon:""}},{id:"antimatter",name:"Antimatter Era",description:"Exotic matter and energy manipulation",unlockCondition:e=>e.includes("antimatter"),theme:{primary:"from-fuchsia-500 to-purple-700",secondary:"from-purple-600 to-fuchsia-700",accent:"border-fuchsia-500/50",background:"bg-gradient-to-br from-gray-900 via-fuchsia-900/25 to-gray-900",gradientClass:"bg-gradient-to-r from-fuchsia-500 to-purple-700",particleColor:"#d946ef",glowClass:"shadow-fuchsia-500/50",icon:""}},{id:"singularity",name:"Singularity",description:"Transcendent artificial superintelligence",unlockCondition:e=>e.includes("singularity"),theme:{primary:"from-slate-200 to-white",secondary:"from-gray-300 to-slate-200",accent:"border-white/50",background:"bg-gradient-to-br from-gray-900 via-slate-800/30 to-black",gradientClass:"bg-gradient-to-r from-slate-200 to-white",particleColor:"#f8fafc",glowClass:"shadow-white/60",icon:""}}],fh=G.createContext(void 0),xh=()=>{const e=G.useContext(fh);if(!e)throw new Error("useTechProgression must be used within a TechProgressionProvider");return e},bh=({children:e})=>{const{gameState:t}=lh(),n=Object.entries(t.resources).filter(([e,t])=>t.unlocked).map(([e,t])=>e),r=Object.entries(t.research).filter(([e,t])=>t.completed).map(([e,t])=>e),s=ph.filter(e=>e.unlockCondition(n,r)),i=s[s.length-1]||ph[0],a={currentEra:i,unlockedEras:s,getThemeClasses:()=>({primaryGradient:i.theme.primary,secondaryGradient:i.theme.secondary,accentBorder:i.theme.accent,backgroundGradient:i.theme.background,buttonGradient:i.theme.gradientClass,glowEffect:i.theme.glowClass})};return ne.jsx(fh.Provider,{value:a,children:e})},yh=({compact:e=!1})=>{const{currentEra:t,unlockedEras:n}=xh();return e?ne.jsx("div",{className:`bg-gray-700/50 rounded-lg p-3 border ${t.theme.accent} ${t.theme.glowClass} backdrop-blur-sm`,children:ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("span",{className:"text-2xl",children:t.icon}),ne.jsxs("div",{className:"flex-1",children:[ne.jsx("div",{className:`text-sm font-bold bg-gradient-to-r ${t.theme.primary} bg-clip-text text-transparent`,children:t.name}),ne.jsxs("div",{className:"text-xs text-gray-400",children:["Era ",n.length,"/",ph.length,"  ",t.description]})]})]})}):ne.jsx("div",{className:"fixed top-2 md:top-4 left-2 md:left-4 z-40 max-w-[calc(100vw-8rem)]",children:ne.jsxs("div",{className:`${t.theme.background} rounded-lg p-2 md:p-3 border ${t.theme.accent} ${t.theme.glowClass} backdrop-blur-sm`,children:[ne.jsxs("div",{className:"flex items-center space-x-1 md:space-x-2",children:[ne.jsx("span",{className:"text-lg md:text-2xl",children:t.icon}),ne.jsxs("div",{className:"min-w-0 flex-1",children:[ne.jsx("div",{className:`text-xs md:text-sm font-bold bg-gradient-to-r ${t.theme.primary} bg-clip-text text-transparent truncate`,children:t.name}),ne.jsxs("div",{className:"text-xs text-gray-400",children:["Era ",n.length,"/",ph.length]})]})]}),ne.jsx("div",{className:"text-xs text-gray-300 mt-1 max-w-32 md:max-w-48 truncate",children:t.description})]})})},vh=()=>{const{unlockedEras:e}=xh(),t=e.length/ph.length*100;return ne.jsxs("div",{className:"w-full bg-gray-700/50 rounded-full h-2 mb-4 overflow-hidden relative",children:[ne.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500 via-blue-500 via-green-500 via-violet-500 via-pink-500 via-orange-500 via-fuchsia-500 to-white opacity-30"}),ne.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-amber-500 via-blue-500 via-green-500 via-violet-500 via-pink-500 via-orange-500 via-fuchsia-500 to-white transition-all duration-1000 relative overflow-hidden",style:{width:`${t}%`},children:ne.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent translate-x-full animate-pulse",style:{animationDuration:"3s"}})})]})},wh=({isOpen:e,onClose:t})=>{const{gameState:n,reorderBuildingQueue:r,cancelQueueItem:s}=lh(),{playMenuClose:i,playButtonClick:a}=zd(),{currentEra:o}=xh(),[l,c]=G.useState(null),[u,d]=G.useState(null);if(!e)return null;const h=n.queues.building,m=()=>{t(),i()},g=()=>{d(null)},p=()=>{c(null),d(null)},f=e=>{const t=Math.floor(e/1e3);if(t<60)return`${t}s`;const n=Math.floor(t/60);return n<60?`${n}m ${t%60}s`:`${Math.floor(n/60)}h ${n%60}m`};return ne.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&m()},onKeyDown:e=>{"Escape"===e.key&&m()},tabIndex:-1,ref:e=>{e&&setTimeout(()=>{e.contains(document.activeElement)||e.focus()},100)},children:ne.jsxs("div",{className:`bg-gray-800/95 rounded-lg p-4 sm:p-6 max-w-3xl w-full mx-2 sm:mx-4 max-h-[90vh] overflow-hidden border ${o.theme.accent} ${o.theme.glowClass}`,children:[ne.jsxs("div",{className:"flex justify-between items-center mb-4",children:[ne.jsxs("div",{children:[ne.jsx("h2",{className:`text-xl sm:text-2xl font-bold bg-gradient-to-r ${o.theme.primary} bg-clip-text text-transparent`,children:"Building Queue Manager"}),ne.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:"Drag items or use arrows to reorder  Active item cannot be moved"})]}),ne.jsx("button",{onClick:m,className:"text-gray-400 hover:text-white text-2xl transition-colors p-1",children:""})]}),ne.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-8rem)]",children:0===h.length?ne.jsxs("div",{className:"text-center py-12",children:[ne.jsx("div",{className:"text-gray-400 text-4xl mb-3",children:""}),ne.jsx("p",{className:"text-gray-400 text-lg",children:"No buildings in queue"}),ne.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Queue some building upgrades to see them here!"})]}):ne.jsx("div",{className:"space-y-2",children:h.map((e,t)=>{const{building:i,isActive:o,progress:m,remaining:x}=((e,t)=>{const r=n.buildings[e.targetId],s=0===t&&e.startTime>0,i=Date.now(),a=s?Math.max(0,i-e.startTime):0;return{building:r,isActive:s,progress:s?Math.max(0,Math.min(100,a/e.duration*100)):0,remaining:s?Math.max(0,e.duration-a):e.duration}})(e,t),b=l===t,y=u===t,v=t>0;return ne.jsx("div",{draggable:v,onDragStart:e=>((e,t)=>{0!==t?(c(t),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.currentTarget.innerHTML)):e.preventDefault()})(e,t),onDragOver:e=>((e,t)=>{e.preventDefault(),null!==l&&0!==t&&(d(t),e.dataTransfer.dropEffect="move")})(e,t),onDragLeave:g,onDrop:e=>((e,t)=>{e.preventDefault(),null!==l&&l!==t&&0!==t&&(r(l,t),a()),c(null),d(null)})(e,t),onDragEnd:p,className:`\n                      bg-gray-700/50 border-2 rounded-lg p-3 sm:p-4 transition-all\n                      ${o?"border-green-500/50 bg-green-900/20":"border-gray-600/50"}\n                      ${b?"opacity-50 scale-95":""}\n                      ${y&&null!==l?"border-yellow-500 scale-105":""}\n                      ${v?"cursor-move hover:border-gray-500":"cursor-default"}\n                    `,children:ne.jsxs("div",{className:"flex items-start gap-3",children:[ne.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[3rem] sm:min-w-[4rem]",children:[ne.jsxs("div",{className:"text-lg sm:text-xl font-bold "+(o?"text-green-400":"text-gray-400"),children:["#",t+1]}),v&&ne.jsx("div",{className:"text-gray-500 text-xs mt-1 select-none",children:""})]}),ne.jsxs("div",{className:"flex-1 min-w-0",children:[ne.jsx("div",{className:"flex items-start justify-between gap-2 mb-2",children:ne.jsxs("div",{className:"flex-1 min-w-0",children:[ne.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[ne.jsx("h3",{className:"text-base sm:text-lg font-semibold text-white truncate",children:i.name}),ne.jsx("span",{className:"text-xs px-2 py-0.5 rounded whitespace-nowrap "+(o?"bg-green-600/50 text-green-200":"bg-gray-600/50 text-gray-300"),children:o?" Building":" Queued"})]}),ne.jsxs("div",{className:"text-sm text-gray-400",children:["+",e.quantity||1," level",(e.quantity||1)>1?"s":""]})]})}),o&&ne.jsxs("div",{className:"mb-2",children:[ne.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[ne.jsxs("span",{children:["Progress: ",Math.round(m),"%"]}),ne.jsxs("span",{children:[f(x)," remaining"]})]}),ne.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2",children:ne.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${m}%`}})})]}),!o&&ne.jsxs("div",{className:"text-sm text-yellow-300 mb-2",children:["Duration: ",f(e.duration)]}),ne.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:Object.entries(e.costs).map(([e,t])=>!t||t<=0?null:ne.jsxs("div",{className:"flex items-center gap-1 bg-gray-600/30 rounded px-2 py-1",children:[ne.jsx(hh,{resourceType:e,size:"xs"}),ne.jsx("span",{className:"text-xs text-gray-300",children:Math.floor(t)})]},e))})]}),ne.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[t>1&&ne.jsx("button",{onClick:()=>(e=>{e>1&&(r(e,e-1),a())})(t),className:"px-2 py-1 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Move up",children:""}),t>0&&t<h.length-1&&ne.jsx("button",{onClick:()=>(e=>{e>0&&e<h.length-1&&(r(e,e+1),a())})(t),className:"px-2 py-1 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Move down",children:""}),ne.jsx("button",{onClick:()=>{return t=e.id,s("building",t),void a();var t},className:"px-2 py-1 text-sm bg-red-600 hover:bg-red-700 text-white rounded transition-colors mt-1",title:"Cancel",children:""})]})]})},e.id)})})}),h.length>0&&ne.jsx("div",{className:"mt-4 pt-4 border-t border-gray-600",children:ne.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-400",children:[ne.jsxs("div",{children:[ne.jsx("span",{className:"font-semibold",children:"Total Items:"})," ",h.length]}),ne.jsxs("div",{children:[ne.jsx("span",{className:"font-semibold",children:"Total Levels:"})," ",h.reduce((e,t)=>e+(t.quantity||1),0)]}),ne.jsxs("div",{children:[ne.jsx("span",{className:"font-semibold",children:"Total Time:"})," ",f(h.reduce((e,t,n)=>{if(0===n&&t.startTime>0){const n=Math.max(0,Date.now()-t.startTime);return e+Math.max(0,t.duration-n)}return e+t.duration},0))]})]})})]})})},kh=(e,t)=>{if(e<=0)return 0;let n=0;for(let r=1;r<=e;r++){let e=1;r>200?e=10:r>100?e=5:r>25&&(e=2),n+=t*e}return n},jh=()=>{const{gameState:t,queueBuilding:n,calculateBuildingTime:r,cancelQueueItem:s,canAfford:i,calculateMaxAffordableQuantity:a,toggleBuildingEnabled:o,calculateDiscountedBuildingCost:l}=lh(),[c,u]=G.useState("all"),[d,h]=G.useState(!1),{addEffect:g}=Wd(),{playBuildingPlace:p}=(()=>{const{playSound:t}=Id();return{playBuildingPlace:()=>m(e,null,function*(){return yield t("building_place")}),playBuildingUpgrade:()=>m(e,null,function*(){return yield t("building_upgrade")}),playStorageFull:()=>m(e,null,function*(){return yield t("storage_full")})}})(),{playMenuOpen:f}=zd(),x=G.useRef({});let b=Object.values(t.buildings).filter(e=>e.unlocked);"production"===c?b=b.filter(e=>Object.keys(e.production).length>0&&!e.storageBonus):"storage"===c&&(b=b.filter(e=>e.storageBonus));const y=(e,s=1)=>{const i=t.buildings[e];if(n(e,s)){const t=x.current[e];if(t){const n=t.getBoundingClientRect(),a=n.left+n.width/2,o=n.top+n.height/2,l=r(e,s),c=w(l),u=1===s?`${i.name} Queued! (${c})`:`${i.name} +${s} Levels Queued! (${c})`;g("building-upgrade",a,o,u),p()}}},v=e=>{s("building",e)},w=e=>{const t=Math.floor(e/1e3);return t<60?`${t}s`:`${Math.floor(t/60)}m ${t%60}s`};return ne.jsxs("div",{className:"space-y-4","data-tutorial":"building-list",children:[ne.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 items-center justify-between",children:[ne.jsxs("div",{className:"flex space-x-2",children:[ne.jsx("button",{onClick:()=>u("all"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("all"===c?"bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"),children:"All Buildings"}),ne.jsx("button",{onClick:()=>u("production"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("production"===c?"bg-green-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"),children:"Production"}),ne.jsx("button",{onClick:()=>u("storage"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("storage"===c?"bg-indigo-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"),children:"Storage"})]}),t.queues.building.length>0&&ne.jsx("button",{onClick:()=>{h(!0),f()},className:"relative px-4 py-2 rounded-lg text-sm font-medium transition-all bg-yellow-600 hover:bg-yellow-700 text-white shadow-lg hover:shadow-xl",children:ne.jsxs("span",{className:"flex items-center gap-2",children:[ne.jsx("span",{children:""}),ne.jsx("span",{children:"Manage Queue"}),ne.jsx("span",{className:"bg-yellow-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center",children:t.queues.building.length})]})})]}),0===b.length?ne.jsxs("div",{className:"text-center py-8",children:[ne.jsx("div",{className:"text-gray-400 text-lg mb-2",children:""}),ne.jsx("p",{className:"text-gray-400",children:"No buildings available yet."}),ne.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Research technologies to unlock new buildings."})]}):ne.jsx("div",{className:"space-y-3",children:b.map(e=>{var n,s,c;const u=l(e.id),d=i(u),h=!!e.storageBonus,m=t.queues.building.filter(t=>t.targetId===e.id),g=a(e.id),f=g>=5,b=g>=10,k=e.maxLevel-e.level-m.reduce((e,t)=>e+(t.quantity||1),0),j=g>0&&k>0,N=!1===e.enabled;return ne.jsxs("div",{className:`rounded-lg p-3 transition-all duration-200 hover:shadow-lg ${h?"bg-indigo-900/30 border border-indigo-500/30":"bg-gray-700/30 border border-gray-600/30"} ${d?"hover:bg-gray-700/50":"opacity-75"} ${N&&e.level>0?"opacity-60":""}`,children:[ne.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ne.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[ne.jsx("div",{className:"text-xl",children:""}),ne.jsxs("div",{className:"flex-1 min-w-0",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("h3",{className:"text-sm font-bold text-white truncate",children:e.name}),N&&e.level>0&&ne.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-red-600/80 text-white rounded",children:"Disabled"})]}),ne.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[ne.jsx("span",{className:"text-gray-400",children:"Lv."}),ne.jsx("span",{className:"font-bold text-white",children:e.level}),ne.jsx("span",{className:"text-gray-400",children:"/"}),ne.jsx("span",{className:"text-gray-300",children:e.maxLevel})]})]})]}),ne.jsx("div",{className:"text-right",children:ne.jsx("div",{className:"space-y-0.5",children:Object.entries(u).map(([e,n])=>{const r=t.resources[e],s=r.value-r.lockedAmount>=n;return ne.jsxs("div",{className:"flex items-center space-x-1 text-xs "+(s?"text-gray-200":"text-red-400"),children:[ne.jsx(hh,{resourceType:e,size:"xs"}),ne.jsx("span",{className:"font-semibold",children:Math.floor(n)})]},e)})})})]}),e.level>0&&Object.keys(e.production).length>0&&ne.jsxs("div",{className:"flex items-center space-x-4 mb-2 p-2 rounded border "+(N?"bg-gray-600/10 border-gray-500/20 opacity-50":"bg-green-600/10 border-green-500/20"),children:[ne.jsx("span",{className:"text-green-400 text-sm",children:""}),ne.jsx("div",{className:"flex-1 grid grid-cols-2 gap-1",children:Object.entries(e.production).slice(0,2).map(([n,r])=>{if(!t.resources[n].unlocked)return null;const s=r*e.level*t.prestige.multipliers.production,i=s>=.1?1:s>=.01?2:4;return ne.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[ne.jsx(hh,{resourceType:n,size:"xs"}),ne.jsxs("span",{className:"text-green-300 font-medium",children:["+",s.toFixed(i),"/s"]})]},n)})})]}),e.level>0&&Object.keys(e.consumption).length>0&&ne.jsxs("div",{className:"flex items-center space-x-4 mb-2 p-2 rounded border "+(N?"bg-gray-600/10 border-gray-500/20 opacity-50":"bg-orange-600/10 border-orange-500/20"),children:[ne.jsx("span",{className:"text-orange-400 text-sm",children:""}),ne.jsx("div",{className:"flex-1 grid grid-cols-2 gap-1",children:Object.entries(e.consumption).slice(0,2).map(([n,r])=>{if(!t.resources[n].unlocked)return null;const s=r*e.level,i=s>=.1?1:s>=.01?2:4;return ne.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[ne.jsx(hh,{resourceType:n,size:"xs"}),ne.jsxs("span",{className:"text-orange-300 font-medium",children:["-",s.toFixed(i),"/s"]})]},n)})})]}),e.level>0&&e.storageBonus&&ne.jsxs("div",{className:"flex items-center space-x-2 mb-2 p-2 bg-indigo-600/10 rounded border border-indigo-500/20",children:[ne.jsx("span",{className:"text-indigo-400 text-sm",children:""}),ne.jsxs("div",{className:"text-xs text-indigo-300",children:["+",kh(e.level,e.storageBonus.amountPerLevel)," storage"]})]}),m.length>0&&ne.jsxs("div",{className:"mb-3 p-3 bg-yellow-600/20 border border-yellow-500/30 rounded-lg",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("span",{className:"text-yellow-400",children:""}),ne.jsx("span",{className:"text-sm font-semibold text-yellow-200",children:"In Queue"})]}),ne.jsxs("div",{className:"text-xs text-yellow-300",children:[m.reduce((e,t)=>e+(t.quantity||1),0)," total level",m.reduce((e,t)=>e+(t.quantity||1),0)>1?"s":""]})]}),ne.jsx("div",{className:"space-y-2",children:(()=>{const e=m.findIndex(e=>e.startTime>0),t=e>=0?m[e]:m[0],n=e>=0,r=Date.now(),s=n?Math.max(0,r-t.startTime):0,i=n?Math.max(0,Math.min(100,s/t.duration*100)):0,a=n?Math.max(0,t.duration-s):t.duration,o=m.reduce((t,n,r)=>r<e?t:r===e?t+a:t+n.duration,0);return ne.jsxs("div",{className:"flex items-center justify-between",children:[ne.jsxs("div",{className:"flex-1",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsxs("div",{className:"text-xs text-yellow-200",children:[m.reduce((e,t)=>e+(t.quantity||1),0)," level",m.reduce((e,t)=>e+(t.quantity||1),0)>1?"s":"",m.length>1&&ne.jsxs("span",{className:"text-yellow-400 ml-1",children:["(",m.length," in queue)"]})]}),ne.jsx("div",{className:"text-xs px-1.5 py-0.5 rounded "+(n?"bg-green-600/50 text-green-200":"bg-gray-600/50 text-gray-300"),children:n?"Building":"Queued"})]}),ne.jsx("div",{className:"text-xs text-yellow-300",children:n?`${w(a)} remaining  ${w(o)} total`:`${w(o)} total time`}),ne.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mt-1",children:ne.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(n?"bg-yellow-500":"bg-gray-500"),style:{width:`${i}%`}})})]}),ne.jsxs("div",{className:"ml-2 flex space-x-1",children:[m.length>0&&ne.jsx("button",{onClick:()=>v(m[0].id),className:"px-2 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded transition-colors",title:"Cancel current queue item",children:""}),m.length>1&&ne.jsx("button",{onClick:()=>{m.forEach(e=>v(e.id))},className:"px-2 py-1 text-xs bg-red-800 hover:bg-red-900 text-white rounded transition-colors font-medium",title:`Cancel all ${m.length} queue items`,children:"Clear All"})]})]})})()})]}),ne.jsxs("div",{className:"flex items-center space-x-1",children:[e.level>0&&!h&&ne.jsx("button",{onClick:()=>{return t=e.id,o(t),void p();var t},className:"px-2 py-2 rounded text-xs font-medium transition-all duration-200 "+(N?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-green-600 hover:bg-green-700 text-white"),title:N?"Enable building production":"Disable building production",children:N?"":""}),ne.jsx("button",{ref:t=>{x.current[e.id]=t},onClick:()=>y(e.id,1),disabled:!d||e.level>=e.maxLevel,"data-tutorial":"woodcutter"===e.id?"woodcutter-build":void 0,className:"flex-1 py-2 px-3 rounded text-xs font-medium transition-all duration-200 "+(d&&e.level<e.maxLevel?h?"bg-indigo-600 hover:bg-indigo-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed opacity-50"),title:d?e.level>=e.maxLevel?"Building at maximum level":(()=>{const t=e.level+m.length,n=t+1;return 0===t?`Queue ${e.name} (${w(r(e.id,1))})`:`Queue upgrade to level ${n} (${w(r(e.id,1))})`})():"Cannot afford this building",children:0===e.level&&0===m.length?"Build":"Upgrade"}),k>0&&ne.jsxs(ne.Fragment,{children:[f&&k>=5&&ne.jsx("button",{onClick:()=>y(e.id,Math.min(5,g,k)),className:"px-2 py-2 rounded text-xs font-medium bg-gray-600 hover:bg-gray-500 text-white transition-colors",title:`Queue ${Math.min(5,g,k)} levels${(null==(n=t.research.massProduction)?void 0:n.completed)?" (25% batch discount!)":""}`,children:"5"}),b&&k>=10&&ne.jsx("button",{onClick:()=>y(e.id,Math.min(10,g,k)),className:"px-2 py-2 rounded text-xs font-medium bg-gray-600 hover:bg-gray-500 text-white transition-colors",title:`Queue ${Math.min(10,g,k)} levels${(null==(s=t.research.massProduction)?void 0:s.completed)?" (25% batch discount!)":""}`,children:"10"}),j&&ne.jsx("button",{onClick:()=>{const t=Math.min(g,k);y(e.id,t)},className:"px-2 py-2 rounded text-xs font-medium bg-gray-600 hover:bg-gray-500 text-white transition-colors",title:`Queue ${Math.min(g,k)} levels to MAX${(null==(c=t.research.massProduction)?void 0:c.completed)&&Math.min(g,k)>=2?` (${Math.min(5*Math.min(g,k),25)}% batch discount!)`:""}`,children:"MAX"})]})]})]},e.id)})}),ne.jsx(wh,{isOpen:d,onClose:()=>h(!1)})]})},Nh=G.forwardRef(({compact:t=!1},n)=>{const{gameState:r,queueResearch:s,calculateResearchTime:i,cancelQueueItem:a,canAfford:o,calculateDiscountedResearchCost:l}=lh(),{addEffect:c}=Wd(),{playResearchComplete:u}=(()=>{const{playSound:t}=Id();return{playResearchComplete:()=>m(e,null,function*(){return yield t("research_complete")})}})(),{playMenuOpen:d,playMenuClose:h}=zd(),{currentEra:g}=xh(),p=G.useRef({}),[f,x]=G.useState(!1),[b,y]=G.useState(!1);G.useImperativeHandle(n,()=>({openModal:()=>{t?y(!0):x(!0),d()}}));const v=e=>({basicClickPower:2,stoneClickPower:3,ironClickPower:3,copperClickPower:4,gearClickPower:4,steelClickPower:5,circuitClickPower:8,plasticClickPower:10,computerClickPower:12,roboticClickPower:12,quantumClickPower:18,naniteClickPower:25,fusionClickPower:35,antimatterClickPower:50,singularityClickPower:75}[e]||1),w=e=>{const t=Math.floor(e/1e3);return t<60?`${t}s`:`${Math.floor(t/60)}m ${t%60}s`},k=Object.values(r.research).filter(e=>!(!e.unlocked||e.completed)),j=Object.values(r.research).filter(e=>e.completed),N=e=>{if(s(e)){const t=r.research[e],n=p.current[e];if(n){const r=n.getBoundingClientRect(),s=r.left+r.width/2,a=r.top+r.height/2,o=i(e),l=w(o);c("research-complete",s,a,`${t.name} Queued! (${l})`),u()}}},C=e=>{a("research",e)},S=e=>{const t=[],n=r.research[e];if("basicAutomation"===e)t.push("Unlocks automation rules for buildings and research"),t.push("Consumes robots and circuits to maintain active rules");else if("advancedAutomation"===e)t.push("25% reduction in robot costs for automation rules"),t.push("Stacks with Intelligent Automation for 62.5% total reduction");else if("intelligentAutomation"===e)t.push("50% reduction in robot costs for automation rules"),t.push("Stacks with Advanced Automation for 62.5% total reduction");else if(e.includes("ClickPower")){const n=v(e);t.push(`Base click power: ${n}x per click`),t.push("Scaled by resource rarity (100% for Wood/Stone down to 1% for Singularity)")}else"basicComboSystem"===e?(t.push("Enables combo multiplier for consecutive clicks on same resource"),t.push("Maximum combo multiplier: 2x (at 50+ combo)")):"advancedClickMechanics"===e?(t.push("Increases maximum combo multiplier to 5x (at 500+ combo)"),t.push("Unlocks critical hits: 3x reward with base 5% chance"),t.push("Unlocks Resource Magnet booster crafting"),t.push("Visual feedback for combos and critical hits")):"comboMastery"===e?t.push("Increases maximum combo multiplier to 10x (at 2000+ combo)"):"ultimateCombo"===e?t.push("Increases maximum combo multiplier to 20x (at 5000+ combo)"):"clickMastery"===e?t.push("Multiplies all manual gathering by 10x"):"multiClicking"===e?(t.push("Enables clicking multiple resources at the same time"),t.push("Each additional resource reduces efficiency")):"basicTrading"===e?t.push("Enables Wood  Stone trading"):"improvedTrading"===e?t.push("Enables Wood/Stone  Iron trading routes"):"advancedTrading"===e?t.push("Enables Iron  Copper, Copper  Gear, Iron  Steel trading"):"globalTrading"===e?t.push("Enables Circuit, Glass, Computer, and Robot trading"):"quantumTrading"===e?t.push("Enables Quantum Core and advanced resource trading"):"exoticTrading"===e?t.push("Enables Fusion, Antimatter, and Singularity trading"):"massProduction"===e?(t.push("Unlocks batch building construction"),t.push("5% cost discount per building in batch (max 25% for 5+ buildings)"),t.push("Enables Efficiency Catalyst booster crafting")):"advancedMining"===e?(t.push("10% cost reduction for Woodcutter, Stone Mine, Iron Mine, Copper Mine"),t.push("15% production boost for mining buildings"),t.push("Enables critical mining (chance for bonus resources)")):"quantumComputing"===e?(t.push("Enables researching 2 items simultaneously (instead of 1)"),t.push("20% research speed bonus when 2+ research items queued"),t.push("15% reduction in automation robot costs"),t.push("Unlocks Quantum Amplifier booster crafting")):"nanotechnology"===e&&t.push("Unlocks Nanite Swarm Pack booster crafting");if(n.unlocks.resources&&n.unlocks.resources.length>0){const e=n.unlocks.resources.map(e=>r.resources[e].name).join(", ");t.push(`Unlocks resources: ${e}`)}if(n.unlocks.buildings&&n.unlocks.buildings.length>0){const e=n.unlocks.buildings.map(e=>r.buildings[e].name).join(", ");t.push(`Unlocks buildings: ${e}`)}return n.unlocks.features&&n.unlocks.features.length>0&&(n.unlocks.features.includes("automation")&&"basicAutomation"!==e&&"advancedAutomation"!==e&&"intelligentAutomation"!==e&&t.push("Unlocks automation features"),n.unlocks.features.includes("basicCombo")&&"basicComboSystem"!==e&&t.push("Unlocks combo system"),n.unlocks.features.includes("advancedClicking")&&"advancedClickMechanics"!==e&&t.push("Unlocks advanced clicking mechanics")),t};if(t){const e=Object.values(r.research).filter(e=>e.unlocked&&!e.completed),t=r.queues.research;return ne.jsxs("div",{className:"space-y-2","data-tutorial":"research-list",children:[ne.jsxs("button",{onClick:()=>{y(!0),d()},className:"w-full flex items-center justify-between p-2 bg-purple-600/20 hover:bg-purple-600/30 rounded-lg border border-purple-500/30 transition-colors cursor-pointer",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("span",{className:"text-purple-400",children:""}),ne.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Research"})]}),ne.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[ne.jsxs("span",{className:"text-gray-400",children:["Available: ",e.length]}),t.length>0&&ne.jsxs("span",{className:"bg-yellow-600/50 text-yellow-200 px-2 py-1 rounded",children:["Queued: ",t.length]})]})]}),b&&ld.createPortal(ne.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] backdrop-blur-sm p-4",onClick:e=>{e.target===e.currentTarget&&(y(!1),h())},onKeyDown:e=>{"Escape"===e.key&&(y(!1),h())},tabIndex:-1,ref:e=>{e&&setTimeout(()=>e.focus(),100)},children:ne.jsxs("div",{className:`bg-gray-800/95 rounded-lg p-6 w-full max-w-6xl max-h-[90vh] overflow-hidden border ${g.theme.accent} ${g.theme.glowClass} relative`,children:[ne.jsxs("div",{className:"flex justify-between items-center mb-4",children:[ne.jsx("h2",{className:`text-2xl font-bold bg-gradient-to-r ${g.theme.primary} bg-clip-text text-transparent`,children:"Research Tree"}),ne.jsx("button",{onClick:()=>{y(!1),h()},className:"text-gray-400 hover:text-white text-2xl transition-colors",children:""})]}),ne.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-8rem)]",children:ne.jsxs("div",{className:"space-y-4",children:[ne.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[ne.jsxs("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-lg p-4 text-center",children:[ne.jsx("div",{className:"text-2xl mb-2",children:""}),ne.jsx("div",{className:"text-sm text-gray-400",children:"Available Research"}),ne.jsx("div",{className:"text-xl font-bold text-blue-400",children:e.length})]}),ne.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-500/30 rounded-lg p-4",children:[ne.jsxs("div",{className:"text-center mb-2",children:[ne.jsx("div",{className:"text-2xl mb-2",children:""}),ne.jsx("div",{className:"text-sm text-gray-400",children:"Research Queue"}),ne.jsxs("div",{className:"text-xl font-bold text-yellow-400",children:[t.length,"/",r.unlockedFeatures.includes("quantumComputing")?2:1]}),r.unlockedFeatures.includes("quantumComputing")&&ne.jsx("div",{className:"text-xs text-cyan-400 mt-1",children:" Quantum Parallel Processing"})]}),r.queues.research.length>0&&ne.jsxs("div",{className:"space-y-2 mt-3 border-t border-yellow-500/30 pt-3",children:[r.queues.research.slice(0,2).map((e,t)=>{const n=r.research[e.targetId],s=t<(r.unlockedFeatures.includes("quantumComputing")?2:1)&&e.startTime>0,i=Date.now(),a=s?i-e.startTime:0,o=s?Math.max(0,e.duration-a):e.duration,l=s?Math.max(0,Math.min(100,a/e.duration*100)):0;return ne.jsxs("div",{className:"text-xs",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-1",children:[ne.jsx("span",{className:"text-yellow-200 truncate",children:n.name}),ne.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs "+(s?"bg-green-600/50 text-green-200":"bg-gray-600/50 text-gray-300"),children:s?"Active":`#${t+1}`})]}),ne.jsx("div",{className:"text-yellow-300",children:s?`${w(o)} (${Math.round(l)}%)`:`Waiting  ${w(o)}`})]},e.id)}),r.queues.research.length>2&&ne.jsxs("div",{className:"text-xs text-yellow-300 text-center pt-1",children:["+",r.queues.research.length-2," more"]})]})]})]}),e.length>0?ne.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>{const t=l(e.id),n=o(t),a=r.queues.research.some(t=>t.targetId===e.id);return ne.jsxs("div",{"data-tutorial":"mining"===e.id?"mining-research":void 0,className:"rounded-lg p-4 transition-all duration-200 hover:shadow-lg cursor-pointer "+(a?"bg-yellow-900/30 border border-yellow-500/30 opacity-60":n?"bg-gray-700/30 border border-gray-600/30 hover:bg-gray-700/50":"bg-red-900/20 border border-red-500/30 opacity-50"),onClick:()=>{n&&!a&&(s(e.id),u())},children:[ne.jsxs("div",{className:"flex items-start justify-between mb-3",children:[ne.jsx("h3",{className:"text-lg font-bold text-white",children:e.name}),ne.jsxs("div",{className:"text-right",children:[ne.jsx("div",{className:"text-sm text-gray-400",children:"Time:"}),ne.jsxs("div",{className:"text-sm font-bold text-blue-400",children:[Math.floor(i(e.id)/1e3),"s"]})]})]}),ne.jsx("p",{className:"text-gray-400 text-sm mb-4",children:e.description}),S(e.id).length>0&&ne.jsxs("div",{className:"mb-4 bg-blue-600/20 border border-blue-500/30 rounded p-2",children:[ne.jsx("h5",{className:"text-xs font-semibold text-blue-300 mb-1",children:"Effects:"}),ne.jsx("ul",{className:"text-xs text-blue-200 space-y-1",children:S(e.id).map((e,t)=>ne.jsxs("li",{className:"flex items-start space-x-1",children:[ne.jsx("span",{children:""}),ne.jsx("span",{children:e})]},t))})]}),ne.jsxs("div",{className:"space-y-2 mb-4",children:[ne.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Cost:"}),Object.entries(e.cost).map(([e,n])=>{const s=r.resources[e],i=t[e],a=s.value-s.lockedAmount>=(i||n);return ne.jsxs("div",{className:"flex items-center justify-between p-2 rounded "+(a?"bg-gray-600/30":"bg-red-600/20 border border-red-500/30"),children:[ne.jsxs("span",{className:"flex items-center space-x-2",children:[ne.jsx(hh,{resourceType:e,size:"xs"}),ne.jsx("span",{className:"text-gray-300",children:s.name})]}),ne.jsx("span",{className:"font-semibold "+(a?"text-gray-200":"text-red-400"),children:Math.floor(i||n)})]},e)})]}),ne.jsx("button",{onClick:t=>{t.stopPropagation(),n&&!a&&(s(e.id),u())},disabled:!n||a,className:"w-full py-2 px-4 rounded-lg font-semibold text-sm transition-all duration-200 "+(a?"bg-yellow-600/50 text-yellow-200":n?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:a?"Queued":n?"Research":"Cannot Afford"})]},e.id)})}):ne.jsxs("div",{className:"text-center py-8",children:[ne.jsx("div",{className:"text-gray-400 text-lg mb-2",children:""}),ne.jsx("p",{className:"text-gray-400",children:"All available research completed!"}),ne.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Continue playing to unlock more research opportunities."})]})]})})]})}),document.body)]})}return ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{className:"space-y-4","data-tutorial":"research-list",children:[ne.jsx("button",{onClick:()=>{x(!0),d()},className:"w-full py-4 px-6 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl",children:" Open Research Tree"}),ne.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[ne.jsxs("div",{className:"bg-purple-600/20 border border-purple-500/30 rounded-lg p-3 text-center",children:[ne.jsx("div",{className:"text-2xl mb-1",children:""}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Available"}),ne.jsx("div",{className:"text-sm font-bold text-purple-400",children:k.length})]}),ne.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-lg p-3 text-center",children:[ne.jsx("div",{className:"text-2xl mb-1",children:""}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Completed"}),ne.jsx("div",{className:"text-sm font-bold text-green-400",children:j.length})]})]}),r.queues.research.length>0&&ne.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-500/30 rounded-lg p-3",children:[ne.jsxs("h3",{className:"text-sm font-semibold text-yellow-300 mb-2 flex items-center",children:[ne.jsx("span",{className:"mr-2",children:""}),"Research Queue"]}),ne.jsx("div",{className:"space-y-2",children:r.queues.research.map((e,t)=>{const n=r.research[e.targetId],s=0===t&&e.startTime>0,i=Date.now(),a=s?i-e.startTime:0,o=s?Math.max(0,e.duration-a):e.duration,l=s?Math.max(0,Math.min(100,a/e.duration*100)):0;return ne.jsxs("div",{className:"flex items-center justify-between",children:[ne.jsxs("div",{className:"flex-1",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("div",{className:"text-xs text-yellow-200 truncate",children:n.name}),ne.jsx("div",{className:"text-xs px-1.5 py-0.5 rounded "+(s?"bg-green-600/50 text-green-200":"bg-gray-600/50 text-gray-300"),children:s?"Researching":`Queue #${t+1}`})]}),ne.jsx("div",{className:"text-xs text-yellow-300",children:s?w(o):`Waiting  ${w(o)}`}),ne.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mt-1",children:ne.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(s?"bg-yellow-500":"bg-gray-500"),style:{width:`${l}%`}})})]}),ne.jsx("button",{onClick:()=>C(e.id),className:"ml-2 px-2 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded transition-colors",title:"Cancel research",children:""})]},e.id)})})]}),r.queues.research.length>0&&ne.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-500/30 rounded-lg p-3 mb-3",children:[ne.jsxs("h3",{className:"text-sm font-semibold text-yellow-300 mb-2 flex items-center",children:[ne.jsx("span",{className:"mr-2",children:""}),"Research Queue (",r.queues.research.length,")"]}),ne.jsxs("div",{className:"space-y-2",children:[r.queues.research.slice(0,1).map((e,t)=>{const n=r.research[e.targetId],s=0===t&&e.startTime>0,i=Date.now(),a=s?i-e.startTime:0,o=s?Math.max(0,e.duration-a):e.duration,l=s?Math.max(0,Math.min(100,a/e.duration*100)):0;return ne.jsxs("div",{className:"flex items-center justify-between",children:[ne.jsxs("div",{className:"flex-1",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("div",{className:"text-xs text-yellow-200 truncate",children:n.name}),ne.jsx("div",{className:"text-xs px-1.5 py-0.5 rounded "+(s?"bg-green-600/50 text-green-200":"bg-gray-600/50 text-gray-300"),children:s?"Researching":`Queue #${t+1}`})]}),ne.jsx("div",{className:"text-xs text-yellow-300",children:s?`${w(o)} (${Math.round(l)}%)`:`Waiting  ${w(o)}`})]}),ne.jsx("button",{onClick:()=>C(e.id),className:"ml-2 px-2 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded transition-colors",title:"Cancel research",children:""})]},e.id)}),r.queues.research.length>1&&ne.jsxs("div",{className:"text-xs text-yellow-300 text-center py-1 bg-gray-700/20 rounded",children:["+",r.queues.research.length-1," more in queue"]})]})]}),k.length>0&&ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded-lg p-3",children:[ne.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Available Research"}),ne.jsxs("div",{className:"space-y-2 max-h-20 overflow-y-auto",children:[k.slice(0,3).map(e=>{const t=l(e.id),n=o(t),s=r.queues.research.some(t=>t.targetId===e.id);return ne.jsxs("div",{className:"flex items-center justify-between text-xs",children:[ne.jsx("span",{className:"text-gray-300 truncate",children:e.name}),ne.jsx("span",{className:"text-xs px-2 py-1 rounded "+(s?"bg-yellow-600/50 text-yellow-200":n?"bg-green-600/50 text-green-200":"bg-red-600/50 text-red-200"),children:s?"Queued":n?"Can Afford":"Too Expensive"})]},e.id)}),k.length>3&&ne.jsxs("div",{className:"text-xs text-gray-400 text-center",children:["+",k.length-3," more available"]})]})]})]}),f&&ne.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] backdrop-blur-sm",onClick:e=>{e.target===e.currentTarget&&(x(!1),h())},onKeyDown:e=>{"Escape"===e.key&&(x(!1),h())},tabIndex:-1,ref:e=>{e&&setTimeout(()=>{e.contains(document.activeElement)||e.focus()},100)},children:ne.jsxs("div",{className:`bg-gray-800/95 rounded-lg p-3 sm:p-6 max-w-6xl w-full mx-2 sm:mx-4 max-h-[95vh] sm:max-h-[90vh] overflow-hidden border ${g.theme.accent} ${g.theme.glowClass}`,children:[ne.jsxs("div",{className:"flex justify-between items-center mb-3 sm:mb-4",children:[ne.jsx("h2",{className:`text-lg sm:text-2xl font-bold bg-gradient-to-r ${g.theme.primary} bg-clip-text text-transparent`,children:"Research Tree"}),ne.jsx("button",{onClick:()=>{x(!1),h()},className:"text-gray-400 hover:text-white text-xl sm:text-2xl transition-colors p-1",children:""})]}),ne.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 lg:gap-6 h-[calc(95vh-6rem)] sm:h-[calc(90vh-8rem)]",children:[ne.jsxs("div",{className:"col-span-1 space-y-3 lg:space-y-4 order-1",children:[ne.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-300",children:"Available Research"}),ne.jsx("div",{className:"space-y-2 lg:space-y-3 max-h-[calc(30vh)] lg:max-h-[calc(90vh-12rem)] overflow-y-auto",children:0===k.length?ne.jsxs("div",{className:"text-center py-8",children:[ne.jsx("div",{className:"text-gray-400 text-lg mb-2",children:""}),ne.jsx("p",{className:"text-gray-400",children:"No research available at the moment."}),ne.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Complete more buildings to unlock new research."})]}):k.map(e=>{const t=l(e.id),n=o(t),s=r.queues.research.some(t=>t.targetId===e.id);return ne.jsxs("div",{"data-tutorial":"mining"===e.id?"mining-research":void 0,className:"rounded-lg p-3 lg:p-4 transition-all duration-200 hover:shadow-lg cursor-pointer "+(s?"bg-yellow-900/30 border border-yellow-500/30 opacity-60":n?"bg-purple-900/30 border border-purple-500/30 hover:bg-purple-900/50":"bg-gray-700/30 border border-gray-600/30 opacity-75"),onClick:()=>!s&&N(e.id),children:[ne.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between mb-2 lg:mb-3",children:[ne.jsx("div",{className:"flex-1",children:ne.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3 mb-2",children:[ne.jsx("div",{className:"text-xl lg:text-2xl",children:""}),ne.jsxs("div",{className:"flex-1",children:[ne.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:space-x-2",children:[ne.jsx("h3",{className:"text-sm lg:text-lg font-bold text-white",children:e.name}),e.permanent&&ne.jsx("span",{className:"bg-blue-600/50 text-blue-200 text-xs px-2 py-1 rounded-full border border-blue-500/30 w-fit mt-1 lg:mt-0",children:"Permanent"})]}),ne.jsx("p",{className:"text-gray-400 text-xs lg:text-sm",children:e.description})]})]})}),ne.jsx("button",{ref:t=>{p.current[e.id]=t},onClick:t=>{t.stopPropagation(),s||N(e.id)},disabled:!n||s,className:"px-3 lg:px-4 py-2 rounded-lg font-semibold text-xs lg:text-sm transition-all duration-200 w-full lg:w-auto mt-2 lg:mt-0 "+(s?"bg-yellow-600 text-yellow-200 cursor-not-allowed opacity-60":n?"bg-purple-600 hover:bg-purple-700 text-white shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"),title:s?"Research already queued":n?`Queue research (${w(i(e.id))})`:"Cannot afford this research",children:s?"Queued":"Research"})]}),S(e.id).length>0&&ne.jsxs("div",{className:"mb-2 lg:mb-3 bg-blue-600/20 border border-blue-500/30 rounded p-1.5 lg:p-2",children:[ne.jsx("h5",{className:"text-xs font-semibold text-blue-300 mb-1",children:"Effects:"}),ne.jsx("ul",{className:"text-xs text-blue-200 space-y-0.5 lg:space-y-1",children:S(e.id).map((e,t)=>ne.jsxs("li",{className:"flex items-start space-x-1",children:[ne.jsx("span",{children:""}),ne.jsx("span",{children:e})]},t))})]}),ne.jsxs("div",{className:"mb-2 lg:mb-3",children:[ne.jsxs("div",{className:"flex items-center space-x-2 mb-1 lg:mb-2",children:[ne.jsx("span",{className:"text-xs lg:text-sm font-semibold text-gray-300",children:"Cost:"}),n&&ne.jsx("span",{className:"text-xs bg-green-600/50 text-green-200 px-2 py-1 rounded",children:"Can Afford"})]}),ne.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-1 lg:gap-2",children:Object.entries(e.cost).map(([t,n])=>{if(void 0===n||n<=0)return null;const s=r.resources[t],i=l(e.id)[t],a=r.prestige.multipliers.researchCost<1,o=s.value-s.lockedAmount>=(i||n);return ne.jsxs("div",{className:"flex items-center justify-between p-1.5 lg:p-2 rounded "+(o?"bg-gray-600/30":"bg-red-600/20 border border-red-500/30"),children:[ne.jsxs("span",{className:"flex items-center space-x-1 lg:space-x-2 text-xs lg:text-sm",children:[ne.jsx(hh,{resourceType:t,size:"xs"}),ne.jsxs("span",{className:"truncate",children:[s.name,":"]})]}),ne.jsx("div",{className:"flex flex-col items-end",children:a&&i!==n?ne.jsxs(ne.Fragment,{children:[ne.jsx("span",{className:"text-xs text-gray-400 line-through",children:Math.floor(n)}),ne.jsx("span",{className:"font-semibold "+(o?"text-green-400":"text-red-400"),children:Math.floor(i||n)})]}):ne.jsx("span",{className:"font-semibold "+(o?"text-gray-200":"text-red-400"),children:Math.floor(n)})})]},t)})}),r.prestige.multipliers.researchCost<1&&ne.jsxs("div",{className:"text-xs text-purple-400 mt-2 flex items-center space-x-1",children:[ne.jsx("span",{children:""}),ne.jsxs("span",{children:["Prestige discount: -",(100*(1-r.prestige.multipliers.researchCost)).toFixed(0),"%"]})]})]}),ne.jsxs("div",{className:"space-y-1 lg:space-y-2",children:[ne.jsx("h4",{className:"text-xs lg:text-sm font-semibold text-gray-300",children:"Unlocks:"}),e.id.includes("ClickPower")&&ne.jsxs("div",{className:"bg-yellow-600/30 border border-yellow-500/30 rounded p-1.5 lg:p-2",children:[ne.jsxs("div",{className:"flex items-center space-x-1 lg:space-x-2",children:[ne.jsx("span",{className:"text-yellow-400",children:""}),ne.jsxs("span",{className:"text-yellow-200 text-xs lg:text-sm font-semibold",children:["Click Power: ",v(e.id),"x"]})]}),ne.jsx("div",{className:"text-xs text-yellow-300 mt-1",children:(a=e.id,{basicClickPower:"Double your manual gathering efficiency (scaled by resource rarity)",stoneClickPower:"Triple your manual gathering efficiency (scaled by resource rarity)",ironClickPower:"3x manual gathering efficiency (scaled by resource rarity)",copperClickPower:"4x manual gathering efficiency (scaled by resource rarity)",gearClickPower:"4x manual gathering efficiency (scaled by resource rarity)",steelClickPower:"5x manual gathering efficiency (scaled by resource rarity)",circuitClickPower:"8x manual gathering efficiency (scaled by resource rarity)",plasticClickPower:"10x manual gathering efficiency (scaled by resource rarity)",computerClickPower:"12x manual gathering efficiency (scaled by resource rarity)",roboticClickPower:"12x manual gathering efficiency (scaled by resource rarity)",quantumClickPower:"18x manual gathering efficiency (scaled by resource rarity)",naniteClickPower:"25x manual gathering efficiency (scaled by resource rarity)",fusionClickPower:"35x manual gathering efficiency (scaled by resource rarity)",antimatterClickPower:"50x manual gathering efficiency (scaled by resource rarity)",singularityClickPower:"75x manual gathering efficiency (scaled by resource rarity)"}[a]||"Improves manual gathering (scaled by resource rarity)")})]}),e.unlocks.resources&&e.unlocks.resources.length>0&&ne.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.unlocks.resources.slice(0,3).map(e=>{const t=r.resources[e];return ne.jsxs("div",{className:"flex items-center space-x-1 bg-blue-600/30 px-1.5 lg:px-2 py-1 rounded text-xs",children:[ne.jsx(hh,{resourceType:e,size:"xs"}),ne.jsx("span",{className:"text-blue-200 text-xs truncate",children:t.name})]},e)}),e.unlocks.resources.length>3&&ne.jsxs("div",{className:"text-xs text-gray-400 px-2 py-1",children:["+",e.unlocks.resources.length-3," more"]})]}),e.unlocks.buildings&&e.unlocks.buildings.length>0&&ne.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.unlocks.buildings.slice(0,3).map(e=>{const t=r.buildings[e];return ne.jsxs("div",{className:"flex items-center space-x-1 bg-green-600/30 px-1.5 lg:px-2 py-1 rounded text-xs",children:[ne.jsx("span",{className:"text-xs lg:text-sm",children:""}),ne.jsx("span",{className:"text-green-200 text-xs truncate",children:t.name})]},e)}),e.unlocks.buildings.length>3&&ne.jsxs("div",{className:"text-xs text-gray-400 px-2 py-1",children:["+",e.unlocks.buildings.length-3," more"]})]})]})]},e.id);var a})})]}),ne.jsxs("div",{className:"col-span-1 space-y-3 lg:space-y-4 order-3 lg:order-2",children:[ne.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-300",children:"Research Details"}),ne.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-500/30 rounded-lg p-3 lg:p-4",children:[ne.jsxs("h4",{className:"text-xs lg:text-sm font-semibold text-yellow-300 mb-2 lg:mb-3 flex items-center",children:[ne.jsx("span",{className:"mr-1 lg:mr-2",children:""}),"Click Power Progression"]}),ne.jsxs("div",{className:"space-y-1 lg:space-y-2 text-xs",children:[ne.jsxs("div",{className:"flex justify-between items-center",children:[ne.jsx("span",{className:"text-gray-300 text-xs",children:"Current Click Power:"}),ne.jsxs("span",{className:"text-yellow-400 font-bold text-xs",children:[r.clickPower,"x"]})]}),ne.jsxs("div",{className:"flex justify-between items-center",children:[ne.jsx("span",{className:"text-gray-300 text-xs",children:"Next Upgrade:"}),ne.jsx("span",{className:"text-gray-400 text-xs",children:(()=>{const e=["basicClickPower","stoneClickPower","ironClickPower","copperClickPower","gearClickPower","steelClickPower","circuitClickPower","plasticClickPower","computerClickPower","roboticClickPower","quantumClickPower","naniteClickPower","fusionClickPower","antimatterClickPower","singularityClickPower"];for(const t of e){const e=r.research[t];if(e&&e.unlocked&&!e.completed)return`${v(t)}x (${e.name})`}return"Maxed out!"})()})]}),ne.jsx("div",{className:"w-full bg-gray-600 rounded-full h-1.5 lg:h-2 mt-1 lg:mt-2",children:ne.jsx("div",{className:"bg-yellow-500 h-1.5 lg:h-2 rounded-full transition-all duration-300",style:{width:`${(()=>{const e=["basicClickPower","stoneClickPower","ironClickPower","copperClickPower","gearClickPower","steelClickPower","circuitClickPower","plasticClickPower","computerClickPower","roboticClickPower","quantumClickPower","naniteClickPower","fusionClickPower","antimatterClickPower","singularityClickPower"],t=e.filter(e=>r.research[e]&&r.research[e].completed).length;return Math.round(t/e.length*100)})()}%`}})})]})]}),ne.jsx("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded-lg p-3 lg:p-4 hidden lg:block",children:ne.jsxs("div",{className:"text-center text-gray-400",children:[ne.jsx("div",{className:"text-4xl mb-4",children:""}),ne.jsx("p",{className:"text-lg",children:"Select a research item to view details"})]})})]}),ne.jsxs("div",{className:"col-span-1 space-y-3 lg:space-y-4 order-2 lg:order-3",children:[ne.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-300",children:"Completed Research"}),ne.jsx("div",{className:"space-y-1 lg:space-y-2 max-h-[calc(30vh)] lg:max-h-[calc(90vh-12rem)] overflow-y-auto",children:0===j.length?ne.jsxs("div",{className:"text-center py-4 lg:py-8 text-gray-400",children:[ne.jsx("div",{className:"text-xl lg:text-2xl mb-2",children:""}),ne.jsx("p",{className:"text-xs lg:text-sm",children:"No research completed yet"})]}):j.map(e=>ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 p-2 lg:p-3 rounded-lg text-xs lg:text-sm text-gray-300 flex items-center justify-between",children:[ne.jsxs("div",{className:"flex items-center space-x-1 lg:space-x-2 flex-1",children:[ne.jsx("span",{className:"text-green-400 text-sm",children:""}),ne.jsx("span",{className:"truncate text-xs lg:text-sm",children:e.name})]}),e.permanent&&ne.jsx("span",{className:"bg-blue-600/50 text-blue-200 text-xs px-1.5 lg:px-2 py-1 rounded-full border border-blue-500/30 ml-2",children:"Permanent"})]},e.id))})]})]})]})})]})}),Ch=({compact:e=!1})=>{const{gameState:t}=lh(),{statistics:n}=t,{currentEra:r,unlockedEras:s}=xh(),i=e=>`${Math.floor(e/3600)}h ${Math.floor(e%3600/60)}m ${Math.floor(e%60)}s`,a=e=>e.toLocaleString(void 0,{maximumFractionDigits:2}),o=Object.values(n.buildingsConstructed).reduce((e,t)=>e+t,0),l=Object.values(n.totalResourcesProduced).reduce((e,t)=>e+t,0);return e?ne.jsxs("div",{className:"space-y-3",children:[ne.jsx("div",{className:`bg-gray-700/50 rounded p-3 border ${r.theme.accent} backdrop-blur-sm`,children:ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("span",{className:"text-2xl",children:r.icon}),ne.jsxs("div",{className:"flex-1 min-w-0",children:[ne.jsx("div",{className:`text-sm font-bold bg-gradient-to-r ${r.theme.primary} bg-clip-text text-transparent truncate`,children:r.name}),ne.jsxs("div",{className:"text-xs text-gray-400",children:["Era ",s.length,"/10"]})]})]})}),ne.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[ne.jsxs("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded p-2 text-center",children:[ne.jsx("div",{className:"text-sm",children:""}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Play Time"}),ne.jsx("div",{className:"text-sm font-bold text-blue-400",children:i(n.playTime)})]}),ne.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded p-2 text-center",children:[ne.jsx("div",{className:"text-sm",children:""}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Buildings"}),ne.jsx("div",{className:"text-sm font-bold text-green-400",children:o})]}),ne.jsxs("div",{className:"bg-purple-600/20 border border-purple-500/30 rounded p-2 text-center",children:[ne.jsx("div",{className:"text-sm",children:""}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Research"}),ne.jsx("div",{className:"text-sm font-bold text-purple-400",children:n.researchCompleted.length})]})]}),ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded p-2",children:[ne.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[ne.jsx("span",{className:"text-green-400 text-xs",children:""}),ne.jsx("h3",{className:"text-xs font-semibold text-gray-300",children:"Buildings Constructed"})]}),ne.jsx("div",{className:"space-y-1 max-h-[15vh] overflow-y-auto scrollbar-thin",children:Object.entries(n.buildingsConstructed).filter(([e,t])=>t>0).sort(([e,t],[n,r])=>r-t).map(([e,n])=>ne.jsxs("div",{className:"flex items-center justify-between py-1 border-b border-gray-700/30",children:[ne.jsx("span",{className:"text-xs text-gray-300 truncate",children:t.buildings[e].name}),ne.jsx("span",{className:"text-xs font-bold text-green-400",children:n})]},e))})]}),ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded p-2",children:[ne.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[ne.jsx("span",{className:"text-blue-400 text-xs",children:""}),ne.jsx("span",{className:"text-xs font-semibold text-gray-300",children:"Resources Produced"}),ne.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:["Total: ",a(l)]})]}),ne.jsx("div",{className:"space-y-1 max-h-[15vh] overflow-y-auto scrollbar-thin",children:Object.entries(n.totalResourcesProduced).filter(([e,n])=>n>0&&t.resources[e].unlocked).sort(([e,t],[n,r])=>r-t).slice(0,5).map(([e,n])=>{const r=t.resources[e];return ne.jsxs("div",{className:"flex items-center justify-between py-1 border-b border-gray-700/30",children:[ne.jsxs("span",{className:"flex items-center space-x-1 text-xs text-gray-300",children:[ne.jsx(hh,{resourceType:e,size:"xs"}),ne.jsx("span",{className:"truncate",children:r.name})]}),ne.jsx("span",{className:"text-xs font-bold text-blue-400",children:a(n)})]},e)})})]}),ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded p-2",children:[ne.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[ne.jsx("span",{className:"text-orange-400 text-xs",children:""}),ne.jsx("span",{className:"text-xs font-semibold text-gray-300",children:"Resources Consumed"})]}),ne.jsx("div",{className:"space-y-1 max-h-[15vh] overflow-y-auto scrollbar-thin",children:Object.entries(n.totalResourcesSpent).filter(([e,n])=>n>0&&t.resources[e].unlocked).sort(([e,t],[n,r])=>r-t).slice(0,5).map(([e,n])=>{const r=t.resources[e];return ne.jsxs("div",{className:"flex items-center justify-between py-1 border-b border-gray-700/30",children:[ne.jsxs("span",{className:"flex items-center space-x-1 text-xs text-gray-300",children:[ne.jsx(hh,{resourceType:e,size:"xs"}),ne.jsx("span",{className:"truncate",children:r.name})]}),ne.jsx("span",{className:"text-xs font-bold text-orange-400",children:a(n)})]},e)})})]}),n.researchCompleted.length>0&&ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded p-2",children:[ne.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[ne.jsx("span",{className:"text-purple-400 text-xs",children:""}),ne.jsx("h3",{className:"text-xs font-semibold text-gray-300",children:"Completed Research"})]}),ne.jsx("div",{className:"space-y-1 max-h-[15vh] overflow-y-auto scrollbar-thin",children:n.researchCompleted.slice(0,5).map(e=>{const n=t.research[e];return ne.jsxs("div",{className:"flex items-center space-x-1 py-1 border-b border-gray-700/30",children:[ne.jsx("span",{className:"text-green-400 text-xs",children:""}),ne.jsx("span",{className:"text-xs text-gray-300 truncate",children:n.name})]},e)})})]})]}):ne.jsxs("div",{className:"space-y-4",children:[ne.jsxs("div",{className:`bg-gray-700/50 rounded-lg p-4 border ${r.theme.accent} ${r.theme.glowClass} backdrop-blur-sm`,children:[ne.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[ne.jsx("span",{className:"text-3xl",children:r.icon}),ne.jsxs("div",{className:"flex-1",children:[ne.jsx("div",{className:`text-lg font-bold bg-gradient-to-r ${r.theme.primary} bg-clip-text text-transparent`,children:r.name}),ne.jsxs("div",{className:"text-xs text-gray-400",children:["Era ",s.length,"/10  ",r.description]})]})]}),ne.jsx(vh,{})]}),ne.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[ne.jsxs("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-lg p-3 text-center",children:[ne.jsx("div",{className:"text-2xl mb-1",children:""}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Play Time"}),ne.jsx("div",{className:"text-sm font-bold text-blue-400",children:i(n.playTime)})]}),ne.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-lg p-3 text-center",children:[ne.jsx("div",{className:"text-2xl mb-1",children:""}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Buildings"}),ne.jsx("div",{className:"text-sm font-bold text-green-400",children:o})]}),ne.jsxs("div",{className:"bg-purple-600/20 border border-purple-500/30 rounded-lg p-3 text-center",children:[ne.jsx("div",{className:"text-2xl mb-1",children:""}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Research"}),ne.jsx("div",{className:"text-sm font-bold text-purple-400",children:n.researchCompleted.length})]})]}),ne.jsxs("div",{className:"space-y-3",children:[ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded-lg p-3",children:[ne.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[ne.jsx("span",{className:"text-green-400",children:""}),ne.jsx("h3",{className:"text-sm font-semibold text-gray-300",children:"Buildings Constructed"})]}),ne.jsx("div",{className:"space-y-2",children:Object.entries(n.buildingsConstructed).filter(([e,t])=>t>0).sort(([e,t],[n,r])=>r-t).map(([e,n])=>ne.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-600/30 rounded",children:[ne.jsx("span",{className:"text-sm text-gray-300 truncate",children:t.buildings[e].name}),ne.jsx("span",{className:"text-sm font-bold text-green-400",children:n})]},e))})]}),ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded-lg p-3",children:[ne.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[ne.jsx("span",{className:"text-blue-400",children:""}),ne.jsx("span",{className:"text-sm font-semibold text-gray-300",children:"Resources Produced"}),ne.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:["Total: ",Math.floor(l).toLocaleString()]})]}),ne.jsx("div",{className:"space-y-2",children:Object.entries(n.totalResourcesProduced).filter(([e,n])=>n>0&&t.resources[e].unlocked).sort(([e,t],[n,r])=>r-t).map(([e,n])=>{const r=t.resources[e];return ne.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-600/30 rounded",children:[ne.jsxs("span",{className:"flex items-center space-x-2 text-sm text-gray-300",children:[ne.jsx(hh,{resourceType:e,size:"xs"}),ne.jsx("span",{className:"truncate",children:r.name})]}),ne.jsx("span",{className:"text-sm font-bold text-blue-400",children:Math.floor(n).toLocaleString()})]},e)})})]}),ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded-lg p-3",children:[ne.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[ne.jsx("span",{className:"text-orange-400",children:""}),ne.jsx("span",{className:"text-sm font-semibold text-gray-300",children:"Resources Consumed"})]}),ne.jsx("div",{className:"space-y-2",children:Object.entries(n.totalResourcesSpent).filter(([e,n])=>n>0&&t.resources[e].unlocked).sort(([e,t],[n,r])=>r-t).map(([e,n])=>{const r=t.resources[e];return ne.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-600/30 rounded",children:[ne.jsxs("span",{className:"flex items-center space-x-2 text-sm text-gray-300",children:[ne.jsx(hh,{resourceType:e,size:"xs"}),ne.jsx("span",{className:"truncate",children:r.name})]}),ne.jsx("span",{className:"text-sm font-bold text-orange-400",children:Math.floor(n).toLocaleString()})]},e)})})]}),n.researchCompleted.length>0&&ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded-lg p-3",children:[ne.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[ne.jsx("span",{className:"text-purple-400",children:""}),ne.jsx("h3",{className:"text-sm font-semibold text-gray-300",children:"Completed Research"})]}),ne.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.researchCompleted.map(e=>{const n=t.research[e];return ne.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-600/30 rounded text-sm",children:[ne.jsx("span",{className:"text-green-400",children:""}),ne.jsx("span",{className:"text-gray-300 truncate",children:n.name})]},e)})})]})]})]})},Sh=({isOpen:e,onClose:t})=>{const{currentEra:n}=xh(),{playMenuClose:r}=zd();if(!e)return null;const s=()=>{r(),t()};return ne.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",onKeyDown:e=>{"Escape"===e.key&&s()},tabIndex:-1,ref:e=>{e&&setTimeout(()=>{e.contains(document.activeElement)||e.focus()},100)},children:ne.jsxs("div",{className:`bg-gray-800/95 rounded-lg p-4 md:p-6 max-w-4xl w-full mx-2 md:mx-4 max-h-[90vh] overflow-y-auto border ${n.theme.accent} ${n.theme.glowClass}`,children:[ne.jsxs("div",{className:"flex justify-between items-center mb-4",children:[ne.jsx("h2",{className:`text-2xl font-bold bg-gradient-to-r ${n.theme.primary} bg-clip-text text-transparent`,children:"Statistics & Progress"}),ne.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white text-2xl transition-colors",children:""})]}),ne.jsx(Ch,{})]})})},Mh=()=>{const{gameState:e,bankResourceForPrestige:t}=lh();return ne.jsxs("div",{className:"bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-500/30 rounded-lg p-4 mb-4",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("span",{className:"text-2xl",children:""}),ne.jsxs("div",{children:[ne.jsx("h3",{className:"text-lg font-bold text-purple-300",children:"Prestige Banking"}),ne.jsx("p",{className:"text-xs text-gray-400",children:"Convert endgame resources into prestige points"})]})]}),ne.jsxs("div",{className:"text-right",children:[ne.jsx("div",{className:"text-2xl font-bold text-purple-400",children:e.prestige.bankedPrestigePoints||0}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Banked Points"})]})]}),ne.jsxs("div",{className:"bg-black/20 rounded-lg p-3 mb-3",children:[ne.jsx("div",{className:"text-sm text-gray-300 mb-2",children:" Conversion Rates:"}),ne.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[ne.jsx("div",{children:" 200 Antimatter = 1 prestige point"}),ne.jsx("div",{children:" 50 Singularity = 1 prestige point"})]}),ne.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Banked points are added to your total when you prestige"})]}),ne.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[{type:"antimatter",name:"Antimatter",rate:200},{type:"singularity",name:"Singularity",rate:50}].map(n=>{var r;const s=(null==(r=e.resources[n.type])?void 0:r.value)||0,i=s>=n.rate,a=Math.floor(s/n.rate);return ne.jsxs("div",{className:"bg-gray-800/50 border border-gray-600/30 rounded-lg p-3",children:[ne.jsx("div",{className:"flex items-center justify-between mb-2",children:ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx(hh,{resourceType:n.type,size:"sm"}),ne.jsxs("div",{children:[ne.jsx("div",{className:"text-sm font-semibold text-gray-200",children:n.name}),ne.jsxs("div",{className:"text-xs text-gray-400",children:[s.toFixed(0)," available"]})]})]})}),ne.jsxs("div",{className:"mb-2",children:[ne.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Can convert: ",a,"x"]}),ne.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5",children:ne.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${Math.min(s/n.rate*100,100)}%`}})})]}),ne.jsx("button",{onClick:()=>{return e=n.type,void(t(e)||console.log(`Not enough ${e} to convert`));var e},disabled:!i,className:"w-full py-2 px-3 rounded-lg text-sm font-medium transition-all duration-200 "+(i?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg hover:shadow-xl":"bg-gray-700 text-gray-500 cursor-not-allowed"),children:i?`Convert ${n.rate}`:"Not Enough"})]},n.type)})}),ne.jsx("div",{className:"mt-4 text-center",children:ne.jsx("div",{className:"text-xs text-gray-500",children:" Banked points will be reset to 0 after you prestige"})})]})},_h=()=>{const{gameState:t,calculatePrestigePoints:n,performPrestige:r,purchasePrestigeUpgrade:s,resetPrestigeUpgrades:i}=lh(),{playPrestigeConfirm:a,playPrestigeExecute:o,playPrestigeComplete:l}=(()=>{const{playSound:t}=Id();return{playPrestigeAvailable:()=>m(e,null,function*(){return yield t("prestige_available")}),playPrestigeConfirm:()=>m(e,null,function*(){return yield t("prestige_confirm")}),playPrestigeExecute:()=>m(e,null,function*(){return yield t("prestige_execute")}),playPrestigeComplete:()=>m(e,null,function*(){return yield t("prestige_complete")})}})(),{playMenuOpen:c,playMenuClose:u,playButtonClick:d}=zd(),{prestige:h}=t,[g,p]=G.useState(!1),f=n()||0,x=f>=10,b=()=>{u(),p(!1)},y=e=>{s(e)?console.log(`Upgraded ${e}`):console.log(`Cannot afford ${e} upgrade`)};return ne.jsxs("div",{className:"space-y-3",children:[ne.jsxs("div",{className:"bg-gradient-to-r from-purple-900/40 to-pink-900/40 border-2 border-purple-500/50 rounded-lg p-4 relative overflow-hidden",children:[ne.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/10 to-pink-600/10 animate-pulse"}),ne.jsxs("div",{className:"relative z-10",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-3",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("span",{className:"text-3xl animate-pulse",children:""}),ne.jsxs("div",{children:[ne.jsx("h3",{className:"text-lg font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"The Singularity"}),ne.jsxs("p",{className:"text-xs text-gray-400",children:["Prestige Level ",h.level]})]})]}),ne.jsxs("div",{className:"text-right",children:[ne.jsx("div",{className:"text-2xl font-bold text-purple-400",children:h.points}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Prestige Points"})]})]}),ne.jsxs("div",{className:"mb-3",children:[ne.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[ne.jsx("span",{className:"text-gray-400",children:"Progress to Ascension"}),ne.jsxs("span",{className:"text-purple-400",children:[f," / 10 points needed"]})]}),ne.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 overflow-hidden",children:ne.jsx("div",{className:"h-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full transition-all duration-500 relative",style:{width:`${Math.min(f/10*100,100)}%`},children:f>=10&&ne.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})})]}),f<10&&ne.jsx("div",{className:"text-xs text-gray-500 italic",children:"Next ascension will grant powerful permanent bonuses..."}),x&&ne.jsx("div",{className:"text-xs text-yellow-300 font-medium animate-pulse",children:" Ready for Ascension! "})]})]}),ne.jsx(Mh,{}),x&&ne.jsxs("button",{onClick:()=>{c(),p(!0)},className:"w-full py-4 px-6 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl animate-pulse",children:[" PRESTIGE! (+",f," pts)"]}),ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded-lg p-4",children:[ne.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Active Bonuses"}),ne.jsxs("div",{className:"space-y-2",children:[ne.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-600/30 rounded",children:[ne.jsxs("span",{className:"flex items-center space-x-2 text-sm",children:[ne.jsx("span",{className:"text-green-400",children:""}),ne.jsx("span",{className:"text-gray-300",children:"Production Bonus"})]}),ne.jsxs("span",{className:"text-green-400 font-semibold",children:["+",(100*(h.multipliers.production-1)).toFixed(0),"%"]})]}),ne.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-600/30 rounded",children:[ne.jsxs("span",{className:"flex items-center space-x-2 text-sm",children:[ne.jsx("span",{className:"text-blue-400",children:""}),ne.jsx("span",{className:"text-gray-300",children:"Storage Bonus"})]}),ne.jsxs("span",{className:"text-blue-400 font-semibold",children:["+",(100*(h.multipliers.storage-1)).toFixed(0),"%"]})]}),ne.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-600/30 rounded",children:[ne.jsxs("span",{className:"flex items-center space-x-2 text-sm",children:[ne.jsx("span",{className:"text-yellow-400",children:""}),ne.jsx("span",{className:"text-gray-300",children:"Click Power"})]}),ne.jsxs("span",{className:"text-yellow-400 font-semibold",children:["+",(100*(h.multipliers.clickPower-1)).toFixed(0),"%"]})]}),ne.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-600/30 rounded",children:[ne.jsxs("span",{className:"flex items-center space-x-2 text-sm",children:[ne.jsx("span",{className:"text-purple-400",children:""}),ne.jsx("span",{className:"text-gray-300",children:"Research Discount"})]}),ne.jsxs("span",{className:"text-purple-400 font-semibold",children:["-",(100*(1-h.multipliers.researchCost)).toFixed(0),"%",h.upgrades.researchDiscount>=50&&ne.jsx("span",{className:"text-green-400 ml-1",children:"(MAX)"})]})]}),ne.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-600/30 rounded",children:[ne.jsxs("span",{className:"flex items-center space-x-2 text-sm",children:[ne.jsx("span",{className:"text-cyan-400",children:""}),ne.jsx("span",{className:"text-gray-300",children:"Building Cooldown"})]}),ne.jsxs("span",{className:"text-cyan-400 font-semibold",children:["-",(100*(1-h.multipliers.buildingCooldownMultiplier)).toFixed(0),"%",h.upgrades.buildingCooldownReduction>=50&&ne.jsx("span",{className:"text-green-400 ml-1",children:"(MAX)"})]})]}),ne.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-600/30 rounded",children:[ne.jsxs("span",{className:"flex items-center space-x-2 text-sm",children:[ne.jsx("span",{className:"text-orange-400",children:""}),ne.jsx("span",{className:"text-gray-300",children:"Building Cost"})]}),ne.jsxs("span",{className:"text-orange-400 font-semibold",children:["-",(100*(1-h.multipliers.buildingCostMultiplier)).toFixed(0),"%",h.upgrades.buildingCostReduction>=50&&ne.jsx("span",{className:"text-green-400 ml-1",children:"(MAX)"})]})]})]})]}),ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded-lg p-4",children:[ne.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Prestige Upgrades"}),ne.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[ne.jsxs("div",{className:"space-y-2",children:[ne.jsxs("div",{className:"flex items-center justify-between",children:[ne.jsx("span",{className:"text-sm text-gray-300",children:"Production"}),ne.jsxs("span",{className:"text-xs text-gray-400",children:["Lvl ",h.upgrades.productionBonus]})]}),ne.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"+2% per level"}),ne.jsx("button",{onClick:()=>y("productionBonus"),disabled:h.points<3,className:"w-full py-2 px-3 rounded-lg text-sm font-medium transition-all duration-200 "+(h.points>=3?"bg-green-600 hover:bg-green-700 text-white shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:"Upgrade (3 pts)"})]}),ne.jsxs("div",{className:"space-y-2",children:[ne.jsxs("div",{className:"flex items-center justify-between",children:[ne.jsx("span",{className:"text-sm text-gray-300",children:"Storage"}),ne.jsxs("span",{className:"text-xs text-gray-400",children:["Lvl ",h.upgrades.storageBonus]})]}),ne.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"+3% per level"}),ne.jsx("button",{onClick:()=>y("storageBonus"),disabled:h.points<2,className:"w-full py-2 px-3 rounded-lg text-sm font-medium transition-all duration-200 "+(h.points>=2?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:"Upgrade (2 pts)"})]}),ne.jsxs("div",{className:"space-y-2",children:[ne.jsxs("div",{className:"flex items-center justify-between",children:[ne.jsx("span",{className:"text-sm text-gray-300",children:"Click Power"}),ne.jsxs("span",{className:"text-xs text-gray-400",children:["Lvl ",h.upgrades.clickBonus]})]}),ne.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"+3% per level"}),ne.jsx("button",{onClick:()=>y("clickBonus"),disabled:h.points<5,className:"w-full py-2 px-3 rounded-lg text-sm font-medium transition-all duration-200 "+(h.points>=5?"bg-yellow-600 hover:bg-yellow-700 text-white shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:"Upgrade (5 pts)"})]}),ne.jsxs("div",{className:"space-y-2",children:[ne.jsxs("div",{className:"flex items-center justify-between",children:[ne.jsx("span",{className:"text-sm text-gray-300",children:"Research"}),ne.jsxs("span",{className:"text-xs text-gray-400",children:["Lvl ",h.upgrades.researchDiscount]})]}),ne.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"-1% per level (max 50%)"}),h.upgrades.researchDiscount>=50&&ne.jsx("div",{className:"text-xs text-green-400 text-center mb-2",children:"Max discount reached (50%)"}),ne.jsx("button",{onClick:()=>y("researchDiscount"),disabled:h.points<8||h.upgrades.researchDiscount>=50,className:"w-full py-2 px-3 rounded-lg text-sm font-medium transition-all duration-200 "+(h.points>=8&&h.upgrades.researchDiscount<50?"bg-purple-600 hover:bg-purple-700 text-white shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:h.upgrades.researchDiscount>=50?"Maxed (8 pts)":"Upgrade (8 pts)"})]}),ne.jsxs("div",{className:"space-y-2",children:[ne.jsxs("div",{className:"flex items-center justify-between",children:[ne.jsx("span",{className:"text-sm text-gray-300",children:"Build Cooldown"}),ne.jsxs("span",{className:"text-xs text-gray-400",children:["Lvl ",h.upgrades.buildingCooldownReduction]})]}),ne.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"-2% per level (max 100%)"}),h.upgrades.buildingCooldownReduction>=50&&ne.jsx("div",{className:"text-xs text-green-400 text-center mb-2",children:"Max reduction reached (100%)"}),ne.jsx("button",{onClick:()=>y("buildingCooldownReduction"),disabled:h.points<2||h.upgrades.buildingCooldownReduction>=50,className:"w-full py-2 px-3 rounded-lg text-sm font-medium transition-all duration-200 "+(h.points>=2&&h.upgrades.buildingCooldownReduction<50?"bg-cyan-600 hover:bg-cyan-700 text-white shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:h.upgrades.buildingCooldownReduction>=50?"Maxed (2 pts)":"Upgrade (2 pts)"})]}),ne.jsxs("div",{className:"space-y-2",children:[ne.jsxs("div",{className:"flex items-center justify-between",children:[ne.jsx("span",{className:"text-sm text-gray-300",children:"Building Cost"}),ne.jsxs("span",{className:"text-xs text-gray-400",children:["Lvl ",h.upgrades.buildingCostReduction]})]}),ne.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"-1% per level (max 50%)"}),h.upgrades.buildingCostReduction>=50&&ne.jsx("div",{className:"text-xs text-green-400 text-center mb-2",children:"Max discount reached (50%)"}),ne.jsx("button",{onClick:()=>y("buildingCostReduction"),disabled:h.points<8||h.upgrades.buildingCostReduction>=50,className:"w-full py-2 px-3 rounded-lg text-sm font-medium transition-all duration-200 "+(h.points>=8&&h.upgrades.buildingCostReduction<50?"bg-orange-600 hover:bg-orange-700 text-white shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:h.upgrades.buildingCostReduction>=50?"Maxed (8 pts)":"Upgrade (8 pts)"})]})]})]}),ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded-lg p-3",children:[ne.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[ne.jsx("span",{className:"text-blue-400",children:""}),ne.jsx("span",{className:"text-sm font-semibold text-gray-300",children:"What is Prestige?"})]}),ne.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[ne.jsx("p",{children:" Reset most progress to gain permanent bonuses"}),ne.jsx("p",{children:" Keep prestige points and upgrades"}),ne.jsx("p",{children:" Unlock new content and faster progression"}),ne.jsx("p",{children:" Requires at least 10 points to prestige"}),ne.jsx("p",{children:" Only available in late Singularity era (100+ singularity produced)"}),ne.jsx("p",{children:" Points earned from endgame buildings, research, and resource production"})]})]}),g&&ne.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 backdrop-blur-sm",onClick:b,children:ne.jsxs("div",{className:"bg-gray-800 border-2 border-purple-500/50 rounded-lg p-6 max-w-lg w-full mx-4 shadow-2xl shadow-purple-500/30",onClick:e=>e.stopPropagation(),children:[ne.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ne.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:" Confirm Prestige"}),ne.jsx("button",{onClick:b,className:"text-gray-400 hover:text-white text-2xl transition-colors",children:""})]}),ne.jsxs("div",{className:"space-y-4",children:[ne.jsx("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4",children:ne.jsxs("div",{className:"text-center",children:[ne.jsx("p",{className:"text-yellow-300 font-semibold mb-2",children:" Warning: This will reset your progress!"}),ne.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[ne.jsx("li",{children:" All resources will be reset"}),ne.jsx("li",{children:" All buildings will be reset"}),ne.jsx("li",{children:" All research will be reset"}),ne.jsx("li",{children:" Tutorial progress will be reset"})]})]})}),ne.jsx("div",{className:"bg-green-900/30 border border-green-500/50 rounded-lg p-4",children:ne.jsxs("div",{className:"text-center",children:[ne.jsx("p",{className:"text-green-300 font-semibold mb-2",children:" You will gain:"}),ne.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[ne.jsxs("li",{children:[" ",ne.jsxs("span",{className:"text-purple-400 font-bold",children:["+",f," Prestige Points"]})]}),ne.jsx("li",{children:" All current prestige upgrades will be kept"}),ne.jsx("li",{children:" Permanent multiplier bonuses"}),ne.jsx("li",{children:" Faster progression on next run"})]})]})}),ne.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[ne.jsx("p",{className:"text-sm text-gray-300 mb-2 text-center font-semibold",children:"Choose your prestige option:"}),ne.jsxs("div",{className:"text-xs text-gray-400 text-center space-y-1",children:[ne.jsxs("p",{children:[ne.jsx("span",{className:"text-orange-400 font-semibold",children:"Reset"})," refunds all upgrade points to redistribute them."]}),ne.jsxs("p",{children:[ne.jsx("span",{className:"text-purple-400 font-semibold",children:"Keep"})," maintains your current upgrade choices."]})]})]}),ne.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 pt-2",children:[ne.jsx("button",{onClick:()=>{d(),i()&&r()&&(o(),l(),p(!1),console.log("Prestige upgrades reset and prestige executed successfully!"))},className:"py-3 px-4 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-semibold text-sm transition-all duration-200 shadow-lg hover:shadow-xl",children:" Reset & Prestige"}),ne.jsx("button",{onClick:()=>{a(),r()?(o(),l(),p(!1),console.log("Prestige successful!")):console.log("Prestige failed - not enough points")},className:"py-3 px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold text-sm transition-all duration-200 shadow-lg hover:shadow-xl",children:" Prestige"})]}),ne.jsx("button",{onClick:b,className:"w-full py-2 px-4 bg-gray-600 hover:bg-gray-700 text-gray-300 rounded-lg font-medium transition-all duration-200",children:"Cancel"})]})]})})]})},Ph=({isOpen:e,onClose:t})=>{const{currentEra:n}=xh(),{playMenuClose:r}=zd();if(!e)return null;const s=()=>{r(),t()};return ne.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",onKeyDown:e=>{"Escape"===e.key&&s()},tabIndex:-1,ref:e=>{e&&setTimeout(()=>{e.contains(document.activeElement)||e.focus()},100)},children:ne.jsxs("div",{className:"bg-gray-800/95 rounded-lg p-4 md:p-6 max-w-5xl w-full mx-2 md:mx-4 max-h-[90vh] overflow-y-auto border-2 border-purple-500/50 shadow-purple-500/30 shadow-2xl",children:[ne.jsxs("div",{className:"flex justify-between items-center mb-4",children:[ne.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"The Singularity - Prestige System"}),ne.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white text-2xl transition-colors",children:""})]}),ne.jsx(_h,{})]})})},Th={woodcutter:{color:"#8B4513",secondaryColor:"#654321",shape:"mine",name:"Woodcutter",category:"resource"},stoneMine:{color:"#808080",secondaryColor:"#606060",shape:"mine",name:"Stone Mine",category:"resource"},ironMine:{color:"#A19D94",secondaryColor:"#7D7D7D",shape:"mine",name:"Iron Mine",category:"resource"},copperMine:{color:"#B87333",secondaryColor:"#A05A2C",shape:"mine",name:"Copper Mine",category:"resource"},gearFactory:{color:"#4682B4",secondaryColor:"#36648B",shape:"factory",name:"Gear Factory",category:"production"},steelFoundry:{color:"#708090",secondaryColor:"#4F5969",shape:"factory",name:"Steel Foundry",category:"production"},circuitFactory:{color:"#228B22",secondaryColor:"#006400",shape:"factory",name:"Circuit Factory",category:"production"},plasticFactory:{color:"#E6E6FA",secondaryColor:"#D8BFD8",shape:"factory",name:"Plastic Factory",category:"production"},glassFactory:{color:"#ADD8E6",secondaryColor:"#87CEEB",shape:"factory",name:"Glass Factory",category:"production"},computerFactory:{color:"#4169E1",secondaryColor:"#0000CD",shape:"advanced",name:"Computer Factory",category:"advanced"},robotFactory:{color:"#800080",secondaryColor:"#4B0082",shape:"hightech",name:"Robot Factory",category:"advanced"},woodStorage:{color:"#DEB887",secondaryColor:"#CD853F",shape:"storage",name:"Wood Storage",category:"storage"},stoneStorage:{color:"#A9A9A9",secondaryColor:"#696969",shape:"storage",name:"Stone Storage",category:"storage"},metalStorage:{color:"#C0C0C0",secondaryColor:"#A9A9A9",shape:"storage",name:"Metal Storage",category:"storage"},componentStorage:{color:"#20B2AA",secondaryColor:"#008B8B",shape:"storage",name:"Component Storage",category:"storage"},highTechStorage:{color:"#9370DB",secondaryColor:"#8A2BE2",shape:"storage",name:"High-Tech Storage",category:"storage"}},Eh=(e,t,n,r,s,i,a,o,l,c)=>{switch(e.lineWidth=2,e.strokeStyle="#000",i){case"factory":e.fillStyle=o,e.fillRect(t,n,r,s),e.fillStyle=a,e.fillRect(t+2,n+.2*s,r-4,.8*s),e.beginPath(),e.moveTo(t,n+.2*s),e.lineTo(t+r/2,n),e.lineTo(t+r,n+.2*s),e.closePath(),e.fillStyle=o,e.fill(),e.stroke(),e.fillStyle="#333",e.fillRect(t+.25*r,n-.15*s,.1*r,.2*s),e.fillRect(t+.65*r,n-.2*s,.1*r,.25*s),e.fillStyle="#FFFFCC",e.fillRect(t+.2*r,n+.4*s,.15*r,.15*s),e.fillRect(t+.65*r,n+.4*s,.15*r,.15*s),e.fillRect(t+.2*r,n+.65*s,.15*r,.15*s),e.fillRect(t+.65*r,n+.65*s,.15*r,.15*s);break;case"mine":e.fillStyle=o,e.fillRect(t,n+.4*s,r,.6*s),e.beginPath(),e.moveTo(t,n+.4*s),e.quadraticCurveTo(t+r/2,n-.1*s,t+r,n+.4*s),e.closePath(),e.fillStyle=a,e.fill(),e.stroke(),e.beginPath(),e.moveTo(t+.35*r,n+s),e.lineTo(t+.35*r,n+.6*s),e.lineTo(t+.65*r,n+.6*s),e.lineTo(t+.65*r,n+s),e.fillStyle="#000",e.fill(),e.strokeStyle="#8B4513",e.lineWidth=4,e.beginPath(),e.moveTo(t+.35*r,n+.6*s),e.lineTo(t+.35*r,n+s),e.stroke(),e.beginPath(),e.moveTo(t+.65*r,n+.6*s),e.lineTo(t+.65*r,n+s),e.stroke(),e.beginPath(),e.moveTo(t+.35*r,n+.6*s),e.lineTo(t+.65*r,n+.6*s),e.stroke();break;case"storage":e.fillStyle=a,e.fillRect(t,n+.2*s,r,.8*s),e.beginPath(),e.moveTo(t,n+.2*s),e.lineTo(t+r/2,n),e.lineTo(t+r,n+.2*s),e.closePath(),e.fillStyle=o,e.fill(),e.stroke(),e.fillStyle=o,e.fillRect(t+.4*r,n+.6*s,.2*r,.4*s),e.fillStyle="#FFFFCC";for(let i=0;i<3;i++)e.fillRect(t+.15*r+i*r*.25,n+.3*s,.15*r,.15*s);break;case"advanced":e.fillStyle=a,e.fillRect(t,n,r,.8*s),e.fillStyle=o,e.beginPath(),e.moveTo(t,n),e.lineTo(t+r/2,n-.2*s),e.lineTo(t+r,n),e.fill(),e.stroke(),e.fillStyle="#00FFFF";for(let i=0;i<2;i++)for(let a=0;a<3;a++)e.fillRect(t+.2*r+i*r*.4,n+.15*s+a*s*.2,.2*r,.1*s);e.fillStyle=o,e.fillRect(t,n+.8*s,r,.2*s);break;case"hightech":e.fillStyle=a,e.beginPath(),e.arc(t+r/2,n+s/2,.4*r,0,2*Math.PI),e.fill(),e.stroke(),e.fillStyle=o,e.beginPath(),e.moveTo(t+.3*r,n+.3*s),e.lineTo(t+.5*r,n-.1*s),e.lineTo(t+.7*r,n+.3*s),e.closePath(),e.fill(),e.stroke(),e.fillStyle="#CCFFFF",e.beginPath(),e.arc(t+r/2,n+.4*s,.15*r,0,2*Math.PI),e.fill(),e.stroke(),e.fillStyle=o,e.fillRect(t+.2*r,n+.7*s,.6*r,.3*s)}c>1&&(e.fillStyle="#FFD700",e.font="12px Arial",e.textAlign="center",e.fillText(`Level ${c}`,t+r/2,n+s+15)),e.fillStyle="#FFF",e.font="10px Arial",e.textAlign="center",e.fillText(l,t+r/2,n+s+(c>1?30:15))},Rh=()=>{const{gameState:e}=lh(),t=G.useRef(null),n=G.useRef({}),r=900,s=600,i=Object.values(e.buildings).filter(e=>e.level>0).reduce((e,t)=>e+t.level,0),a=G.useMemo(()=>{const t={resource:[],production:[],storage:[],advanced:[]};return Object.entries(e.buildings).filter(([e,t])=>t.level>0).forEach(([e,n])=>{var r;const s=(null==(r=Th[e])?void 0:r.category)||"resource";t[s].push({id:e,level:n.level})}),t},[e.buildings]),o=G.useMemo(()=>({resource:{x:50,y:50,width:315,height:210},production:{x:540,y:50,width:315,height:210},storage:{x:50,y:360,width:315,height:210},advanced:{x:540,y:360,width:315,height:210}}),[r,s]),l=(e,t,r,s,i)=>{if(n.current[e])return n.current[e];let a=0,o=0,l=0,c=!0;for(;c&&a<50;)o=t.x+Math.random()*(t.width-r),l=t.y+Math.random()*(t.height-s),c=i.some(e=>o<e.x+e.width+5&&o+r+5>e.x&&l<e.y+e.height+5&&l+s+5>e.y),a++;return c&&(o=t.x+Math.random()*(t.width-r),l=t.y+Math.random()*(t.height-s)),n.current[e]={x:o,y:l},{x:o,y:l}};return G.useEffect(()=>{const t=new Set;Object.entries(e.buildings).filter(([e,t])=>t.level>0).forEach(([n])=>{for(let r=1;r<=e.buildings[n].level;r++)t.add(`${n}-${r}`)}),Object.keys(n.current).forEach(e=>{t.has(e)||delete n.current[e]})},[e.buildings]),G.useEffect(()=>{const e=t.current;if(!e)return;const n=e.getContext("2d");if(!n)return;n.clearRect(0,0,e.width,e.height),n.fillStyle="#1A3E1A",n.fillRect(0,0,e.width,e.height),n.fillStyle="#444",n.fillRect(0,270,r,60),n.fillRect(405,0,90,s),n.strokeStyle="#FFF",n.setLineDash([20,20]),n.beginPath(),n.moveTo(450,10),n.lineTo(450,590),n.stroke(),n.beginPath(),n.moveTo(10,300),n.lineTo(890,300),n.stroke(),n.setLineDash([]),n.font="16px Arial",n.fillStyle="#FFF",n.textAlign="center",n.fillText("Resource Area",o.resource.x+o.resource.width/2,o.resource.y-10),n.fillText("Production Area",o.production.x+o.production.width/2,o.production.y-10),n.fillText("Storage Area",o.storage.x+o.storage.width/2,o.storage.y-10),n.fillText("Advanced Facilities",o.advanced.x+o.advanced.width/2,o.advanced.y-10);const i=[];Object.entries(a).forEach(([e,t])=>{const r=o[e];t.forEach(({id:e,level:t})=>{const s=Th[e];if(s)for(let a=1;a<=t;a++){const t=`${e}-${a}`,{x:o,y:c}=l(t,r,80,70,i);i.push({x:o,y:c,width:80,height:70}),Eh(n,o,c,80,70,s.shape,s.color,s.secondaryColor,s.name,a)}})})},[e.buildings,a,o,r,s]),ne.jsxs("div",{className:"p-4",children:[ne.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Factory Visualization"}),0===i?ne.jsx("div",{className:"bg-gray-800 p-4 rounded-lg text-gray-400",children:ne.jsx("p",{children:"Build some structures to see your factory visualization"})}):ne.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[ne.jsx("div",{className:"overflow-auto",children:ne.jsx("canvas",{ref:t,width:r,height:s,className:"bg-gray-900"})}),ne.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-2",children:[ne.jsxs("div",{className:"text-xs flex items-center",children:[ne.jsx("span",{className:"inline-block w-3 h-3 mr-1",style:{backgroundColor:"#8B4513"}}),ne.jsx("span",{className:"text-gray-300",children:"Resource Gatherers"})]}),ne.jsxs("div",{className:"text-xs flex items-center",children:[ne.jsx("span",{className:"inline-block w-3 h-3 mr-1",style:{backgroundColor:"#4682B4"}}),ne.jsx("span",{className:"text-gray-300",children:"Production Facilities"})]}),ne.jsxs("div",{className:"text-xs flex items-center",children:[ne.jsx("span",{className:"inline-block w-3 h-3 mr-1",style:{backgroundColor:"#DEB887"}}),ne.jsx("span",{className:"text-gray-300",children:"Storage Buildings"})]}),ne.jsxs("div",{className:"text-xs flex items-center",children:[ne.jsx("span",{className:"inline-block w-3 h-3 mr-1",style:{backgroundColor:"#800080"}}),ne.jsx("span",{className:"text-gray-300",children:"Advanced Facilities"})]})]}),ne.jsx("div",{className:"mt-2 text-sm text-center text-white",children:ne.jsxs("p",{children:["Your factory has ",i," buildings across ",Object.values(a).filter(e=>e.length>0).length," zones"]})})]}),ne.jsx("div",{className:"mt-2 text-xs text-gray-400",children:ne.jsx("p",{children:"This visualization shows your industrial empire with realistic buildings scattered throughout specialized zones."})})]})},Ah=({showAll:e=!1,isMobile:t=!1})=>{const{shortcuts:n}={shortcuts:{desktop:{Esc:"Close Dialog"}}};return ne.jsxs("div",{className:"space-y-4",children:[ne.jsx("div",{className:"max-w-md mx-auto",children:ne.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[ne.jsxs("h3",{className:"text-lg font-semibold text-orange-400 mb-4 flex items-center",children:[ne.jsx("span",{className:"mr-2",children:""}),"Keyboard Shortcuts"]}),ne.jsx("div",{className:"space-y-2",children:Object.entries(n.desktop).map(([e,t])=>ne.jsxs("div",{className:"flex justify-between items-center text-sm",children:[ne.jsx("span",{className:"text-gray-300",children:t}),ne.jsx("kbd",{className:"px-2 py-1 bg-gray-600 rounded text-xs font-mono text-gray-200",children:e})]},e))})]})}),ne.jsx("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-lg p-3 mt-4",children:ne.jsxs("div",{className:"flex items-start space-x-2",children:[ne.jsx("span",{className:"text-blue-400 text-sm",children:""}),ne.jsxs("div",{className:"text-xs text-blue-200",children:[ne.jsx("strong",{children:"Tip:"}),ne.jsx("ul",{className:"mt-1 space-y-1 list-disc list-inside",children:ne.jsx("li",{children:"Press ESC to close any open dialog or modal"})})]})]})})]})},Lh=()=>{const{gameState:t,resetGame:n,saveGame:r,exportSaveFile:s,importSaveFile:i}=lh(),{settings:a,toggleMusic:o,toggleSFX:l,toggleUI:c,setMasterVolume:u,setMusicVolume:d,setSFXVolume:h,setUIVolume:g}=Id(),{playSoundToggle:p,playMusicToggle:f,playSettingsSave:x,playResetConfirm:b}=(()=>{const{playSound:t}=Id();return{playSoundToggle:()=>m(e,null,function*(){return yield t("sound_toggle")}),playMusicToggle:()=>m(e,null,function*(){return yield t("music_toggle")}),playSettingsSave:()=>m(e,null,function*(){return yield t("settings_save")}),playResetConfirm:()=>m(e,null,function*(){return yield t("reset_confirm")})}})(),[y,v]=G.useState(!1),[w,k]=G.useState(null),[j,N]=G.useState(!1),[C,S]=G.useState(null);return ne.jsxs("div",{className:"p-4",children:[ne.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Game Settings"}),ne.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ne.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-md col-span-1 md:col-span-2",children:[ne.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Game Progress"}),w&&ne.jsx("div",{className:"bg-blue-900 text-white p-3 rounded-md mb-4",children:w}),ne.jsxs("div",{className:"flex flex-wrap gap-2",children:[ne.jsx("button",{onClick:()=>{r(),x(),k("Game saved successfully!"),setTimeout(()=>{k(null)},3e3)},className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded transition",children:"Save Game"}),ne.jsx("button",{onClick:()=>{b(),v(!0)},className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition",children:"Reset Progress"})]}),y&&ne.jsxs("div",{className:"mt-4 bg-gray-700 border border-red-500 rounded-lg p-4",children:[ne.jsx("p",{className:"text-white mb-3",children:"Are you sure you want to reset all progress? This cannot be undone!"}),ne.jsxs("div",{className:"flex gap-2",children:[ne.jsx("button",{onClick:()=>{n(),v(!1),k("Game reset successfully. Starting fresh!"),setTimeout(()=>{k(null)},3e3)},className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition",children:"Yes, Reset Game"}),ne.jsx("button",{onClick:()=>{v(!1)},className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"})]})]}),ne.jsxs("div",{className:"mt-4 text-gray-400 text-sm",children:[ne.jsx("p",{children:"Your game is automatically saved every 30 seconds. You can manually save anytime using the button above."}),ne.jsxs("p",{className:"mt-2",children:["Last saved: ",new Date(t.lastTick).toLocaleString()]})]})]}),ne.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-md col-span-1 md:col-span-2",children:[ne.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Save File Management"}),ne.jsx("div",{className:"mb-4 text-gray-300 text-sm",children:ne.jsx("p",{children:"Export your save file to transfer your progress between different platforms (web, Steam, etc.) or to create backups."})}),ne.jsxs("div",{className:"flex flex-wrap gap-2",children:[ne.jsx("button",{onClick:()=>{try{s(),x(),k("Save file exported successfully!"),setTimeout(()=>{k(null)},3e3)}catch(e){console.error("Export failed:",e),k("Failed to export save file. Please try again."),setTimeout(()=>{k(null)},5e3)}},className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition",children:"Export Save File"}),ne.jsx("button",{onClick:()=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=t=>m(e,null,function*(){var e;const n=null==(e=t.target.files)?void 0:e[0];if(n){const e=new FileReader;e.onload=e=>{var t;const n=null==(t=e.target)?void 0:t.result;S(n),N(!0)},e.onerror=()=>{k("Failed to read file. Please try again."),setTimeout(()=>{k(null)},5e3)},e.readAsText(n)}}),t.click()},className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded transition",children:"Import Save File"})]}),j&&ne.jsxs("div",{className:"mt-4 bg-gray-700 border border-yellow-500 rounded-lg p-4",children:[ne.jsx("p",{className:"text-white mb-3",children:" Warning: Importing a save file will overwrite your current progress. Make sure to export your current save first if you want to keep it!"}),ne.jsxs("div",{className:"flex gap-2",children:[ne.jsx("button",{onClick:()=>m(e,null,function*(){if(C)try{const e=yield i(C);x(),e.success?(k("Save file imported successfully! Your game has been loaded."),N(!1),S(null)):(k(`Failed to import: ${e.error||"Unknown error"}`),N(!1),S(null)),setTimeout(()=>{k(null)},5e3)}catch(e){console.error("Import failed:",e),k("Failed to import save file. Please check the file and try again."),N(!1),S(null),setTimeout(()=>{k(null)},5e3)}}),className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded transition",children:"Yes, Import Save"}),ne.jsx("button",{onClick:()=>{N(!1),S(null)},className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded transition",children:"Cancel"})]})]})]}),ne.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-md",children:[ne.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Game Info"}),ne.jsxs("div",{className:"space-y-2 text-gray-400",children:[ne.jsxs("p",{children:["Version: ","6.4.1"]}),ne.jsxs("p",{children:["Game started: ",new Date(t.lastTick-1e3*t.statistics.playTime).toLocaleDateString()]}),ne.jsxs("p",{children:["Play time: ",Math.floor(t.statistics.playTime/3600),"h ",Math.floor(t.statistics.playTime%3600/60),"m"]})]})]}),ne.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-md",children:[ne.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"About Factory Works Idle"}),ne.jsx("p",{className:"text-gray-300 mb-2",children:"Factory Works Idle is an idle factory building game where you build and manage an industrial empire."}),ne.jsx("p",{className:"text-gray-400 text-sm",children:" 2025 Factory Works Idle"})]}),ne.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-md col-span-1 md:col-span-2",children:[ne.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Sound Settings"}),ne.jsxs("div",{className:"space-y-4",children:[ne.jsxs("div",{children:[ne.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ne.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Master Volume"}),ne.jsxs("span",{className:"text-sm text-gray-400",children:[Math.round(100*a.masterVolume),"%"]})]}),ne.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:a.masterVolume,onChange:e=>{const t=parseFloat(e.target.value);u(t)},className:"w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]}),ne.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ne.jsx("h4",{className:"text-md font-semibold text-gray-300",children:"Music"}),ne.jsx("button",{onClick:()=>{o(),f()},className:"px-3 py-1 rounded text-sm font-medium transition-colors "+(a.musicEnabled?"bg-green-600 text-white":"bg-red-600 text-white"),children:a.musicEnabled?"Enabled":"Disabled"})]}),ne.jsxs("div",{className:"mb-2",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ne.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Music Volume"}),ne.jsxs("span",{className:"text-sm text-gray-400",children:[Math.round(100*a.musicVolume),"%"]})]}),ne.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:a.musicVolume,onChange:e=>{const t=parseFloat(e.target.value);d(t)},disabled:!a.musicEnabled,className:"w-full h-2 rounded-lg appearance-none cursor-pointer "+(a.musicEnabled?"bg-gray-600":"bg-gray-700")})]})]}),ne.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ne.jsx("h4",{className:"text-md font-semibold text-gray-300",children:"Sound Effects"}),ne.jsx("button",{onClick:()=>{l(),p()},className:"px-3 py-1 rounded text-sm font-medium transition-colors "+(a.sfxEnabled?"bg-green-600 text-white":"bg-red-600 text-white"),children:a.sfxEnabled?"Enabled":"Disabled"})]}),ne.jsxs("div",{className:"mb-2",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ne.jsx("label",{className:"text-sm font-medium text-gray-300",children:"SFX Volume"}),ne.jsxs("span",{className:"text-sm text-gray-400",children:[Math.round(100*a.sfxVolume),"%"]})]}),ne.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:a.sfxVolume,onChange:e=>{const t=parseFloat(e.target.value);h(t)},disabled:!a.sfxEnabled,className:"w-full h-2 rounded-lg appearance-none cursor-pointer "+(a.sfxEnabled?"bg-gray-600":"bg-gray-700")})]})]}),ne.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ne.jsx("h4",{className:"text-md font-semibold text-gray-300",children:"UI Sounds"}),ne.jsx("button",{onClick:()=>{c(),p()},className:"px-3 py-1 rounded text-sm font-medium transition-colors "+(a.uiEnabled?"bg-green-600 text-white":"bg-red-600 text-white"),children:a.uiEnabled?"Enabled":"Disabled"})]}),ne.jsxs("div",{className:"mb-2",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ne.jsx("label",{className:"text-sm font-medium text-gray-300",children:"UI Volume"}),ne.jsxs("span",{className:"text-sm text-gray-400",children:[Math.round(100*a.uiVolume),"%"]})]}),ne.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:a.uiVolume,onChange:e=>{const t=parseFloat(e.target.value);g(t)},disabled:!a.uiEnabled,className:"w-full h-2 rounded-lg appearance-none cursor-pointer "+(a.uiEnabled?"bg-gray-600":"bg-gray-700")})]})]})]})]}),ne.jsx("div",{className:"bg-gray-800 rounded-lg p-4 shadow-md col-span-1 md:col-span-2",children:ne.jsx(Ah,{showAll:!0,isMobile:window.innerWidth<1024})})]})]})};
/*!
     * @kurkle/color v0.3.4
     * https://github.com/kurkle/color#readme
     * (c) 2024 Jukka Kurkela
     * Released under the MIT License
     */
function Fh(e){return e+.5|0}const Oh=(e,t,n)=>Math.max(Math.min(e,n),t);function Ih(e){return Oh(Fh(2.55*e),0,255)}function Dh(e){return Oh(Fh(255*e),0,255)}function zh(e){return Oh(Fh(e/2.55)/100,0,1)}function qh(e){return Oh(Fh(100*e),0,100)}const $h={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Bh=[..."0123456789ABCDEF"],Hh=e=>Bh[15&e],Wh=e=>Bh[(240&e)>>4]+Bh[15&e],Uh=e=>(240&e)>>4==(15&e);function Vh(e){var t=(e=>Uh(e.r)&&Uh(e.g)&&Uh(e.b)&&Uh(e.a))(e)?Hh:Wh;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Gh=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Yh(e,t,n){const r=t*Math.min(n,1-n),s=(t,s=(t+e/30)%12)=>n-r*Math.max(Math.min(s-3,9-s,1),-1);return[s(0),s(8),s(4)]}function Qh(e,t,n){const r=(r,s=(r+e/60)%6)=>n-n*t*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Xh(e,t,n){const r=Yh(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function Kh(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=Math.max(t,n,r),i=Math.min(t,n,r),a=(s+i)/2;let o,l,c;return s!==i&&(c=s-i,l=a>.5?c/(2-s-i):c/(s+i),o=function(e,t,n,r,s){return e===s?(t-n)/r+(t<n?6:0):t===s?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,s),o=60*o+.5),[0|o,l||0,a]}function Jh(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(Dh)}function Zh(e,t,n){return Jh(Yh,e,t,n)}function em(e){return(e%360+360)%360}function tm(e){const t=Gh.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?Ih(+t[5]):Dh(+t[5]));const s=em(+t[2]),i=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return Jh(Xh,e,t,n)}(s,i,a):"hsv"===t[1]?function(e,t,n){return Jh(Qh,e,t,n)}(s,i,a):Zh(s,i,a),{r:n[0],g:n[1],b:n[2],a:r}}const nm={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},rm={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let sm;function im(e){sm||(sm=function(){const e={},t=Object.keys(rm),n=Object.keys(nm);let r,s,i,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],s=0;s<n.length;s++)i=n[s],o=o.replace(i,nm[i]);i=parseInt(rm[a],16),e[o]=[i>>16&255,i>>8&255,255&i]}return e}(),sm.transparent=[0,0,0,0]);const t=sm[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const am=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,om=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,lm=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function cm(e,t,n){if(e){let r=Kh(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=Zh(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function um(e,t){return e?Object.assign(t||{},e):e}function dm(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Dh(e[3]))):(t=um(e,{r:0,g:0,b:0,a:1})).a=Dh(t.a),t}function hm(e){return"r"===e.charAt(0)?function(e){const t=am.exec(e);let n,r,s,i=255;if(t){if(t[7]!==n){const e=+t[7];i=t[8]?Ih(e):Oh(255*e,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?Ih(n):Oh(n,0,255)),r=255&(t[4]?Ih(r):Oh(r,0,255)),s=255&(t[6]?Ih(s):Oh(s,0,255)),{r:n,g:r,b:s,a:i}}}(e):tm(e)}class mm{constructor(e){if(e instanceof mm)return e;const t=typeof e;let n;var r,s,i;"object"===t?n=dm(e):"string"===t&&(i=(r=e).length,"#"===r[0]&&(4===i||5===i?s={r:255&17*$h[r[1]],g:255&17*$h[r[2]],b:255&17*$h[r[3]],a:5===i?17*$h[r[4]]:255}:7!==i&&9!==i||(s={r:$h[r[1]]<<4|$h[r[2]],g:$h[r[3]]<<4|$h[r[4]],b:$h[r[5]]<<4|$h[r[6]],a:9===i?$h[r[7]]<<4|$h[r[8]]:255})),n=s||im(e)||hm(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=um(this._rgb);return e&&(e.a=zh(e.a)),e}set rgb(e){this._rgb=dm(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${zh(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0;var e}hexString(){return this._valid?Vh(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Kh(e),n=t[0],r=qh(t[1]),s=qh(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${s}%, ${zh(e.a)})`:`hsl(${n}, ${r}%, ${s}%)`}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let s;const i=t===s?.5:t,a=2*i-1,o=n.a-r.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;s=1-l,n.r=255&l*n.r+s*r.r+.5,n.g=255&l*n.g+s*r.g+.5,n.b=255&l*n.b+s*r.b+.5,n.a=i*n.a+(1-i)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=lm(zh(e.r)),s=lm(zh(e.g)),i=lm(zh(e.b));return{r:Dh(om(r+n*(lm(zh(t.r))-r))),g:Dh(om(s+n*(lm(zh(t.g))-s))),b:Dh(om(i+n*(lm(zh(t.b))-i))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new mm(this.rgb)}alpha(e){return this._rgb.a=Dh(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Fh(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return cm(this._rgb,2,e),this}darken(e){return cm(this._rgb,2,-e),this}saturate(e){return cm(this._rgb,1,e),this}desaturate(e){return cm(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=Kh(e);n[0]=em(n[0]+t),n=Zh(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}
/*!
     * Chart.js v4.5.0
     * https://www.chartjs.org
     * (c) 2025 Chart.js Contributors
     * Released under the MIT License
     */function gm(){}const pm=(()=>{let e=0;return()=>e++})();function fm(e){return null==e}function xm(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function bm(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function ym(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function vm(e,t){return ym(e)?e:t}function wm(e,t){return void 0===e?t:e}function km(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)}function jm(e,t,n,r){let s,i,a;if(xm(e))for(i=e.length,s=0;s<i;s++)t.call(n,e[s],s);else if(bm(e))for(a=Object.keys(e),i=a.length,s=0;s<i;s++)t.call(n,e[a[s]],a[s])}function Nm(e,t){let n,r,s,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],i=t[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Cm(e){if(xm(e))return e.map(Cm);if(bm(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=Cm(e[n[s]]);return t}return e}function Sm(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Mm(e,t,n,r){if(!Sm(e))return;const s=t[e],i=n[e];bm(s)&&bm(i)?_m(s,i,r):t[e]=Cm(i)}function _m(e,t,n){const r=xm(t)?t:[t],s=r.length;if(!bm(e))return e;const i=(n=n||{}).merger||Mm;let a;for(let o=0;o<s;++o){if(a=r[o],!bm(a))continue;const t=Object.keys(a);for(let r=0,s=t.length;r<s;++r)i(t[r],e,a,n)}return e}function Pm(e,t){return _m(e,t,{merger:Tm})}function Tm(e,t,n){if(!Sm(e))return;const r=t[e],s=n[e];bm(r)&&bm(s)?Pm(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Cm(s))}const Em={"":e=>e,x:e=>e.x,y:e=>e.y};function Rm(e,t){const n=Em[t]||(Em[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const s of t)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Am(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Lm=e=>void 0!==e,Fm=e=>"function"==typeof e,Om=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0},Im=Math.PI,Dm=2*Im,zm=Dm+Im,qm=Number.POSITIVE_INFINITY,$m=Im/180,Bm=Im/2,Hm=Im/4,Wm=2*Im/3,Um=Math.log10,Vm=Math.sign;function Gm(e,t,n){return Math.abs(e-t)<n}function Ym(e){const t=Math.round(e);e=Gm(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Um(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Qm(e){return!function(e){return"symbol"==typeof e||"object"==typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Xm(e){return e*(Im/180)}function Km(e){if(!ym(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Jm(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Zm(e,t){return(e-t+zm)%Dm-Im}function eg(e){return(e%Dm+Dm)%Dm}function tg(e,t,n,r){const s=eg(e),i=eg(t),a=eg(n),o=eg(i-s),l=eg(a-s),c=eg(s-i),u=eg(s-a);return s===i||s===a||r&&i===a||o>l&&c<u}function ng(e,t,n){return Math.max(t,Math.min(n,e))}function rg(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function sg(e,t,n){n=n||(n=>e[n]<t);let r,s=e.length-1,i=0;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const ig=(e,t,n,r)=>sg(e,n,r?r=>{const s=e[r][t];return s<n||s===n&&e[r+1][t]===n}:r=>e[r][t]<n),ag=(e,t,n)=>sg(e,n,r=>e[r][t]>=n),og=["push","pop","shift","splice","unshift"];function lg(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);-1!==s&&r.splice(s,1),r.length>0||(og.forEach(t=>{delete e[t]}),delete e._chartjs)}const cg="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function ug(e,t){let n=[],r=!1;return function(...s){n=s,r||(r=!0,cg.call(window,()=>{r=!1,e.apply(t,n)}))}}const dg=e=>"start"===e?"left":"end"===e?"right":"center",hg=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2,mg=e=>0===e||1===e,gg=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Dm/n),pg=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Dm/n)+1,fg={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Bm),easeOutSine:e=>Math.sin(e*Bm),easeInOutSine:e=>-.5*(Math.cos(Im*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>mg(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>mg(e)?e:gg(e,.075,.3),easeOutElastic:e=>mg(e)?e:pg(e,.075,.3),easeInOutElastic(e){const t=.1125;return mg(e)?e:e<.5?.5*gg(2*e,t,.45):.5+.5*pg(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-fg.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*fg.easeInBounce(2*e):.5*fg.easeOutBounce(2*e-1)+.5};function xg(e){if(e&&"object"==typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function bg(e){return xg(e)?e:new mm(e)}function yg(e){return xg(e)?e:new mm(e).saturate(.5).darken(.1).hexString()}const vg=["x","y","borderWidth","radius","tension"],wg=["color","borderColor","backgroundColor"],kg=new Map;function jg(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=kg.get(n);return r||(r=new Intl.NumberFormat(e,t),kg.set(n,r)),r}(t,n).format(e)}var Ng={formatters:{values:e=>xm(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let s,i=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(s="scientific"),i=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}(e,n)}const a=Um(Math.abs(i)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),jg(e,r,l)}}};const Cg=Object.create(null),Sg=Object.create(null);function Mg(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function _g(e,t,n){return"string"==typeof t?_m(Mg(e,t),n):_m(Mg(e,""),t)}class Pg{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>yg(t.backgroundColor),this.hoverBorderColor=(e,t)=>yg(t.borderColor),this.hoverColor=(e,t)=>yg(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return _g(this,e,t)}get(e){return Mg(this,e)}describe(e,t){return _g(Sg,e,t)}override(e,t){return _g(Cg,e,t)}route(e,t,n,r){const s=Mg(this,e),i=Mg(this,n),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=i[r];return bm(e)?Object.assign({},t,e):wm(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}var Tg=new Pg({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:wg},numbers:{type:"number",properties:vg}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ng.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Eg(e,t,n,r,s){let i=t[s];return i||(i=t[s]=e.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Rg(e,t,n){const r=e.currentDevicePixelRatio,s=0!==n?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function Ag(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Lg(e,t,n,r){Fg(e,t,n,r,null)}function Fg(e,t,n,r,s){let i,a,o,l,c,u,d,h;const m=t.pointStyle,g=t.rotation,p=t.radius;let f=(g||0)*$m;if(m&&"object"==typeof m&&(i=m.toString(),"[object HTMLImageElement]"===i||"[object HTMLCanvasElement]"===i))return e.save(),e.translate(n,r),e.rotate(f),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),void e.restore();if(!(isNaN(p)||p<=0)){switch(e.beginPath(),m){default:s?e.ellipse(n,r,s/2,p,0,0,Dm):e.arc(n,r,p,0,Dm),e.closePath();break;case"triangle":u=s?s/2:p,e.moveTo(n+Math.sin(f)*u,r-Math.cos(f)*p),f+=Wm,e.lineTo(n+Math.sin(f)*u,r-Math.cos(f)*p),f+=Wm,e.lineTo(n+Math.sin(f)*u,r-Math.cos(f)*p),e.closePath();break;case"rectRounded":c=.516*p,l=p-c,a=Math.cos(f+Hm)*l,d=Math.cos(f+Hm)*(s?s/2-c:l),o=Math.sin(f+Hm)*l,h=Math.sin(f+Hm)*(s?s/2-c:l),e.arc(n-d,r-o,c,f-Im,f-Bm),e.arc(n+h,r-a,c,f-Bm,f),e.arc(n+d,r+o,c,f,f+Bm),e.arc(n-h,r+a,c,f+Bm,f+Im),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,u=s?s/2:l,e.rect(n-u,r-l,2*u,2*l);break}f+=Hm;case"rectRot":d=Math.cos(f)*(s?s/2:p),a=Math.cos(f)*p,o=Math.sin(f)*p,h=Math.sin(f)*(s?s/2:p),e.moveTo(n-d,r-o),e.lineTo(n+h,r-a),e.lineTo(n+d,r+o),e.lineTo(n-h,r+a),e.closePath();break;case"crossRot":f+=Hm;case"cross":d=Math.cos(f)*(s?s/2:p),a=Math.cos(f)*p,o=Math.sin(f)*p,h=Math.sin(f)*(s?s/2:p),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"star":d=Math.cos(f)*(s?s/2:p),a=Math.cos(f)*p,o=Math.sin(f)*p,h=Math.sin(f)*(s?s/2:p),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a),f+=Hm,d=Math.cos(f)*(s?s/2:p),a=Math.cos(f)*p,o=Math.sin(f)*p,h=Math.sin(f)*(s?s/2:p),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"line":a=s?s/2:Math.cos(f)*p,o=Math.sin(f)*p,e.moveTo(n-a,r-o),e.lineTo(n+a,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(f)*(s?s/2:p),r+Math.sin(f)*p);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Og(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Ig(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Dg(e){e.restore()}function zg(e,t,n,r,s){if(!t)return e.lineTo(n.x,n.y);if("middle"===s){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===s!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function qg(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function $g(e,t,n,r,s){if(s.strikethrough||s.underline){const i=e.measureText(r),a=t-i.actualBoundingBoxLeft,o=t+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(a,u),e.lineTo(o,u),e.stroke()}}function Bg(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Hg(e,t,n,r,s,i={}){const a=xm(t)?t:[t],o=i.strokeWidth>0&&""!==i.strokeColor;let l,c;for(e.save(),e.font=s.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),fm(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,i),l=0;l<a.length;++l)c=a[l],i.backdrop&&Bg(e,i.backdrop),o&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),fm(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(c,n,r,i.maxWidth)),e.fillText(c,n,r,i.maxWidth),$g(e,n,r,c,i),r+=Number(s.lineHeight);e.restore()}function Wg(e,t){const{x:n,y:r,w:s,h:i,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*Im,Im,!0),e.lineTo(n,r+i-a.bottomLeft),e.arc(n+a.bottomLeft,r+i-a.bottomLeft,a.bottomLeft,Im,Bm,!0),e.lineTo(n+s-a.bottomRight,r+i),e.arc(n+s-a.bottomRight,r+i-a.bottomRight,a.bottomRight,Bm,0,!0),e.lineTo(n+s,r+a.topRight),e.arc(n+s-a.topRight,r+a.topRight,a.topRight,0,-Bm,!0),e.lineTo(n+a.topLeft,r)}const Ug=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Vg=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Gg(e,t){const n=(""+e).match(Ug);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const Yg=e=>+e||0;function Qg(e,t){const n={},r=bm(t),s=r?Object.keys(t):t,i=bm(e)?r?n=>wm(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of s)n[a]=Yg(i(a));return n}function Xg(e){return Qg(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Kg(e){const t=function(e){return Qg(e,{top:"y",right:"x",bottom:"y",left:"x"})}(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Jg(e,t){e=e||{},t=t||Tg.font;let n=wm(e.size,t.size);"string"==typeof n&&(n=parseInt(n,10));let r=wm(e.style,t.style);r&&!(""+r).match(Vg)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:wm(e.family,t.family),lineHeight:Gg(wm(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:wm(e.weight,t.weight),string:""};return s.string=function(e){return!e||fm(e.size)||fm(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(s),s}function Zg(e,t,n,r){let s,i,a;for(s=0,i=e.length;s<i;++s)if(a=e[s],void 0!==a&&void 0!==a)return a}function ep(e,t,n){const{min:r,max:s}=e,i=(o=(s-r)/2,"string"==typeof(a=t)&&a.endsWith("%")?parseFloat(a)/100*o:+a);var a,o;const l=(e,t)=>n&&0===e?0:e+t;return{min:l(r,-Math.abs(i)),max:l(s,i)}}function tp(e,t){return Object.assign(Object.create(e),t)}function np(e,t=[""],n,r,s=()=>e[0]){const i=n||e;void 0===r&&(r=mp("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:r,_getTarget:s,override:n=>np([n,...e],t,i,r)};return new Proxy(a,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>op(n,r,()=>function(e,t,n,r){let s;for(const i of t)if(s=mp(ip(i,e),n),void 0!==s)return ap(e,s)?dp(n,r,e,s):s}(r,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>gp(e).includes(t),ownKeys:e=>gp(e),set(e,t,n){const r=e._storage||(e._storage=s());return e[t]=r[t]=n,delete e._keys,!0}})}function rp(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:sp(e,r),setContext:t=>rp(e,t,n,r),override:s=>rp(e.override(s),t,n,r)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>op(e,t,()=>function(e,t,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:a}=e;let o=r[t];return Fm(o)&&a.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:s,_context:i,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(i,a||r);return o.delete(e),ap(e,l)&&(l=dp(s._scopes,s,e,l)),l}(t,o,e,n)),xm(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:s,_context:i,_subProxy:a,_descriptors:o}=n;if(void 0!==i.index&&r(e))return t[i.index%t.length];if(bm(t[0])){const n=t,r=s._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=dp(r,s,e,l);t.push(rp(n,i,a&&a[e],o))}}return t}(t,o,e,a.isIndexable)),ap(t,o)&&(o=rp(o,s,i&&i[t],a)),o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function sp(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Fm(n)?n:()=>n,isIndexable:Fm(r)?r:()=>r}}const ip=(e,t)=>e?e+Am(t):t,ap=(e,t)=>bm(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function op(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function lp(e,t,n){return Fm(e)?e(t,n):e}const cp=(e,t)=>!0===e?t:"string"==typeof e?Rm(t,e):void 0;function up(e,t,n,r,s){for(const i of t){const t=cp(n,i);if(t){e.add(t);const i=lp(t._fallback,n,s);if(void 0!==i&&i!==n&&i!==r)return i}else if(!1===t&&void 0!==r&&n!==r)return null}return!1}function dp(e,t,n,r){const s=t._rootScopes,i=lp(t._fallback,n,r),a=[...e,...s],o=new Set;o.add(r);let l=hp(o,a,n,i||n,r);return null!==l&&(void 0===i||i===n||(l=hp(o,a,i,l,r),null!==l))&&np(Array.from(o),[""],s,i,()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];return xm(s)&&bm(n)?n:s||{}}(t,n,r))}function hp(e,t,n,r,s){for(;n;)n=up(e,t,n,r,s);return n}function mp(e,t){for(const n of t){if(!n)continue;const t=n[e];if(void 0!==t)return t}}function gp(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}const pp=Number.EPSILON||1e-14,fp=(e,t)=>t<e.length&&!e[t].skip&&e[t],xp=e=>"x"===e?"y":"x";function bp(e,t,n,r){const s=e.skip?t:e,i=t,a=n.skip?t:n,o=Jm(i,s),l=Jm(a,i);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:i.x-d*(a.x-s.x),y:i.y-d*(a.y-s.y)},next:{x:i.x+h*(a.x-s.x),y:i.y+h*(a.y-s.y)}}}function yp(e,t="x"){const n=xp(t),r=e.length,s=Array(r).fill(0),i=Array(r);let a,o,l,c=fp(e,0);for(a=0;a<r;++a)if(o=l,l=c,c=fp(e,a+1),l){if(c){const e=c[t]-l[t];s[a]=0!==e?(c[n]-l[n])/e:0}i[a]=o?c?Vm(s[a-1])!==Vm(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}!function(e,t,n){const r=e.length;let s,i,a,o,l,c=fp(e,0);for(let u=0;u<r-1;++u)l=c,c=fp(e,u+1),l&&c&&(Gm(t[u],0,pp)?n[u]=n[u+1]=0:(s=n[u]/t[u],i=n[u+1]/t[u],o=Math.pow(s,2)+Math.pow(i,2),o<=9||(a=3/Math.sqrt(o),n[u]=s*a*t[u],n[u+1]=i*a*t[u])))}(e,s,i),function(e,t,n="x"){const r=xp(n),s=e.length;let i,a,o,l=fp(e,0);for(let c=0;c<s;++c){if(a=o,o=l,l=fp(e,c+1),!o)continue;const s=o[n],u=o[r];a&&(i=(s-a[n])/3,o[`cp1${n}`]=s-i,o[`cp1${r}`]=u-i*t[c]),l&&(i=(l[n]-s)/3,o[`cp2${n}`]=s+i,o[`cp2${r}`]=u+i*t[c])}}(e,i,t)}function vp(e,t,n){return Math.max(Math.min(e,n),t)}function wp(e,t,n,r,s){let i,a,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)yp(e,s);else{let n=r?e[e.length-1]:e[0];for(i=0,a=e.length;i<a;++i)o=e[i],l=bp(n,o,e[Math.min(i+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,s,i,a,o=Og(e[0],t);for(n=0,r=e.length;n<r;++n)a=i,i=o,o=n<r-1&&Og(e[n+1],t),i&&(s=e[n],a&&(s.cp1x=vp(s.cp1x,t.left,t.right),s.cp1y=vp(s.cp1y,t.top,t.bottom)),o&&(s.cp2x=vp(s.cp2x,t.left,t.right),s.cp2y=vp(s.cp2y,t.top,t.bottom)))}(e,n)}function kp(){return"undefined"!=typeof window&&"undefined"!=typeof document}function jp(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Np(e,t,n){let r;return"string"==typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const Cp=e=>e.ownerDocument.defaultView.getComputedStyle(e,null),Sp=["top","right","bottom","left"];function Mp(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=Sp[s];r[i]=parseFloat(e[t+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function _p(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,s=Cp(n),i="border-box"===s.boxSizing,a=Mp(s,"padding"),o=Mp(s,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:s,offsetY:i}=r;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(s,i,e.target))a=s,o=i;else{const e=t.getBoundingClientRect();a=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),d=a.left+(u&&o.left),h=a.top+(u&&o.top);let{width:m,height:g}=t;return i&&(m-=a.width+o.width,g-=a.height+o.height),{x:Math.round((l-d)/m*n.width/r),y:Math.round((c-h)/g*n.height/r)}}const Pp=e=>Math.round(10*e)/10;function Tp(e,t,n,r){const s=Cp(e),i=Mp(s,"margin"),a=Np(s.maxWidth,e,"clientWidth")||qm,o=Np(s.maxHeight,e,"clientHeight")||qm,l=function(e,t,n){let r,s;if(void 0===t||void 0===n){const i=e&&jp(e);if(i){const e=i.getBoundingClientRect(),a=Cp(i),o=Mp(a,"border","width"),l=Mp(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=Np(a.maxWidth,i,"clientWidth"),s=Np(a.maxHeight,i,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||qm,maxHeight:s||qm}}(e,t,n);let{width:c,height:u}=l;if("content-box"===s.boxSizing){const e=Mp(s,"border","width"),t=Mp(s,"padding");c-=t.width+e.width,u-=t.height+e.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=Pp(Math.min(c,a,l.maxWidth)),u=Pp(Math.min(u,o,l.maxHeight)),c&&!u&&(u=Pp(c/2)),(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=Pp(Math.floor(u*r))),{width:c,height:u}}function Ep(e,t,n){const r=t||1,s=Math.floor(e.height*r),i=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==r||a.height!==s||a.width!==i)&&(e.currentDevicePixelRatio=r,a.height=s,a.width=i,e.ctx.setTransform(r,0,0,r,0,0),!0)}const Rp=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};kp()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function Ap(e,t){const n=function(e,t){return Cp(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Lp(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Fp(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function Op(e,t,n,r){const s={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},a=Lp(e,s,n),o=Lp(s,i,n),l=Lp(i,t,n),c=Lp(a,o,n),u=Lp(o,l,n);return Lp(c,u,n)}function Ip(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Dp(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function zp(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function qp(e){return"angle"===e?{between:tg,compare:Zm,normalize:eg}:{between:rg,compare:(e,t)=>e-t,normalize:e=>e}}function $p({start:e,end:t,count:n,loop:r,style:s}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n==0,style:s}}function Bp(e,t,n){if(!n)return[e];const{property:r,start:s,end:i}=n,a=t.length,{compare:o,between:l,normalize:c}=qp(r),{start:u,end:d,loop:h,style:m}=function(e,t,n){const{property:r,start:s,end:i}=n,{between:a,normalize:o}=qp(r),l=t.length;let c,u,{start:d,end:h,loop:m}=e;if(m){for(d+=l,h+=l,c=0,u=l;c<u&&a(o(t[d%l][r]),s,i);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:m,style:e.style}}(e,t,n),g=[];let p,f,x,b=!1,y=null;const v=()=>b||l(s,x,p)&&0!==o(s,x),w=()=>!b||0===o(i,p)||l(i,x,p);for(let k=u,j=u;k<=d;++k)f=t[k%a],f.skip||(p=c(f[r]),p!==x&&(b=l(p,s,i),null===y&&v()&&(y=0===o(p,s)?k:j),null!==y&&w()&&(g.push($p({start:y,end:k,loop:h,count:a,style:m})),y=null),j=k,x=p));return null!==y&&g.push($p({start:y,end:d,loop:h,count:a,style:m})),g}function Hp(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const s=e._chart.getContext(),i=Wp(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let u=i,d=t[0].start,h=d;function m(e,t,r,s){const i=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=i;for(;n[t%l].skip;)t+=i;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:s}),u=s,d=t%l)}}for(const g of t){d=o?d:g.start;let e,t=n[d%l];for(h=d+1;h<=g.end;h++){const i=n[h%l];e=Wp(r.setContext(tp(s,{type:"segment",p0:t,p1:i,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),Up(e,u)&&m(d,h-1,g.loop,u),t=i,u=e}d<h-1&&m(d,h-1,g.loop,u)}return c}(e,t,n,r):t}function Wp(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Up(e,t){if(!t)return!1;const n=[],r=function(e,t){return xg(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function Vp(e,t,n){return e.options.clip?e[n]:t[n]}function Gp(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:Vp(n,t,"left"),right:Vp(n,t,"right"),top:Vp(r,t,"top"),bottom:Vp(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}
/*!
     * Chart.js v4.5.0
     * https://www.chartjs.org
     * (c) 2025 Chart.js Contributors
     * Released under the MIT License
     */class Yp{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const s=t.listeners[r],i=t.duration;s.forEach(r=>r({chart:e,initial:t.initial,numSteps:i,currentStep:Math.min(n-t.start,i)}))}_refresh(){this._request||(this._running=!0,this._request=cg.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let i,a=s.length-1,o=!1;for(;a>=0;--a)i=s[a],i._active?(i._total>n.duration&&(n.duration=i._total),i.tick(e),o=!0):(s[a]=s[s.length-1],s.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),s.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=s.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Qp=new Yp;const Xp="transparent",Kp={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=bg(e||Xp),s=r.valid&&bg(t||Xp);return s&&s.valid?s.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class Jp{constructor(e,t,n,r){const s=t[n];r=Zg([e.to,r,s,e.from]);const i=Zg([e.from,s,r]);this._active=!0,this._fn=e.fn||Kp[e.type||typeof i],this._easing=fg[e.easing]||fg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=i,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,i=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Zg([e.to,t,r,e.from]),this._from=Zg([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,s=this._from,i=this._loop,a=this._to;let o;if(this._active=s!==a&&(i||t<n),!this._active)return this._target[r]=a,void this._notify(!0);t<0?this._target[r]=s:(o=t/n%2,o=i&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(s,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class Zp{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!bm(e))return;const t=Object.keys(Tg.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!bm(s))return;const i={};for(const e of t)i[e]=s[e];(xm(s.properties)&&s.properties||[r]).forEach(e=>{e!==r&&n.has(e)||n.set(e,i)})})}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(n)return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n;e.options=t}(e,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const t=e[r[s]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),s}_createAnimations(e,t){const n=this._properties,r=[],s=e.$animations||(e.$animations={}),i=Object.keys(t),a=Date.now();let o;for(o=i.length-1;o>=0;--o){const l=i[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=s[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,a);continue}u.cancel()}d&&d.duration?(s[l]=u=new Jp(d,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(Qp.add(this._chart,n),!0):void 0}}function ef(e,t){const n=e&&e.options||{},r=n.reverse,s=void 0===n.min?t:0,i=void 0===n.max?t:0;return{start:r?i:s,end:r?s:i}}function tf(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function nf(e,t,n,r={}){const s=e.keys,i="single"===r.mode;let a,o,l,c;if(null===t)return;let u=!1;for(a=0,o=s.length;a<o;++a){if(l=+s[a],l===n){if(u=!0,r.all)continue;break}c=e.values[l],ym(c)&&(i||0===t||Vm(t)===Vm(c))&&(t+=c)}return u||r.all?t:0}function rf(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function sf(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function af(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const t=e[s.index];if(n&&t>0||!n&&t<0)return s.index}return null}function of(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:o}=r,l=i.axis,c=a.axis,u=function(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}(i,a,r),d=t.length;let h;for(let m=0;m<d;++m){const e=t[m],{[l]:n,[c]:i}=e;h=(e._stacks||(e._stacks={}))[c]=sf(s,u,n),h[o]=i,h._top=af(h,a,!0,r.type),h._bottom=af(h,a,!1,r.type),(h._visualValues||(h._visualValues={}))[o]=i}}function lf(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function cf(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const uf=e=>"reset"===e||"none"===e,df=(e,t)=>t?e:Object.assign({},e);class hf{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=rf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&cf(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,s=t.xAxisID=wm(n.xAxisID,lf(e,"x")),i=t.yAxisID=wm(n.yAxisID,lf(e,"y")),a=t.rAxisID=wm(n.rAxisID,lf(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,s,i,a),c=t.vAxisID=r(o,i,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(i),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&lg(this._data,this),e._stacked&&cf(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(bm(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,s="x"===n.axis?"x":"y",i="x"===r.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[s]:u,[i]:e[u]};return o}(t,e)}else if(n!==t){if(n){lg(n,this);const e=this._cachedMeta;cf(e),e._parsed=[]}t&&Object.isExtensible(t)&&(s=this,(r=t)._chartjs?r._chartjs.listeners.push(s):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),og.forEach(e=>{const t="_onData"+Am(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(...e){const s=n.apply(this,e);return r._chartjs.listeners.forEach(n=>{"function"==typeof n[t]&&n[t](...e)}),s}})}))),this._syncList=[],this._data=t}var r,s}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=rf(t.vScale,t),t.stack!==n.stack&&(r=!0,cf(t),t.stack=n.stack),this._resyncElements(e),(r||s!==t._stacked)&&(of(this,t._parsed),t._stacked=rf(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:s,_stacked:i}=n,a=s.axis;let o,l,c,u=0===e&&t===r.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=xm(r[e])?this.parseArrayData(n,r,e,t):bm(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const s=()=>null===l[a]||d&&l[a]<d[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(s()&&(u=!1),d=l);n._sorted=u}i&&of(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:s,vScale:i}=e,a=s.axis,o=i.axis,l=s.getLabels(),c=s===i,u=new Array(r);let d,h,m;for(d=0,h=r;d<h;++d)m=d+n,u[d]={[a]:c||s.parse(l[m],m),[o]:i.parse(t[m],m)};return u}parseArrayData(e,t,n,r){const{xScale:s,yScale:i}=e,a=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],a[o]={x:s.parse(u[0],c),y:i.parse(u[1],c)};return a}parseObjectData(e,t,n,r){const{xScale:s,yScale:i}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+n,h=t[d],l[c]={x:s.parse(Rm(h,a),d),y:i.parse(Rm(h,o),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,s=this._cachedMeta,i=t[e.axis];return nf({keys:tf(r,!0),values:t._stacks[e.axis]._visualValues},i,s.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const s=n[t.axis];let i=null===s?NaN:s;const a=r&&n._stacks[t.axis];r&&a&&(r.values=a,i=nf(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,s=n._sorted&&e===n.iScale,i=r.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:tf(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}(a);let d,h;function m(){h=r[d];const t=h[a.axis];return!ym(h[e.axis])||c>t||u<t}for(d=0;d<i&&(m()||(this.updateRangeFromParsed(l,e,h,o),!s));++d);if(s)for(d=i-1;d>=0;--d)if(!m()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,s,i;for(r=0,s=t.length;r<s;++r)i=t[r][e.axis],ym(i)&&n.push(i);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,s;return bm(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:!1===e}}(wm(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=ef(e,n),s=ef(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],s=t.chartArea,i=[],a=this._drawStart||0,o=this._drawCount||r.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,s,a,o),c=a;c<a+o;++c){const t=r[c];t.hidden||(t.active&&l?i.push(t):t.draw(e,s))}for(c=0;c<i.length;++c)i[c].draw(e,s)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];s=t.$context||(t.$context=function(e,t,n){return tp(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=function(e,t){return tp(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=n,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){const r="active"===t,s=this._cachedDataOpts,i=e+"-"+t,a=s[i],o=this.enableOptionSharing&&Lm(n);if(a)return df(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?[`${e}Hover`,"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(Tg.elements[e]),m=l.resolveNamedOptions(d,h,()=>this.getContext(n,r,t),u);return m.$shared&&(m.$shared=o,s[i]=Object.freeze(df(m,o))),m}_resolveAnimations(e,t,n){const r=this.chart,s=this._cachedDataOpts,i=`animation-${t}`,a=s[i];if(a)return a;let o;if(!1!==r.options.animation){const r=this.chart.config,s=r.datasetAnimationScopeKeys(this._type,t),i=r.getOptionScopes(this.getDataset(),s);o=r.createResolver(i,this.getContext(e,n,t))}const l=new Zp(r,o&&o.animations);return o&&o._cacheable&&(s[i]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||uf(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(n),i=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,n),{sharedOptions:s,includeOptions:i}}updateElement(e,t,n,r){uf(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!uf(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const r=n.length,s=t.length,i=Math.min(s,r);i&&this.parse(0,i),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t,n=!0){const r=this._cachedMeta,s=r.data,i=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=i;a--)e[a]=e[a-t]};for(o(s),a=e;a<i;++a)s[a]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(s,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&cf(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function mf(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}h(hf,"defaults",{}),h(hf,"datasetElementType",null),h(hf,"dataElementType",null);class gf{constructor(e){h(this,"options"),this.options=e||{}}static override(e){Object.assign(gf.prototype,e)}init(){}formats(){return mf()}parse(){return mf()}format(){return mf()}add(){return mf()}diff(){return mf()}startOf(){return mf()}endOf(){return mf()}}var pf={_date:gf};function ff(e,t,n,r){const{controller:s,data:i,_sorted:a}=e,o=s._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&i.length){const a=o._reversePixels?ag:ig;if(!r){const r=a(i,t,n);if(l){const{vScale:t}=s._cachedMeta,{_parsed:n}=e,i=n.slice(0,r.lo+1).reverse().findIndex(e=>!fm(e[t.axis]));r.lo-=Math.max(0,i);const a=n.slice(r.hi).findIndex(e=>!fm(e[t.axis]));r.hi+=Math.max(0,a)}return r}if(s._sharedOptions){const e=i[0],r="function"==typeof e.getRange&&e.getRange(t);if(r){const e=a(i,t,n-r),s=a(i,t,n+r);return{lo:e.lo,hi:s.hi}}}}return{lo:0,hi:i.length-1}}function xf(e,t,n,r,s){const i=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=i.length;o<l;++o){const{index:e,data:n}=i[o],{lo:l,hi:c}=ff(i[o],t,a,s);for(let t=l;t<=c;++t){const s=n[t];s.skip||r(s,e,t)}}}function bf(e,t,n,r,s){const i=[];return s||e.isPointInArea(t)?(xf(e,n,t,function(n,a,o){(s||Og(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&i.push({element:n,datasetIndex:a,index:o})},!0),i):i}function yf(e,t,n,r){let s=[];return xf(e,n,t,function(e,n,i){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=function(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Im&&(i+=Dm),{angle:i,distance:s}}(e,{x:t.x,y:t.y});tg(l,a,o)&&s.push({element:e,datasetIndex:n,index:i})}),s}function vf(e,t,n,r,s,i){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const s=t?Math.abs(e.x-r.x):0,i=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(i,2))}}(n);let l=Number.POSITIVE_INFINITY;return xf(e,n,t,function(n,c,u){const d=n.inRange(t.x,t.y,s);if(r&&!d)return;const h=n.getCenterPoint(s);if(!i&&!e.isPointInArea(h)&&!d)return;const m=o(t,h);m<l?(a=[{element:n,datasetIndex:c,index:u}],l=m):m===l&&a.push({element:n,datasetIndex:c,index:u})}),a}function wf(e,t,n,r,s,i){return i||e.isPointInArea(t)?"r"!==n||r?vf(e,t,n,r,s,i):yf(e,t,n,s):[]}function kf(e,t,n,r,s){const i=[],a="x"===n?"inXRange":"inYRange";let o=!1;return xf(e,n,t,(e,r,l)=>{e[a]&&e[a](t[n],s)&&(i.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,s))}),r&&!o?[]:i}var jf={modes:{index(e,t,n,r){const s=_p(t,e),i=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?bf(e,s,i,r,a):wf(e,s,i,!1,r,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,r){const s=_p(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?bf(e,s,i,r,a):wf(e,s,i,!1,r,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>bf(e,_p(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const s=_p(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return wf(e,s,i,n.intersect,r,a)},x:(e,t,n,r)=>kf(e,_p(t,e),"x",n.intersect,r),y:(e,t,n,r)=>kf(e,_p(t,e),"y",n.intersect,r)}};const Nf=["left","top","right","bottom"];function Cf(e,t){return e.filter(e=>e.pos===t)}function Sf(e,t){return e.filter(e=>-1===Nf.indexOf(e.pos)&&e.box.axis===t)}function Mf(e,t){return e.sort((e,n)=>{const r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function _f(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:s}=n;if(!e||!Nf.includes(r))continue;const i=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=s}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let i,a,o;for(i=0,a=e.length;i<a;++i){o=e[i];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:a&&t.availableWidth,o.height=s):(o.width=r,o.height=c?c*s:a&&t.availableHeight)}return n}function Pf(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function Tf(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Ef(e,t,n,r){const{pos:s,box:i}=n,a=e.maxPadding;if(!bm(s)){n.size&&(e[s]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?i.height:i.width),n.size=t.size/t.count,e[s]+=n.size}i.getPadding&&Tf(a,i.getPadding());const o=Math.max(0,t.outerWidth-Pf(a,e,"left","right")),l=Math.max(0,t.outerHeight-Pf(a,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Rf(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],n[e])}),r}return r(e?["left","right"]:["top","bottom"])}function Af(e,t,n,r){const s=[];let i,a,o,l,c,u;for(i=0,a=e.length,c=0;i<a;++i){o=e[i],l=o.box,l.update(o.width||t.w,o.height||t.h,Rf(o.horizontal,t));const{same:a,other:d}=Ef(t,n,o,r);c|=a&&s.length,u=u||d,l.fullSize||s.push(o)}return c&&Af(s,t,n,r)||u}function Lf(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function Ff(e,t,n,r){const s=n.padding;let{x:i,y:a}=t;for(const o of e){const e=o.box,l=r[o.stack]||{placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,i=l.size||e.height;Lm(l.start)&&(a=l.start),e.fullSize?Lf(e,s.left,a,n.outerWidth-s.right-s.left,i):Lf(e,t.left+l.placed,a,r,i),l.start=a,l.placed+=r,a=e.bottom}else{const r=t.h*c,a=l.size||e.width;Lm(l.start)&&(i=l.start),e.fullSize?Lf(e,i,s.top,a,n.outerHeight-s.bottom-s.top):Lf(e,i,t.top+l.placed,a,r),l.start=i,l.placed+=r,i=e.right}}t.x=i,t.y=a}var Of={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=Kg(e.options.layout.padding),i=Math.max(t-s.width,0),a=Math.max(n-s.height,0),o=function(e){const t=function(e){const t=[];let n,r,s,i,a,o;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],({position:i,options:{stack:a,stackWeight:o=1}}=s),t.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&i+a,stackWeight:o});return t}(e),n=Mf(t.filter(e=>e.box.fullSize),!0),r=Mf(Cf(t,"left"),!0),s=Mf(Cf(t,"right")),i=Mf(Cf(t,"top"),!0),a=Mf(Cf(t,"bottom")),o=Sf(t,"x"),l=Sf(t,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(a).concat(o),chartArea:Cf(t,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;jm(e.boxes,e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/u,hBoxMaxHeight:a/2}),h=Object.assign({},s);Tf(h,Kg(r));const m=Object.assign({maxPadding:h,w:i,h:a,x:s.left,y:s.top},s),g=_f(l.concat(c),d);Af(o.fullSize,m,d,g),Af(l,m,d,g),Af(c,m,d,g)&&Af(l,m,d,g),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(m),Ff(o.leftAndTop,m,d,g),m.x+=m.w,m.y+=m.h,Ff(o.rightAndBottom,m,d,g),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},jm(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class If{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class Df extends If{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const zf="$chartjs",qf={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},$f=e=>null===e||""===e,Bf=!!Rp&&{passive:!0};function Hf(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,Bf)}function Wf(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Uf(e,t,n){const r=e.canvas,s=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||Wf(n.addedNodes,r),t=t&&!Wf(n.removedNodes,r);t&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function Vf(e,t,n){const r=e.canvas,s=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||Wf(n.removedNodes,r),t=t&&!Wf(n.addedNodes,r);t&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Gf=new Map;let Yf=0;function Qf(){const e=window.devicePixelRatio;e!==Yf&&(Yf=e,Gf.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function Xf(e,t,n){const r=e.canvas,s=r&&jp(r);if(!s)return;const i=ug((e,t)=>{const r=s.clientWidth;n(e,t),r<s.clientWidth&&n()},window),a=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||i(n,r)});return a.observe(s),function(e,t){Gf.size||window.addEventListener("resize",Qf),Gf.set(e,t)}(e,i),a}function Kf(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){Gf.delete(e),Gf.size||window.removeEventListener("resize",Qf)}(e)}function Jf(e,t,n){const r=e.canvas,s=ug(t=>{null!==e.ctx&&n(function(e,t){const n=qf[e.type]||e.type,{x:r,y:s}=_p(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==s?s:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,Bf)}(r,t,s),s}class Zf extends If{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[zf]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",$f(s)){const t=Ap(e,"width");void 0!==t&&(e.width=t)}if($f(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Ap(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[zf])return!1;const n=t[zf].initial;["height","width"].forEach(e=>{const r=n[e];fm(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=n.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[zf],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),s={attach:Uf,detach:Vf,resize:Xf}[t]||Jf;r[t]=s(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];r&&(({attach:Kf,detach:Kf,resize:Kf}[t]||Hf)(e,t,r),n[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return Tp(e,t,n,r)}isAttached(e){const t=e&&jp(e);return!(!t||!t.isConnected)}}class ex{constructor(){h(this,"x"),h(this,"y"),h(this,"active",!1),h(this,"options"),h(this,"$animations")}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return Qm(this.x)&&Qm(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),r}}function tx(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}(e),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],a=i.length,o=i[0],l=i[a-1],c=[];if(a>s)return function(e,t,n,r){let s,i=0,a=n[0];for(r=Math.ceil(r),s=0;s<e.length;s++)s===a&&(t.push(e[s]),i++,a=n[i*r])}(t,c,i,a/s),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),s=t.length/n;if(!r)return Math.max(s,1);const i=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(r);for(let a=0,o=i.length-1;a<o;a++){const e=i[a];if(e>s)return e}return Math.max(s,1)}(i,t,s);if(a>0){let e,n;const r=a>1?Math.round((l-o)/(a-1)):null;for(nx(t,c,u,fm(r)?0:o-r,o),e=0,n=a-1;e<n;e++)nx(t,c,u,i[e],i[e+1]);return nx(t,c,u,l,fm(r)?t.length:l+r),c}return nx(t,c,u),c}function nx(e,t,n,r,s){const i=wm(r,0),a=Math.min(wm(s,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),s&&(o=s-r,n=o/Math.floor(o/n)),c=i;c<0;)u++,c=Math.round(i+u*n);for(l=Math.max(i,0);l<a;l++)l===c&&(t.push(e[l]),u++,c=Math.round(i+u*n))}h(ex,"defaults",{}),h(ex,"defaultRoutes");const rx=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,sx=(e,t)=>Math.min(t||e,e);function ix(e,t){const n=[],r=e.length/t,s=e.length;let i=0;for(;i<s;i+=r)n.push(e[Math.floor(i)]);return n}function ax(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),i=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(s);if(!(n&&(l=1===r?Math.max(c-i,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(s-1))/2,c+=s<t?l:-l,c<i-o||c>a+o)))return c}function ox(e){return e.drawTicks?e.tickLength:0}function lx(e,t){if(!e.display)return 0;const n=Jg(e.font,t),r=Kg(e.padding);return(xm(e.text)?e.text.length:1)*n.lineHeight+r.height}function cx(e,t,n){let r=dg(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class ux extends ex{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=vm(e,Number.POSITIVE_INFINITY),t=vm(t,Number.NEGATIVE_INFINITY),n=vm(n,Number.POSITIVE_INFINITY),r=vm(r,Number.NEGATIVE_INFINITY),{min:vm(e,n),max:vm(t,r),minDefined:ym(e),maxDefined:ym(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds();if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),s||(n=Math.min(n,t.min)),i||(r=Math.max(r,t.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:vm(n,vm(r,n)),max:vm(r,vm(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){km(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:s,ticks:i}=this.options,a=i.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=ep(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?ix(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||"auto"===i.source)&&(this.ticks=tx(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){km(this.options.afterUpdate,[this])}beforeSetDimensions(){km(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){km(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),km(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){km(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,s;for(n=0,r=e.length;n<r;n++)s=e[n],s.label=km(t.callback,[s.value,n,e],this)}afterTickToLabelConversion(){km(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){km(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=sx(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let i,a,o,l=r;if(!this._isVisible()||!t.display||r>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=ng(this.chart.width-u,0,this.maxWidth);i=e.offset?this.maxWidth/n:h/(n-1),u+6>i&&(i=h/(n-(e.offset?.5:1)),a=this.maxHeight-ox(e.grid)-t.padding-lx(e.title,this.chart.options.font),o=Math.sqrt(u*u+d*d),l=Math.min(Math.asin(ng((c.highest.height+6)/i,-1,1)),Math.asin(ng(a/o,-1,1))-Math.asin(ng(d/o,-1,1)))*(180/Im),l=Math.max(r,Math.min(s,l))),this.labelRotation=l}afterCalculateLabelRotation(){km(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){km(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:s}}=this,i=this._isVisible(),a=this.isHorizontal();if(i){const i=lx(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=ox(s)+i):(e.height=this.maxHeight,e.width=ox(s)+i),n.display&&this.ticks.length){const{first:t,last:r,widest:s,highest:i}=this._getLabelSizes(),o=2*n.padding,l=Xm(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const t=n.mirror?0:u*s.width+c*i.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*s.width+u*i.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:s,padding:i},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;o?l?(u=r*e.width,d=n*t.height):(u=n*e.height,d=r*t.width):"start"===s?d=t.width:"end"===s?u=e.width:"inner"!==s&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-a+i)*this.width/(this.width-a),0),this.paddingRight=Math.max((d-c+i)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===s?(n=0,r=e.height):"end"===s&&(n=t.height,r=0),this.paddingTop=n+i,this.paddingBottom=r+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){km(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)fm(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=ix(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:s}=this,i=[],a=[],o=Math.floor(t/sx(t,n));let l,c,u,d,h,m,g,p,f,x,b,y=0,v=0;for(l=0;l<t;l+=o){if(d=e[l].label,h=this._resolveTickFontOptions(l),r.font=m=h.string,g=s[m]=s[m]||{data:{},gc:[]},p=h.lineHeight,f=x=0,fm(d)||xm(d)){if(xm(d))for(c=0,u=d.length;c<u;++c)b=d[c],fm(b)||xm(b)||(f=Eg(r,g.data,g.gc,f,b),x+=p)}else f=Eg(r,g.data,g.gc,f,d),x=p;i.push(f),a.push(x),y=Math.max(f,y),v=Math.max(x,v)}!function(e,t){jm(e,e=>{const n=e.gc,r=n.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}})}(s,t);const w=i.indexOf(y),k=a.indexOf(v),j=e=>({width:i[e]||0,height:a[e]||0});return{first:j(0),last:j(t-1),widest:j(w),highest:j(k),widths:i,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return ng(this._alignToPixels?Rg(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return tp(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=tp(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Xm(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),i=e.autoSkipPadding||0,a=s?s.widest.width+i:0,o=s?s.highest.height+i:0;return this.isHorizontal()?o*n>a*r?a/n:o/r:o*r<a*n?o/n:a/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:s,position:i,border:a}=r,o=s.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=ox(s),d=[],h=a.setContext(this.getContext()),m=h.display?h.width:0,g=m/2,p=function(e){return Rg(n,e,m)};let f,x,b,y,v,w,k,j,N,C,S,M;if("top"===i)f=p(this.bottom),w=this.bottom-u,j=f-g,C=p(e.top)+g,M=e.bottom;else if("bottom"===i)f=p(this.top),C=e.top,M=p(e.bottom)-g,w=f+g,j=this.top+u;else if("left"===i)f=p(this.right),v=this.right-u,k=f-g,N=p(e.left)+g,S=e.right;else if("right"===i)f=p(this.left),N=e.left,S=p(e.right)-g,v=f+g,k=this.left+u;else if("x"===t){if("center"===i)f=p((e.top+e.bottom)/2+.5);else if(bm(i)){const e=Object.keys(i)[0],t=i[e];f=p(this.chart.scales[e].getPixelForValue(t))}C=e.top,M=e.bottom,w=f+g,j=w+u}else if("y"===t){if("center"===i)f=p((e.left+e.right)/2);else if(bm(i)){const e=Object.keys(i)[0],t=i[e];f=p(this.chart.scales[e].getPixelForValue(t))}v=f-g,k=v-u,N=e.left,S=e.right}const _=wm(r.ticks.maxTicksLimit,c),P=Math.max(1,Math.ceil(c/_));for(x=0;x<c;x+=P){const e=this.getContext(x),t=s.setContext(e),r=a.setContext(e),i=t.lineWidth,c=t.color,u=r.dash||[],h=r.dashOffset,m=t.tickWidth,g=t.tickColor,p=t.tickBorderDash||[],f=t.tickBorderDashOffset;b=ax(this,x,o),void 0!==b&&(y=Rg(n,b,i),l?v=k=N=S=y:w=j=C=M=y,d.push({tx1:v,ty1:w,tx2:k,ty2:j,x1:N,y1:C,x2:S,y2:M,width:i,color:c,borderDash:u,borderDashOffset:h,tickWidth:m,tickColor:g,tickBorderDash:p,tickBorderDashOffset:f}))}return this._ticksLength=c,this._borderValue=f,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:s}=n,i=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=s,d=ox(n.grid),h=d+c,m=u?-c:h,g=-Xm(this.labelRotation),p=[];let f,x,b,y,v,w,k,j,N,C,S,M,_="middle";if("top"===r)w=this.bottom-m,k=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+m,k=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(d);k=e.textAlign,v=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(d);k=e.textAlign,v=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+h;else if(bm(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+h}k=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)v=(e.left+e.right)/2-h;else if(bm(r)){const e=Object.keys(r)[0],t=r[e];v=this.chart.scales[e].getPixelForValue(t)}k=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===o?_="top":"end"===o&&(_="bottom"));const P=this._getLabelSizes();for(f=0,x=a.length;f<x;++f){b=a[f],y=b.label;const e=s.setContext(this.getContext(f));j=this.getPixelForTick(f)+s.labelOffset,N=this._resolveTickFontOptions(f),C=N.lineHeight,S=xm(y)?y.length:1;const t=S/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let d,h=k;if(i?(v=j,"inner"===k&&(h=f===x-1?this.options.reverse?"left":"right":0===f?this.options.reverse?"right":"left":"center"),M="top"===r?"near"===l||0!==g?-S*C+C/2:"center"===l?-P.highest.height/2-t*C+C:-P.highest.height+C/2:"near"===l||0!==g?C/2:"center"===l?P.highest.height/2-t*C:P.highest.height-S*C,u&&(M*=-1),0===g||e.showLabelBackdrop||(v+=C/2*Math.sin(g))):(w=j,M=(1-S)*C/2),e.showLabelBackdrop){const t=Kg(e.backdropPadding),n=P.heights[f],r=P.widths[f];let s=M-t.top,i=0-t.left;switch(_){case"middle":s-=n/2;break;case"bottom":s-=n}switch(k){case"center":i-=r/2;break;case"right":i-=r;break;case"inner":f===x-1?i-=r:f>0&&(i-=r/2)}d={left:i,top:s,width:r+t.width,height:n+t.height,color:e.backdropColor}}p.push({label:y,font:N,textOffset:M,options:{rotation:g,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:_,translation:[v,w],backdrop:d}})}return p}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Xm(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,i=e+s,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-i,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+i,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:s,height:i}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,s,i),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);return n>=0?t.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,i;const a=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(s=0,i=r.length;s<i;++s){const e=r[s];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,s=n.setContext(this.getContext()),i=n.display?s.width:0;if(!i)return;const a=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=Rg(e,this.left,i)-i/2,c=Rg(e,this.right,a)+a/2,u=d=o):(u=Rg(e,this.top,i)-i/2,d=Rg(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&Ig(t,n);const r=this.getLabelItems(e);for(const s of r){const e=s.options,n=s.font;Hg(t,s.label,0,s.textOffset,n,e)}n&&Dg(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const s=Jg(n.font),i=Kg(n.padding),a=n.align;let o=s.lineHeight/2;"bottom"===t||"center"===t||bm(t)?(o+=i.bottom,xm(n.text)&&(o+=s.lineHeight*(n.text.length-1))):o+=i.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,r){const{top:s,left:i,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,m,g=0;const p=a-s,f=o-i;if(e.isHorizontal()){if(h=hg(r,i,o),bm(n)){const e=Object.keys(n)[0],r=n[e];m=u[e].getPixelForValue(r)+p-t}else m="center"===n?(c.bottom+c.top)/2+p-t:rx(e,n,t);d=o-i}else{if(bm(n)){const e=Object.keys(n)[0],r=n[e];h=u[e].getPixelForValue(r)-f+t}else h="center"===n?(c.left+c.right)/2-f+t:rx(e,n,t);m=hg(r,a,s),g="left"===n?-Bm:Bm}return{titleX:h,titleY:m,maxWidth:d,rotation:g}}(this,o,t,a);Hg(e,n.text,0,0,s,{color:n.color,maxWidth:u,rotation:d,textAlign:cx(a,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=wm(e.grid&&e.grid.z,-1),r=wm(e.border&&e.border.z,0);return this._isVisible()&&this.draw===ux.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,i;for(s=0,i=t.length;s<i;++s){const i=t[s];i[n]!==this.id||e&&i.type!==e||r.push(i)}return r}_resolveTickFontOptions(e){return Jg(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class dx{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,s=e.id,i=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,function(e,t,n){const r=_m(Object.create(null),[n?Tg.get(n):{},Tg.get(t),e.defaults]);Tg.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),s=r.pop(),i=[e].concat(r).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");Tg.route(i,s,l,o)})}(t,e.defaultRoutes),e.descriptors&&Tg.describe(t,e.descriptors)}(e,i,n),this.override&&Tg.override(e.id,e.overrides)),i}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in Tg[r]&&(delete Tg[r][n],this.override&&delete Cg[n])}}class hx{constructor(){this.controllers=new dx(hf,"datasets",!0),this.elements=new dx(ex,"elements"),this.plugins=new dx(Object,"plugins"),this.scales=new dx(ux,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach(t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):jm(t,t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,n){const r=Am(e);km(n["before"+r],[],n),t[e](n),km(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var mx=new hx;class gx{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),i=this._notify(s,e,t,n);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),i}_notify(e,t,n,r){r=r||{};for(const s of e){const e=s.plugin;if(!1===km(e[n],[t,r,s.options],e)&&r.cancelable)return!1}return!0}invalidate(){fm(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=wm(n.options&&n.options.plugins,{}),s=function(e){const t={},n=[],r=Object.keys(mx.plugins.items);for(let i=0;i<r.length;i++)n.push(mx.getPlugin(r[i]));const s=e.plugins||[];for(let i=0;i<s.length;i++){const e=s[i];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,{plugins:t,localIds:n},r,s){const i=[],a=e.getContext();for(const o of t){const t=o.id,l=px(r[t],s);null!==l&&i.push({plugin:o,options:fx(e.config,{plugin:o,local:n[t]},l,a)})}return i}(e,s,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function px(e,t){return t||!1!==e?!0===e?{}:e:null}function fx(e,{plugin:t,local:n},r,s){const i=e.pluginScopeKeys(t),a=e.getOptionScopes(r,i);return n&&t.defaults&&a.push(t.defaults),e.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xx(e,t){const n=Tg.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function bx(e){if("x"===e||"y"===e||"r"===e)return e}function yx(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function vx(e,...t){if(bx(e))return e;for(const n of t){const t=n.axis||yx(n.position)||e.length>1&&bx(e[0].toLowerCase());if(t)return t}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function wx(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function kx(e,t){const n=Cg[e.type]||{scales:{}},r=t.scales||{},s=xx(e.type,t),i=Object.create(null);return Object.keys(r).forEach(t=>{const a=r[t];if(!bm(a))return console.error(`Invalid scale configuration for scale: ${t}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const o=vx(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return wx(e,"x",n[0])||wx(e,"y",n[0])}return{}}(t,e),Tg.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,s),c=n.scales||{};i[t]=Pm(Object.create(null),[{axis:o},a,c[o],c[l]])}),e.data.datasets.forEach(n=>{const s=n.type||e.type,a=n.indexAxis||xx(s,t),o=(Cg[s]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),s=n[t+"AxisID"]||t;i[s]=i[s]||Object.create(null),Pm(i[s],[{axis:t},r[s],o[e]])})}),Object.keys(i).forEach(e=>{const t=i[e];Pm(t,[Tg.scales[t.type],Tg.scale])}),i}function jx(e){const t=e.options||(e.options={});t.plugins=wm(t.plugins,{}),t.scales=kx(e,t)}function Nx(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Cx=new Map,Sx=new Set;function Mx(e,t){let n=Cx.get(e);return n||(n=t(),Cx.set(e,n),Sx.add(n)),n}const _x=(e,t,n)=>{const r=Rm(t,n);void 0!==r&&e.add(r)};class Px{constructor(e){this._config=function(e){return(e=e||{}).data=Nx(e.data),jx(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Nx(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),jx(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Mx(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Mx(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Mx(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return Mx(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:s}=this,i=this._cachedScopes(e,n),a=i.get(t);if(a)return a;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>_x(o,e,t))),t.forEach(e=>_x(o,r,e)),t.forEach(e=>_x(o,Cg[s]||{},e)),t.forEach(e=>_x(o,Tg,e)),t.forEach(e=>_x(o,Sg,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),Sx.has(t)&&i.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Cg[t]||{},Tg.datasets[t]||{},{type:t},Tg,Sg]}resolveNamedOptions(e,t,n,r=[""]){const s={$shared:!0},{resolver:i,subPrefixes:a}=Tx(this._resolverCache,e,r);let o=i;(function(e,t){const{isScriptable:n,isIndexable:r}=sp(e);for(const s of t){const t=n(s),i=r(s),a=(i||t)&&e[s];if(t&&(Fm(a)||Ex(a))||i&&xm(a))return!0}return!1})(i,t)&&(s.$shared=!1,o=rp(i,n=Fm(n)?n():n,this.createResolver(e,n,a)));for(const l of t)s[l]=o[l];return s}createResolver(e,t,n=[""],r){const{resolver:s}=Tx(this._resolverCache,e,n);return bm(t)?rp(s,t,void 0,r):s}}function Tx(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let i=r.get(s);return i||(i={resolver:np(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},r.set(s,i)),i}const Ex=e=>bm(e)&&Object.getOwnPropertyNames(e).some(t=>Fm(e[t])),Rx=["top","bottom","left","right","chartArea"];function Ax(e,t){return"top"===e||"bottom"===e||-1===Rx.indexOf(e)&&"x"===t}function Lx(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function Fx(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),km(n&&n.onComplete,[e],t)}function Ox(e){const t=e.chart,n=t.options.animation;km(n&&n.onProgress,[e],t)}function Ix(e){return kp()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Dx={},zx=e=>{const t=Ix(e);return Object.values(Dx).filter(e=>e.canvas===t).pop()};function qx(e,t,n){const r=Object.keys(e);for(const s of r){const r=+s;if(r>=t){const i=e[s];delete e[s],(n>0||r>t)&&(e[r+n]=i)}}}class $x{static register(...e){mx.add(...e),Bx()}static unregister(...e){mx.remove(...e),Bx()}constructor(e,t){const n=this.config=new Px(t),r=Ix(e),s=zx(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const i=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!kp()||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?Df:Zf}(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,i.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=pm(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new gx,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}(e=>this.update(e),i.resizeDelay||0),this._dataChanges=[],Dx[this.id]=this,a&&o?(Qp.listen(this,"complete",Fx),Qp.listen(this,"progress",Ox),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:s}=this;return fm(e)?t&&s?s:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return mx}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ep(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ag(this.canvas,this.ctx),this}stop(){return Qp.stop(this),this}resize(e,t){Qp.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(r,e,t,s),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,Ep(this,a,!0)&&(this.notifyPlugins("resize",{size:i}),km(n.onResize,[this,i],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){jm(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let s=[];t&&(s=s.concat(Object.keys(t).map(e=>{const n=t[e],r=vx(e,n),s="r"===r,i="x"===r;return{options:n,dposition:s?"chartArea":i?"bottom":"left",dtype:s?"radialLinear":i?"category":"linear"}}))),jm(s,t=>{const s=t.options,i=s.id,a=vx(i,s),o=wm(s.type,t.dtype);void 0!==s.position&&Ax(s.position,a)===Ax(t.dposition)||(s.position=t.dposition),r[i]=!0;let l=null;i in n&&n[i].type===o?l=n[i]:(l=new(mx.getScale(o))({id:i,type:o,ctx:this.ctx,chart:this}),n[l.id]=l),l.init(s,e)}),jm(r,(e,t)=>{e||delete n[t]}),jm(n,e=>{Of.configure(this,e,e.options),Of.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Lx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let s=this.getDatasetMeta(n);const i=r.type||this.config.type;if(s.type&&s.type!==i&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=i,s.indexAxis=r.indexAxis||xx(i,this.options),s.order=r.order||0,s.index=n,s.label=""+r.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const t=mx.getController(i),{datasetElementType:r,dataElementType:a}=Tg.datasets[i];Object.assign(t,{dataElementType:mx.getElement(a),datasetElementType:r&&mx.getElement(r)}),s.controller=new t(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){jm(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===s.indexOf(e);e.buildOrUpdateElements(t),i=Math.max(+e.getMaxOverflow(),i)}i=this._minPadding=n.layout.autoPadding?i:0,this._updateLayout(i),r||jm(s,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Lx("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){jm(this.scales,e=>{Of.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Om(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of t)qx(e,r,"_removeElements"===n?-s:s)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=n(0);for(let s=1;s<t;s++)if(!Om(r,n(s)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Of.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],jm(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Fm(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Qp.has(this)?this.attached&&!Qp.running(this)&&Qp.start(this):(this.draw(),Fx({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];e&&!s.visible||n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=Gp(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&Ig(t,r),e.controller.draw(),r&&Dg(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Og(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const s=jf.modes[t];return"function"==typeof s?s(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=tp(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"==typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",s=this.getDatasetMeta(e),i=s.controller._resolveAnimations(void 0,r);Lm(t)?(s.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),i.update(s,{visible:n}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Qp.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ag(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Dx[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};jm(this.options.events,e=>n(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},s=(e,t)=>{this.canvas&&this.resize(e,t)};let i;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",s),n("detach",i)};i=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():i()}unbindEvents(){jm(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},jm(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let s,i,a,o;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){i=e[a];const t=i&&this.getDatasetMeta(i.datasetIndex).controller;t&&t[r+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(({datasetIndex:e,index:t})=>{const n=this.getDatasetMeta(e);if(!n)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:n.data[t],index:t}});!Nm(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const r=this.options.hover,s=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),i=s(t,e),a=n?e:s(e,t);i.length&&this.updateHoverStyle(i,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const s=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:s}=this,i=t,a=this._getActiveElements(e,r,n,i),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,km(s.onHover,[e,a,this],this),o&&km(s.onClick,[e,a,this],this));const c=!Nm(a,r);return(c||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}function Bx(){return jm($x.instances,e=>e._plugins.invalidate())}function Hx(e,t,n=t){e.lineCap=wm(n.borderCapStyle,t.borderCapStyle),e.setLineDash(wm(n.borderDash,t.borderDash)),e.lineDashOffset=wm(n.borderDashOffset,t.borderDashOffset),e.lineJoin=wm(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=wm(n.borderWidth,t.borderWidth),e.strokeStyle=wm(n.borderColor,t.borderColor)}function Wx(e,t,n){e.lineTo(n.x,n.y)}function Ux(e,t,n={}){const r=e.length,{start:s=0,end:i=r-1}=n,{start:a,end:o}=t,l=Math.max(s,a),c=Math.min(i,o),u=s<a&&i<a||s>o&&i>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function Vx(e,t,n,r){const{points:s,options:i}=t,{count:a,start:o,loop:l,ilen:c}=Ux(s,n,r),u=function(e){return e.stepped?zg:e.tension||"monotone"===e.cubicInterpolationMode?qg:Wx}(i);let d,h,m,{move:g=!0,reverse:p}=r||{};for(d=0;d<=c;++d)h=s[(o+(p?c-d:d))%a],h.skip||(g?(e.moveTo(h.x,h.y),g=!1):u(e,m,h,p,i.stepped),m=h);return l&&(h=s[(o+(p?c:0))%a],u(e,m,h,p,i.stepped)),!!l}function Gx(e,t,n,r){const s=t.points,{count:i,start:a,ilen:o}=Ux(s,n,r),{move:l=!0,reverse:c}=r||{};let u,d,h,m,g,p,f=0,x=0;const b=e=>(a+(c?o-e:e))%i,y=()=>{m!==g&&(e.lineTo(f,g),e.lineTo(f,m),e.lineTo(f,p))};for(l&&(d=s[b(0)],e.moveTo(d.x,d.y)),u=0;u<=o;++u){if(d=s[b(u)],d.skip)continue;const t=d.x,n=d.y,r=0|t;r===h?(n<m?m=n:n>g&&(g=n),f=(x*f+t)/++x):(y(),e.lineTo(t,n),h=r,x=0,m=g=n),p=n}y()}function Yx(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return e._decimated||e._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||n?Vx:Gx}h($x,"defaults",Tg),h($x,"instances",Dx),h($x,"overrides",Cg),h($x,"registry",mx),h($x,"version","4.5.0"),h($x,"getChart",zx);const Qx="function"==typeof Path2D;function Xx(e,t,n,r){Qx&&!t.options.segment?function(e,t,n,r){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,r)&&s.closePath()),Hx(e,t.options),e.stroke(s)}(e,t,n,r):function(e,t,n,r){const{segments:s,options:i}=t,a=Yx(t);for(const o of s)Hx(e,i,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class Kx extends ex{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;wp(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,s=n.length;if(!s)return[];const i=!!e._loop,{start:a,end:o}=function(e,t,n,r){let s=0,i=t-1;if(n&&!r)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(i+=s);i>s&&e[i%t].skip;)i--;return i%=t,{start:s,end:i}}(n,s,i,r);return Hp(e,!0===r?[{start:a,end:o,loop:i}]:function(e,t,n,r){const s=e.length,i=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%s];n.skip||n.stop?l.skip||(r=!1,i.push({start:t%s,end:(a-1)%s,loop:r}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&i.push({start:t%s,end:o%s,loop:r}),i}(n,a,o<a?o+s:o,!!e._fullLoop&&0===a&&o===s-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],s=this.points,i=function(e,t){const n=[],r=e.segments;for(let s=0;s<r.length;s++){const i=Bp(r[s],e.points,t);i.length&&n.push(...i)}return n}(this,{property:t,start:r,end:r});if(!i.length)return;const a=[],o=function(e){return e.stepped?Fp:e.tension||"monotone"===e.cubicInterpolationMode?Op:Lp}(n);let l,c;for(l=0,c=i.length;l<c;++l){const{start:c,end:u}=i[l],d=s[c],h=s[u];if(d===h){a.push(d);continue}const m=o(d,h,Math.abs((r-d[t])/(h[t]-d[t])),n.stepped);m[t]=e[t],a.push(m)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return Yx(this)(e,this,t,n)}path(e,t,n){const r=this.segments,s=Yx(this);let i=this._loop;t=t||0,n=n||this.points.length-t;for(const a of r)i&=s(e,this,a,{start:t,end:t+n-1});return!!i}draw(e,t,n,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Xx(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Jx(e,t,n,r){const s=e.options,{[n]:i}=e.getProps([n],r);return Math.abs(t-i)<s.radius+s.hitRadius}h(Kx,"id","line"),h(Kx,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),h(Kx,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),h(Kx,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class Zx extends ex{constructor(e){super(),h(this,"parsed"),h(this,"skip"),h(this,"stop"),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:s,y:i}=this.getProps(["x","y"],n);return Math.pow(e-s,2)+Math.pow(t-i,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return Jx(this,e,"x",t)}inYRange(e,t){return Jx(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;return t=Math.max(t,t&&e.hoverRadius||0),2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!Og(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Lg(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}h(Zx,"id","point"),h(Zx,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),h(Zx,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const eb=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class tb extends ex{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=km(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=Jg(n.font),s=r.size,i=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=eb(n,s);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(i,s,a,o)+10):(c=this.maxHeight,l=this._fitCols(i,r,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:s,maxWidth:i,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+a;let u=e;s.textAlign="left",s.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((e,m)=>{const g=n+t/2+s.measureText(e.text).width;(0===m||l[l.length-1]+g+2*a>i)&&(u+=c,l[l.length-(m>0?0:1)]=0,h+=c,d++),o[m]={left:0,top:h,row:d,width:g,height:r},l[l.length-1]+=g+a}),u}_fitCols(e,t,n,r){const{ctx:s,maxHeight:i,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=i-e;let u=a,d=0,h=0,m=0,g=0;return this.legendItems.forEach((e,i)=>{const{itemWidth:p,itemHeight:f}=function(e,t,n,r,s){const i=function(e,t,n,r){let s=e.text;return s&&"string"!=typeof s&&(s=s.reduce((e,t)=>e.length>t.length?e:t)),t+n.size/2+r.measureText(s).width}(r,e,t,n),a=function(e,t,n){let r=e;return"string"!=typeof t.text&&(r=nb(t,n)),r}(s,r,t.lineHeight);return{itemWidth:i,itemHeight:a}}(n,t,s,e,r);i>0&&h+f+2*a>c&&(u+=d+a,l.push({width:d,height:h}),m+=d+a,g++,d=h=0),o[i]={left:m,top:h,col:g,width:p,height:f},d=Math.max(d,p),h+=f+a}),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:s}}=this,i=Ip(s,this.left,this.width);if(this.isHorizontal()){let s=0,a=hg(n,this.left+r,this.right-this.lineWidths[s]);for(const o of t)s!==o.row&&(s=o.row,a=hg(n,this.left+r,this.right-this.lineWidths[s])),o.top+=this.top+e+r,o.left=i.leftForLtr(i.x(a),o.width),a+=o.width+r}else{let s=0,a=hg(n,this.top+e+r,this.bottom-this.columnSizes[s].height);for(const o of t)o.col!==s&&(s=o.col,a=hg(n,this.top+e+r,this.bottom-this.columnSizes[s].height)),o.top=a,o.left+=this.left+r,o.left=i.leftForLtr(i.x(o.left),o.width),a+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Ig(e,this),this._draw(),Dg(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:s,labels:i}=e,a=Tg.color,o=Ip(e.rtl,this.left,this.width),l=Jg(i.font),{padding:c}=i,u=l.size,d=u/2;let h;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:m,boxHeight:g,itemHeight:p}=eb(i,u),f=this.isHorizontal(),x=this._computeTitleHeight();h=f?{x:hg(s,this.left+c,this.right-n[0]),y:this.top+c+x,line:0}:{x:this.left+c,y:hg(s,this.top+x+c,this.bottom-t[0].height),line:0},Dp(this.ctx,e.textDirection);const b=p+c;this.legendItems.forEach((y,v)=>{r.strokeStyle=y.fontColor,r.fillStyle=y.fontColor;const w=r.measureText(y.text).width,k=o.textAlign(y.textAlign||(y.textAlign=i.textAlign)),j=m+d+w;let N=h.x,C=h.y;if(o.setWidth(this.width),f?v>0&&N+j+c>this.right&&(C=h.y+=b,h.line++,N=h.x=hg(s,this.left+c,this.right-n[h.line])):v>0&&C+b>this.bottom&&(N=h.x=N+t[h.line].width+c,h.line++,C=h.y=hg(s,this.top+x+c,this.bottom-t[h.line].height)),function(e,t,n){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;r.save();const s=wm(n.lineWidth,1);if(r.fillStyle=wm(n.fillStyle,a),r.lineCap=wm(n.lineCap,"butt"),r.lineDashOffset=wm(n.lineDashOffset,0),r.lineJoin=wm(n.lineJoin,"miter"),r.lineWidth=s,r.strokeStyle=wm(n.strokeStyle,a),r.setLineDash(wm(n.lineDash,[])),i.usePointStyle){const a={radius:g*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:s},l=o.xPlus(e,m/2);Fg(r,a,l,t+d,i.pointStyleWidth&&m)}else{const i=t+Math.max((u-g)/2,0),a=o.leftForLtr(e,m),l=Xg(n.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?Wg(r,{x:a,y:i,w:m,h:g,radius:l}):r.rect(a,i,m,g),r.fill(),0!==s&&r.stroke()}r.restore()}(o.x(N),C,y),N=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(k,N+m+d,f?N+j:this.right,e.rtl),function(e,t,n){Hg(r,n.text,e,t+p/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(N),C,y),f)h.x+=j+c;else if("string"!=typeof y.text){const e=l.lineHeight;h.y+=nb(y,e)+c}else h.y+=b}),zp(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=Jg(t.font),r=Kg(t.padding);if(!t.display)return;const s=Ip(e.rtl,this.left,this.width),i=this.ctx,a=t.position,o=n.size/2,l=r.top+o;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=hg(e.align,u,this.right-d);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+hg(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=hg(a,u,u+d);i.textAlign=s.textAlign(dg(a)),i.textBaseline="middle",i.strokeStyle=t.color,i.fillStyle=t.color,i.font=n.string,Hg(i,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=Jg(e.font),n=Kg(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,s;if(rg(e,this.left,this.right)&&rg(t,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],rg(e,r.left,r.left+r.width)&&rg(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){return!("mousemove"!==e&&"mouseout"!==e||!t.onHover&&!t.onLeave)||!(!t.onClick||"click"!==e&&"mouseup"!==e)}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,s=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!s&&km(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!s&&km(t.onHover,[e,n,this],this)}else n&&km(t.onClick,[e,n,this],this)}}function nb(e,t){return t*(e.text?e.text.length:0)}var rb={id:"legend",_element:tb,start(e,t,n){const r=e.legend=new tb({ctx:e.ctx,options:n,chart:e});Of.configure(e,r,n),Of.addBox(e,r)},stop(e){Of.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;Of.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=Kg(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:i,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:s||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class sb extends ex{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=xm(n.text)?n.text.length:1;this._padding=Kg(n.padding);const s=r*Jg(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:s,options:i}=this,a=i.align;let o,l,c,u=0;return this.isHorizontal()?(l=hg(a,n,s),c=t+e,o=s-n):("left"===i.position?(l=n+e,c=hg(a,r,t),u=-.5*Im):(l=s-e,c=hg(a,t,r),u=.5*Im),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=Jg(t.font),r=n.lineHeight/2+this._padding.top,{titleX:s,titleY:i,maxWidth:a,rotation:o}=this._drawArgs(r);Hg(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:dg(t.align),textBaseline:"middle",translation:[s,i]})}}var ib={id:"title",_element:sb,start(e,t,n){!function(e,t){const n=new sb({ctx:e.ctx,options:t,chart:e});Of.configure(e,n,t),Of.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;Of.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;Of.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ab={average(e){if(!e.length)return!1;let t,n,r=new Set,s=0,i=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),s+=e.y,++i}}if(0===i||0===r.size)return!1;const a=[...r].reduce((e,t)=>e+t)/r.size;return{x:a,y:s/i}},nearest(e,t){if(!e.length)return!1;let n,r,s,i=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=Jm(t,r.getCenterPoint());e<o&&(o=e,s=r)}}if(s){const e=s.tooltipPosition();i=e.x,a=e.y}return{x:i,y:a}}};function ob(e,t){return t&&(xm(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function lb(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function cb(e,t){const{element:n,datasetIndex:r,index:s}=t,i=e.getDatasetMeta(r).controller,{label:a,value:o}=i.getLabelAndValue(s);return{chart:e,label:a,parsed:i.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:o,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function ub(e,t){const n=e.chart.ctx,{body:r,footer:s,title:i}=e,{boxWidth:a,boxHeight:o}=t,l=Jg(t.bodyFont),c=Jg(t.titleFont),u=Jg(t.footerFont),d=i.length,h=s.length,m=r.length,g=Kg(t.padding);let p=g.height,f=0,x=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);x+=e.beforeBody.length+e.afterBody.length,d&&(p+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),x&&(p+=m*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(x-m)*l.lineHeight+(x-1)*t.bodySpacing),h&&(p+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let b=0;const y=function(e){f=Math.max(f,n.measureText(e).width+b)};return n.save(),n.font=c.string,jm(e.title,y),n.font=l.string,jm(e.beforeBody.concat(e.afterBody),y),b=t.displayColors?a+2+t.boxPadding:0,jm(r,e=>{jm(e.before,y),jm(e.lines,y),jm(e.after,y)}),b=0,n.font=u.string,jm(e.footer,y),n.restore(),f+=g.width,{width:f,height:p}}function db(e,t,n,r){const{x:s,width:i}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=s<=(o+l)/2?"left":"right":s<=i/2?c="left":s>=a-i/2&&(c="right"),function(e,t,n,r){const{x:s,width:i}=r,a=n.caretSize+n.caretPadding;return"left"===e&&s+i+a>t.width||"right"===e&&s-i-a<0||void 0}(c,e,t,n)&&(c="center"),c}function hb(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||db(e,t,n,r),yAlign:r}}function mb(e,t,n,r){const{caretSize:s,caretPadding:i,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=s+i,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:m}=Xg(a);let g=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const p=function(e,t,n){let{y:r,height:s}=e;return"top"===t?r+=n:r-="bottom"===t?s+n:s/2,r}(t,l,c);return"center"===l?"left"===o?g+=c:"right"===o&&(g-=c):"left"===o?g-=Math.max(u,h)+s:"right"===o&&(g+=Math.max(d,m)+s),{x:ng(g,0,r.width-t.width),y:ng(p,0,r.height-t.height)}}function gb(e,t,n){const r=Kg(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function pb(e){return ob([],lb(e))}function fb(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const xb={beforeTitle:gm,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:gm,beforeBody:gm,beforeLabel:gm,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return fm(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:gm,afterBody:gm,beforeFooter:gm,footer:gm,afterFooter:gm};function bb(e,t,n,r){const s=e[t].call(n,r);return void 0===s?xb[t].call(n,r):s}class yb extends ex{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,s=new Zp(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,tp(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=bb(n,"beforeTitle",this,e),s=bb(n,"title",this,e),i=bb(n,"afterTitle",this,e);let a=[];return a=ob(a,lb(r)),a=ob(a,lb(s)),a=ob(a,lb(i)),a}getBeforeBody(e,t){return pb(bb(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return jm(e,e=>{const t={before:[],lines:[],after:[]},s=fb(n,e);ob(t.before,lb(bb(s,"beforeLabel",this,e))),ob(t.lines,bb(s,"label",this,e)),ob(t.after,lb(bb(s,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return pb(bb(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=bb(n,"beforeFooter",this,e),s=bb(n,"footer",this,e),i=bb(n,"afterFooter",this,e);let a=[];return a=ob(a,lb(r)),a=ob(a,lb(s)),a=ob(a,lb(i)),a}_createItems(e){const t=this._active,n=this.chart.data,r=[],s=[],i=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(cb(this.chart,t[a]));return e.filter&&(l=l.filter((t,r,s)=>e.filter(t,r,s,n))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,n))),jm(l,t=>{const n=fb(e.callbacks,t);r.push(bb(n,"labelColor",this,t)),s.push(bb(n,"labelPointStyle",this,t)),i.push(bb(n,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=i,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let s,i=[];if(r.length){const e=ab[n.position].call(this,r,this._eventPosition);i=this._createItems(n),this.title=this.getTitle(i,n),this.beforeBody=this.getBeforeBody(i,n),this.body=this.getBody(i,n),this.afterBody=this.getAfterBody(i,n),this.footer=this.getFooter(i,n);const t=this._size=ub(this,n),a=Object.assign({},e,t),o=hb(this.chart,n,a),l=mb(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,s={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=i,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const s=this.getCaretPosition(e,n,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:s}=this,{caretSize:i,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=Xg(a),{x:d,y:h}=e,{width:m,height:g}=t;let p,f,x,b,y,v;return"center"===s?(y=h+g/2,"left"===r?(p=d,f=p-i,b=y+i,v=y-i):(p=d+m,f=p+i,b=y-i,v=y+i),x=p):(f="left"===r?d+Math.max(o,c)+i:"right"===r?d+m-Math.max(l,u)-i:this.caretX,"top"===s?(b=h,y=b-i,p=f-i,x=f+i):(b=h+g,y=b+i,p=f+i,x=f-i),v=b),{x1:p,x2:f,x3:x,y1:b,y2:y,y3:v}}drawTitle(e,t,n){const r=this.title,s=r.length;let i,a,o;if(s){const l=Ip(n.rtl,this.x,this.width);for(e.x=gb(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",i=Jg(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=i.string,o=0;o<s;++o)t.fillText(r[o],l.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+a,o+1===s&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,r,s){const i=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=s,c=Jg(s.bodyFont),u=gb(this,"left",s),d=r.x(u),h=o<c.lineHeight?(c.lineHeight-o)/2:0,m=t.y+h;if(s.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=r.leftForLtr(d,l)+l/2,c=m+o/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Lg(e,t,n,c),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,Lg(e,t,n,c)}else{e.lineWidth=bm(i.borderWidth)?Math.max(...Object.values(i.borderWidth)):i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;const t=r.leftForLtr(d,l),n=r.leftForLtr(r.xPlus(d,1),l-2),a=Xg(i.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Wg(e,{x:t,y:m,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),Wg(e,{x:n,y:m+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(t,m,l,o),e.strokeRect(t,m,l,o),e.fillStyle=i.backgroundColor,e.fillRect(n,m+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:s,bodyAlign:i,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=Jg(n.bodyFont);let d=u.lineHeight,h=0;const m=Ip(n.rtl,this.x,this.width),g=function(n){t.fillText(n,m.x(e.x+h),e.y+d/2),e.y+=d+s},p=m.textAlign(i);let f,x,b,y,v,w,k;for(t.textAlign=i,t.textBaseline="middle",t.font=u.string,e.x=gb(this,p,n),t.fillStyle=n.bodyColor,jm(this.beforeBody,g),h=a&&"right"!==p?"center"===i?l/2+c:l+2+c:0,y=0,w=r.length;y<w;++y){for(f=r[y],x=this.labelTextColors[y],t.fillStyle=x,jm(f.before,g),b=f.lines,a&&b.length&&(this._drawColorBox(t,e,y,m,n),d=Math.max(u.lineHeight,o)),v=0,k=b.length;v<k;++v)g(b[v]),d=u.lineHeight;jm(f.after,g)}h=0,d=u.lineHeight,jm(this.afterBody,g),e.y-=s}drawFooter(e,t,n){const r=this.footer,s=r.length;let i,a;if(s){const o=Ip(n.rtl,this.x,this.width);for(e.x=gb(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",i=Jg(n.footerFont),t.fillStyle=n.footerColor,t.font=i.string,a=0;a<s;++a)t.fillText(r[a],o.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:s,yAlign:i}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:m}=Xg(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+u,o),"top"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+l-d,o),t.quadraticCurveTo(a+l,o,a+l,o+d),"center"===i&&"right"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+l,o+c-m),t.quadraticCurveTo(a+l,o+c,a+l-m,o+c),"bottom"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+h,o+c),t.quadraticCurveTo(a,o+c,a,o+c-h),"center"===i&&"left"===s&&this.drawCaret(e,t,n,r),t.lineTo(a,o+u),t.quadraticCurveTo(a,o,a+u,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,s=n&&n.y;if(r||s){const n=ab[e.position].call(this,this._active,this._eventPosition);if(!n)return;const i=this._size=ub(this,e),a=Object.assign({},n,this._size),o=hb(t,e,a),l=mb(e,a,o,t);r._to===l.x&&s._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=i.width,this.height=i.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const i=Kg(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(s,e,r,t),Dp(e,t.textDirection),s.y+=i.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),zp(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(({datasetIndex:e,index:t})=>{const n=this.chart.getDatasetMeta(e);if(!n)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:n.data[t],index:t}}),s=!Nm(n,r),i=this._positionChanged(r,t);(s||i)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,n=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],i=this._getActiveElements(e,s,t,n),a=this._positionChanged(i,e),o=t||!Nm(i,s)||a;return o&&(this._active=i,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const s=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const i=this.chart.getElementsAtEventForMode(e,s.mode,s,n);return s.reverse&&i.reverse(),i}_positionChanged(e,t){const{caretX:n,caretY:r,options:s}=this,i=ab[s.position].call(this,e,t);return!1!==i&&(n!==i.x||r!==i.y)}}h(yb,"positioners",ab);var vb={id:"tooltip",_element:yb,positioners:ab,afterInit(e,t,n){n&&(e.tooltip=new yb({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",d(u({},n),{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:xb},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function wb(e,t,n,r){const s=e.indexOf(t);return-1===s?((e,t,n,r)=>("string"==typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r):s!==e.lastIndexOf(t)?n:s}function kb(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class jb extends ux{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(fm(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:ng(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:wb(n,e,wm(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let i=e;i<=t;i++)r.push({value:i});return r}getLabelForValue(e){return kb.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Nb(e,t){const n=[],{bounds:r,step:s,min:i,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=s||1,m=c-1,{min:g,max:p}=t,f=!fm(i),x=!fm(a),b=!fm(l),y=(p-g)/(u+1);let v,w,k,j,N=Ym((p-g)/m/h)*h;if(N<1e-14&&!f&&!x)return[{value:g},{value:p}];j=Math.ceil(p/N)-Math.floor(g/N),j>m&&(N=Ym(j*N/m/h)*h),fm(o)||(v=Math.pow(10,o),N=Math.ceil(N*v)/v),"ticks"===r?(w=Math.floor(g/N)*N,k=Math.ceil(p/N)*N):(w=g,k=p),f&&x&&s&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-i)/s,N/1e3)?(j=Math.round(Math.min((a-i)/N,c)),N=(a-i)/j,w=i,k=a):b?(w=f?i:w,k=x?a:k,j=l-1,N=(k-w)/j):(j=(k-w)/N,j=Gm(j,Math.round(j),N/1e3)?Math.round(j):Math.ceil(j));const C=Math.max(Km(N),Km(w));v=Math.pow(10,fm(o)?C:o),w=Math.round(w*v)/v,k=Math.round(k*v)/v;let S=0;for(f&&(d&&w!==i?(n.push({value:i}),w<i&&S++,Gm(Math.round((w+S*N)*v)/v,i,Cb(i,y,e))&&S++):w<i&&S++);S<j;++S){const e=Math.round((w+S*N)*v)/v;if(x&&e>a)break;n.push({value:e})}return x&&d&&k!==a?n.length&&Gm(n[n.length-1].value,a,Cb(a,y,e))?n[n.length-1].value=a:n.push({value:a}):x&&k!==a||n.push({value:k}),n}function Cb(e,t,{horizontal:n,minRotation:r}){const s=Xm(r),i=(n?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/i,a)}h(jb,"id","category"),h(jb,"defaults",{ticks:{callback:kb}});class Sb extends ux{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return fm(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const i=e=>r=t?r:e,a=e=>s=n?s:e;if(e){const e=Vm(r),t=Vm(s);e<0&&t<0?a(0):e>0&&t>0&&i(0)}if(r===s){let t=0===s?1:Math.abs(.05*s);a(s+t),e||i(r-t)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=Nb({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&function(e,t,n){let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return jg(e,this.chart.options.locale,this.options.ticks.format)}}class Mb extends Sb{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ym(e)?e:0,this.max=ym(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Xm(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}h(Mb,"id","linear"),h(Mb,"defaults",{ticks:{callback:Ng.formatters.numeric}});const _b={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Pb=Object.keys(_b);function Tb(e,t){return e-t}function Eb(e,t){if(fm(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:i}=e._parseOpts;let a=t;return"function"==typeof r&&(a=r(a)),ym(a)||(a="string"==typeof r?n.parse(a,r):n.parse(a)),null===a?null:(s&&(a="week"!==s||!Qm(i)&&!0!==i?n.startOf(a,s):n.startOf(a,"isoWeek",i)),+a)}function Rb(e,t,n,r){const s=Pb.length;for(let i=Pb.indexOf(e);i<s-1;++i){const e=_b[Pb[i]],s=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(s*e.size))<=r)return Pb[i]}return Pb[s-1]}function Ab(e,t,n){if(n){if(n.length){const{lo:r,hi:s}=sg(n,t);e[n[r]>=t?n[r]:n[s]]=!0}}else e[t]=!0}function Lb(e,t,n){const r=[],s={},i=t.length;let a,o;for(a=0;a<i;++a)o=t[a],s[o]=a,r.push({value:o,major:!1});return 0!==i&&n?function(e,t,n,r){const s=e._adapter,i=+s.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=i;o<=a;o=+s.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,s,n):r}class Fb extends ux{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const n=e.time||(e.time={}),r=this._adapter=new pf._date(e.adapters.date);r.init(t),Pm(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Eb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:s,minDefined:i,maxDefined:a}=this.getUserBounds();function o(e){i||isNaN(e.min)||(r=Math.min(r,e.min)),a||isNaN(e.max)||(s=Math.max(s,e.max))}i&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=ym(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),s=ym(s)&&!isNaN(s)?s:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,i=function(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)r++;for(;s>r&&e[s-1]>n;)s--;return r>0||s<e.length?e.slice(r,s):e}(r,s,this.max);return this._unit=t.unit||(n.autoSkip?Rb(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(e,t,n,r,s){for(let i=Pb.length-1;i>=Pb.indexOf(n);i--){const n=Pb[i];if(_b[n].common&&e._adapter.diff(s,r,n)>=t-1)return n}return Pb[n?Pb.indexOf(n):0]}(this,i.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=Pb.indexOf(e)+1,n=Pb.length;t<n;++t)if(_b[Pb[t]].common)return Pb[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&i.reverse(),Lb(this,i,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t,n,r=0,s=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),r=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,n=this.getDecimalForValue(e[e.length-1]),s=1===e.length?n:(n-this.getDecimalForValue(e[e.length-2]))/2);const i=e.length<3?.5:.25;r=ng(r,0,i),s=ng(s,0,i),this._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,s=r.time,i=s.unit||Rb(s.minUnit,t,n,this._getLabelCapacity(t)),a=wm(r.ticks.stepSize,1),o="week"===i&&s.isoWeekday,l=Qm(o)||!0===o,c={};let u,d,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":i),e.diff(n,t,i)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+i);const m="data"===r.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+e.add(u,a,i),d++)Ab(c,u,m);return u!==n&&"ticks"!==r.bounds&&1!==d||Ab(c,u,m),Object.keys(c).sort(Tb).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,s=t||n[r];return this._adapter.format(e,s)}_tickFormatFunction(e,t,n,r){const s=this.options,i=s.ticks.callback;if(i)return km(i,[e,t,n],this);const a=s.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],u=l&&a[l],d=n[t],h=l&&u&&d&&d.major;return this._adapter.format(e,r||(h?u:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=Xm(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),i=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*s+a*i,h:n*i+a*s}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,s=this._tickFormatFunction(e,0,Lb(this,[e],this._majorUnit),r),i=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(Eb(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return function(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}(e.sort(Tb))}}function Ob(e,t,n){let r,s,i,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=ig(e,"pos",t)),({pos:r,time:i}=e[o]),({pos:s,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=ig(e,"time",t)),({time:r,pos:i}=e[o]),({time:s,pos:a}=e[l]));const c=s-r;return c?i+(a-i)*(t-r)/c:i}h(Fb,"id","time"),h(Fb,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Ib extends Fb{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Ob(t,this.min),this._tableRange=Ob(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],s=[];let i,a,o,l,c;for(i=0,a=e.length;i<a;++i)l=e[i],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(i=0,a=r.length;i<a;++i)c=r[i+1],o=r[i-1],l=r[i],Math.round((c+o)/2)!==l&&s.push({time:l,pos:i/(a-1)});return s}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Ob(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Ob(this._table,n*this._tableRange+this._minPos,!0)}}h(Ib,"id","timeseries"),h(Ib,"defaults",Fb.defaults);const Db=6048e5,zb=6e4,qb=36e5,$b=Symbol.for("constructDateFrom");function Bb(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&$b in e?e[$b](t):e instanceof Date?new e.constructor(t):new Date(t)}function Hb(e,t){return Bb(t||e,e)}function Wb(e,t,n){const r=Hb(e,null==n?void 0:n.in);return isNaN(t)?Bb((null==n?void 0:n.in)||e,NaN):t?(r.setDate(r.getDate()+t),r):r}function Ub(e,t,n){const r=Hb(e,null==n?void 0:n.in);if(isNaN(t))return Bb(e,NaN);if(!t)return r;const s=r.getDate(),i=Bb(e,r.getTime());return i.setMonth(r.getMonth()+t+1,0),s>=i.getDate()?i:(r.setFullYear(i.getFullYear(),i.getMonth(),s),r)}function Vb(e,t,n){return Bb(e,+Hb(e)+t)}let Gb={};function Yb(){return Gb}function Qb(e,t){var n,r,s,i,a,o,l,c;const u=Yb(),d=null!=(c=null!=(l=null!=(i=null!=(s=null==t?void 0:t.weekStartsOn)?s:null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.weekStartsOn)?i:u.weekStartsOn)?l:null==(o=null==(a=u.locale)?void 0:a.options)?void 0:o.weekStartsOn)?c:0,h=Hb(e,null==t?void 0:t.in),m=h.getDay(),g=(m<d?7:0)+m-d;return h.setDate(h.getDate()-g),h.setHours(0,0,0,0),h}function Xb(e,t){return Qb(e,d(u({},t),{weekStartsOn:1}))}function Kb(e,t){const n=Hb(e,null==t?void 0:t.in),r=n.getFullYear(),s=Bb(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Xb(s),a=Bb(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=Xb(a);return n.getTime()>=i.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function Jb(e){const t=Hb(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Zb(e,...t){const n=Bb.bind(null,t.find(e=>"object"==typeof e));return t.map(n)}function ey(e,t){const n=Hb(e,null==t?void 0:t.in);return n.setHours(0,0,0,0),n}function ty(e,t,n){const[r,s]=Zb(null==n||n.in,e,t),i=ey(r),a=ey(s),o=+i-Jb(i),l=+a-Jb(a);return Math.round((o-l)/864e5)}function ny(e,t){const n=+Hb(e)-+Hb(t);return n<0?-1:n>0?1:n}function ry(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+Hb(e)));var t}function sy(e,t,n){const[r,s]=Zb(null==n||n.in,e,t),i=iy(r,s),a=Math.abs(ty(r,s));r.setDate(r.getDate()-i*a);const o=i*(a-Number(iy(r,s)===-i));return 0===o?0:o}function iy(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function ay(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return 0===n?0:n}}function oy(e,t){return+Hb(e)-+Hb(t)}function ly(e,t){const n=Hb(e,null==t?void 0:t.in);return n.setHours(23,59,59,999),n}function cy(e,t){const n=Hb(e,null==t?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function uy(e,t,n){const[r,s,i]=Zb(null==n||n.in,e,e,t),a=ny(s,i),o=Math.abs(function(e,t,n){const[r,s]=Zb(null==n||n.in,e,t);return 12*(r.getFullYear()-s.getFullYear())+(r.getMonth()-s.getMonth())}(s,i));if(o<1)return 0;1===s.getMonth()&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-a*o);let l=ny(s,i)===-a;(function(e,t){const n=Hb(e,null==t?void 0:t.in);return+ly(n,t)===+cy(n,t)})(r)&&1===o&&1===ny(r,i)&&(l=!1);const c=a*(o-+l);return 0===c?0:c}function dy(e,t,n){const[r,s]=Zb(null==n||n.in,e,t),i=ny(r,s),a=Math.abs(function(e,t,n){const[r,s]=Zb(null==n||n.in,e,t);return r.getFullYear()-s.getFullYear()}(r,s));r.setFullYear(1584),s.setFullYear(1584);const o=i*(a-+(ny(r,s)===-i));return 0===o?0:o}function hy(e,t){const n=Hb(e,null==t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const my={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function gy(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const py={date:gy({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:gy({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:gy({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},fy={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function xy(e){return(t,n)=>{let r;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=(null==n?void 0:n.width)?String(n.width):t;r=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;r=e.values[s]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function by(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const a=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}(o,e=>e.test(a)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}(o,e=>e.test(a));let c;return c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c,{value:c,rest:t.slice(a.length)}}}var yy;const vy={code:"en-US",formatDistance:(e,t,n)=>{let r;const s=my[e];return r="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:py,formatRelative:(e,t,n,r)=>fy[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:xy({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:xy({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:xy({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:xy({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:xy({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(yy={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(yy.matchPattern);if(!n)return null;const r=n[0],s=e.match(yy.parsePattern);if(!s)return null;let i=yy.valueCallback?yy.valueCallback(s[0]):s[0];return i=t.valueCallback?t.valueCallback(i):i,{value:i,rest:e.slice(r.length)}}),era:by({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:by({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:by({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:by({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:by({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function wy(e,t){const n=Hb(e,null==t?void 0:t.in),r=+Xb(n)-+function(e,t){const n=Kb(e,t),r=Bb(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Xb(r)}(n);return Math.round(r/Db)+1}function ky(e,t){var n,r,s,i,a,o,l,c;const u=Hb(e,null==t?void 0:t.in),d=u.getFullYear(),h=Yb(),m=null!=(c=null!=(l=null!=(i=null!=(s=null==t?void 0:t.firstWeekContainsDate)?s:null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)?i:h.firstWeekContainsDate)?l:null==(o=null==(a=h.locale)?void 0:a.options)?void 0:o.firstWeekContainsDate)?c:1,g=Bb((null==t?void 0:t.in)||e,0);g.setFullYear(d+1,0,m),g.setHours(0,0,0,0);const p=Qb(g,t),f=Bb((null==t?void 0:t.in)||e,0);f.setFullYear(d,0,m),f.setHours(0,0,0,0);const x=Qb(f,t);return+u>=+p?d+1:+u>=+x?d:d-1}function jy(e,t){const n=Hb(e,null==t?void 0:t.in),r=+Qb(n,t)-+function(e,t){var n,r,s,i,a,o,l,c;const u=Yb(),d=null!=(c=null!=(l=null!=(i=null!=(s=null==t?void 0:t.firstWeekContainsDate)?s:null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)?i:u.firstWeekContainsDate)?l:null==(o=null==(a=u.locale)?void 0:a.options)?void 0:o.firstWeekContainsDate)?c:1,h=ky(e,t),m=Bb((null==t?void 0:t.in)||e,0);return m.setFullYear(h,0,d),m.setHours(0,0,0,0),Qb(m,t)}(n,t);return Math.round(r/Db)+1}function Ny(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Cy={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ny("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):Ny(n+1,2)},d:(e,t)=>Ny(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>Ny(e.getHours()%12||12,t.length),H:(e,t)=>Ny(e.getHours(),t.length),m:(e,t)=>Ny(e.getMinutes(),t.length),s:(e,t)=>Ny(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return Ny(Math.trunc(r*Math.pow(10,n-3)),t.length)}},Sy="midnight",My="noon",_y="morning",Py="afternoon",Ty="evening",Ey="night",Ry={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return Cy.y(e,t)},Y:function(e,t,n,r){const s=ky(e,r),i=s>0?s:1-s;return"YY"===t?Ny(i%100,2):"Yo"===t?n.ordinalNumber(i,{unit:"year"}):Ny(i,t.length)},R:function(e,t){return Ny(Kb(e),t.length)},u:function(e,t){return Ny(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ny(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ny(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Cy.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ny(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=jy(e,r);return"wo"===t?n.ordinalNumber(s,{unit:"week"}):Ny(s,t.length)},I:function(e,t,n){const r=wy(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Ny(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):Cy.d(e,t)},D:function(e,t,n){const r=function(e,t){const n=Hb(e,null==t?void 0:t.in);return ty(n,hy(n))+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Ny(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Ny(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Ny(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=0===r?7:r;switch(t){case"i":return String(s);case"ii":return Ny(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(s=12===r?My:0===r?Sy:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(s=r>=17?Ty:r>=12?Py:r>=4?_y:Ey,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return Cy.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):Cy.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Ny(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Ny(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Cy.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Cy.s(e,t)},S:function(e,t){return Cy.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return Ly(r);case"XXXX":case"XX":return Fy(r);default:return Fy(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Ly(r);case"xxxx":case"xx":return Fy(r);default:return Fy(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ay(r,":");default:return"GMT"+Fy(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ay(r,":");default:return"GMT"+Fy(r,":")}},t:function(e,t,n){return Ny(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return Ny(+e,t.length)}};function Ay(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return 0===i?n+String(s):n+String(s)+t+Ny(i,2)}function Ly(e,t){return e%60==0?(e>0?"-":"+")+Ny(Math.abs(e)/60,2):Fy(e,t)}function Fy(e,t=""){const n=e>0?"-":"+",r=Math.abs(e);return n+Ny(Math.trunc(r/60),2)+t+Ny(r%60,2)}const Oy=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Iy=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Dy={p:Iy,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Oy(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",Oy(r,t)).replace("{{time}}",Iy(s,t))}},zy=/^D+$/,qy=/^Y+$/,$y=["D","DD","YY","YYYY"];function By(e){return zy.test(e)}function Hy(e){return qy.test(e)}function Wy(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(r),$y.includes(e))throw new RangeError(r)}const Uy=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Vy=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Gy=/^'([^]*?)'?$/,Yy=/''/g,Qy=/[a-zA-Z]/;function Xy(e){const t=e.match(Gy);return t?t[1].replace(Yy,"'"):e}class Ky{constructor(){h(this,"subPriority",0)}validate(e,t){return!0}}class Jy extends Ky{constructor(e,t,n,r,s){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=r,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class Zy extends Ky{constructor(e,t){super(),h(this,"priority",10),h(this,"subPriority",-1),this.context=e||(e=>Bb(t,e))}set(e,t){return t.timestampIsSet?e:Bb(e,function(e,t){const n=function(e){var t;return"function"==typeof e&&(null==(t=e.prototype)?void 0:t.constructor)===e}(t)?new t(0):Bb(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}(e,this.context))}}class ev{run(e,t,n,r){const s=this.parse(e,t,n,r);return s?{setter:new Jy(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,n){return!0}}const tv=/^(1[0-2]|0?\d)/,nv=/^(3[0-1]|[0-2]?\d)/,rv=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,sv=/^(5[0-3]|[0-4]?\d)/,iv=/^(2[0-3]|[0-1]?\d)/,av=/^(2[0-4]|[0-1]?\d)/,ov=/^(1[0-1]|0?\d)/,lv=/^(1[0-2]|0?\d)/,cv=/^[0-5]?\d/,uv=/^[0-5]?\d/,dv=/^\d/,hv=/^\d{1,2}/,mv=/^\d{1,3}/,gv=/^\d{1,4}/,pv=/^-?\d+/,fv=/^-?\d/,xv=/^-?\d{1,2}/,bv=/^-?\d{1,3}/,yv=/^-?\d{1,4}/,vv=/^([+-])(\d{2})(\d{2})?|Z/,wv=/^([+-])(\d{2})(\d{2})|Z/,kv=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,jv=/^([+-])(\d{2}):(\d{2})|Z/,Nv=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Cv(e,t){return e?{value:t(e.value),rest:e.rest}:e}function Sv(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function Mv(e,t){const n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};const r="+"===n[1]?1:-1,s=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,a=n[5]?parseInt(n[5],10):0;return{value:r*(s*qb+i*zb+1e3*a),rest:t.slice(n[0].length)}}function _v(e){return Sv(pv,e)}function Pv(e,t){switch(e){case 1:return Sv(dv,t);case 2:return Sv(hv,t);case 3:return Sv(mv,t);case 4:return Sv(gv,t);default:return Sv(new RegExp("^\\d{1,"+e+"}"),t)}}function Tv(e,t){switch(e){case 1:return Sv(fv,t);case 2:return Sv(xv,t);case 3:return Sv(bv,t);case 4:return Sv(yv,t);default:return Sv(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Ev(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Rv(e,t){const n=t>0,r=n?t:1-t;let s;if(r<=50)s=e||100;else{const t=r+50;s=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return n?s:1-s}function Av(e){return e%400==0||e%4==0&&e%100!=0}const Lv=[31,28,31,30,31,30,31,31,30,31,30,31],Fv=[31,29,31,30,31,30,31,31,30,31,30,31];function Ov(e,t,n){var r,s,i,a,o,l,c,u;const d=Yb(),h=null!=(u=null!=(c=null!=(a=null!=(i=null==n?void 0:n.weekStartsOn)?i:null==(s=null==(r=null==n?void 0:n.locale)?void 0:r.options)?void 0:s.weekStartsOn)?a:d.weekStartsOn)?c:null==(l=null==(o=d.locale)?void 0:o.options)?void 0:l.weekStartsOn)?u:0,m=Hb(e,null==n?void 0:n.in),g=m.getDay(),p=7-h;return Wb(m,t<0||t>6?t-(g+p)%7:((t%7+7)%7+p)%7-(g+p)%7,n)}function Iv(e,t,n){const r=Hb(e,null==n?void 0:n.in),s=function(e,t){const n=Hb(e,null==t?void 0:t.in).getDay();return 0===n?7:n}(r,n);return Wb(r,t-s,n)}const Dv={G:new class extends ev{constructor(){super(...arguments),h(this,"priority",140),h(this,"incompatibleTokens",["R","u","t","T"])}parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}},y:new class extends ev{constructor(){super(...arguments),h(this,"priority",130),h(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return Cv(Pv(4,e),r);case"yo":return Cv(n.ordinalNumber(e,{unit:"year"}),r);default:return Cv(Pv(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const r=e.getFullYear();if(n.isTwoDigitYear){const t=Rv(n.year,r);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const s="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}},Y:new class extends ev{constructor(){super(...arguments),h(this,"priority",130),h(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return Cv(Pv(4,e),r);case"Yo":return Cv(n.ordinalNumber(e,{unit:"year"}),r);default:return Cv(Pv(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,r){const s=ky(e,r);if(n.isTwoDigitYear){const t=Rv(n.year,s);return e.setFullYear(t,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),Qb(e,r)}const i="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(i,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),Qb(e,r)}},R:new class extends ev{constructor(){super(...arguments),h(this,"priority",130),h(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,t){return Tv("R"===t?4:t.length,e)}set(e,t,n){const r=Bb(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Xb(r)}},u:new class extends ev{constructor(){super(...arguments),h(this,"priority",130),h(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,t){return Tv("u"===t?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}},Q:new class extends ev{constructor(){super(...arguments),h(this,"priority",120),h(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"Q":case"QQ":return Pv(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}},q:new class extends ev{constructor(){super(...arguments),h(this,"priority",120),h(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"q":case"qq":return Pv(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}},M:new class extends ev{constructor(){super(...arguments),h(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),h(this,"priority",110)}parse(e,t,n){const r=e=>e-1;switch(t){case"M":return Cv(Sv(tv,e),r);case"MM":return Cv(Pv(2,e),r);case"Mo":return Cv(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}},L:new class extends ev{constructor(){super(...arguments),h(this,"priority",110),h(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,t,n){const r=e=>e-1;switch(t){case"L":return Cv(Sv(tv,e),r);case"LL":return Cv(Pv(2,e),r);case"Lo":return Cv(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}},w:new class extends ev{constructor(){super(...arguments),h(this,"priority",100),h(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,t,n){switch(t){case"w":return Sv(sv,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return Pv(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,r){return Qb(function(e,t,n){const r=Hb(e,null==n?void 0:n.in),s=jy(r,n)-t;return r.setDate(r.getDate()-7*s),Hb(r,null==n?void 0:n.in)}(e,n,r),r)}},I:new class extends ev{constructor(){super(...arguments),h(this,"priority",100),h(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,t,n){switch(t){case"I":return Sv(sv,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return Pv(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return Xb(function(e,t,n){const r=Hb(e,null==n?void 0:n.in),s=wy(r,n)-t;return r.setDate(r.getDate()-7*s),r}(e,n))}},d:new class extends ev{constructor(){super(...arguments),h(this,"priority",90),h(this,"subPriority",1),h(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"d":return Sv(nv,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return Pv(t.length,e)}}validate(e,t){const n=Av(e.getFullYear()),r=e.getMonth();return n?t>=1&&t<=Fv[r]:t>=1&&t<=Lv[r]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}},D:new class extends ev{constructor(){super(...arguments),h(this,"priority",90),h(this,"subpriority",1),h(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,t,n){switch(t){case"D":case"DD":return Sv(rv,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return Pv(t.length,e)}}validate(e,t){return Av(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}},E:new class extends ev{constructor(){super(...arguments),h(this,"priority",90),h(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=Ov(e,n,r)).setHours(0,0,0,0),e}},e:new class extends ev{constructor(){super(...arguments),h(this,"priority",90),h(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,t,n,r){const s=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Cv(Pv(t.length,e),s);case"eo":return Cv(n.ordinalNumber(e,{unit:"day"}),s);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=Ov(e,n,r)).setHours(0,0,0,0),e}},c:new class extends ev{constructor(){super(...arguments),h(this,"priority",90),h(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,t,n,r){const s=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Cv(Pv(t.length,e),s);case"co":return Cv(n.ordinalNumber(e,{unit:"day"}),s);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=Ov(e,n,r)).setHours(0,0,0,0),e}},i:new class extends ev{constructor(){super(...arguments),h(this,"priority",90),h(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,t,n){const r=e=>0===e?7:e;switch(t){case"i":case"ii":return Pv(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return Cv(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return Cv(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Cv(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return Cv(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return(e=Iv(e,n)).setHours(0,0,0,0),e}},a:new class extends ev{constructor(){super(...arguments),h(this,"priority",80),h(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(Ev(n),0,0,0),e}},b:new class extends ev{constructor(){super(...arguments),h(this,"priority",80),h(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(Ev(n),0,0,0),e}},B:new class extends ev{constructor(){super(...arguments),h(this,"priority",80),h(this,"incompatibleTokens",["a","b","t","T"])}parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(Ev(n),0,0,0),e}},h:new class extends ev{constructor(){super(...arguments),h(this,"priority",70),h(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,t,n){switch(t){case"h":return Sv(lv,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return Pv(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const r=e.getHours()>=12;return r&&n<12?e.setHours(n+12,0,0,0):r||12!==n?e.setHours(n,0,0,0):e.setHours(0,0,0,0),e}},H:new class extends ev{constructor(){super(...arguments),h(this,"priority",70),h(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,t,n){switch(t){case"H":return Sv(iv,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return Pv(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}},K:new class extends ev{constructor(){super(...arguments),h(this,"priority",70),h(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,t,n){switch(t){case"K":return Sv(ov,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return Pv(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}},k:new class extends ev{constructor(){super(...arguments),h(this,"priority",70),h(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,t,n){switch(t){case"k":return Sv(av,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return Pv(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const r=n<=24?n%24:n;return e.setHours(r,0,0,0),e}},m:new class extends ev{constructor(){super(...arguments),h(this,"priority",60),h(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"m":return Sv(cv,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return Pv(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}},s:new class extends ev{constructor(){super(...arguments),h(this,"priority",50),h(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"s":return Sv(uv,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return Pv(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}},S:new class extends ev{constructor(){super(...arguments),h(this,"priority",30),h(this,"incompatibleTokens",["t","T"])}parse(e,t){return Cv(Pv(t.length,e),e=>Math.trunc(e*Math.pow(10,3-t.length)))}set(e,t,n){return e.setMilliseconds(n),e}},X:new class extends ev{constructor(){super(...arguments),h(this,"priority",10),h(this,"incompatibleTokens",["t","T","x"])}parse(e,t){switch(t){case"X":return Mv(vv,e);case"XX":return Mv(wv,e);case"XXXX":return Mv(kv,e);case"XXXXX":return Mv(Nv,e);default:return Mv(jv,e)}}set(e,t,n){return t.timestampIsSet?e:Bb(e,e.getTime()-Jb(e)-n)}},x:new class extends ev{constructor(){super(...arguments),h(this,"priority",10),h(this,"incompatibleTokens",["t","T","X"])}parse(e,t){switch(t){case"x":return Mv(vv,e);case"xx":return Mv(wv,e);case"xxxx":return Mv(kv,e);case"xxxxx":return Mv(Nv,e);default:return Mv(jv,e)}}set(e,t,n){return t.timestampIsSet?e:Bb(e,e.getTime()-Jb(e)-n)}},t:new class extends ev{constructor(){super(...arguments),h(this,"priority",40),h(this,"incompatibleTokens","*")}parse(e){return _v(e)}set(e,t,n){return[Bb(e,1e3*n),{timestampIsSet:!0}]}},T:new class extends ev{constructor(){super(...arguments),h(this,"priority",20),h(this,"incompatibleTokens","*")}parse(e){return _v(e)}set(e,t,n){return[Bb(e,n),{timestampIsSet:!0}]}}},zv=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,qv=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$v=/^'([^]*?)'?$/,Bv=/''/g,Hv=/\S/,Wv=/[a-zA-Z]/;function Uv(e,t,n,r){var s,i,a,o,l,c,u,d,h,m,g,p,f,x,b,y,v,w;const k=()=>Bb((null==r?void 0:r.in)||n,NaN),j=Object.assign({},Yb()),N=null!=(i=null!=(s=null==r?void 0:r.locale)?s:j.locale)?i:vy,C=null!=(m=null!=(h=null!=(c=null!=(l=null==r?void 0:r.firstWeekContainsDate)?l:null==(o=null==(a=null==r?void 0:r.locale)?void 0:a.options)?void 0:o.firstWeekContainsDate)?c:j.firstWeekContainsDate)?h:null==(d=null==(u=j.locale)?void 0:u.options)?void 0:d.firstWeekContainsDate)?m:1,S=null!=(w=null!=(v=null!=(x=null!=(f=null==r?void 0:r.weekStartsOn)?f:null==(p=null==(g=null==r?void 0:r.locale)?void 0:g.options)?void 0:p.weekStartsOn)?x:j.weekStartsOn)?v:null==(y=null==(b=j.locale)?void 0:b.options)?void 0:y.weekStartsOn)?w:0;if(!t)return e?k():Hb(n,null==r?void 0:r.in);const M={firstWeekContainsDate:C,weekStartsOn:S,locale:N},_=[new Zy(null==r?void 0:r.in,n)],P=t.match(qv).map(e=>{const t=e[0];return t in Dy?(0,Dy[t])(e,N.formatLong):e}).join("").match(zv),T=[];for(let L of P){!(null==r?void 0:r.useAdditionalWeekYearTokens)&&Hy(L)&&Wy(L,t,e),!(null==r?void 0:r.useAdditionalDayOfYearTokens)&&By(L)&&Wy(L,t,e);const n=L[0],s=Dv[n];if(s){const{incompatibleTokens:t}=s;if(Array.isArray(t)){const e=T.find(e=>t.includes(e.token)||e.token===n);if(e)throw new RangeError(`The format string mustn't contain \`${e.fullToken}\` and \`${L}\` at the same time`)}else if("*"===s.incompatibleTokens&&T.length>0)throw new RangeError(`The format string mustn't contain \`${L}\` and any other token at the same time`);T.push({token:n,fullToken:L});const r=s.run(e,L,N.match,M);if(!r)return k();_.push(r.setter),e=r.rest}else{if(n.match(Wv))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===L?L="'":"'"===n&&(L=Vv(L)),0!==e.indexOf(L))return k();e=e.slice(L.length)}}if(e.length>0&&Hv.test(e))return k();const E=_.map(e=>e.priority).sort((e,t)=>t-e).filter((e,t,n)=>n.indexOf(e)===t).map(e=>_.filter(t=>t.priority===e).sort((e,t)=>t.subPriority-e.subPriority)).map(e=>e[0]);let R=Hb(n,null==r?void 0:r.in);if(isNaN(+R))return k();const A={};for(const L of E){if(!L.validate(R,M))return k();const e=L.set(R,A,M);Array.isArray(e)?(R=e[0],Object.assign(A,e[1])):R=e}return R}function Vv(e){return e.match($v)[1].replace(Bv,"'")}function Gv(e,t){var n;const r=()=>Bb(null==t?void 0:t.in,NaN),s=null!=(n=null==t?void 0:t.additionalDigits)?n:2,i=function(e){const t={},n=e.split(Yv.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Yv.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Yv.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const e=Yv.timezone.exec(r);e?(t.time=r.replace(e[1],""),t.timezone=e[1]):t.time=r}return t}(e);let a;if(i.date){const e=function(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:null===i?s:100*i,restDateString:e.slice((r[1]||r[2]).length)}}(i.date,s);a=function(e,t){if(null===t)return new Date(NaN);const n=e.match(Qv);if(!n)return new Date(NaN);const r=!!n[4],s=Jv(n[1]),i=Jv(n[2])-1,a=Jv(n[3]),o=Jv(n[4]),l=Jv(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,o,l)?function(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const s=r.getUTCDay()||7,i=7*(t-1)+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}(t,o,l):new Date(NaN);{const e=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(ew[t]||(tw(e)?29:28))}(t,i,a)&&function(e,t){return t>=1&&t<=(tw(e)?366:365)}(t,s)?(e.setUTCFullYear(t,i,Math.max(s,a)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!a||isNaN(+a))return r();const o=+a;let l,c=0;if(i.time&&(c=function(e){const t=e.match(Xv);if(!t)return NaN;const n=Zv(t[1]),r=Zv(t[2]),s=Zv(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,s)?n*qb+r*zb+1e3*s:NaN}(i.time),isNaN(c)))return r();if(!i.timezone){const e=new Date(o+c),n=Hb(0,null==t?void 0:t.in);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}return l=function(e){if("Z"===e)return 0;const t=e.match(Kv);if(!t)return 0;const n="+"===t[1]?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}
/*!
     * chartjs-adapter-date-fns v3.0.0
     * https://www.chartjs.org
     * (c) 2022 chartjs-adapter-date-fns Contributors
     * Released under the MIT license
     */(0,s)?n*(r*qb+s*zb):NaN}(i.timezone),isNaN(l)?r():Hb(o+c+l,null==t?void 0:t.in)}const Yv={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Qv=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Xv=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Kv=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Jv(e){return e?parseInt(e):1}function Zv(e){return e&&parseFloat(e.replace(",","."))||0}const ew=[31,null,31,30,31,30,31,31,30,31,30,31];function tw(e){return e%400==0||e%4==0&&e%100!=0}const nw={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};pf._date.override({_id:"date-fns",formats:function(){return nw},parse:function(e,t){if(null==e)return null;const n=typeof e;return"number"===n||e instanceof Date?e=Hb(e):"string"===n&&(e="string"==typeof t?Uv(e,t,new Date,this.options):Gv(e,this.options)),ry(e)?e.getTime():null},format:function(e,t){return function(e,t,n){var r,s,i,a,o,l,c,u,d,h,m,g,p,f,x,b,y,v;const w=Yb(),k=null!=(s=null!=(r=null==n?void 0:n.locale)?r:w.locale)?s:vy,j=null!=(h=null!=(d=null!=(l=null!=(o=null==n?void 0:n.firstWeekContainsDate)?o:null==(a=null==(i=null==n?void 0:n.locale)?void 0:i.options)?void 0:a.firstWeekContainsDate)?l:w.firstWeekContainsDate)?d:null==(u=null==(c=w.locale)?void 0:c.options)?void 0:u.firstWeekContainsDate)?h:1,N=null!=(v=null!=(y=null!=(f=null!=(p=null==n?void 0:n.weekStartsOn)?p:null==(g=null==(m=null==n?void 0:n.locale)?void 0:m.options)?void 0:g.weekStartsOn)?f:w.weekStartsOn)?y:null==(b=null==(x=w.locale)?void 0:x.options)?void 0:b.weekStartsOn)?v:0,C=Hb(e,null==n?void 0:n.in);if(!ry(C))throw new RangeError("Invalid time value");let S=t.match(Vy).map(e=>{const t=e[0];return"p"===t||"P"===t?(0,Dy[t])(e,k.formatLong):e}).join("").match(Uy).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Xy(e)};if(Ry[t])return{isToken:!0,value:e};if(t.match(Qy))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});k.localize.preprocessor&&(S=k.localize.preprocessor(C,S));const M={firstWeekContainsDate:j,weekStartsOn:N,locale:k};return S.map(r=>{if(!r.isToken)return r.value;const s=r.value;return(!(null==n?void 0:n.useAdditionalWeekYearTokens)&&Hy(s)||!(null==n?void 0:n.useAdditionalDayOfYearTokens)&&By(s))&&Wy(s,t,String(e)),(0,Ry[s[0]])(C,s,k.localize,M)}).join("")}(e,t,this.options)},add:function(e,t,n){switch(n){case"millisecond":return Vb(e,t);case"second":return function(e,t){return Vb(e,1e3*t)}(e,t);case"minute":return function(e,t,n){const r=Hb(e,null==n?void 0:n.in);return r.setTime(r.getTime()+t*zb),r}(e,t);case"hour":return function(e,t){return Vb(e,t*qb)}(e,t);case"day":return Wb(e,t);case"week":return function(e,t,n){return Wb(e,7*t,n)}(e,t);case"month":return Ub(e,t);case"quarter":return function(e,t,n){return Ub(e,3*t,n)}(e,t);case"year":return function(e,t,n){return Ub(e,12*t,n)}(e,t);default:return e}},diff:function(e,t,n){switch(n){case"millisecond":return oy(e,t);case"second":return function(e,t,n){const r=oy(e,t)/1e3;return ay(null==n?void 0:n.roundingMethod)(r)}(e,t);case"minute":return function(e,t,n){const r=oy(e,t)/zb;return ay(null==n?void 0:n.roundingMethod)(r)}(e,t);case"hour":return function(e,t,n){const[r,s]=Zb(null==n||n.in,e,t),i=(+r-+s)/qb;return ay(null==n?void 0:n.roundingMethod)(i)}(e,t);case"day":return sy(e,t);case"week":return function(e,t,n){const r=sy(e,t,n)/7;return ay(null==n?void 0:n.roundingMethod)(r)}(e,t);case"month":return uy(e,t);case"quarter":return function(e,t,n){const r=uy(e,t,n)/3;return ay(null==n?void 0:n.roundingMethod)(r)}(e,t);case"year":return dy(e,t);default:return 0}},startOf:function(e,t,n){switch(t){case"second":return function(e,t){const n=Hb(e,null==t?void 0:t.in);return n.setMilliseconds(0),n}(e);case"minute":return function(e,t){const n=Hb(e,null==t?void 0:t.in);return n.setSeconds(0,0),n}(e);case"hour":return function(e,t){const n=Hb(e,null==t?void 0:t.in);return n.setMinutes(0,0,0),n}(e);case"day":return ey(e);case"week":return Qb(e);case"isoWeek":return Qb(e,{weekStartsOn:+n});case"month":return function(e,t){const n=Hb(e,null==t?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}(e);case"quarter":return function(e,t){const n=Hb(e,null==t?void 0:t.in),r=n.getMonth(),s=r-r%3;return n.setMonth(s,1),n.setHours(0,0,0,0),n}(e);case"year":return hy(e);default:return e}},endOf:function(e,t){switch(t){case"second":return function(e,t){const n=Hb(e,null==t?void 0:t.in);return n.setMilliseconds(999),n}(e);case"minute":return function(e,t){const n=Hb(e,null==t?void 0:t.in);return n.setSeconds(59,999),n}(e);case"hour":return function(e,t){const n=Hb(e,null==t?void 0:t.in);return n.setMinutes(59,59,999),n}(e);case"day":return ly(e);case"week":return function(e,t){var n,r,s,i;const a=Yb(),o=null!=(i=null!=(s=a.weekStartsOn)?s:null==(r=null==(n=a.locale)?void 0:n.options)?void 0:r.weekStartsOn)?i:0,l=Hb(e,null==t?void 0:t.in),c=l.getDay(),u=6+(c<o?-7:0)-(c-o);return l.setDate(l.getDate()+u),l.setHours(23,59,59,999),l}(e);case"month":return cy(e);case"quarter":return function(e,t){const n=Hb(e,null==t?void 0:t.in),r=n.getMonth(),s=r-r%3+3;return n.setMonth(s,0),n.setHours(23,59,59,999),n}(e);case"year":return function(e,t){const n=Hb(e,null==t?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}(e);default:return e}}}),$x.register(jb,Mb,Zx,Kx,ib,vb,rb,Fb);const rw=G.forwardRef(({compact:t=!1},n)=>{const{gameState:r,executeTrade:s}=lh(),{playTradeComplete:i,playTradeFailed:a}=(()=>{const{playSound:t}=Id();return{playTradeOffer:()=>m(e,null,function*(){return yield t("trade_offer")}),playTradeComplete:()=>m(e,null,function*(){return yield t("trade_complete")}),playTradeFailed:()=>m(e,null,function*(){return yield t("trade_failed")}),playMarketFluctuation:()=>m(e,null,function*(){return yield t("market_fluctuation")})}})(),{playMenuOpen:o,playMenuClose:l}=zd(),[c,d]=G.useState(null),[h,g]=G.useState(1),[p,f]=G.useState({}),[x,b]=G.useState(!1),[y,v]=G.useState(!1),[w,k]=G.useState(30),j=G.useRef(Date.now()),N=3e4;G.useImperativeHandle(n,()=>({openModal:()=>{v(!0),o()}}));const C=G.useMemo(()=>r.tradePairs?Object.entries(r.tradePairs).filter(([e,t])=>t.unlocked).sort((e,t)=>{const n=r.resources[e[1].from],s=r.resources[t[1].from];return n.name.localeCompare(s.name)}):[],[r.tradePairs]),S=G.useRef(r);S.current=r,G.useEffect(()=>{if(!S.current.tradePairs)return;(()=>{const e={};Object.entries(S.current.tradePairs).forEach(([t,n])=>{if(n.unlocked){const r=1+(2*Math.random()-1)*n.volatility;e[t]=n.baseRate*r}}),f(e),j.current=Date.now()})();const e=setInterval(()=>{const e=Date.now(),t={};Object.entries(S.current.tradePairs).forEach(([e,n])=>{if(n.unlocked){const r=1+(2*Math.random()-1)*n.volatility;t[e]=n.baseRate*r}}),f(t),j.current=e},N);return()=>{clearInterval(e)}},[]),G.useEffect(()=>{if(!r.tradePairs)return;const e={};let t=!1;Object.entries(r.tradePairs).forEach(([n,r])=>{if(r.unlocked&&void 0===p[n]){const s=1+(2*Math.random()-1)*r.volatility;e[n]=r.baseRate*s,t=!0}}),t&&f(t=>u(u({},t),e))},[r.tradePairs,p]),G.useEffect(()=>{const e=setInterval(()=>{const e=Date.now()-j.current,t=Math.max(0,N-e),n=Math.ceil(t/1e3);k(n)},100);return()=>clearInterval(e)},[N]),G.useEffect(()=>{g(1)},[c]);const M=c&&r.tradePairs?r.tradePairs[c]:null,_=M?Math.floor(r.resources[M.from].value/M.batchSize):1;G.useEffect(()=>{M&&h>_&&g(Math.max(1,_))},[M,_,r.resources]);const P=()=>{if(!c||!M)return;const e=Math.min(h,_);if(e<=0)return;const t=p[c]||(r.tradePairs&&r.tradePairs[c]?r.tradePairs[c].baseRate:0);s(c,e,t)?(i(),g(1)):a()},T=()=>{g(e=>Math.min(e+1,_))},E=()=>{g(e=>Math.max(1,e-1))},R=e=>{const t=parseInt(e.target.value)||1;g(Math.min(Math.max(1,t),_))},A=e=>Math.round(100*e)/100;return t?ne.jsxs("div",{className:"space-y-2",children:[ne.jsxs("button",{onClick:()=>{C.length>0&&(v(!0),o())},disabled:0===C.length,className:"w-full flex items-center justify-between p-2 rounded-lg border transition-colors "+(C.length>0?"bg-orange-600/20 hover:bg-orange-600/30 border-orange-500/30 cursor-pointer":"bg-gray-600/20 border-gray-500/30 cursor-not-allowed opacity-50"),children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("span",{className:"text-orange-400",children:""}),ne.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Trading"})]}),ne.jsx("div",{className:"flex items-center space-x-2 text-xs",children:C.length>0?ne.jsxs(ne.Fragment,{children:[ne.jsxs("span",{className:"text-gray-400",children:["Routes: ",C.length]}),c&&ne.jsx("span",{className:"bg-green-600/50 text-green-200 px-2 py-1 rounded",children:"Active"})]}):ne.jsx("span",{className:"bg-red-600/50 text-red-200 px-2 py-1 rounded",children:"Locked"})})]}),y&&C.length>0&&ld.createPortal(ne.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] backdrop-blur-sm p-4",onClick:e=>{e.target===e.currentTarget&&(v(!1),l())},onKeyDown:e=>{"Escape"===e.key&&(v(!1),l())},tabIndex:-1,ref:e=>{e&&setTimeout(()=>{e.contains(document.activeElement)||e.focus()},100)},children:ne.jsxs("div",{className:"bg-gray-800/95 rounded-lg p-6 w-full max-w-5xl max-h-[90vh] overflow-hidden border border-orange-500/30 relative",children:[ne.jsxs("div",{className:"flex justify-between items-center mb-4",children:[ne.jsx("h2",{className:"text-2xl font-bold text-orange-400",children:"Trading Market"}),ne.jsxs("div",{className:"flex items-center space-x-4",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("span",{className:"text-xs text-gray-400",children:"Next update in:"}),ne.jsxs("span",{className:"text-sm font-mono font-bold "+(w<=5?"text-orange-400":"text-green-400"),children:[w,"s"]}),ne.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),ne.jsx("button",{onClick:()=>{v(!1),l()},className:"text-gray-400 hover:text-white text-2xl transition-colors",children:""})]})]}),ne.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-8rem)]",children:0===C.length?ne.jsxs("div",{className:"text-center py-8",children:[ne.jsx("div",{className:"text-4xl mb-4",children:""}),ne.jsx("h3",{className:"text-lg font-bold mb-2 text-white",children:"Trading Locked"}),ne.jsx("p",{className:"text-sm text-gray-300 mb-4",children:'Complete "Basic Trading" research to unlock trading features.'}),ne.jsx("p",{className:"text-xs text-gray-400",children:"Trading allows you to exchange resources at fluctuating market rates."})]}):ne.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[ne.jsxs("div",{className:"col-span-1 space-y-4",children:[ne.jsx("h3",{className:"text-lg font-semibold text-white",children:"Available Trade Routes"}),ne.jsx("div",{className:"space-y-2 max-h-[calc(90vh-12rem)] overflow-y-auto",children:C.map(([e,t])=>{const n=r.resources[t.from],s=r.resources[t.to],i=p[e]||t.baseRate,a=c===e;return ne.jsxs("button",{onClick:()=>d(e),className:"w-full text-left p-4 rounded-lg transition-all duration-200 "+(a?"bg-blue-600/30 border border-blue-500/50":"bg-gray-700/30 border border-gray-600/30 hover:bg-gray-700/50"),children:[ne.jsx("div",{className:"flex items-center justify-between mb-2",children:ne.jsxs("div",{className:"flex items-center space-x-3",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("img",{src:n.icon,alt:n.name,className:"w-6 h-6"}),ne.jsxs("span",{className:"font-medium text-gray-200",children:["1 ",n.name]})]}),ne.jsx("span",{className:"text-gray-400",children:""}),ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("img",{src:s.icon,alt:s.name,className:"w-6 h-6"}),ne.jsxs("span",{className:"font-medium text-gray-200",children:[A(i)," ",s.name]})]})]})}),ne.jsxs("div",{className:"flex items-center justify-between text-sm",children:[ne.jsxs("span",{className:"text-gray-400",children:["Base Rate: ",A(t.baseRate)]}),ne.jsxs("div",{className:"text-sm font-semibold "+(i>t.baseRate?"text-green-400":i<t.baseRate?"text-red-400":"text-gray-400"),children:[A(i),i>t.baseRate&&" ",i<t.baseRate&&" "]})]})]},e)})})]}),ne.jsx("div",{className:"col-span-2 space-y-4",children:M?ne.jsxs(ne.Fragment,{children:[ne.jsx("h3",{className:"text-lg font-semibold text-white",children:"Trade Details"}),ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded-lg p-4",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-3",children:[ne.jsx("span",{className:"text-sm text-gray-400",children:"Exchange Rate:"}),ne.jsx("span",{className:"text-2xl font-bold text-white",children:A(p[c]||M.baseRate)})]}),ne.jsxs("div",{className:"flex items-center justify-center space-x-6 text-lg",children:[ne.jsxs("div",{className:"flex items-center space-x-3",children:[ne.jsx("img",{src:r.resources[M.from].icon,alt:r.resources[M.from].name,className:"w-8 h-8"}),ne.jsxs("span",{className:"text-white",children:["1 ",r.resources[M.from].name]})]}),ne.jsx("span",{className:"text-gray-400 text-2xl",children:""}),ne.jsxs("div",{className:"flex items-center space-x-3",children:[ne.jsx("img",{src:r.resources[M.to].icon,alt:r.resources[M.to].name,className:"w-8 h-8"}),ne.jsxs("span",{className:"text-white",children:[A(p[c]||M.baseRate)," ",r.resources[M.to].name]})]})]})]}),ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded-lg p-4",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-3",children:[ne.jsx("label",{className:"text-sm text-gray-400",children:"Trade Quantity:"}),ne.jsxs("span",{className:"text-xs text-gray-500",children:["Max: ",_]})]}),ne.jsxs("div",{className:"flex items-center space-x-4",children:[ne.jsx("button",{onClick:E,className:"bg-gray-600 hover:bg-gray-500 px-4 py-3 rounded-lg text-white transition-colors text-lg",children:"-"}),ne.jsx("input",{type:"number",min:"1",max:_,value:h,onChange:R,className:"bg-gray-600 text-center w-32 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg"}),ne.jsx("button",{onClick:T,className:"bg-gray-600 hover:bg-gray-500 px-4 py-3 rounded-lg text-white transition-colors text-lg",children:"+"})]})]}),ne.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ne.jsxs("div",{className:"bg-gray-700/30 p-4 rounded-lg",children:[ne.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"You Spend:"}),ne.jsxs("div",{className:"text-xl font-bold text-red-400",children:[M.batchSize*h," ",r.resources[M.from].name]}),ne.jsxs("div",{className:"text-sm "+(r.resources[M.from].value>=M.batchSize*h?"text-green-400":"text-red-400"),children:["Available: ",Math.floor(r.resources[M.from].value)]})]}),ne.jsxs("div",{className:"bg-gray-700/30 p-4 rounded-lg",children:[ne.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"You Receive:"}),ne.jsxs("div",{className:"text-xl font-bold text-green-400",children:[A(M.batchSize*(p[c]||M.baseRate)*h)," ",r.resources[M.to].name]}),ne.jsxs("div",{className:"text-sm text-gray-400",children:["Storage: ",Math.floor(r.resources[M.to].value),"/",r.resources[M.to].storageLimit]})]})]}),ne.jsx("button",{onClick:P,disabled:h<=0||r.resources[M.from].value<M.batchSize*h||r.resources[M.to].value+M.batchSize*(p[c]||M.baseRate)*h>r.resources[M.to].storageLimit,className:"w-full py-4 rounded-lg font-semibold text-lg transition-all duration-200 "+(h>0&&r.resources[M.from].value>=M.batchSize*h&&r.resources[M.to].value+M.batchSize*(p[c]||M.baseRate)*h<=r.resources[M.to].storageLimit?"bg-green-600 hover:bg-green-700 text-white shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:" Execute Trade"})]}):ne.jsx("div",{className:"flex items-center justify-center h-full",children:ne.jsxs("div",{className:"text-center",children:[ne.jsx("div",{className:"text-4xl mb-4",children:""}),ne.jsx("p",{className:"text-lg text-gray-300",children:"Select a trade route to begin trading"})]})})})]})})]})}),document.body)]}):r.tradePairs?0===C.length?ne.jsxs("div",{className:"text-center py-8",children:[ne.jsx("div",{className:"text-gray-400 text-lg mb-2",children:""}),ne.jsx("p",{className:"text-gray-400",children:"No trade routes available yet."}),ne.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Research technologies to unlock trading options."})]}):ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{className:"space-y-4",children:[ne.jsx("button",{onClick:()=>{b(!0),o()},className:"w-full py-4 px-6 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl",children:" Open Trade Market"}),ne.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[ne.jsxs("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-lg p-3 text-center",children:[ne.jsx("div",{className:"text-2xl mb-1",children:""}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Trade Routes"}),ne.jsx("div",{className:"text-sm font-bold text-blue-400",children:C.length})]}),ne.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-lg p-3 text-center",children:[ne.jsx("div",{className:"text-2xl mb-1",children:""}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Market Active"}),ne.jsx("div",{className:"text-sm font-bold text-green-400",children:"Live"})]})]}),ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded-lg p-3",children:[ne.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Recent Market Activity"}),ne.jsx("div",{className:"space-y-2 max-h-20 overflow-y-auto",children:C.slice(0,3).map(([e,t])=>{const n=r.resources[t.from],s=r.resources[t.to],i=p[e]||t.baseRate;return ne.jsxs("div",{className:"flex items-center justify-between text-xs",children:[ne.jsxs("span",{className:"flex items-center space-x-1",children:[ne.jsx("img",{src:n.icon,alt:n.name,className:"w-4 h-4"}),ne.jsxs("span",{className:"text-gray-300",children:["1 ",n.name]}),ne.jsx("span",{className:"text-gray-400",children:""}),ne.jsx("img",{src:s.icon,alt:s.name,className:"w-4 h-4"}),ne.jsxs("span",{className:"text-gray-300",children:[A(i)," ",s.name]})]}),ne.jsx("span",{className:"text-xs "+(i>t.baseRate?"text-green-400":i<t.baseRate?"text-red-400":"text-gray-400"),children:i>t.baseRate?"":i<t.baseRate?"":"="})]},e)})})]})]}),x&&ne.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",children:ne.jsxs("div",{className:"bg-gray-800/95 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden border border-gray-600/50",children:[ne.jsxs("div",{className:"flex justify-between items-center mb-4",children:[ne.jsx("h2",{className:"text-2xl font-bold text-white",children:"Trade Market"}),ne.jsxs("div",{className:"flex items-center space-x-4",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("span",{className:"text-xs text-gray-400",children:"Next update in:"}),ne.jsxs("span",{className:"text-sm font-mono font-bold "+(w<=5?"text-orange-400":"text-green-400"),children:[w,"s"]}),ne.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),ne.jsx("button",{onClick:()=>{b(!1),l()},className:"text-gray-400 hover:text-white text-2xl transition-colors",children:""})]})]}),ne.jsxs("div",{className:"grid grid-cols-3 gap-6 h-[calc(90vh-8rem)]",children:[ne.jsxs("div",{className:"col-span-1 space-y-4",children:[ne.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:"Available Trade Routes"}),ne.jsx("div",{className:"space-y-2 max-h-[calc(90vh-12rem)] overflow-y-auto",children:C.map(([e,t])=>{const n=r.resources[t.from],s=r.resources[t.to],i=p[e]||t.baseRate,a=c===e;return ne.jsxs("button",{onClick:()=>d(e),className:"w-full text-left p-4 rounded-lg transition-all duration-200 "+(a?"bg-blue-600/30 border border-blue-500/50":"bg-gray-700/30 border border-gray-600/30 hover:bg-gray-700/50"),children:[ne.jsx("div",{className:"flex items-center justify-between mb-2",children:ne.jsxs("div",{className:"flex items-center space-x-3",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("img",{src:n.icon,alt:n.name,className:"w-6 h-6"}),ne.jsxs("span",{className:"font-medium",children:["1 ",n.name]})]}),ne.jsx("span",{className:"text-gray-400",children:""}),ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("img",{src:s.icon,alt:s.name,className:"w-6 h-6"}),ne.jsxs("span",{className:"font-medium",children:[A(i)," ",s.name]})]})]})}),ne.jsxs("div",{className:"flex items-center justify-between text-sm",children:[ne.jsxs("span",{className:"text-gray-400",children:["Base Rate: ",A(t.baseRate)]}),ne.jsxs("div",{className:"text-sm font-semibold "+(i>t.baseRate?"text-green-400":i<t.baseRate?"text-red-400":"text-gray-400"),children:[A(i),i>t.baseRate&&" ",i<t.baseRate&&" "]})]})]},e)})})]}),ne.jsx("div",{className:"col-span-2 space-y-4",children:M?ne.jsxs(ne.Fragment,{children:[ne.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:"Trade Details"}),ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded-lg p-4",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-3",children:[ne.jsx("span",{className:"text-sm text-gray-400",children:"Exchange Rate:"}),ne.jsx("span",{className:"text-2xl font-bold text-white",children:A(p[c]||M.baseRate)})]}),ne.jsxs("div",{className:"flex items-center justify-center space-x-6 text-lg",children:[ne.jsxs("div",{className:"flex items-center space-x-3",children:[ne.jsx("img",{src:r.resources[M.from].icon,alt:r.resources[M.from].name,className:"w-8 h-8"}),ne.jsxs("span",{children:["1 ",r.resources[M.from].name]})]}),ne.jsx("span",{className:"text-gray-400 text-2xl",children:""}),ne.jsxs("div",{className:"flex items-center space-x-3",children:[ne.jsx("img",{src:r.resources[M.to].icon,alt:r.resources[M.to].name,className:"w-8 h-8"}),ne.jsxs("span",{children:[A(p[c]||M.baseRate)," ",r.resources[M.to].name]})]})]})]}),ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded-lg p-4",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-3",children:[ne.jsx("label",{className:"text-sm text-gray-400",children:"Trade Quantity:"}),ne.jsxs("span",{className:"text-xs text-gray-500",children:["Max: ",_]})]}),ne.jsxs("div",{className:"flex items-center space-x-4",children:[ne.jsx("button",{onClick:E,className:"bg-gray-600 hover:bg-gray-500 px-4 py-3 rounded-lg text-white transition-colors text-lg",children:"-"}),ne.jsx("input",{type:"number",min:"1",max:_,value:h,onChange:R,className:"bg-gray-600 text-center w-32 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg"}),ne.jsx("button",{onClick:T,className:"bg-gray-600 hover:bg-gray-500 px-4 py-3 rounded-lg text-white transition-colors text-lg",children:"+"})]})]}),ne.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ne.jsxs("div",{className:"bg-gray-700/30 p-4 rounded-lg",children:[ne.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"You Spend:"}),ne.jsxs("div",{className:"text-xl font-bold text-red-400",children:[M.batchSize*h," ",r.resources[M.from].name]}),ne.jsxs("div",{className:"text-sm "+(r.resources[M.from].value>=M.batchSize*h?"text-green-400":"text-red-400"),children:["Available: ",r.resources[M.from].value<10?r.resources[M.from].value.toFixed(2):Math.floor(r.resources[M.from].value)]})]}),ne.jsxs("div",{className:"bg-gray-700/30 p-4 rounded-lg",children:[ne.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"You Receive:"}),ne.jsxs("div",{className:"text-xl font-bold text-green-400",children:[A(M.batchSize*(p[c]||M.baseRate)*h)," ",r.resources[M.to].name]}),ne.jsxs("div",{className:"text-sm text-gray-400",children:["Storage: ",r.resources[M.to].value<10?r.resources[M.to].value.toFixed(2):Math.floor(r.resources[M.to].value),"/",r.resources[M.to].storageLimit]})]})]}),ne.jsx("button",{onClick:P,disabled:h<=0||r.resources[M.from].value<M.batchSize*h||r.resources[M.to].value+M.batchSize*(p[c]||M.baseRate)*h>r.resources[M.to].storageLimit,className:"w-full py-4 rounded-lg font-semibold text-lg transition-all duration-200 "+(h>0&&r.resources[M.from].value>=M.batchSize*h&&r.resources[M.to].value+M.batchSize*(p[c]||M.baseRate)*h<=r.resources[M.to].storageLimit?"bg-green-600 hover:bg-green-700 text-white shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:" Execute Trade"})]}):ne.jsx("div",{className:"flex items-center justify-center h-full",children:ne.jsxs("div",{className:"text-center text-gray-400",children:[ne.jsx("div",{className:"text-4xl mb-4",children:""}),ne.jsx("p",{className:"text-lg",children:"Select a trade route to begin trading"})]})})})]})]})})]}):ne.jsxs("div",{className:"text-center py-8",children:[ne.jsx("div",{className:"text-gray-400 text-lg mb-2",children:""}),ne.jsx("p",{className:"text-gray-400",children:"Your save file is outdated."}),ne.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please reset your game or update it to access trading features."})]})}),sw=G.forwardRef((e,t)=>{var n,r,s,i,a,o;const{compact:l=!1}=e,[c,h]=G.useState(!1);G.useImperativeHandle(t,()=>({openModal:()=>{h(!0)}}));const{gameState:m,queueBuilding:g,queueResearch:p,spendResource:f}=lh(),x=G.useMemo(()=>{var e;return(null==(e=m.unlockedFeatures)?void 0:e.includes("automation"))||!1},[m.unlockedFeatures]),b=G.useMemo(()=>{var e;return(null==(e=m.unlockedFeatures)?void 0:e.includes("advancedAutomation"))||!1},[m.unlockedFeatures]),y=G.useMemo(()=>{var e;return(null==(e=m.unlockedFeatures)?void 0:e.includes("intelligentAutomation"))||!1},[m.unlockedFeatures]),[v,w]=G.useState(()=>{const e=localStorage.getItem("factoryFlowAutomationModules");if(!e)return[];const t=JSON.parse(e),n={lumberMill:"woodcutter",quarry:"stoneMine",steelFurnace:"steelFoundry",gearWorkshop:"gearFactory"},r={woodcutter:"automateWood",stoneMine:"automateStone",ironMine:"automateIron",copperMine:"automateCopper",steelFoundry:"automateSteel",circuitFactory:"automateCircuit",gearFactory:"automateGear",plasticFactory:"automatePlastic",glassFactory:"automateGlass",computerFactory:"automateComputer",robotFactory:"automateRobot",quantumLab:"automateQuantum",naniteFactory:"automateNanite",fusionReactor:"automateFusion",antimatterCollector:"automateAntimatter",singularityCore:"automateSingularity",woodStorage:"automateWood",stoneStorage:"automateStone",metalStorage:"automateIron",componentStorage:"automateGear",highTechStorage:"automateComputer",quantumStorage:"automateQuantum",exoticStorage:"automateFusion",research:"automateResearch"};return t.map(e=>{const t=u({},e);return"building"===e.type&&n[e.target]&&(t.target=n[e.target]),"building"===e.type&&r[t.target]?t.requiredResearch=r[t.target]:"research"===e.type&&(t.requiredResearch="automateResearch"),t})}),k=Y.useRef(m),j=Y.useRef(v);k.current=m,j.current=v;const[N,C]=G.useState(!1),[S,M]=G.useState(null),[_,P]=G.useState({type:"building",target:"",enabled:!0,priority:1,robotCost:1,circuitCost:0,cooldown:5,lastExecuted:0,maxLevel:0,queueCap:0}),[T,E]=G.useState("building"),[R,A]=G.useState(""),[L,F]=G.useState(1),[O,I]=G.useState(5),[D,z]=G.useState(0),[q,$]=G.useState({timestamp:0,modulesExecuted:0,actionsPerformed:0,robotsConsumed:0,circuitsConsumed:0}),[B,H]=G.useState(Date.now());G.useEffect(()=>{localStorage.setItem("factoryFlowAutomationModules",JSON.stringify(v))},[v]);const W=()=>{let e=1;return b&&(e*=.75),y&&(e*=.5),m.unlockedFeatures.includes("quantumComputing")&&(e*=.85),e},U=()=>[{id:"woodcutter",type:"building",name:"Wood Automation",icon:"",description:"Automatically upgrade woodcutters to boost wood production",category:"Basic Resources",requiredResearch:"automateWood",defaultRobotCost:1,defaultCircuitCost:0,defaultCooldown:10},{id:"stoneMine",type:"building",name:"Stone Automation",icon:"",description:"Automatically upgrade stone mines to boost stone production",category:"Basic Resources",requiredResearch:"automateStone",defaultRobotCost:1,defaultCircuitCost:0,defaultCooldown:10},{id:"ironMine",type:"building",name:"Iron Automation",icon:"",description:"Automatically upgrade iron mines to boost iron production",category:"Basic Resources",requiredResearch:"automateIron",defaultRobotCost:2,defaultCircuitCost:5,defaultCooldown:15},{id:"copperMine",type:"building",name:"Copper Automation",icon:"",description:"Automatically upgrade copper mines to boost copper production",category:"Basic Resources",requiredResearch:"automateCopper",defaultRobotCost:2,defaultCircuitCost:5,defaultCooldown:15},{id:"woodStorage",type:"building",name:"Wood Storage Automation",icon:"",description:"Automatically upgrade wood storage to increase capacity",category:"Storage",requiredResearch:"automateWood",defaultRobotCost:1,defaultCircuitCost:0,defaultCooldown:12},{id:"stoneStorage",type:"building",name:"Stone Storage Automation",icon:"",description:"Automatically upgrade stone storage to increase capacity",category:"Storage",requiredResearch:"automateStone",defaultRobotCost:1,defaultCircuitCost:0,defaultCooldown:12},{id:"metalStorage",type:"building",name:"Metal Storage Automation",icon:"",description:"Automatically upgrade metal storage to increase capacity",category:"Storage",requiredResearch:"automateIron",defaultRobotCost:2,defaultCircuitCost:3,defaultCooldown:15},{id:"componentStorage",type:"building",name:"Component Storage Automation",icon:"",description:"Automatically upgrade component storage to increase capacity",category:"Storage",requiredResearch:"automateGear",defaultRobotCost:2,defaultCircuitCost:5,defaultCooldown:18},{id:"highTechStorage",type:"building",name:"High-Tech Storage Automation",icon:"",description:"Automatically upgrade high-tech storage to increase capacity",category:"Storage",requiredResearch:"automateComputer",defaultRobotCost:3,defaultCircuitCost:10,defaultCooldown:25},{id:"quantumStorage",type:"building",name:"Quantum Storage Automation",icon:"",description:"Automatically upgrade quantum storage to increase capacity",category:"Storage",requiredResearch:"automateQuantum",defaultRobotCost:5,defaultCircuitCost:20,defaultCooldown:35},{id:"exoticStorage",type:"building",name:"Exotic Storage Automation",icon:"",description:"Automatically upgrade exotic storage to increase capacity",category:"Storage",requiredResearch:"automateFusion",defaultRobotCost:8,defaultCircuitCost:35,defaultCooldown:50},{id:"steelFoundry",type:"building",name:"Steel Automation",icon:"",description:"Automatically upgrade steel foundries to boost steel production",category:"Advanced Manufacturing",requiredResearch:"automateSteel",defaultRobotCost:3,defaultCircuitCost:10,defaultCooldown:20},{id:"circuitFactory",type:"building",name:"Circuit Automation",icon:"",description:"Automatically upgrade circuit factories to boost circuit production",category:"Advanced Manufacturing",requiredResearch:"automateCircuit",defaultRobotCost:2,defaultCircuitCost:8,defaultCooldown:18},{id:"gearFactory",type:"building",name:"Gear Automation",icon:"",description:"Automatically upgrade gear factories to boost gear production",category:"Advanced Manufacturing",requiredResearch:"automateGear",defaultRobotCost:2,defaultCircuitCost:8,defaultCooldown:18},{id:"plasticFactory",type:"building",name:"Plastic Automation",icon:"",description:"Automatically upgrade plastic factories to boost plastic production",category:"Advanced Manufacturing",requiredResearch:"automatePlastic",defaultRobotCost:2,defaultCircuitCost:10,defaultCooldown:20},{id:"glassFactory",type:"building",name:"Glass Automation",icon:"",description:"Automatically upgrade glass factories to boost glass production",category:"Advanced Manufacturing",requiredResearch:"automateGlass",defaultRobotCost:2,defaultCircuitCost:10,defaultCooldown:20},{id:"computerFactory",type:"building",name:"Computer Automation",icon:"",description:"Automatically upgrade computer factories to boost computer production",category:"High-Tech Production",requiredResearch:"automateComputer",defaultRobotCost:4,defaultCircuitCost:15,defaultCooldown:30},{id:"robotFactory",type:"building",name:"Robot Automation",icon:"",description:"Automatically upgrade robot factories to boost robot production",category:"High-Tech Production",requiredResearch:"automateRobot",defaultRobotCost:5,defaultCircuitCost:20,defaultCooldown:35},{id:"quantumLab",type:"building",name:"Quantum Automation",icon:"",description:"Automatically upgrade quantum labs to boost quantum production",category:"High-Tech Production",requiredResearch:"automateQuantum",defaultRobotCost:6,defaultCircuitCost:25,defaultCooldown:40},{id:"naniteFactory",type:"building",name:"Nanite Automation",icon:"",description:"Automatically upgrade nanite factories to boost nanite production",category:"High-Tech Production",requiredResearch:"automateNanite",defaultRobotCost:8,defaultCircuitCost:30,defaultCooldown:45},{id:"fusionReactor",type:"building",name:"Fusion Automation",icon:"",description:"Automatically upgrade fusion reactors to boost fusion production",category:"Exotic Technology",requiredResearch:"automateFusion",defaultRobotCost:10,defaultCircuitCost:40,defaultCooldown:60},{id:"antimatterCollector",type:"building",name:"Antimatter Automation",icon:"",description:"Automatically upgrade antimatter collectors to boost antimatter production",category:"Exotic Technology",requiredResearch:"automateAntimatter",defaultRobotCost:15,defaultCircuitCost:50,defaultCooldown:90},{id:"singularityCore",type:"building",name:"Singularity Automation",icon:"",description:"Automatically upgrade singularity cores to boost singularity production",category:"Exotic Technology",requiredResearch:"automateSingularity",defaultRobotCost:20,defaultCircuitCost:75,defaultCooldown:120},{id:"research",type:"research",name:"Research Automation",icon:"",description:"Automatically complete available research projects",category:"Research",requiredResearch:"automateResearch",defaultRobotCost:5,defaultCircuitCost:20,defaultCooldown:45}].filter(e=>{var t;return"building"!==e.type||(null==(t=m.buildings[e.id])?void 0:t.unlocked)||!1}),V=e=>{const t=e.robotCost,n=W();return Math.max(1,Math.floor(t*n))},Q=e=>{const t={},n=V(e),r=e.circuitCost;if(m.resources.robot.value<n&&(t.robot={needed:n,current:Math.floor(m.resources.robot.value)}),r>0&&m.resources.circuit.value<r&&(t.circuit={needed:r,current:Math.floor(m.resources.circuit.value)}),"building"===e.type){const n=m.buildings[e.target];n&&Object.entries(n.cost).forEach(([e,n])=>{var r,s;const i=e;if(n&&n>0&&(null==(r=m.resources[i])?void 0:r.unlocked)){const e=(null==(s=m.resources[i])?void 0:s.value)||0;e<n&&(t[i]={needed:Math.ceil(n),current:Math.floor(e)})}})}else if("research"===e.type){const n=m.research[e.target];if(n){const e=Object.entries(n.cost).reduce((e,[t,n])=>{if(n&&n>0){const r=Math.floor(n*m.prestige.multipliers.researchCost);e[t]=r}return e},{});Object.entries(e).forEach(([e,n])=>{var r,s;const i=e;if(n&&n>0&&(null==(r=m.resources[i])?void 0:r.unlocked)){const e=(null==(s=m.resources[i])?void 0:s.value)||0;e<n&&(t[i]={needed:Math.ceil(n),current:Math.floor(e)})}})}}return t},X=(e,t)=>{if("building"===e){const e=m.buildings[t];return e?`${e.name} (Level ${e.level}/${e.maxLevel})`:t}{const e=m.research[t];return e?e.name:t}},K=e=>{if("building"===e.type){const t=k.current.buildings[e.target];return!(!t||!t.unlocked||t.level>=t.maxLevel||e.maxLevel&&e.maxLevel>0&&t.level>=e.maxLevel)}{const t=k.current.research[e.target];return t&&t.unlocked&&!t.completed}},J=()=>0===v.length?1:Math.max(...v.map(e=>e.priority))+1,Z=()=>{M(null),P({type:"building",target:"",enabled:!0,priority:1,robotCost:1,circuitCost:0,cooldown:5,lastExecuted:0,maxLevel:0,queueCap:0}),E("building"),A(""),F(1),I(5),z(0)},ee=()=>{let e=S;if(!e&&R&&(e=U().find(e=>e.id===R&&e.type===T)),!e)return void alert("Please select a module");if(v.find(t=>t.target===e.id&&t.type===e.type))return void alert("This automation module is already active");const t={id:Date.now().toString(),type:e.type,target:e.id,enabled:!0,priority:L||_.priority||1,robotCost:e.defaultRobotCost,circuitCost:e.defaultCircuitCost,cooldown:O||_.cooldown||e.defaultCooldown,lastExecuted:0,maxLevel:D||_.maxLevel||0,queueCap:_.queueCap||0,requiredResearch:e.requiredResearch},n=[...v,t];w(n),j.current=n,setTimeout(()=>{oe()},100),Z(),C(!1)},te=e=>{const t=v.map(t=>t.id===e?d(u({},t),{enabled:!t.enabled}):t);w(t),j.current=t;const n=t.find(t=>t.id===e);n&&n.enabled&&setTimeout(()=>{oe()},100)},re=e=>{w(v.filter(t=>t.id!==e))},se=(e,t)=>{const n=v.sort((e,t)=>e.priority-t.priority),r=n.findIndex(t=>t.id===e);if(-1===r)return;let s;if("up"===t&&r>0)s=r-1;else{if(!("down"===t&&r<n.length-1))return;s=r+1}const i=[...v],a=i.find(t=>t.id===e),o=i.find(e=>e.id===n[s].id);if(a&&o){const e=a.priority;a.priority=o.priority,o.priority=e,w(i)}},ie=e=>m.queues.building.filter(t=>t.targetId===e).reduce((e,t)=>e+(t.quantity||1),0),ae=e=>m.queues.research.filter(t=>t.targetId===e).length,oe=()=>{let e=0,t=0,n=0,r=0;const s=k.current,i=Date.now(),a=j.current.filter(e=>e.enabled&&K(e)).sort((e,t)=>e.priority-t.priority);a.length>0&&console.log(`Automation: Processing ${a.length} modules at ${(new Date).toLocaleTimeString()}`);const o=[];for(const l of a){if(i-l.lastExecuted<1e3*l.cooldown)continue;const a=V(l),c=l.circuitCost;if(s.resources.robot.value<a)break;if(c>0&&s.resources.circuit.value<c)break;let u=!1;if("building"===l.type){const e=s.buildings[l.target],t=ie(l.target);if(l.queueCap&&l.queueCap>0){if(t>=l.queueCap)continue}else if(t>0)continue;if(e.level>=e.maxLevel)continue;if(l.maxLevel&&l.maxLevel>0&&e.level>=l.maxLevel)continue;Object.entries(e.cost).every(([e,t])=>{var n,r;const i=e;return void 0===t||t<=0||(null==(n=s.resources[i])?void 0:n.unlocked)&&(null==(r=s.resources[i])?void 0:r.value)>=t})&&g(l.target,1)&&(u=!0,console.log(`Automation: Successfully queued building ${l.target}`))}else if("research"===l.type){const e=s.research[l.target];if(e.completed)continue;const t=ae(l.target);if(l.queueCap&&l.queueCap>0){if(t>=l.queueCap)continue}else if(t>0)continue;const n=Object.entries(e.cost).reduce((e,[t,n])=>{if(n&&n>0){const r=Math.floor(n*s.prestige.multipliers.researchCost);e[t]=r}return e},{});Object.entries(n).every(([e,t])=>{var n,r;const i=e;return void 0===t||t<=0||(null==(n=s.resources[i])?void 0:n.unlocked)&&(null==(r=s.resources[i])?void 0:r.value)>=t})&&p(l.target)&&(u=!0,console.log(`Automation: Successfully queued research ${l.target}`))}if(u){const s=f("robot",a),u=0===c||f("circuit",c);s&&u&&(n+=a,r+=c,e++,t++,o.push({id:l.id,lastExecuted:i}))}}o.length>0&&w(e=>e.map(e=>{const t=o.find(t=>t.id===e.id);return t?d(u({},e),{lastExecuted:t.lastExecuted}):e})),$({timestamp:Date.now(),modulesExecuted:e,actionsPerformed:t,robotsConsumed:n,circuitsConsumed:r})},le=Y.useRef(oe);return G.useEffect(()=>{le.current=oe},[oe]),G.useEffect(()=>{if(x&&v.length>0){const e=setInterval(()=>{le.current()},1e3);return()=>clearInterval(e)}},[x,v.length]),G.useEffect(()=>{const e=setInterval(()=>{H(Date.now())},100);return()=>clearInterval(e)},[]),G.useEffect(()=>{P(e=>d(u({},e),{target:""}))},[_.type]),l?ne.jsxs("div",{className:"space-y-2",children:[ne.jsxs("button",{onClick:()=>{x&&h(!0)},disabled:!x,className:"w-full flex items-center justify-between p-2 rounded-lg border transition-colors "+(x?"bg-blue-600/20 hover:bg-blue-600/30 border-blue-500/30 cursor-pointer":"bg-gray-600/20 border-gray-500/30 cursor-not-allowed opacity-50"),children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("span",{className:"text-blue-400",children:""}),ne.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Automation"})]}),ne.jsx("div",{className:"flex items-center space-x-2 text-xs",children:x?ne.jsxs(ne.Fragment,{children:[ne.jsxs("span",{className:"text-gray-400",children:["Modules: ",v.length]}),ne.jsx("span",{className:"bg-green-600/50 text-green-200 px-2 py-1 rounded",children:"Active"})]}):ne.jsx("span",{className:"bg-red-600/50 text-red-200 px-2 py-1 rounded",children:"Locked"})})]}),c&&x&&ld.createPortal(ne.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] backdrop-blur-sm p-4",onMouseDown:e=>{e.target===e.currentTarget&&h(!1)},onKeyDown:e=>{"Escape"===e.key&&h(!1)},tabIndex:-1,ref:e=>{e&&setTimeout(()=>{e.contains(document.activeElement)||e.focus()},100)},children:ne.jsxs("div",{className:"bg-gray-800/95 rounded-lg p-6 w-full max-w-6xl max-h-[90vh] overflow-hidden border border-blue-500/30 relative",children:[ne.jsxs("div",{className:"flex justify-between items-center mb-4",children:[ne.jsx("h2",{className:"text-2xl font-bold text-blue-400",children:"Automation Control"}),ne.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-white text-2xl transition-colors",children:""})]}),ne.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-8rem)]",children:x?ne.jsxs("div",{className:"space-y-6",children:[ne.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[ne.jsxs("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-lg p-4 text-center",children:[ne.jsx("div",{className:"text-2xl mb-2",children:""}),ne.jsx("div",{className:"text-sm text-gray-400",children:"Active Modules"}),ne.jsx("div",{className:"text-xl font-bold text-blue-400",children:v.length})]}),ne.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-lg p-4 text-center",children:[ne.jsx("div",{className:"text-2xl mb-2",children:""}),ne.jsx("div",{className:"text-sm text-gray-400",children:"Available Robots"}),ne.jsx("div",{className:"text-xl font-bold text-green-400",children:Math.floor(m.resources.robot.value)})]}),ne.jsxs("div",{className:"bg-purple-600/20 border border-purple-500/30 rounded-lg p-4 text-center",children:[ne.jsx("div",{className:"text-2xl mb-2",children:""}),ne.jsx("div",{className:"text-sm text-gray-400",children:"Available Circuits"}),ne.jsx("div",{className:"text-xl font-bold text-purple-400",children:Math.floor(m.resources.circuit.value)})]})]}),v.length>0?ne.jsxs("div",{className:"space-y-4",children:[ne.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:"Active Automation Modules"}),ne.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(e=>{var t,n;const r=m.research[e.requiredResearch],s=(null==r?void 0:r.completed)||!1,i=e.robotCost,a=e.circuitCost,o=m.resources.robot.value>=i&&(0===a||m.resources.circuit.value>=a)&&K(e)&&s,l=B-e.lastExecuted,c=l<1e3*e.cooldown,u=c?Math.min(l/(1e3*e.cooldown)*100,100):100;return ne.jsxs("div",{className:(s?o?"bg-gray-800 border border-green-500/30 shadow-lg shadow-green-500/10":"bg-gray-800/50 border border-gray-600/30":"bg-red-900/30 border border-red-500/50")+" rounded-lg p-4 transition-all duration-200",children:[ne.jsxs("div",{className:"flex items-start justify-between mb-3",children:[ne.jsxs("div",{className:"flex-1",children:[ne.jsx("h4",{className:"text-lg font-bold text-white",children:"building"===e.type?`Auto-Build: ${(null==(t=m.buildings[e.target])?void 0:t.name)||"Unknown"}`:`Auto-Research: ${(null==(n=m.research[e.target])?void 0:n.name)||"Unknown"}`}),ne.jsxs("p",{className:"text-gray-400 text-sm",children:["Priority: ",e.priority," | Cooldown: ",e.cooldown,"s"]})]}),ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsxs("label",{className:"flex items-center space-x-2",children:[ne.jsx("input",{type:"checkbox",checked:e.enabled,onChange:()=>te(e.id),className:"form-checkbox h-4 w-4 text-blue-600"}),ne.jsx("span",{className:"text-sm text-gray-300",children:"Enabled"})]}),ne.jsx("button",{onClick:()=>re(e.id),className:"px-2 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded transition-colors",children:"Remove"})]})]}),ne.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[ne.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[ne.jsx("span",{children:""}),ne.jsxs("span",{className:m.resources.robot.value>=i?"text-green-400":"text-red-400",children:["Cost: ",i]})]}),a>0&&ne.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[ne.jsx("span",{children:""}),ne.jsxs("span",{className:m.resources.circuit.value>=a?"text-green-400":"text-red-400",children:["Cost: ",a]})]})]}),(()=>{const t=Q(e);return Object.keys(t).length>0?ne.jsxs("div",{className:"bg-red-900/30 border border-red-500/50 rounded p-2 mb-3",children:[ne.jsx("div",{className:"text-xs font-semibold text-red-300 mb-1",children:"Missing Resources:"}),ne.jsx("div",{className:"grid grid-cols-2 gap-1 text-xs",children:Object.entries(t).map(([e,{needed:t,current:n}])=>ne.jsxs("div",{className:"flex items-center space-x-1",children:[ne.jsx(hh,{resourceType:e,size:"xs"}),ne.jsxs("span",{className:"text-red-400",children:[n,"/",t]})]},e))})]}):null})(),ne.jsxs("div",{className:"mb-2",children:[ne.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[ne.jsx("span",{className:"text-gray-400",children:"Cooldown"}),ne.jsx("span",{className:c?"text-yellow-400":"text-green-400",children:c?`${Math.ceil((1e3*e.cooldown-l)/1e3)}s remaining`:"Ready"})]}),ne.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2",children:ne.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(u>=100?"bg-green-500":"bg-yellow-500"),style:{width:`${u}%`}})})]}),ne.jsx("div",{className:"text-xs px-2 py-1 rounded text-center "+(s?e.enabled?o?"bg-green-600/50 text-green-200":"bg-yellow-600/50 text-yellow-200":"bg-gray-600/50 text-gray-300":"bg-red-600/50 text-red-200"),children:s?e.enabled?o?"Active":"Insufficient Resources":"Disabled":"Research Required"})]},e.id)})})]}):ne.jsxs("div",{className:"text-center py-8",children:[ne.jsx("div",{className:"text-4xl mb-4",children:""}),ne.jsx("h3",{className:"text-lg font-bold mb-2",children:"No Automation Modules"}),ne.jsx("p",{className:"text-sm text-gray-400",children:"Add automation modules to automatically manage buildings and research."})]}),ne.jsxs("div",{className:"bg-gray-700/30 border border-gray-600/30 rounded-lg p-4",children:[ne.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-4",children:"Add New Automation Module"}),N?ne.jsxs("div",{className:"space-y-4",children:[ne.jsxs("div",{children:[ne.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Module Type"}),ne.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[ne.jsxs("button",{onClick:()=>E("building"),className:"p-3 rounded-lg border transition-colors "+("building"===T?"bg-blue-600/30 border-blue-500/50 text-blue-300":"bg-gray-700/50 border-gray-600/30 text-gray-400 hover:bg-gray-700"),children:[ne.jsx("div",{className:"text-lg mb-1",children:""}),ne.jsx("div",{className:"text-sm font-medium",children:"Auto-Build"})]}),ne.jsxs("button",{onClick:()=>E("research"),className:"p-3 rounded-lg border transition-colors "+("research"===T?"bg-purple-600/30 border-purple-500/50 text-purple-300":"bg-gray-700/50 border-gray-600/30 text-gray-400 hover:bg-gray-700"),children:[ne.jsx("div",{className:"text-lg mb-1",children:""}),ne.jsx("div",{className:"text-sm font-medium",children:"Auto-Research"})]})]})]}),T&&ne.jsxs("div",{children:[ne.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["building"===T?"Building":"Research"," Target"]}),ne.jsxs("select",{value:R,onChange:e=>A(e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[ne.jsxs("option",{value:"",children:["Select ","building"===T?"a building":"research"]}),"building"===T?U().filter(e=>{var t,n;return"building"===e.type&&(null==(t=m.buildings[e.id])?void 0:t.unlocked)&&(null==(n=m.research[e.requiredResearch])?void 0:n.completed)}).map(e=>{var t;return ne.jsx("option",{value:e.id,children:null==(t=m.buildings[e.id])?void 0:t.name},e.id)}):Object.entries(m.research).filter(([e,t])=>t.unlocked&&!t.completed).map(([e,t])=>ne.jsx("option",{value:e,children:t.name},e))]})]}),R&&ne.jsxs("div",{children:[ne.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Priority (1-10)"}),ne.jsx("input",{type:"number",min:"1",max:"10",value:L,onChange:e=>F(Number(e.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),ne.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Higher priority modules run first"})]}),R&&ne.jsxs("div",{children:[ne.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cooldown (seconds)"}),ne.jsx("input",{type:"number",min:"1",max:"3600",value:O,onChange:e=>I(Number(e.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),ne.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"How often this module should run"})]}),"building"===T&&R&&ne.jsxs("div",{children:[ne.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stop at Level (0 = no limit)"}),ne.jsx("input",{type:"number",min:"0",max:(null==(n=m.buildings[R])?void 0:n.maxLevel)||0,value:D,onChange:e=>z(Number(e.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Default: ${(null==(r=m.buildings[R])?void 0:r.maxLevel)||0}`}),ne.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Stop upgrading at this level (0 = no limit, max: ",(null==(s=m.buildings[R])?void 0:s.maxLevel)||0,")"]})]}),ne.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3 pt-4 border-t border-gray-600",children:[ne.jsx("button",{onClick:()=>{Z(),C(!1)},className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded transition-colors w-full sm:w-auto",children:"Cancel"}),ne.jsx("button",{onClick:ee,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded transition-colors font-semibold w-full sm:w-auto",children:"Add Module"})]})]}):ne.jsx("div",{className:"text-center",children:ne.jsx("button",{onClick:()=>C(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"+ Add New Module"})})]})]}):ne.jsxs("div",{className:"text-center py-8",children:[ne.jsx("div",{className:"text-4xl mb-4",children:""}),ne.jsx("h3",{className:"text-lg font-bold mb-2",children:"Automation Locked"}),ne.jsx("p",{className:"text-sm text-gray-400 mb-4",children:'Complete "Basic Automation" research to unlock automation features.'}),ne.jsx("p",{className:"text-xs text-gray-500",children:"Automation allows buildings to construct and research to progress automatically using robots and circuits."})]})})]})}),document.body)]}):ne.jsx("div",{className:"space-y-2",children:x?ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{className:"flex justify-between items-center mb-2",children:[ne.jsxs("div",{children:[ne.jsx("h2",{className:"text-lg font-bold",children:"Automation"}),ne.jsxs("div",{className:"text-xs text-gray-400",children:[y?"AI-Powered":b?"Advanced":"Basic",y&&" (50% robot cost reduction)",b&&!y&&" (25% robot cost reduction)"]})]}),ne.jsx("button",{onClick:()=>{Z(),C(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded text-xs",children:"Add Module"})]}),ne.jsxs("div",{className:"bg-gray-800 rounded p-2 mb-2",children:[ne.jsxs("div",{className:"flex justify-between items-center",children:[ne.jsxs("span",{className:"text-sm",children:[" Robots: ",m.resources.robot.value]}),ne.jsxs("span",{className:"text-xs text-gray-400",children:["Efficiency: ",Math.round(100*(1-W())),"% reduction"]})]}),m.resources.circuit.unlocked&&ne.jsxs("div",{className:"flex justify-between items-center mt-1",children:[ne.jsxs("span",{className:"text-sm",children:[" Circuits: ",m.resources.circuit.value]}),ne.jsx("span",{className:"text-xs text-gray-400",children:"Energy for automation"})]})]}),q.timestamp>0&&ne.jsxs("div",{className:"bg-gray-800 rounded p-2 mb-2",children:[ne.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Last Execution"}),ne.jsxs("p",{className:"text-xs text-gray-300",children:[new Date(q.timestamp).toLocaleTimeString()," -",q.modulesExecuted," modules, ",q.actionsPerformed," actions",q.robotsConsumed>0&&`, ${q.robotsConsumed} robots consumed`,q.circuitsConsumed>0&&`, ${q.circuitsConsumed} circuits consumed`]})]}),ne.jsx("div",{className:"space-y-2 max-h-64 md:max-h-80 overflow-y-auto scrollbar-thin",children:0===v.length?ne.jsxs("p",{className:"text-gray-400 text-center py-4 text-xs",children:["No automation modules set up yet.",ne.jsx("br",{}),ne.jsx("span",{className:"text-xs",children:"Complete automation research to unlock modules for specific buildings."})]}):ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{className:"flex items-center justify-between mb-2 px-1",children:[ne.jsx("h3",{className:"text-xs font-semibold text-gray-300",children:"Execution Order"}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Use  to reorder"})]}),v.sort((e,t)=>e.priority-t.priority).map(e=>{var t,n,r;const s=V(e),i=e.circuitCost,a=B-e.lastExecuted,o=Math.max(0,1e3*e.cooldown-a),l=(null==(t=m.research[e.requiredResearch])?void 0:t.completed)||!1,c=0===o&&m.resources.robot.value>=s&&(0===i||m.resources.circuit.value>=i)&&K(e)&&l;return ne.jsx("div",{className:`${l?c?"bg-gray-800 border border-green-500/30 shadow-lg shadow-green-500/10":"bg-gray-800":"bg-red-900/30 border border-red-500/50"} rounded p-2 transition-all duration-300 ${c?"animate-pulse":""}`,children:ne.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start space-y-2 sm:space-y-0",children:[ne.jsxs("div",{className:"flex-1 min-w-0",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsxs("div",{className:"flex items-center space-x-1",children:[ne.jsxs("span",{className:"text-xs font-mono bg-blue-600 text-white px-2 py-1 rounded font-bold",children:["#",v.sort((e,t)=>e.priority-t.priority).findIndex(t=>t.id===e.id)+1]}),ne.jsxs("span",{className:"text-xs text-gray-400",children:["Priority ",e.priority]})]}),ne.jsxs("h3",{className:"text-sm font-semibold truncate",children:["building"===e.type?"":""," ",X(e.type,e.target)]}),!l&&ne.jsx("span",{className:"text-xs bg-red-600 px-1 rounded",children:"LOCKED"})]}),!l&&ne.jsxs("p",{className:"text-red-400 text-xs",children:["Requires: ",e.requiredResearch," research"]}),"building"===e.type&&ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{className:"mt-1",children:[ne.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[ne.jsx("span",{className:"text-gray-400 text-xs",children:"Max Level:"}),ne.jsx("input",{type:"number",min:"0",max:(null==(n=m.buildings[e.target])?void 0:n.maxLevel)||999,value:e.maxLevel||0,onChange:t=>{const n=parseInt(t.target.value)||0;w(v.map(t=>t.id===e.id?d(u({},t),{maxLevel:n}):t))},className:"bg-gray-700 text-white text-xs px-2 py-1 rounded w-16 focus:ring-1 focus:ring-blue-500"}),ne.jsxs("span",{className:"text-gray-500 text-xs",children:["/ ",(null==(r=m.buildings[e.target])?void 0:r.maxLevel)||0,0===e.maxLevel&&" (no limit)"]})]}),ne.jsxs("div",{className:"flex items-center flex-wrap gap-1",children:[ne.jsx("span",{className:"text-gray-500 text-xs",children:"Quick:"}),ne.jsx("button",{onClick:()=>w(v.map(t=>t.id===e.id?d(u({},t),{maxLevel:0}):t)),className:"bg-gray-600 hover:bg-gray-500 text-white px-2 py-0.5 rounded text-xs min-w-[28px]",title:"No limit",children:""}),ne.jsx("button",{onClick:()=>w(v.map(t=>t.id===e.id?d(u({},t),{maxLevel:10}):t)),className:"bg-gray-600 hover:bg-gray-500 text-white px-2 py-0.5 rounded text-xs min-w-[28px]",children:"10"}),ne.jsx("button",{onClick:()=>w(v.map(t=>t.id===e.id?d(u({},t),{maxLevel:50}):t)),className:"bg-gray-600 hover:bg-gray-500 text-white px-2 py-0.5 rounded text-xs min-w-[28px]",children:"50"}),ne.jsx("button",{onClick:()=>w(v.map(t=>{var n;return t.id===e.id?d(u({},t),{maxLevel:(null==(n=m.buildings[e.target])?void 0:n.maxLevel)||0}):t})),className:"bg-gray-600 hover:bg-gray-500 text-white px-2 py-0.5 rounded text-xs min-w-[36px]",title:"Set to building max",children:"Max"})]})]}),ne.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[ne.jsx("span",{className:"text-gray-400 text-xs",children:"Queue Cap:"}),ne.jsx("input",{type:"number",min:"0",max:"99",value:e.queueCap||0,onChange:t=>{const n=parseInt(t.target.value)||0;w(v.map(t=>t.id===e.id?d(u({},t),{queueCap:n}):t))},className:"bg-gray-700 text-white text-xs px-2 py-1 rounded w-16 focus:ring-1 focus:ring-blue-500"}),ne.jsx("span",{className:"text-gray-500 text-xs",children:0===e.queueCap&&" (no limit)"})]}),ne.jsxs("div",{className:"flex items-center flex-wrap gap-1 mb-1",children:[ne.jsx("span",{className:"text-gray-500 text-xs",children:"Quick:"}),ne.jsx("button",{onClick:()=>w(v.map(t=>t.id===e.id?d(u({},t),{queueCap:0}):t)),className:"bg-gray-600 hover:bg-gray-500 text-white px-2 py-0.5 rounded text-xs min-w-[28px]",title:"No limit",children:""}),ne.jsx("button",{onClick:()=>w(v.map(t=>t.id===e.id?d(u({},t),{queueCap:1}):t)),className:"bg-gray-600 hover:bg-gray-500 text-white px-2 py-0.5 rounded text-xs min-w-[28px]",children:"1"}),ne.jsx("button",{onClick:()=>w(v.map(t=>t.id===e.id?d(u({},t),{queueCap:3}):t)),className:"bg-gray-600 hover:bg-gray-500 text-white px-2 py-0.5 rounded text-xs min-w-[28px]",children:"3"}),ne.jsx("button",{onClick:()=>w(v.map(t=>t.id===e.id?d(u({},t),{queueCap:5}):t)),className:"bg-gray-600 hover:bg-gray-500 text-white px-2 py-0.5 rounded text-xs min-w-[28px]",children:"5"})]})]}),ne.jsxs("div",{className:"mt-1 text-xs",children:[ne.jsxs("span",{className:c?"text-green-400":"text-red-400",children:[" ",s," robots",i>0&&`   ${i} circuits`]}),!K(e)&&ne.jsx("span",{className:"text-red-400 ml-2",children:"(Invalid/Complete)"})]}),(()=>{const t=Q(e);return Object.keys(t).length>0?ne.jsxs("div",{className:"mt-2 bg-red-900/20 border border-red-500/40 rounded p-2",children:[ne.jsx("div",{className:"text-xs font-semibold text-red-300 mb-1",children:" Missing:"}),ne.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(t).map(([e,{needed:t,current:n}])=>ne.jsxs("div",{className:"flex items-center space-x-1 bg-red-900/30 px-2 py-1 rounded text-xs",children:[ne.jsx(hh,{resourceType:e,size:"xs"}),ne.jsxs("span",{className:"text-red-400",children:[n,"/",t]})]},e))})]}):null})(),ne.jsxs("div",{className:"mt-2",children:[ne.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[ne.jsx("span",{className:"text-gray-400",children:" Cooldown"}),ne.jsx("span",{className:"font-mono "+(o>0?"text-yellow-400":"text-green-400"),children:o>0?`${Math.ceil(o/1e3)}s remaining`:"Ready"})]}),ne.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 overflow-hidden",children:ne.jsx("div",{className:"h-full transition-all duration-100 "+(0===o?"bg-green-500 shadow-lg shadow-green-500/50":o<2e3?"bg-orange-500":"bg-yellow-500"),style:{width:o>0?(1e3*e.cooldown-o)/(1e3*e.cooldown)*100+"%":"100%"}})}),ne.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[ne.jsx("span",{children:"0s"}),ne.jsxs("span",{children:[e.cooldown,"s"]})]})]})]}),ne.jsxs("div",{className:"flex flex-row sm:flex-col space-x-2 sm:space-x-0 sm:space-y-1 sm:ml-2",children:[ne.jsxs("div",{className:"flex flex-row sm:flex-col space-x-1 sm:space-x-0 sm:space-y-0.5",children:[ne.jsx("button",{onClick:()=>se(e.id,"up"),disabled:0===v.sort((e,t)=>e.priority-t.priority).findIndex(t=>t.id===e.id),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-2 py-1 rounded text-xs font-bold transition-colors min-w-[32px]",title:"Move up in priority (execute earlier)",children:""}),ne.jsx("button",{onClick:()=>se(e.id,"down"),disabled:v.sort((e,t)=>e.priority-t.priority).findIndex(t=>t.id===e.id)===v.length-1,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-2 py-1 rounded text-xs font-bold transition-colors min-w-[32px]",title:"Move down in priority (execute later)",children:""})]}),ne.jsxs("div",{className:"flex space-x-1",children:[ne.jsx("button",{onClick:()=>te(e.id),className:"px-2 py-1 rounded text-xs min-w-[40px] "+(e.enabled?"bg-green-600 hover:bg-green-700":"bg-gray-600 hover:bg-gray-700"),children:e.enabled?"On":"Off"}),ne.jsx("button",{onClick:()=>re(e.id),className:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs min-w-[36px]",children:"Del"})]})]})]})},e.id)})]})}),N&&ld.createPortal(ne.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000] p-4",onMouseDown:e=>{e.target===e.currentTarget&&(Z(),C(!1))},children:ne.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto scrollbar-thin",children:[ne.jsx("h3",{className:"text-xl font-bold mb-4",children:"Select Automation Module"}),S?ne.jsxs("div",{className:"space-y-6",children:[ne.jsx("div",{className:"bg-gray-700 rounded-lg p-4",children:ne.jsxs("div",{className:"flex items-center space-x-4",children:[ne.jsx("div",{className:"text-4xl",children:S.icon}),ne.jsxs("div",{className:"flex-1",children:[ne.jsx("h4",{className:"text-xl font-semibold text-white",children:S.name}),ne.jsx("p",{className:"text-gray-300 mt-1",children:S.description})]})]})}),ne.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[ne.jsx("h5",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Module Specifications"}),ne.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[ne.jsxs("div",{children:[ne.jsx("div",{className:"text-2xl mb-1",children:""}),ne.jsx("div",{className:"text-white font-semibold",children:S.defaultRobotCost}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Robot Cost"}),ne.jsxs("div",{className:"text-xs text-gray-500",children:["(Actual: ",Math.max(1,Math.floor(S.defaultRobotCost*W())),")"]})]}),ne.jsxs("div",{children:[ne.jsx("div",{className:"text-2xl mb-1",children:""}),ne.jsx("div",{className:"text-white font-semibold",children:S.defaultCircuitCost}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Circuit Cost"}),ne.jsx("div",{className:"text-xs text-gray-500",children:""})]}),ne.jsxs("div",{children:[ne.jsx("div",{className:"text-2xl mb-1",children:""}),ne.jsxs("div",{className:"text-white font-semibold",children:[S.defaultCooldown,"s"]}),ne.jsx("div",{className:"text-xs text-gray-400",children:"Cooldown"}),ne.jsx("div",{className:"text-xs text-gray-500",children:""})]})]})]}),ne.jsxs("div",{className:"space-y-4",children:[ne.jsxs("div",{children:[ne.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Execution Priority"}),ne.jsx("input",{type:"number",min:"1",value:_.priority,onChange:e=>P(d(u({},_),{priority:parseInt(e.target.value)||1})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded focus:ring-2 focus:ring-blue-500"}),ne.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Lower numbers execute first (1 = highest priority)"})]}),"building"===S.type&&ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{children:[ne.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Maximum Level"}),ne.jsx("input",{type:"number",min:"0",max:(null==(i=m.buildings[S.id])?void 0:i.maxLevel)||999,value:_.maxLevel,onChange:e=>P(d(u({},_),{maxLevel:parseInt(e.target.value)||0})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded focus:ring-2 focus:ring-blue-500",placeholder:`Default: ${(null==(a=m.buildings[S.id])?void 0:a.maxLevel)||0}`}),ne.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Stop upgrading at this level (0 = no limit, max: ",(null==(o=m.buildings[S.id])?void 0:o.maxLevel)||0,")"]})]}),ne.jsxs("div",{children:[ne.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Queue Cap"}),ne.jsx("input",{type:"number",min:"0",max:"99",value:_.queueCap,onChange:e=>P(d(u({},_),{queueCap:parseInt(e.target.value)||0})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded focus:ring-2 focus:ring-blue-500",placeholder:"0"}),ne.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Maximum upgrades in queue (0 = no limit)"})]})]})]}),ne.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3 pt-4 border-t border-gray-600",children:[ne.jsx("button",{onClick:()=>{Z(),C(!1)},className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded transition-colors w-full sm:w-auto",children:"Cancel"}),ne.jsx("button",{onClick:ee,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded transition-colors font-semibold w-full sm:w-auto",children:"Add Module"})]})]}):ne.jsxs("div",{className:"space-y-6",children:[Object.entries(U().reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{})).map(([e,t])=>ne.jsxs("div",{children:[ne.jsx("h4",{className:"text-lg font-semibold mb-3 text-gray-300",children:e}),ne.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:t.map(e=>{var t;const n=(null==(t=m.research[e.requiredResearch])?void 0:t.completed)||!1,r=v.find(t=>t.target===e.id&&t.type===e.type),s=n&&!r;return ne.jsxs("div",{className:`\n                                  relative group p-4 rounded-lg border-2 cursor-pointer transition-all duration-200\n                                  ${s?"border-blue-500 bg-gray-700 hover:bg-gray-600 hover:border-blue-400":r?"border-green-500 bg-green-900/30 cursor-not-allowed":"border-red-500 bg-red-900/30 cursor-not-allowed"}\n                                `,onClick:()=>s&&(e=>{M(e);let t=0;if("building"===e.type){const n=m.buildings[e.id];t=(null==n?void 0:n.maxLevel)||0}P({type:e.type,target:e.id,enabled:!0,priority:J(),robotCost:e.defaultRobotCost,circuitCost:e.defaultCircuitCost,cooldown:e.defaultCooldown,lastExecuted:0,maxLevel:t})})(e),children:[ne.jsxs("div",{className:"text-center",children:[ne.jsx("div",{className:"text-3xl mb-2",children:e.icon}),ne.jsx("h5",{className:"text-sm font-semibold text-white truncate",children:e.name}),ne.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[" ",e.defaultRobotCost,e.defaultCircuitCost>0&&`   ${e.defaultCircuitCost}`]})]}),ne.jsx("div",{className:"absolute top-1 right-1",children:r?ne.jsx("span",{className:"bg-green-600 text-white text-xs px-1 py-0.5 rounded",children:"ACTIVE"}):n?null:ne.jsx("span",{className:"bg-red-600 text-white text-xs px-1 py-0.5 rounded",children:"LOCKED"})}),ne.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block z-10",children:ne.jsxs("div",{className:"bg-gray-900 border border-gray-600 rounded-lg p-3 text-xs w-64 shadow-lg",children:[ne.jsx("div",{className:"font-semibold text-white mb-1",children:e.name}),ne.jsx("div",{className:"text-gray-300 mb-2",children:e.description}),ne.jsxs("div",{className:"space-y-1 text-gray-400",children:[ne.jsxs("div",{children:[" Robot Cost: ",e.defaultRobotCost]}),e.defaultCircuitCost>0&&ne.jsxs("div",{children:[" Circuit Cost: ",e.defaultCircuitCost]}),ne.jsxs("div",{children:[" Cooldown: ",e.defaultCooldown,"s"]}),!n&&ne.jsxs("div",{className:"text-red-400",children:["Requires: ",e.requiredResearch]})]})]})})]},e.id)})})]},e)),ne.jsx("div",{className:"flex justify-end",children:ne.jsx("button",{onClick:()=>{Z(),C(!1)},className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded w-full sm:w-auto",children:"Cancel"})})]})]})}),document.body)]}):ne.jsxs("div",{className:"text-center py-8",children:[ne.jsx("div",{className:"text-4xl mb-2",children:""}),ne.jsx("h2",{className:"text-lg font-bold mb-2",children:"Automation Locked"}),ne.jsx("p",{className:"text-sm text-gray-400 mb-4",children:'Complete "Basic Automation" research to unlock automation features.'}),ne.jsxs("div",{className:"bg-gray-800 rounded p-3 text-xs",children:[ne.jsx("p",{className:"text-gray-300 mb-1",children:"Required Research:"}),ne.jsx("p",{className:"text-gray-400",children:" Mining Technology"}),ne.jsx("p",{className:"text-gray-400",children:" Basic Automation"})]})]})})}),iw=()=>{var e,t;const{gameState:n,unlockAchievement:r}=lh(),[s,i]=G.useState("all"),[a,o]=G.useState(!1),[l,c]=G.useState(0);G.useEffect(()=>{var e;if((null==(e=n.achievements)?void 0:e.unlocked)&&n.achievements.unlocked.length>0){const e=n.achievements.unlocked.filter(e=>"string"==typeof e&&void 0!==Yd.getById(e));e.length!==n.achievements.unlocked.length&&(console.log("Achievement Data Check:",{totalInArray:n.achievements.unlocked.length,validIds:e,invalidIds:n.achievements.unlocked.filter(e=>"string"!=typeof e||!Yd.getById(e)),rawUnlockedArray:n.achievements.unlocked}),console.warn("Triggering achievement cleanup due to corrupted data"),setTimeout(()=>r(""),100))}},[null==(t=null==(e=n.achievements)?void 0:e.unlocked)?void 0:t.length,r]);const u=e=>{switch(e){case"common":default:return"text-gray-600 bg-gray-100";case"uncommon":return"text-green-600 bg-green-100";case"rare":return"text-blue-600 bg-blue-100";case"epic":return"text-purple-600 bg-purple-100";case"legendary":return"text-orange-600 bg-orange-100"}},d=e=>{switch(e){case"common":default:return"Common";case"uncommon":return"Uncommon";case"rare":return"Rare";case"epic":return"Epic";case"legendary":return"Legendary"}},h=()=>{let e=Yd.getAll();return"all"!==s&&(e=e.filter(e=>e.category===s)),a||(e=e.filter(e=>!e.hidden&&!e.secret)),e},m=e=>{var t,r;return(null==(r=null==(t=n.achievements)?void 0:t.unlocked)?void 0:r.includes(e))||!1};return ne.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg shadow-lg",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ne.jsx("h2",{className:"text-2xl font-bold text-white cursor-pointer select-none hover:text-gray-200 transition-colors",onClick:()=>{const e=l+1;c(e),5===e?console.log(" Halfway there..."):8===e&&console.log(" Almost there..."),e>=10&&!m("easter_egg")&&(r("easter_egg"),c(0),console.log(" Easter Egg found! You clicked the title 10 times!"))},title:`Click me! (${l}/10)`,children:"Achievements"}),ne.jsxs("div",{className:"flex items-center space-x-4",children:[ne.jsxs("div",{className:"text-sm text-gray-300",children:[(()=>{var e;if(!(null==(e=n.achievements)?void 0:e.unlocked))return 0;const t=n.achievements.unlocked.filter(e=>"string"==typeof e&&void 0!==Yd.getById(e));if(t.length!==n.achievements.unlocked.length){const e=n.achievements.unlocked.filter(e=>"string"!=typeof e||!Yd.getById(e));console.warn("Found invalid achievement data in unlocked list:",e),console.warn("This suggests data corruption. Valid achievements:",t)}return t.length})(),"/",(()=>{const e=Yd.getAll();return a?e.length:e.filter(e=>!e.hidden&&!e.secret).length})()," (",(()=>{var e;if(!(null==(e=n.achievements)?void 0:e.unlocked))return 0;let t=0;const r=[],s=[];for(const i of n.achievements.unlocked){if("string"!=typeof i){s.push(i);continue}const e=Yd.getById(i);e&&"number"==typeof e.points?(t+=e.points,r.push(i)):s.push(i)}return s.length>0&&(console.warn("Achievement data needs cleanup - found invalid data:",s),console.log("Achievement Points Breakdown:",{totalInUnlockedArray:n.achievements.unlocked.length,validAchievements:r.length,validAchievementIds:r,invalidData:s,calculatedPoints:t,maxPossiblePoints:576,pointsPerAchievement:r.map(e=>{const t=Yd.getById(e);return{id:e,name:null==t?void 0:t.name,points:null==t?void 0:t.points}})})),t})()," points)"]}),ne.jsxs("label",{className:"flex items-center space-x-2",children:[ne.jsx("input",{type:"checkbox",checked:a,onChange:e=>{o(e.target.checked)},className:"rounded"}),ne.jsx("span",{className:"text-sm text-gray-300",children:"Show Hidden"})]})]})]}),ne.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{id:"all",name:"All",icon:""},{id:"production",name:"Production",icon:""},{id:"building",name:"Building",icon:""},{id:"research",name:"Research",icon:""},{id:"prestige",name:"Prestige",icon:""},{id:"trading",name:"Trading",icon:""},{id:"milestone",name:"Milestone",icon:""},{id:"special",name:"Special",icon:""}].map(e=>ne.jsxs("button",{onClick:()=>i(e.id),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors "+(s===e.id?"bg-blue-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:[e.icon," ",e.name]},e.id))}),ne.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h().map(e=>{const t=m(e.id),r=(e=>{var t,r;if(!e.progress||!e.maxProgress)return 0;const s=(null==(r=null==(t=n.achievements)?void 0:t.progress)?void 0:r[e.id])||0;return Math.min(s/e.maxProgress*100,100)})(e);return ne.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all ${t?"border-green-500 bg-green-900/20":"border-gray-600 bg-gray-700"} ${e.hidden?"opacity-75":""}`,children:[ne.jsxs("div",{className:"flex items-start justify-between mb-2",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[e.iconImage?ne.jsx("img",{src:e.iconImage,alt:`${e.name} icon`,className:"w-8 h-8 object-contain",onError:t=>{console.warn(`Failed to load achievement icon: ${e.iconImage}`),t.target.style.display="none"}}):ne.jsx("span",{className:"text-2xl",children:e.icon}),ne.jsxs("div",{children:[ne.jsx("h3",{className:"font-semibold "+(t?"text-green-400":"text-gray-200"),children:e.name}),ne.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${u(e.rarity)}`,children:d(e.rarity)})]})]}),ne.jsxs("div",{className:"text-right",children:[ne.jsx("div",{className:"text-lg font-bold text-blue-600",children:e.points}),ne.jsx("div",{className:"text-xs text-gray-500",children:"points"})]})]}),ne.jsx("p",{className:"text-sm text-gray-300 mb-3",children:e.description}),e.progress&&e.maxProgress&&ne.jsxs("div",{className:"mb-3",children:[ne.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[ne.jsx("span",{children:"Progress"}),ne.jsxs("span",{children:[Math.floor(r),"%"]})]}),ne.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2",children:ne.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${r}%`}})})]}),t&&ne.jsxs("div",{className:"flex items-center space-x-1 text-green-400 text-sm",children:[ne.jsx("span",{children:""}),ne.jsx("span",{children:"Unlocked"})]}),e.hidden&&ne.jsxs("div",{className:"flex items-center space-x-1 text-gray-400 text-sm",children:[ne.jsx("span",{children:""}),ne.jsx("span",{children:"Hidden"})]})]},e.id)})}),0===h().length&&ne.jsx("div",{className:"text-center py-8 text-gray-400",children:"No achievements found for this category."})]})},aw=({onOpenInventory:e})=>{const{gameState:t,craftBooster:n,activateBooster:r,canAfford:s,getBoosterCooldownRemaining:i,isBoosterOnCooldown:a}=lh(),[o,l]=G.useState(!0),[c,u]=G.useState(Date.now()),{currentEra:d}=xh(),[h,m]=G.useState(null);G.useEffect(()=>{const e=setInterval(()=>{u(Date.now())},1e3);return()=>clearInterval(e)},[]);const g=t.boosters.unlocked.map(e=>pd[e]).filter(e=>e&&!e.disabled),p=t.boosters.active.map(e=>({booster:pd[e.boosterId],remaining:Math.max(0,Math.ceil((e.expiresAt-c)/1e3))})).filter(e=>e.remaining>0);if(0===g.length)return null;const f=e=>{const t=Math.floor(e/60),n=e%60;return t>0?`${t}m ${n}s`:`${n}s`},x=e=>{switch(e.effect.type){case"productionMultiplier":return`+${Math.round(100*(e.effect.value-1))}% Production Speed`;case"researchSpeedMultiplier":return`${e.effect.value}x Research Speed`;case"gatheringMultiplier":return`${e.effect.value}x Manual Gathering`;case"instantQueueComplete":return"Instant Building Completion";case"miniGameCooldownReduction":return`-${Math.round(100*e.effect.value)}% Mini-Game Cooldowns`;default:return""}},b=(e,t)=>{const n=t.currentTarget.getBoundingClientRect();m({id:e,top:n.top})},y=()=>{m(null)};return ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{className:`fixed bottom-4 left-4 z-30 bg-gray-900/95 backdrop-blur-md rounded-xl border ${d.theme.accent} ${d.theme.glowClass} shadow-2xl w-80`,children:[ne.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-700",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("span",{className:"text-lg",children:""}),ne.jsx("h3",{className:`font-bold text-sm bg-gradient-to-r ${d.theme.primary} bg-clip-text text-transparent`,children:"Boosters"})]}),ne.jsxs("div",{className:"flex items-center space-x-2",children:[e&&ne.jsx("button",{onClick:e,className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",title:"Open Booster Inventory",children:""}),ne.jsx("button",{onClick:()=>l(!o),className:"text-gray-400 hover:text-white transition-colors",children:o?"":"+"})]})]}),o&&ne.jsxs("div",{className:"p-3 max-h-[calc(100vh-8rem)] overflow-y-auto scrollbar-thin",children:[p.length>0&&ne.jsxs("div",{className:"mb-3",children:[ne.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2",children:"Active Effects"}),ne.jsx("div",{className:"space-y-2",children:p.map(({booster:e,remaining:t})=>ne.jsxs("div",{className:`p-2 rounded-lg border-2 ${d.theme.accent} bg-gradient-to-r from-green-900/30 to-blue-900/30 animate-pulse relative`,onMouseEnter:t=>b(`active-${e.id}`,t),onMouseLeave:y,children:[ne.jsx("div",{className:"flex items-center justify-between",children:ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("span",{className:"text-lg",children:e.icon}),ne.jsxs("div",{className:"flex-1",children:[ne.jsx("div",{className:"text-xs font-semibold text-white",children:e.name}),ne.jsx("div",{className:"text-xs text-green-400 font-medium",children:x(e)}),ne.jsx("div",{className:"text-xs text-gray-400",children:f(t)})]})]})}),ne.jsx("div",{className:"mt-1 bg-gray-800 rounded-full h-1",children:ne.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-full rounded-full transition-all duration-1000",style:{width:t/e.duration*100+"%"}})})]},e.id))})]}),ne.jsxs("div",{children:[ne.jsx("h4",{className:"text-xs font-semibold text-gray-400 mb-2",children:"Available Boosters"}),ne.jsx("div",{className:"space-y-2",children:g.map(e=>{const o=t.boosters.inventory[e.id]||0,l=s(e.craftCost),c=a(e.id),u=i(e.id),h=p.some(t=>t.booster.id===e.id);return ne.jsxs("div",{className:`p-2 rounded-lg border ${d.theme.accent} bg-gray-800/50 ${h?"ring-2 ring-green-500":""} relative`,onMouseEnter:t=>b(e.id,t),onMouseLeave:y,children:[ne.jsx("div",{className:"flex items-center justify-between mb-1",children:ne.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[ne.jsx("span",{className:"text-base",children:e.icon}),ne.jsxs("div",{className:"flex-1",children:[ne.jsx("div",{className:"text-xs font-semibold text-white",children:e.name}),ne.jsx("div",{className:"text-xs text-blue-400 font-medium",children:x(e)}),ne.jsxs("div",{className:"text-xs text-gray-400",children:["Owned: ",o,c&&ne.jsxs("span",{className:"ml-1 text-red-400",children:["(CD: ",f(u),")"]})]})]})]})}),ne.jsxs("div",{className:"flex space-x-1 mt-2",children:[ne.jsx("button",{onClick:()=>{return t=e.id,void(n(t)||console.log("Cannot craft booster - check requirements"));var t},disabled:!l,className:"flex-1 px-2 py-1 rounded text-xs font-medium transition-all "+(l?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"),title:`Craft: ${Object.entries(e.craftCost).map(([e,t])=>`${t} ${e}`).join(", ")}`,children:" Craft"}),ne.jsx("button",{onClick:()=>{return t=e.id,void(r(t)||console.log("Cannot activate booster - check inventory or cooldown"));var t},disabled:o<=0||c,className:"flex-1 px-2 py-1 rounded text-xs font-medium transition-all "+(o>0&&!c?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"),title:e.description,children:" Activate"})]})]},e.id)})})]})]})]}),h&&(()=>{const e=h.id.replace("active-",""),t=pd[e];return t?ne.jsxs("div",{className:"fixed left-[22rem] w-72 p-3 bg-gray-900 border border-gray-700 rounded-lg shadow-xl z-[100] pointer-events-none",style:{top:`${h.top}px`},children:[ne.jsx("div",{className:"font-semibold text-white text-sm mb-1",children:t.name}),ne.jsx("div",{className:"text-xs text-gray-300 mb-2",children:t.description}),ne.jsxs("div",{className:"text-xs text-blue-400 font-medium mb-1",children:["Effect: ",x(t)]}),ne.jsxs("div",{className:"text-xs text-gray-400",children:["Duration: ",t.duration>0?`${Math.floor(t.duration/60)}m`:"Instant"," | Cooldown: ",Math.floor(t.cooldown/60),"m"]}),ne.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cost: ",Object.entries(t.craftCost).map(([e,t])=>`${t} ${e}`).join(", ")]})]}):null})()]})},ow=({isOpen:e,onClose:t})=>{const{gameState:n,craftBooster:r,activateBooster:s,canAfford:i,getBoosterCooldownRemaining:a,isBoosterOnCooldown:o}=lh(),[l,c]=G.useState(Date.now()),{currentEra:u}=xh();if(G.useEffect(()=>{const e=setInterval(()=>{c(Date.now())},1e3);return()=>clearInterval(e)},[]),!e)return null;const d=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60;return t>0?`${t}h ${n}m`:n>0?`${n}m ${r}s`:`${r}s`},h=e=>0===e?"Instant":e>=60?`${Math.floor(e/60)} min`:`${e}s`,m=Object.values(pd),g=n.boosters.unlocked,p=n.boosters.active;return ne.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",onClick:t,children:ne.jsxs("div",{className:`bg-gray-800/95 rounded-lg p-4 md:p-6 max-w-4xl w-full mx-2 md:mx-4 max-h-[90vh] overflow-y-auto border ${u.theme.accent} ${u.theme.glowClass}`,onClick:e=>e.stopPropagation(),children:[ne.jsxs("div",{className:"flex justify-between items-center mb-4",children:[ne.jsxs("div",{className:"flex items-center space-x-3",children:[ne.jsx("span",{className:"text-3xl",children:""}),ne.jsx("h2",{className:`text-2xl font-bold bg-gradient-to-r ${u.theme.primary} bg-clip-text text-transparent`,children:"Booster Inventory"})]}),ne.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white text-2xl transition-colors",children:""})]}),p.length>0&&ne.jsxs("div",{className:"mb-6",children:[ne.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-3",children:" Active Effects"}),ne.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:p.map(e=>{const t=pd[e.boosterId],n=Math.max(0,Math.ceil((e.expiresAt-l)/1e3)),r=n/t.duration*100;return ne.jsxs("div",{className:`p-4 rounded-lg border-2 ${u.theme.accent} bg-gradient-to-br from-green-900/40 to-blue-900/40`,children:[ne.jsx("div",{className:"flex items-start justify-between mb-2",children:ne.jsxs("div",{className:"flex items-center space-x-3",children:[ne.jsx("span",{className:"text-3xl",children:t.icon}),ne.jsxs("div",{children:[ne.jsx("div",{className:"font-bold text-white",children:t.name}),ne.jsx("div",{className:"text-sm text-gray-300",children:t.description})]})]})}),ne.jsxs("div",{className:"mt-3",children:[ne.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[ne.jsx("span",{children:"Time Remaining"}),ne.jsx("span",{className:"font-semibold",children:d(n)})]}),ne.jsx("div",{className:"bg-gray-800 rounded-full h-2",children:ne.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-full rounded-full transition-all duration-1000",style:{width:`${r}%`}})})]})]},e.boosterId)})})]}),ne.jsxs("div",{children:[ne.jsx("h3",{className:"text-lg font-semibold text-blue-400 mb-3",children:" Available Boosters"}),ne.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(e=>{var t,l,c,m;if(e.disabled)return null;const f=g.includes(e.id),x=n.boosters.inventory[e.id]||0,b=i(e.craftCost),y=o(e.id),v=a(e.id),w=p.some(t=>t.boosterId===e.id);return f?ne.jsxs("div",{className:`p-4 rounded-lg border ${u.theme.accent} bg-gray-900/70 ${w?"ring-2 ring-green-500":""}`,children:[ne.jsxs("div",{className:"flex items-start justify-between mb-3",children:[ne.jsxs("div",{className:"flex items-center space-x-3",children:[ne.jsx("span",{className:"text-3xl",children:e.icon}),ne.jsxs("div",{children:[ne.jsx("div",{className:"font-bold text-white",children:e.name}),ne.jsxs("div",{className:"text-xs text-gray-400",children:["Owned: ",x]})]})]}),w&&ne.jsx("span",{className:"px-2 py-1 rounded bg-green-600 text-white text-xs font-semibold",children:"ACTIVE"})]}),ne.jsx("p",{className:"text-sm text-gray-300 mb-3",children:e.description}),ne.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 text-xs",children:[ne.jsxs("div",{className:"bg-gray-800/50 rounded p-2",children:[ne.jsx("div",{className:"text-gray-400",children:"Duration"}),ne.jsx("div",{className:"font-semibold text-white",children:h(e.duration)})]}),ne.jsxs("div",{className:"bg-gray-800/50 rounded p-2",children:[ne.jsx("div",{className:"text-gray-400",children:"Cooldown"}),ne.jsx("div",{className:"font-semibold text-white",children:h(e.cooldown)})]})]}),ne.jsxs("div",{className:"mb-3",children:[ne.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Craft Cost:"}),ne.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(e.craftCost).map(([e,t])=>ne.jsxs("div",{className:"flex items-center space-x-1 bg-gray-800/50 rounded px-2 py-1",children:[ne.jsx(hh,{resourceType:e,size:"sm"}),ne.jsx("span",{className:"text-xs font-semibold",children:t})]},e))})]}),y&&ne.jsxs("div",{className:"mb-3 px-2 py-1 bg-red-900/30 border border-red-700 rounded text-xs text-red-400",children:[" Cooldown: ",d(v)]}),ne.jsxs("div",{className:"flex space-x-2",children:[ne.jsx("button",{onClick:()=>{return t=e.id,void r(t);var t},disabled:!b,className:"flex-1 px-3 py-2 rounded font-medium text-sm transition-all "+(b?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"),children:" Craft"}),ne.jsx("button",{onClick:()=>{return t=e.id,void s(t);var t},disabled:x<=0||y,className:"flex-1 px-3 py-2 rounded font-medium text-sm transition-all "+(x>0&&!y?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"),children:" Activate"})]})]},e.id):ne.jsx("div",{className:"p-4 rounded-lg border border-gray-700 bg-gray-900/50 opacity-60",children:ne.jsxs("div",{className:"flex items-start space-x-3",children:[ne.jsx("span",{className:"text-2xl opacity-50",children:""}),ne.jsxs("div",{className:"flex-1",children:[ne.jsx("div",{className:"font-bold text-gray-500",children:"Locked Booster"}),ne.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[(null==(t=e.unlockRequirement)?void 0:t.research)&&ne.jsxs("span",{children:["Requires: ",null==(l=n.research[e.unlockRequirement.research])?void 0:l.name]}),(null==(c=e.unlockRequirement)?void 0:c.building)&&ne.jsxs("span",{children:["Requires: ",null==(m=n.buildings[e.unlockRequirement.building])?void 0:m.name," Level ",e.unlockRequirement.buildingLevel||1]})]})]})]})},e.id)})})]})]})})},lw=()=>{const[e,t]=G.useState("resources"),[n,r]=G.useState(!1),[s,i]=G.useState(!1),[c,h]=G.useState(!1),[m,g]=G.useState(!1),[p,f]=G.useState(!1),[x,b]=G.useState(!1),{updateStorageLimits:y,saveGame:v,gameState:w}=lh(),{playMenuOpen:k,playMenuClose:j}=zd(),{currentEra:N}=xh(),C=Y.useRef(null),S=Y.useRef(null),M=Y.useRef(null),_=["resources","buildings","research","trading","automation","prestige","achievements","stats","settings"],P=_.findIndex(t=>t===e),T=((e,t)=>{const[n,r]=G.useState(null),[s,i]=G.useState(null),[a,o]=G.useState(null),[l,c]=G.useState(null);return{onTouchStart:e=>{i(null),r(e.targetTouches[0].clientX),c(e.targetTouches[0].clientY),o(null)},onTouchMove:e=>{i(e.targetTouches[0].clientX)},onTouchEnd:r=>{if(!n||!s||!l)return;const i=n-s,a=i<-80,c=Math.abs(r.changedTouches[0].clientY-l)<50;i>80&&c&&(o("left"),e(),setTimeout(()=>o(null),300)),a&&c&&(o("right"),t(),setTimeout(()=>o(null),300))},swipeDirection:a}})(()=>{P<_.length-1&&t(_[P+1])},()=>{P>0&&t(_[P-1])}),{swipeDirection:E}=T,R=((e,t)=>{var n={};for(var r in e)o.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&a)for(var r of a(e))t.indexOf(r)<0&&l.call(e,r)&&(n[r]=e[r]);return n})(T,["swipeDirection"]);Y.useEffect(()=>{y()},[]),Y.useEffect(()=>{const e=()=>{v()};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[v]);const A=Object.values(w.resources).filter(e=>e.unlocked),L=(e,t)=>e/t*100;return ne.jsxs("div",{className:`min-h-screen ${N.theme.background} text-white transition-all duration-1000 overflow-x-hidden`,children:[ne.jsxs("div",{className:"block",children:[ne.jsxs("div",{className:"grid gap-2 md:gap-4 p-2 md:p-4 h-[calc(100vh-1rem)] md:h-[calc(100vh-2rem)] grid-cols-12",children:[ne.jsx("div",{className:"col-span-4 space-y-2 md:space-y-4",children:ne.jsxs("div",{className:`bg-gray-800/50 rounded-lg p-2 md:p-4 border ${N.theme.accent} ${N.theme.glowClass} backdrop-blur-sm h-full`,children:[ne.jsx("h2",{className:`text-sm md:text-lg font-bold mb-2 md:mb-3 bg-gradient-to-r ${N.theme.primary} bg-clip-text text-transparent`,children:"Resources"}),ne.jsx("div",{className:"overflow-y-auto h-[calc(100%-3rem)] scrollbar-thin",children:ne.jsx(gh,{compact:!0})})]})}),ne.jsx("div",{className:"col-span-8 space-y-2 md:space-y-4",children:ne.jsxs("div",{className:`bg-gray-800/50 rounded-lg p-2 md:p-4 border ${N.theme.accent} ${N.theme.glowClass} h-[calc(100vh-1rem)] md:h-[calc(100vh-2rem)] backdrop-blur-sm`,children:[ne.jsxs("div",{className:"mb-2 md:mb-3",children:[ne.jsx("h2",{className:`text-sm md:text-lg font-bold bg-gradient-to-r ${N.theme.primary} bg-clip-text text-transparent`,children:"Buildings"}),ne.jsx(vh,{})]}),ne.jsx("div",{className:"h-[calc(100%-2.5rem)] md:h-[calc(100%-3rem)] overflow-y-auto pb-32",children:ne.jsx(jh,{})})]})})]}),ne.jsxs("div",{className:"hidden",children:[ne.jsx(Nh,{ref:C,compact:!0}),ne.jsx(rw,{ref:S,compact:!0}),ne.jsx(sw,{ref:M,compact:!0})]}),ne.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-40",children:ne.jsxs("div",{className:"flex gap-2 justify-center items-center bg-gray-900/98 backdrop-blur-md rounded-xl p-3 border border-gray-700/70 shadow-2xl shadow-black/50",children:[ne.jsxs("button",{onClick:()=>{C.current&&C.current.openModal(),k()},className:`bg-gray-800/90 hover:bg-gray-700/90 text-white px-3 py-2 rounded-lg ${N.theme.glowClass} transition-all duration-200 backdrop-blur-sm border ${N.theme.accent} text-sm font-medium flex items-center space-x-2 hover:scale-105`,title:"Research",children:[ne.jsx("span",{children:""}),ne.jsx("span",{className:"hidden sm:inline",children:"Research"})]}),(()=>{var e;const t=null==(e=w.research.basicTrading)?void 0:e.completed;return ne.jsxs("button",{onClick:()=>{t&&S.current&&(S.current.openModal(),k())},disabled:!t,className:`bg-gray-800/90 text-white px-3 py-2 rounded-lg ${N.theme.glowClass} transition-all duration-200 backdrop-blur-sm border ${N.theme.accent} text-sm font-medium flex items-center space-x-2 ${t?"hover:bg-gray-700/90 hover:scale-105 cursor-pointer":"opacity-50 cursor-not-allowed"}`,title:t?"Trading":"Unlock Basic Trading research to use Trading",children:[ne.jsx("span",{children:t?"":""}),ne.jsx("span",{className:"hidden sm:inline",children:"Trading"})]})})(),(()=>{const e=w.unlockedFeatures.includes("automation");return ne.jsxs("button",{onClick:()=>{e&&M.current&&(M.current.openModal(),k())},disabled:!e,className:`bg-gray-800/90 text-white px-3 py-2 rounded-lg ${N.theme.glowClass} transition-all duration-200 backdrop-blur-sm border ${N.theme.accent} text-sm font-medium flex items-center space-x-2 ${e?"hover:bg-gray-700/90 hover:scale-105 cursor-pointer":"opacity-50 cursor-not-allowed"}`,title:e?"Automation":"Unlock Basic Automation research to use Automation",children:[ne.jsx("span",{children:e?"":""}),ne.jsx("span",{className:"hidden sm:inline",children:"Automation"})]})})(),ne.jsxs("button",{onClick:()=>{g(!0),k()},className:`bg-gray-800/90 hover:bg-gray-700/90 text-white px-3 py-2 rounded-lg ${N.theme.glowClass} transition-all duration-200 backdrop-blur-sm border ${N.theme.accent} text-sm font-medium flex items-center space-x-2 hover:scale-105`,title:"Statistics",children:[ne.jsx("span",{children:""}),ne.jsx("span",{className:"hidden sm:inline",children:"Statistics"})]}),ne.jsxs("button",{onClick:()=>{h(!0),k()},className:`bg-gray-800/90 hover:bg-gray-700/90 text-white px-3 py-2 rounded-lg ${N.theme.glowClass} transition-all duration-200 backdrop-blur-sm border ${N.theme.accent} text-sm font-medium flex items-center space-x-2 hover:scale-105`,title:"Achievements",children:[ne.jsx("span",{children:""}),ne.jsx("span",{className:"hidden sm:inline",children:"Achievements"})]}),ne.jsxs("button",{onClick:()=>{f(!0),k()},className:"bg-gradient-to-r from-purple-600/90 to-pink-600/90 hover:from-purple-700/90 hover:to-pink-700/90 text-white px-3 py-2 rounded-lg shadow-purple-500/30 shadow-lg transition-all duration-200 backdrop-blur-sm border-2 border-purple-500/50 text-sm font-medium flex items-center space-x-2 hover:scale-105",title:"Prestige",children:[ne.jsx("span",{children:""}),ne.jsx("span",{className:"hidden sm:inline",children:"Prestige"})]}),ne.jsxs("button",{onClick:()=>{i(!0),k()},className:`bg-gray-800/90 hover:bg-gray-700/90 text-white px-3 py-2 rounded-lg ${N.theme.glowClass} transition-all duration-200 backdrop-blur-sm border ${N.theme.accent} text-sm font-medium flex items-center space-x-2 hover:scale-105`,title:"Settings",children:[ne.jsx("span",{children:""}),ne.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]})}),s&&ne.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",onKeyDown:e=>{"Escape"===e.key&&(i(!1),j())},tabIndex:-1,ref:e=>{e&&setTimeout(()=>{e.contains(document.activeElement)||e.focus()},100)},children:ne.jsxs("div",{className:`bg-gray-800/95 rounded-lg p-4 md:p-6 max-w-2xl w-full mx-2 md:mx-4 max-h-[90vh] overflow-y-auto border ${N.theme.accent} ${N.theme.glowClass}`,children:[ne.jsxs("div",{className:"flex justify-between items-center mb-4",children:[ne.jsx("h2",{className:`text-2xl font-bold bg-gradient-to-r ${N.theme.primary} bg-clip-text text-transparent`,children:"Settings"}),ne.jsx("button",{onClick:()=>{i(!1),j()},className:"text-gray-400 hover:text-white text-2xl transition-colors",children:""})]}),ne.jsx(Lh,{})]})}),c&&ne.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",onKeyDown:e=>{"Escape"===e.key&&(h(!1),j())},tabIndex:-1,ref:e=>{e&&setTimeout(()=>{e.contains(document.activeElement)||e.focus()},100)},children:ne.jsxs("div",{className:`bg-gray-800/95 rounded-lg p-4 md:p-6 max-w-6xl w-full mx-2 md:mx-4 max-h-[90vh] overflow-y-auto border ${N.theme.accent} ${N.theme.glowClass}`,children:[ne.jsxs("div",{className:"flex justify-between items-center mb-4",children:[ne.jsx("h2",{className:`text-2xl font-bold bg-gradient-to-r ${N.theme.primary} bg-clip-text text-transparent`,children:"Achievements"}),ne.jsx("button",{onClick:()=>{h(!1),j()},className:"text-gray-400 hover:text-white text-2xl transition-colors",children:""})]}),ne.jsx(iw,{})]})}),ne.jsx(Sh,{isOpen:m,onClose:()=>{g(!1),j()}}),ne.jsx(Ph,{isOpen:p,onClose:()=>{f(!1),j()}}),ne.jsx(aw,{onOpenInventory:()=>{b(!0),k()}}),ne.jsx(ow,{isOpen:x,onClose:()=>{b(!1),j()}})]}),ne.jsxs("div",{className:"hidden",children:[ne.jsx(hd,{activeTab:e,setActiveTab:t}),ne.jsx("div",{className:"fixed top-4 right-4 z-40",children:ne.jsxs("button",{onClick:()=>r(!n),className:"px-3 py-2 rounded-lg shadow-lg transition-colors text-sm font-medium "+(n?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-800 hover:bg-gray-700 text-gray-300"),title:n?"Resources: Always Visible":"Resources: Static",children:[" ",n?"Sticky":"Static"]})}),n&&ne.jsxs("div",{className:"fixed bottom-16 left-0 right-0 bg-gray-900/95 border-t border-gray-700 z-30 p-2 max-h-32 overflow-y-auto backdrop-blur-sm",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ne.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Resources"}),ne.jsxs("span",{className:"text-xs text-gray-500",children:[A.length," items"]})]}),ne.jsx("div",{className:"grid grid-cols-2 gap-1",children:A.map(e=>{const t=L(e.value,e.storageLimit),n=t>=100;return ne.jsxs("div",{className:"flex items-center justify-between p-1 bg-gray-700/50 rounded text-xs",title:`${e.name}: ${Math.floor(e.value)}/${e.storageLimit}`,children:[ne.jsxs("div",{className:"flex items-center space-x-1",children:[ne.jsx(hh,{resourceType:e.id,size:"sm"}),ne.jsx("span",{className:"text-gray-300 truncate",children:e.name})]}),ne.jsxs("div",{className:"flex items-center space-x-1",children:[ne.jsx("span",{className:"text-xs "+(t>=90?"text-red-400":t>=75?"text-yellow-400":"text-gray-300"),children:Math.floor(e.value)}),n&&ne.jsx("span",{className:"text-red-400 text-xs",children:""})]})]},e.id)})})]}),E&&ne.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 pointer-events-none swipe-indicator "+("left"===E?"text-blue-400":"text-green-400"),children:ne.jsx("div",{className:"text-6xl opacity-80",children:"left"===E?"":""})}),ne.jsxs("main",d(u({className:"container mx-auto w-full px-4 pb-20 touch-pan-y mobile-scroll-container "+(n?"pb-32":"")},R),{children:[!n&&ne.jsxs("div",{className:"mb-4",children:[ne.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ne.jsx("span",{className:"text-sm font-semibold text-gray-300",children:"Resources"}),ne.jsxs("span",{className:"text-xs text-gray-500",children:[A.length," items"]})]}),ne.jsx("div",{className:"grid grid-cols-2 gap-1",children:A.map(e=>{const t=L(e.value,e.storageLimit),n=t>=100;return ne.jsxs("div",{className:"flex items-center justify-between p-1 bg-gray-700/50 rounded text-xs",title:`${e.name}: ${Math.floor(e.value)}/${e.storageLimit}`,children:[ne.jsxs("div",{className:"flex items-center space-x-1",children:[ne.jsx(hh,{resourceType:e.id,size:"sm"}),ne.jsx("span",{className:"text-gray-300 truncate",children:e.name})]}),ne.jsxs("div",{className:"flex items-center space-x-1",children:[ne.jsx("span",{className:"text-xs "+(t>=90?"text-red-400":t>=75?"text-yellow-400":"text-gray-300"),children:Math.floor(e.value)}),n&&ne.jsx("span",{className:"text-red-400 text-xs",children:""})]})]},e.id)})})]}),"resources"===e&&ne.jsxs(ne.Fragment,{children:[ne.jsx("div",{className:"mb-4",children:ne.jsx(yh,{compact:!0})}),ne.jsx("div",{className:"mt-4",children:ne.jsx(gh,{compact:!0})})]}),"buildings"===e&&ne.jsx(jh,{}),"research"===e&&ne.jsx(Nh,{ref:C}),"trading"===e&&ne.jsx(rw,{ref:S}),"factory"===e&&ne.jsx(Rh,{}),"stats"===e&&ne.jsx(Ch,{}),"settings"===e&&ne.jsx(Lh,{}),"prestige"===e&&ne.jsx(_h,{}),"automation"===e&&ne.jsx(sw,{ref:M}),"achievements"===e&&ne.jsx(iw,{})]}))]})]})},cw=({onGameStart:e})=>{const[t,n]=G.useState(!1);return ne.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:ne.jsxs("div",{className:"text-center max-w-2xl mx-auto px-6",children:[ne.jsxs("div",{className:"mb-8",children:[ne.jsx("h1",{className:"text-6xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent",children:"Factory Works Idle"}),ne.jsx("p",{className:"text-xl text-gray-300 mb-2",children:"Build your industrial empire from the ground up"}),ne.jsx("p",{className:"text-gray-400",children:"Gather resources, research technologies, and automate your factory"})]}),ne.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 text-sm",children:[ne.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[ne.jsx("div",{className:"text-2xl mb-2",children:""}),ne.jsx("h3",{className:"font-semibold text-gray-200 mb-1",children:"Build & Automate"}),ne.jsx("p",{className:"text-gray-400",children:"Construct buildings and automate resource production"})]}),ne.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[ne.jsx("div",{className:"text-2xl mb-2",children:""}),ne.jsx("h3",{className:"font-semibold text-gray-200 mb-1",children:"Research & Advance"}),ne.jsx("p",{className:"text-gray-400",children:"Unlock new technologies and expand your capabilities"})]}),ne.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[ne.jsx("div",{className:"text-2xl mb-2",children:""}),ne.jsx("h3",{className:"font-semibold text-gray-200 mb-1",children:"Trade & Prosper"}),ne.jsx("p",{className:"text-gray-400",children:"Exchange resources and build trade networks"})]})]}),ne.jsx("button",{onClick:()=>{n(!0),setTimeout(()=>{e()},500)},disabled:t,className:`\n            px-8 py-4 text-xl font-semibold rounded-lg transition-all duration-300\n            ${t?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105"}\n          `,children:t?ne.jsxs("div",{className:"flex items-center justify-center",children:[ne.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),"Starting Game..."]}):"Start Game"}),ne.jsx("div",{className:"mt-8 pt-6 border-t border-gray-700",children:ne.jsx("p",{className:"text-xs text-gray-500",children:"An idle factory simulation game"})})]})})},uw=()=>{var e,t;const{developerTools:n,gameState:r,resetGame:s,calculatePrestigePoints:i,performPrestige:a}=lh(),{currentEra:o,unlockedEras:l}=xh(),[c,u]=G.useState("general"),[d,h]=G.useState(!1),[m,g]=G.useState(10);if("localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname)return null;const p=[{id:"basic",name:"Stone Age",resources:[]},{id:"mining",name:"Iron Age",resources:["iron"]},{id:"electronics",name:"Electronics Era",resources:["iron","copper","circuit"]},{id:"computing",name:"Digital Age",resources:["iron","copper","circuit","computer"]},{id:"robotics",name:"Robotics Era",resources:["iron","copper","circuit","computer","robot"]},{id:"quantum",name:"Quantum Age",resources:["iron","copper","circuit","computer","robot","quantum"]},{id:"nano",name:"Nano Era",resources:["iron","copper","circuit","computer","robot","quantum","nanite"]},{id:"fusion",name:"Fusion Age",resources:["iron","copper","circuit","computer","robot","quantum","nanite","fusion"]},{id:"antimatter",name:"Antimatter Era",resources:["iron","copper","circuit","computer","robot","quantum","nanite","fusion","antimatter"]},{id:"singularity",name:"Singularity",resources:["iron","copper","circuit","computer","robot","quantum","nanite","fusion","antimatter","singularity"]}];return d?ne.jsx("button",{onClick:()=>h(!1),className:"fixed bottom-2 md:bottom-4 right-2 md:right-4 z-50 bg-red-900 hover:bg-red-800 p-2 rounded-lg shadow-lg border border-red-700 transition-colors",title:"Show Developer Tools",children:ne.jsx("span",{className:"text-white text-lg",children:""})}):ne.jsxs("div",{className:"fixed bottom-2 md:bottom-4 right-2 md:right-4 z-50 bg-red-900 p-2 md:p-4 rounded-lg shadow-lg border border-red-700 max-w-xs md:max-w-sm",children:[ne.jsxs("div",{className:"flex justify-between items-center mb-3",children:[ne.jsx("h3",{className:"text-white font-bold",children:"Developer Tools"}),ne.jsx("button",{onClick:()=>h(!0),className:"text-red-300 hover:text-white transition-colors text-sm px-2 py-1 rounded hover:bg-red-800",title:"Hide Developer Tools",children:""})]}),ne.jsxs("div",{className:"grid grid-cols-3 gap-1 mb-3 bg-red-800 rounded p-1",children:[ne.jsx("button",{onClick:()=>u("general"),className:"py-1 px-2 text-xs rounded transition-colors "+("general"===c?"bg-red-600 text-white":"text-red-200 hover:text-white"),children:"General"}),ne.jsx("button",{onClick:()=>u("tech"),className:"py-1 px-2 text-xs rounded transition-colors "+("tech"===c?"bg-red-600 text-white":"text-red-200 hover:text-white"),children:"Tech"}),ne.jsx("button",{onClick:()=>u("prestige"),className:"py-1 px-2 text-xs rounded transition-colors "+("prestige"===c?"bg-red-600 text-white":"text-red-200 hover:text-white"),children:"Prestige"}),ne.jsx("button",{onClick:()=>u("buildings"),className:"py-1 px-2 text-xs rounded transition-colors "+("buildings"===c?"bg-red-600 text-white":"text-red-200 hover:text-white"),children:"Buildings"}),ne.jsx("button",{onClick:()=>u("research"),className:"py-1 px-2 text-xs rounded transition-colors "+("research"===c?"bg-red-600 text-white":"text-red-200 hover:text-white"),children:"Research"})]}),"general"===c&&ne.jsxs("div",{className:"space-y-2",children:[ne.jsx("button",{onClick:()=>{n.maxResources()},className:"w-full bg-red-700 hover:bg-red-800 text-white py-1 px-3 rounded text-sm",children:"Max Resources"}),ne.jsx("button",{onClick:()=>{n.unlockAll()},className:"w-full bg-red-700 hover:bg-red-800 text-white py-1 px-3 rounded text-sm",children:"Unlock All"}),ne.jsxs("div",{className:"pt-2 border-t border-red-700",children:[ne.jsx("button",{onClick:()=>n.unlockOrphanedResources(),className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-1 px-3 rounded text-sm",title:"Unlocks resources that are stuck in 'locked' state but not in any queue",children:" Unlock Orphaned Resources"}),ne.jsx("div",{className:"text-xs text-red-300 italic mt-1",children:'Fixes resources stuck in "locked" state (check console for details)'})]})]}),"prestige"===c&&ne.jsxs("div",{className:"space-y-3",children:[ne.jsxs("div",{className:"bg-red-800/30 rounded p-3",children:[ne.jsx("div",{className:"text-xs text-red-200 mb-2",children:"Current Status"}),ne.jsxs("div",{className:"space-y-1 text-xs",children:[ne.jsxs("div",{className:"flex justify-between",children:[ne.jsx("span",{className:"text-white",children:"Prestige Level:"}),ne.jsx("span",{className:"text-purple-300 font-semibold",children:r.prestige.level})]}),ne.jsxs("div",{className:"flex justify-between",children:[ne.jsx("span",{className:"text-white",children:"Current Points:"}),ne.jsx("span",{className:"text-purple-300 font-semibold",children:r.prestige.points})]}),ne.jsxs("div",{className:"flex justify-between",children:[ne.jsx("span",{className:"text-white",children:"Total Points:"}),ne.jsx("span",{className:"text-purple-300 font-semibold",children:r.prestige.totalPoints})]}),ne.jsxs("div",{className:"flex justify-between",children:[ne.jsx("span",{className:"text-white",children:"Available Points:"}),ne.jsx("span",{className:"text-green-300 font-semibold",children:i()})]}),ne.jsxs("div",{className:"flex justify-between",children:[ne.jsx("span",{className:"text-white",children:"Singularity:"}),ne.jsx("span",{className:(null==(e=r.resources.singularity)?void 0:e.unlocked)?"text-green-300":"text-red-300",children:(null==(t=r.resources.singularity)?void 0:t.unlocked)?"Unlocked":"Locked"})]}),ne.jsxs("div",{className:"flex justify-between",children:[ne.jsx("span",{className:"text-white",children:"Singularity Produced:"}),ne.jsx("span",{className:"text-gray-300",children:Math.floor(r.statistics.totalResourcesProduced.singularity||0)})]}),ne.jsxs("div",{className:"flex justify-between",children:[ne.jsx("span",{className:"text-white",children:"Research Completed:"}),ne.jsx("span",{className:"text-gray-300",children:r.statistics.researchCompleted.length})]})]})]}),ne.jsxs("div",{className:"space-y-2",children:[ne.jsx("div",{className:"text-xs text-red-200 mb-1",children:"Add Prestige Points"}),ne.jsxs("div",{className:"flex gap-1",children:[ne.jsx("button",{onClick:()=>n.addPrestigePoints(10),className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-1 px-2 rounded text-xs",children:"+10"}),ne.jsx("button",{onClick:()=>n.addPrestigePoints(50),className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-1 px-2 rounded text-xs",children:"+50"}),ne.jsx("button",{onClick:()=>n.addPrestigePoints(100),className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-1 px-2 rounded text-xs",children:"+100"})]}),ne.jsxs("div",{className:"flex gap-2 items-center",children:[ne.jsx("input",{type:"number",value:m,onChange:e=>g(Math.max(1,parseInt(e.target.value)||1)),className:"flex-1 bg-red-800 text-white px-2 py-1 rounded text-xs border border-red-600 focus:border-purple-500 focus:outline-none",min:"1"}),ne.jsx("button",{onClick:()=>n.addPrestigePoints(m),className:"px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded text-xs whitespace-nowrap",children:"Add"})]})]}),ne.jsxs("div",{className:"pt-2 border-t border-red-700 space-y-2",children:[ne.jsx("button",{onClick:()=>{console.log("=== ENABLE PRESTIGE CLICKED ==="),console.log("Before - Available Points:",i()),n.unlockPrestige(),setTimeout(()=>{console.log("After - Available Points:",i()),console.log("Check the status display above to see updates")},200)},className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-3 rounded text-sm font-semibold",children:"Enable Prestige"}),ne.jsx("div",{className:"text-xs text-red-300 italic",children:"Unlocks all buildings to level 50, completes 45+ research, produces 500+ singularity"}),ne.jsx("button",{onClick:()=>{a()?console.log("Prestige performed successfully"):console.log("Prestige failed - not enough points (need 10+)")},disabled:i()<10,className:"w-full py-2 px-3 rounded text-sm font-semibold "+(i()<10?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white"),children:"Perform Prestige"}),ne.jsx("div",{className:"text-xs text-red-300 italic",children:"Resets game with prestige bonuses (requires 10+ available points)"})]})]}),"tech"===c&&ne.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[ne.jsx("div",{className:"mb-3",children:ne.jsx("div",{className:"p-2 rounded bg-red-800/50 border border-red-600/50",children:ne.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[ne.jsx("span",{className:"text-lg",children:o.icon}),ne.jsxs("div",{className:"text-sm",children:[ne.jsx("div",{className:"font-semibold text-white",children:o.name}),ne.jsxs("div",{className:"text-xs text-red-200",children:["Era ",l.length,"/10"]})]})]})})}),p.map(e=>{const t=l.some(t=>t.id===e.id),n=o.id===e.id;return ne.jsxs("div",{className:"flex items-center justify-between p-2 bg-red-800/30 rounded text-sm",children:[ne.jsxs("div",{className:"flex items-center space-x-2",children:[ne.jsx("span",{className:"text-base",children:"singularity"===e.id?"":"antimatter"===e.id?"":"fusion"===e.id?"":"nano"===e.id?"":"quantum"===e.id?"":"robotics"===e.id?"":"computing"===e.id?"":"electronics"===e.id?"":"mining"===e.id?"":""}),ne.jsx("div",{children:ne.jsx("div",{className:"text-xs font-medium "+(n?"text-yellow-200":"text-white"),children:e.name})})]}),ne.jsxs("div",{className:"flex items-center space-x-1",children:[t&&ne.jsx("span",{className:"text-green-300 text-xs",children:""}),n&&ne.jsx("span",{className:"text-yellow-300 text-xs",children:""}),ne.jsx("button",{onClick:()=>(e=>{const t=p.find(t=>t.id===e);t&&(Object.keys(r.resources).forEach(e=>{const n=r.resources[e];(t.resources.includes(e)||"wood"===e||"stone"===e)&&(n.unlocked=!0,n.value=Math.min(n.storageLimit,1e3))}),({basic:[],mining:["mining"],electronics:["mining","electronics"],computing:["mining","electronics","computerScience"],robotics:["mining","electronics","computerScience","robotics"],quantum:["mining","electronics","computerScience","robotics","quantumPhysics"],nano:["mining","electronics","computerScience","robotics","quantumPhysics","nanotechnology"],fusion:["mining","electronics","computerScience","robotics","quantumPhysics","nanotechnology","fusionTechnology"],antimatter:["mining","electronics","computerScience","robotics","quantumPhysics","nanotechnology","fusionTechnology","antimatterPhysics"],singularity:["mining","electronics","computerScience","robotics","quantumPhysics","nanotechnology","fusionTechnology","antimatterPhysics","artificialIntelligence"]}[e]||[]).forEach(e=>{r.research[e]&&(r.research[e].completed=!0,r.research[e].unlocked=!0)}),console.log(`Unlocked tech era: ${t.name}`))})(e.id),disabled:t,className:"px-2 py-1 text-xs rounded transition-colors "+(t?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"),children:t?"Done":"Unlock"})]})]},e.id)}),ne.jsxs("div",{className:"pt-2 mt-3 border-t border-red-700 space-y-2",children:[ne.jsx("button",{onClick:()=>{localStorage.removeItem("techUnlockNotifications"),console.log("Tech unlock notifications reset")},className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-1 px-3 rounded text-sm",children:"Reset Tech Notifications"}),ne.jsx("button",{onClick:()=>{s(),localStorage.removeItem("techUnlockNotifications")},className:"w-full bg-red-600 hover:bg-red-700 text-white py-1 px-3 rounded text-sm",children:"Reset Game"})]})]}),"buildings"===c&&ne.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[ne.jsx("div",{className:"text-xs text-red-200 mb-2",children:"Instantly upgrade buildings to next level (no cost/time)"}),Object.entries(r.buildings).filter(([e,t])=>t.unlocked&&t.level<t.maxLevel).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>ne.jsxs("div",{className:"flex items-center justify-between p-2 bg-red-800/30 rounded text-xs",children:[ne.jsxs("div",{className:"flex-1 min-w-0",children:[ne.jsx("div",{className:"font-medium text-white truncate",children:t.name}),ne.jsxs("div",{className:"text-red-200",children:["Level ",t.level,"/",t.maxLevel]})]}),ne.jsx("button",{onClick:()=>(e=>{n.instantUpgradeBuilding(e)})(e),disabled:t.level>=t.maxLevel,className:"ml-2 px-3 py-1 rounded transition-colors whitespace-nowrap "+(t.level>=t.maxLevel?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"),children:"+1 Level"})]},e)),0===Object.entries(r.buildings).filter(([e,t])=>t.unlocked&&t.level<t.maxLevel).length&&ne.jsx("div",{className:"text-red-300 text-center py-4",children:"No buildings available to upgrade"})]}),"research"===c&&ne.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[ne.jsx("div",{className:"text-xs text-red-200 mb-2",children:"Instantly complete research (no cost/time)"}),Object.entries(r.research).filter(([e,t])=>t.unlocked&&!t.completed).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>ne.jsxs("div",{className:"flex items-center justify-between p-2 bg-red-800/30 rounded text-xs",children:[ne.jsxs("div",{className:"flex-1 min-w-0",children:[ne.jsx("div",{className:"font-medium text-white truncate",children:t.name}),ne.jsx("div",{className:"text-red-200 text-xs truncate",children:t.description})]}),ne.jsx("button",{onClick:()=>(e=>{n.instantCompleteResearch(e)})(e),className:"ml-2 px-3 py-1 rounded bg-blue-600 hover:bg-blue-700 text-white transition-colors whitespace-nowrap",children:"Complete"})]},e)),0===Object.entries(r.research).filter(([e,t])=>t.unlocked&&!t.completed).length&&ne.jsx("div",{className:"text-red-300 text-center py-4",children:"No research available to complete"})]}),ne.jsx("div",{className:"text-xs text-red-300 italic mt-3 text-center",children:"Development mode only"})]})},dw=()=>{const{gameState:e}=lh(),t=Y.useCallback(()=>{const t=Object.values(e.buildings).filter(e=>e.level>0&&!1!==e.enabled&&Object.keys(e.production).length>0);if(0===t.length)return;const n=Math.min(Math.floor(3*Math.random())+1,t.length),r=[...t].sort(()=>Math.random()-.5);for(let s=0;s<n;s++){const t=r[s],n=Object.entries(t.production);if(0===n.length)continue;const[i,a]=n[Math.floor(Math.random()*n.length)],o=e.resources[i];if(!o||!o.unlocked)continue;const l=a*t.level;if(l<1e-4)continue;const c=Math.random()*window.innerWidth*.7+.15*window.innerWidth,u=Math.random()*window.innerHeight*.4+.2*window.innerHeight,d=l>=.1?1:l>=.01?2:4;Hd("resource-collect",c,u,`${t.name}: +${l.toFixed(d)}/s ${o.name}`)}},[e]);return G.useEffect(()=>{const e=setInterval(()=>{t()},3e3);return()=>clearInterval(e)},[t]),null},hw=()=>{const e=G.useRef(null),t=G.useRef([]),n=G.useRef(),{currentEra:r}=xh();return G.useEffect(()=>{const s=e.current;if(!s)return;const i=s.getContext("2d");if(!i)return;const a=()=>{s.width=window.innerWidth,s.height=window.innerHeight};a(),window.addEventListener("resize",a);const o=()=>{const e={basic:{count:3,types:["spark"],speed:.5,size:2},mining:{count:5,types:["spark"],speed:.7,size:2.5},electronics:{count:8,types:["circuit","glow"],speed:1,size:3},computing:{count:12,types:["circuit","glow"],speed:1.2,size:3.5},robotics:{count:15,types:["glow","energy"],speed:1.5,size:4},quantum:{count:20,types:["quantum","energy"],speed:2,size:4.5},nano:{count:25,types:["quantum","glow"],speed:2.5,size:3},fusion:{count:30,types:["energy","spark"],speed:3,size:5},antimatter:{count:35,types:["quantum","energy"],speed:3.5,size:5.5},singularity:{count:40,types:["quantum","energy","glow"],speed:4,size:6}},t=e[r.id]||e.basic,n=t.types;return{x:Math.random()*s.width,y:Math.random()*s.height,vx:(Math.random()-.5)*t.speed,vy:(Math.random()-.5)*t.speed,life:0,maxLife:60+120*Math.random(),size:t.size*(.5+.5*Math.random()),type:n[Math.floor(Math.random()*n.length)]}},l={basic:3,mining:5,electronics:8,computing:12,robotics:15,quantum:20,nano:25,fusion:30,antimatter:35,singularity:40}[r.id]||3;t.current=[];for(let e=0;e<l;e++)t.current.push(o());const c=()=>{i.clearRect(0,0,s.width,s.height);const e=r.theme.particleColor;t.current.forEach((n,r)=>{n.x+=n.vx,n.y+=n.vy,n.life++,n.x<0&&(n.x=s.width),n.x>s.width&&(n.x=0),n.y<0&&(n.y=s.height),n.y>s.height&&(n.y=0);const a=Math.max(0,1-n.life/n.maxLife);switch(i.save(),i.globalAlpha=.6*a,n.type){case"spark":i.fillStyle=e,i.beginPath(),i.arc(n.x,n.y,n.size,0,2*Math.PI),i.fill();break;case"glow":const t=i.createRadialGradient(n.x,n.y,0,n.x,n.y,3*n.size);t.addColorStop(0,e),t.addColorStop(1,"transparent"),i.fillStyle=t,i.fillRect(n.x-3*n.size,n.y-3*n.size,6*n.size,6*n.size);break;case"circuit":i.strokeStyle=e,i.lineWidth=1,i.beginPath(),i.moveTo(n.x-n.size,n.y),i.lineTo(n.x+n.size,n.y),i.moveTo(n.x,n.y-n.size),i.lineTo(n.x,n.y+n.size),i.stroke();break;case"quantum":i.strokeStyle=e,i.lineWidth=2,i.beginPath();for(let e=0;e<6;e++){const t=e/6*Math.PI*2,r=n.x+Math.cos(t)*n.size,s=n.y+Math.sin(t)*n.size;0===e?i.moveTo(r,s):i.lineTo(r,s)}i.closePath(),i.stroke();break;case"energy":i.fillStyle=e,i.beginPath(),i.ellipse(n.x,n.y,2*n.size,.5*n.size,.1*n.life,0,2*Math.PI),i.fill()}i.restore(),n.life>=n.maxLife&&(t.current[r]=o())}),n.current=requestAnimationFrame(c)};return c(),()=>{window.removeEventListener("resize",a),n.current&&cancelAnimationFrame(n.current)}},[r]),ne.jsx("canvas",{ref:e,className:"fixed inset-0 pointer-events-none z-0",style:{opacity:.3}})},mw=()=>{const{currentEra:e}=xh(),t={basic:{count:2,speed:1,size:"w-8 h-8",opacity:"opacity-20"},mining:{count:3,speed:1.2,size:"w-10 h-10",opacity:"opacity-25"},electronics:{count:4,speed:1.5,size:"w-12 h-12",opacity:"opacity-30"},computing:{count:5,speed:1.8,size:"w-14 h-14",opacity:"opacity-35"},robotics:{count:6,speed:2.2,size:"w-16 h-16",opacity:"opacity-40"},quantum:{count:7,speed:2.5,size:"w-18 h-18",opacity:"opacity-45"},nano:{count:8,speed:3,size:"w-12 h-12",opacity:"opacity-35"},fusion:{count:9,speed:3.5,size:"w-20 h-20",opacity:"opacity-50"},antimatter:{count:10,speed:4,size:"w-22 h-22",opacity:"opacity-55"},singularity:{count:12,speed:5,size:"w-24 h-24",opacity:"opacity-60"}},n=t[e.id]||t.basic;return ne.jsx("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:Array.from({length:n.count}).map((t,r)=>ne.jsx("div",{className:`absolute ${n.size} ${n.opacity} text-gray-400`,style:{left:(15*r+5)%90+"%",top:(20*r+10)%80+"%",animation:`spin ${20/n.speed}s linear infinite ${r%2==0?"":"reverse"}`,filter:`hue-rotate(${30*r}deg)`},children:ne.jsx("div",{className:"text-current",children:"singularity"===e.id?"":"antimatter"===e.id?"":"fusion"===e.id?"":"nano"===e.id?"":"quantum"===e.id?"":"robotics"===e.id?"":"computing"===e.id?"":"electronics"===e.id?"":"mining"===e.id?"":""})},r))})},gw=()=>{const{currentEra:e}=xh();return ne.jsx("div",{className:"fixed inset-0 pointer-events-none z-[1]",children:(()=>{switch(e.id){case"basic":return ne.jsx("div",{className:"absolute inset-0 opacity-5",children:ne.jsx("div",{className:"absolute inset-0 bg-repeat",style:{backgroundImage:"radial-gradient(circle at 20% 20%, rgba(139, 69, 19, 0.3) 2px, transparent 2px),\n                               radial-gradient(circle at 60% 80%, rgba(160, 82, 45, 0.2) 1px, transparent 1px),\n                               radial-gradient(circle at 80% 40%, rgba(101, 67, 33, 0.3) 1.5px, transparent 1.5px)",backgroundSize:"40px 40px, 30px 30px, 50px 50px"}})});case"mining":return ne.jsxs("div",{className:"absolute inset-0 opacity-10",children:[ne.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(90deg, rgba(107, 114, 128, 0.3) 1px, transparent 1px),\n                               linear-gradient(0deg, rgba(107, 114, 128, 0.3) 1px, transparent 1px)",backgroundSize:"20px 20px"}}),ne.jsx("div",{className:"absolute inset-0 bg-repeat",style:{backgroundImage:"radial-gradient(circle at 25% 25%, rgba(194, 65, 12, 0.2) 3px, transparent 3px),\n                               radial-gradient(circle at 75% 75%, rgba(154, 52, 18, 0.15) 2px, transparent 2px)",backgroundSize:"80px 80px, 60px 60px"}})]});case"electronics":return ne.jsxs("div",{className:"absolute inset-0 opacity-6",children:[ne.jsx("div",{className:"absolute inset-0",style:{background:"radial-gradient(circle at 20% 20%, rgba(34, 197, 94, 0.02) 0%, transparent 50%),\n                          radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.02) 0%, transparent 50%),\n                          linear-gradient(45deg, rgba(16, 185, 129, 0.01) 25%, transparent 25%)"}}),ne.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"\n                linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0.5px, transparent 0.5px),\n                linear-gradient(0deg, rgba(59, 130, 246, 0.15) 0.5px, transparent 0.5px),\n                linear-gradient(45deg, rgba(34, 197, 94, 0.1) 1px, transparent 1px),\n                linear-gradient(-45deg, rgba(16, 185, 129, 0.08) 0.5px, transparent 0.5px)\n              ",backgroundSize:"32px 32px, 32px 32px, 64px 64px, 48px 48px"}}),ne.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"\n                linear-gradient(90deg, rgba(37, 99, 235, 0.08) 0.5px, transparent 0.5px),\n                linear-gradient(0deg, rgba(37, 99, 235, 0.08) 0.5px, transparent 0.5px)\n              ",backgroundSize:"24px 24px",transform:"translate(12px, 12px)"}}),ne.jsx("div",{className:"absolute inset-0 bg-repeat",style:{backgroundImage:"\n                radial-gradient(ellipse 2px 1px at 50% 50%, rgba(59, 130, 246, 0.25) 0%, transparent 100%),\n                radial-gradient(circle 1.5px at 25% 75%, rgba(34, 197, 94, 0.2) 0%, transparent 100%),\n                radial-gradient(circle 1px at 75% 25%, rgba(16, 185, 129, 0.15) 0%, transparent 100%)\n              ",backgroundSize:"96px 96px, 128px 128px, 80px 80px",backgroundPosition:"0 0, 32px 32px, 64px 16px"}}),ne.jsx("div",{className:"absolute inset-0 bg-repeat",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='45' y='45' width='30' height='30' fill='none' stroke='%233b82f6' stroke-width='0.3' opacity='0.15'/%3E%3Cline x1='35' y1='50' x2='45' y2='50' stroke='%233b82f6' stroke-width='0.2' opacity='0.2'/%3E%3Cline x1='35' y1='60' x2='45' y2='60' stroke='%233b82f6' stroke-width='0.2' opacity='0.2'/%3E%3Cline x1='35' y1='70' x2='45' y2='70' stroke='%233b82f6' stroke-width='0.2' opacity='0.2'/%3E%3Cline x1='75' y1='50' x2='85' y2='50' stroke='%233b82f6' stroke-width='0.2' opacity='0.2'/%3E%3Cline x1='75' y1='60' x2='85' y2='60' stroke='%233b82f6' stroke-width='0.2' opacity='0.2'/%3E%3Cline x1='75' y1='70' x2='85' y2='70' stroke='%233b82f6' stroke-width='0.2' opacity='0.2'/%3E%3C/svg%3E\")",backgroundSize:"160px 160px"}}),ne.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[ne.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(90deg, transparent 0%, rgba(59, 130, 246, 0.08) 49%, rgba(34, 197, 94, 0.12) 50%, rgba(59, 130, 246, 0.08) 51%, transparent 100%)",backgroundSize:"100vw 0.5px",backgroundRepeat:"repeat-y",animation:"electronicsFlowHorizontal 15s linear infinite",backgroundPosition:"0 32px"}}),ne.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(0deg, transparent 0%, rgba(16, 185, 129, 0.06) 49%, rgba(59, 130, 246, 0.1) 50%, rgba(16, 185, 129, 0.06) 51%, transparent 100%)",backgroundSize:"0.5px 100vh",backgroundRepeat:"repeat-x",animation:"electronicsFlowVertical 18s linear infinite reverse",backgroundPosition:"64px 0"}})]}),ne.jsx("div",{className:"absolute inset-0 bg-repeat",style:{backgroundImage:"radial-gradient(circle 3px at 50% 50%, rgba(59, 130, 246, 0.08) 0%, transparent 70%)",backgroundSize:"64px 64px",animation:"pulse 6s ease-in-out infinite"}})]});case"computing":return ne.jsxs("div",{className:"absolute inset-0 opacity-8",children:[ne.jsx("div",{className:"absolute inset-0 font-mono text-xs text-indigo-500/20 overflow-hidden whitespace-nowrap",children:ne.jsx("div",{className:"absolute inset-0 bg-repeat animate-pulse",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='5' y='15' font-family='monospace' font-size='8' fill='%236366f1' opacity='0.3'%3E01%3C/text%3E%3Ctext x='25' y='35' font-family='monospace' font-size='8' fill='%236366f1' opacity='0.2'%3E10%3C/text%3E%3Ctext x='40' y='55' font-family='monospace' font-size='8' fill='%236366f1' opacity='0.3'%3E11%3C/text%3E%3C/svg%3E\")"}})}),ne.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(90deg, rgba(99, 102, 241, 0.15) 2px, transparent 2px),\n                               linear-gradient(45deg, rgba(129, 140, 248, 0.1) 1px, transparent 1px)",backgroundSize:"40px 40px, 20px 20px"}})]});case"robotics":return ne.jsxs("div",{className:"absolute inset-0 opacity-8",children:[ne.jsx("div",{className:"absolute inset-0 bg-repeat",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='50' height='50' viewBox='0 0 50 50' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='25' cy='25' r='8' fill='none' stroke='%2310b981' stroke-width='1' opacity='0.2'/%3E%3Ccircle cx='25' cy='25' r='4' fill='%2310b981' opacity='0.1'/%3E%3C/svg%3E\")",backgroundSize:"50px 50px"}}),ne.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(90deg, rgba(16, 185, 129, 0.15) 3px, transparent 3px),\n                               linear-gradient(0deg, rgba(5, 150, 105, 0.1) 1px, transparent 1px)",backgroundSize:"60px 60px, 30px 30px"}})]});case"quantum":return ne.jsxs("div",{className:"absolute inset-0 opacity-10",children:[ne.jsx("div",{className:"absolute inset-0 bg-repeat animate-pulse",style:{backgroundImage:"radial-gradient(circle at 30% 30%, rgba(139, 92, 246, 0.3) 2px, transparent 2px),\n                               radial-gradient(circle at 70% 70%, rgba(167, 139, 250, 0.2) 3px, transparent 3px),\n                               radial-gradient(circle at 50% 50%, rgba(196, 181, 253, 0.15) 1px, transparent 1px)",backgroundSize:"40px 40px, 60px 60px, 20px 20px",animation:"pulse 3s ease-in-out infinite"}}),ne.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(45deg, rgba(139, 92, 246, 0.1) 1px, transparent 1px),\n                               linear-gradient(-45deg, rgba(167, 139, 250, 0.1) 1px, transparent 1px)",backgroundSize:"15px 15px"}})]});case"nano":return ne.jsxs("div",{className:"absolute inset-0 opacity-8",children:[ne.jsx("div",{className:"absolute inset-0 bg-repeat",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='10' cy='10' r='2' fill='%23ec4899' opacity='0.3'/%3E%3Ccircle cx='30' cy='10' r='2' fill='%23ec4899' opacity='0.3'/%3E%3Ccircle cx='20' cy='30' r='2' fill='%23ec4899' opacity='0.3'/%3E%3Cline x1='10' y1='10' x2='30' y2='10' stroke='%23ec4899' stroke-width='0.5' opacity='0.2'/%3E%3Cline x1='30' y1='10' x2='20' y2='30' stroke='%23ec4899' stroke-width='0.5' opacity='0.2'/%3E%3Cline x1='20' y1='30' x2='10' y2='10' stroke='%23ec4899' stroke-width='0.5' opacity='0.2'/%3E%3C/svg%3E\")",backgroundSize:"40px 40px"}}),ne.jsx("div",{className:"absolute inset-0 bg-repeat animate-pulse",style:{backgroundImage:"radial-gradient(circle at 20% 80%, rgba(236, 72, 153, 0.2) 1px, transparent 1px),\n                               radial-gradient(circle at 80% 20%, rgba(219, 39, 119, 0.15) 0.5px, transparent 0.5px)",backgroundSize:"25px 25px, 35px 35px",animation:"pulse 2s ease-in-out infinite"}})]});case"fusion":return ne.jsxs("div",{className:"absolute inset-0 opacity-10",children:[ne.jsx("div",{className:"absolute inset-0 bg-repeat animate-pulse",style:{backgroundImage:"radial-gradient(ellipse at center, rgba(234, 88, 12, 0.4) 0%, transparent 70%),\n                               radial-gradient(circle at 25% 25%, rgba(249, 115, 22, 0.3) 5px, transparent 5px),\n                               radial-gradient(circle at 75% 75%, rgba(194, 65, 12, 0.2) 3px, transparent 3px)",backgroundSize:"80px 80px, 60px 60px, 40px 40px",animation:"pulse 1.5s ease-in-out infinite"}}),ne.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(45deg, rgba(234, 88, 12, 0.15) 2px, transparent 2px),\n                               linear-gradient(-45deg, rgba(249, 115, 22, 0.1) 1px, transparent 1px)",backgroundSize:"30px 30px, 20px 20px"}})]});case"antimatter":return ne.jsxs("div",{className:"absolute inset-0 opacity-10",children:[ne.jsx("div",{className:"absolute inset-0 bg-repeat animate-pulse",style:{backgroundImage:"radial-gradient(circle at 50% 50%, rgba(217, 70, 239, 0.4) 0%, transparent 50%),\n                               radial-gradient(circle at 25% 75%, rgba(168, 85, 247, 0.3) 4px, transparent 4px),\n                               radial-gradient(circle at 75% 25%, rgba(147, 51, 234, 0.2) 2px, transparent 2px)",backgroundSize:"60px 60px, 45px 45px, 30px 30px",animation:"pulse 1s ease-in-out infinite alternate"}}),ne.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"conic-gradient(from 0deg, rgba(217, 70, 239, 0.1), transparent 50%, rgba(217, 70, 239, 0.1))",backgroundSize:"100px 100px"}})]});case"singularity":return ne.jsxs("div",{className:"absolute inset-0 opacity-15",children:[ne.jsx("div",{className:"absolute inset-0 bg-repeat animate-pulse",style:{backgroundImage:"radial-gradient(circle at center, rgba(248, 250, 252, 0.6) 0%, rgba(248, 250, 252, 0.2) 30%, transparent 70%),\n                               radial-gradient(circle at 30% 70%, rgba(226, 232, 240, 0.3) 8px, transparent 8px),\n                               radial-gradient(circle at 70% 30%, rgba(203, 213, 225, 0.2) 5px, transparent 5px)",backgroundSize:"120px 120px, 80px 80px, 60px 60px",animation:"pulse 2s ease-in-out infinite"}}),ne.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"conic-gradient(from 0deg, transparent, rgba(248, 250, 252, 0.2), transparent),\n                               radial-gradient(circle at center, transparent 40%, rgba(248, 250, 252, 0.1) 50%, transparent 60%)",backgroundSize:"200px 200px, 150px 150px"}})]});default:return null}})()})},pw=()=>{const{currentEra:e,unlockedEras:t}=xh(),n=G.useRef(null);return G.useEffect(()=>{if(!n.current)return;const r=n.current,s=[],i=t=>{const n=document.createElement("div");switch(n.className="absolute pointer-events-none transition-all duration-1000",e.id){case"basic":n.innerHTML=["","",""][t%3],n.style.fontSize="12px";break;case"mining":n.innerHTML=["","","",""][t%4],n.style.fontSize="14px";break;case"electronics":n.innerHTML=["","","",""][t%4],n.style.fontSize="16px";break;case"computing":n.innerHTML=["","","",""][t%4],n.style.fontSize="18px";break;case"robotics":n.innerHTML=["","","",""][t%4],n.style.fontSize="20px";break;case"quantum":n.innerHTML=["","","",""][t%4],n.style.fontSize="22px";break;case"nano":n.innerHTML=["","","",""][t%4],n.style.fontSize="18px";break;case"fusion":n.innerHTML=["","","",""][t%4],n.style.fontSize="24px";break;case"antimatter":n.innerHTML=["","","",""][t%4],n.style.fontSize="26px";break;case"singularity":n.innerHTML=["","","",""][t%4],n.style.fontSize="28px";break;default:n.innerHTML=""}return n.style.opacity="0.3",n.style.left=100*Math.random()+"%",n.style.top=100*Math.random()+"%",n.style.animationDuration=5+10*Math.random()+"s",n.style.animationDelay=5*Math.random()+"s",n.style.animationIterationCount="infinite",n.style.animationTimingFunction="ease-in-out",n.style.animationName="float",n},a=Math.min(8,Math.max(3,t.length));for(let e=0;e<a;e++){const t=i(e);r.appendChild(t),s.push(t)}return()=>{s.forEach(e=>{r.contains(e)&&r.removeChild(e)})}},[e.id]),ne.jsx("div",{ref:n,className:"fixed inset-0 pointer-events-none z-[2] overflow-hidden",children:ne.jsx("style",{children:"\n        @keyframes float {\n          0%, 100% { transform: translateY(0px) rotate(0deg); }\n          33% { transform: translateY(-20px) rotate(5deg); }\n          66% { transform: translateY(10px) rotate(-3deg); }\n        }\n      "})})},fw=()=>{const e=G.useRef(null),{currentEra:t}=xh();return G.useEffect(()=>{const n=e.current;if(!n)return;const r=n.getContext("2d");if(!r)return;n.width=window.innerWidth,n.height=window.innerHeight;const s=[];let i;const a=()=>{const e={basic:{count:5,speed:.5,hue:30,types:["spark"]},mining:{count:8,speed:.8,hue:0,types:["spark","ember"]},electronics:{count:12,speed:1.2,hue:220,types:["spark","pulse"]},computing:{count:15,speed:1.5,hue:250,types:["data","pulse"]},robotics:{count:18,speed:1.8,hue:160,types:["gear","spark"]},quantum:{count:22,speed:2.2,hue:270,types:["quantum","wave"]},nano:{count:25,speed:2.5,hue:320,types:["nano","swarm"]},fusion:{count:28,speed:3,hue:20,types:["plasma","energy"]},antimatter:{count:32,speed:3.5,hue:300,types:["antimatter","annihilation"]},singularity:{count:35,speed:4,hue:0,types:["singularity","distortion"]}},r=e[t.id]||e.basic;return{x:Math.random()*n.width,y:Math.random()*n.height,vx:(Math.random()-.5)*r.speed,vy:(Math.random()-.5)*r.speed,life:0,maxLife:60+120*Math.random(),size:1+3*Math.random(),hue:r.hue+60*Math.random()-30,type:r.types[Math.floor(Math.random()*r.types.length)]}},o=()=>{(()=>{const e={basic:5,mining:8,electronics:12,computing:15,robotics:18,quantum:22,nano:25,fusion:28,antimatter:32,singularity:35}[t.id]||5;for(;s.length<e;)s.push(a());s.forEach((e,t)=>{e.x+=e.vx,e.y+=e.vy,e.life++,e.x<0&&(e.x=n.width),e.x>n.width&&(e.x=0),e.y<0&&(e.y=n.height),e.y>n.height&&(e.y=0),e.life>=e.maxLife&&(s[t]=a())})})(),r.clearRect(0,0,n.width,n.height),s.forEach(e=>{const t=1-e.life/e.maxLife;switch(r.save(),r.globalAlpha=.4*t,e.type){case"spark":r.fillStyle=`hsl(${e.hue}, 70%, 60%)`,r.beginPath(),r.arc(e.x,e.y,e.size,0,2*Math.PI),r.fill();break;case"pulse":const t=r.createRadialGradient(e.x,e.y,0,e.x,e.y,4*e.size);t.addColorStop(0,`hsl(${e.hue}, 80%, 70%)`),t.addColorStop(1,"transparent"),r.fillStyle=t,r.fillRect(e.x-4*e.size,e.y-4*e.size,8*e.size,8*e.size);break;default:r.fillStyle=`hsl(${e.hue}, 60%, 50%)`,r.fillRect(e.x,e.y,e.size,e.size)}r.restore()}),i=requestAnimationFrame(o)};o();const l=()=>{n.width=window.innerWidth,n.height=window.innerHeight};return window.addEventListener("resize",l),()=>{cancelAnimationFrame(i),window.removeEventListener("resize",l)}},[t.id]),ne.jsx("canvas",{ref:e,className:"fixed inset-0 pointer-events-none z-[1]",style:{opacity:.6}})},xw=()=>{const{isMobileAudioReady:e}=Id();return!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||e?null:ne.jsx("div",{className:"fixed bottom-2 md:bottom-4 left-2 md:left-4 right-2 md:right-4 z-50",children:ne.jsxs("div",{className:"bg-yellow-600/90 border border-yellow-500/50 rounded-lg p-4 text-center shadow-lg backdrop-blur-sm",children:[ne.jsx("div",{className:"text-yellow-200 text-sm font-medium mb-2",children:" Audio Disabled"}),ne.jsx("div",{className:"text-yellow-300 text-xs mb-3",children:"Tap anywhere on the screen to enable sound effects"})]})})},bw=()=>{const[e,t]=G.useState(!0),[n,r]=G.useState(!1);return null},yw=({techEra:e,onComplete:t})=>{const[n,r]=G.useState(!1),[s,i]=G.useState("entering");return G.useEffect(()=>{r(!0),i("entering");const e=setTimeout(()=>{i("visible")},300),n=setTimeout(()=>{i("exiting")},3e3),s=setTimeout(()=>{r(!1),t()},3500);return()=>{clearTimeout(e),clearTimeout(n),clearTimeout(s)}},[]),n?ne.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:[ne.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm transition-opacity duration-300 "+("visible"===s?"opacity-100":"opacity-0"),children:ne.jsx("div",{className:"absolute inset-0 opacity-10",children:ne.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-current to-transparent animate-pulse",style:{color:e.theme.primary}})})}),ne.jsx("div",{className:`relative z-10 transition-all duration-500 ease-out ${(()=>{switch(s){case"entering":return"opacity-0 scale-50 translate-y-10";case"visible":return"opacity-100 scale-100 translate-y-0";case"exiting":return"opacity-0 scale-110 -translate-y-5";default:return"opacity-0"}})()}`,children:ne.jsxs("div",{className:`bg-gray-900/95 rounded-2xl p-8 border-2 ${e.theme.accent} ${e.theme.glowClass} backdrop-blur-sm max-w-md mx-4`,children:[ne.jsxs("div",{className:"text-center mb-6",children:[ne.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:e.icon}),ne.jsx("h2",{className:`text-2xl font-bold mb-2 bg-gradient-to-r ${e.theme.primary} bg-clip-text text-transparent`,children:"Technology Unlocked!"}),ne.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:e.name}),ne.jsx("p",{className:"text-sm text-gray-300",children:e.description})]}),ne.jsx("div",{className:"flex justify-center space-x-4 mb-6",children:Array.from({length:3}).map((t,n)=>ne.jsx("div",{className:`w-3 h-3 rounded-full bg-gradient-to-r ${e.theme.primary} animate-pulse`,style:{animationDelay:.2*n+"s"}},n))}),ne.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-2",children:ne.jsx("div",{className:`h-2 rounded-full bg-gradient-to-r ${e.theme.primary} transition-all duration-3000 ease-out`,style:{width:"entering"===s?"0%":"100%",transitionDuration:"3000ms"}})})]})})]}):null},vw=()=>{const{currentNotification:e,handleNotificationComplete:t}=(()=>{const{currentEra:e}=xh(),[t,n]=G.useState(null),[r,s]=G.useState(()=>{try{const e=localStorage.getItem("techUnlockNotifications");return e?new Set(JSON.parse(e)):new Set(["basic"])}catch(e){return new Set(["basic"])}});return G.useEffect(()=>{if(!r.has(e.id)&&"basic"!==e.id){n(e);const i=new Set(r);i.add(e.id),s(i);try{localStorage.setItem("techUnlockNotifications",JSON.stringify([...i]))}catch(t){console.warn("Failed to save tech unlock notifications to localStorage:",t)}}},[e.id,r]),{currentNotification:t,handleNotificationComplete:G.useCallback(()=>{n(null)},[])}})();return e?ne.jsx(yw,{techEra:e,onComplete:t}):null},ww=[{id:"welcome",title:"Welcome to Factory Works Idle!",description:"Welcome to Factory Works Idle! This tutorial will teach you the basics of building your industrial empire. You can skip this tutorial at any time.",position:"bottom"},{id:"resources-intro",title:"Understanding Resources",description:"Resources are the foundation of your factory. You start with Wood and Stone. Look at the resource display to see what you currently have.",target:'[data-tutorial="resource-display"]',position:"bottom"},{id:"manual-gathering",title:"Manual Resource Gathering",description:"Click on the Wood icon below to manually gather resources. Keep clicking until you have at least 10 Wood - you'll need it for your first building!",target:'[data-tutorial="wood-click"]',position:"top",action:"click",actionTarget:'[data-tutorial="wood-click"]',validation:e=>e.resources.wood.value>=10},{id:"gather-more",title:"Gather Stone Resources",description:"Great! Now gather Stone as well. Click until you have at least 5 Stone - you'll need both Wood and Stone to build your first Woodcutter.",target:'[data-tutorial="stone-click"]',position:"top",action:"click",actionTarget:'[data-tutorial="stone-click"]',validation:e=>e.resources.stone.value>=5},{id:"resources-ready",title:"Resources Ready!",description:'Perfect! You now have enough resources (10 Wood + 5 Stone) to build your first Woodcutter. Click on "Buildings" to see what you can construct.',target:'[data-tutorial="resource-display"]',position:"bottom",action:"navigate",actionTarget:"buildings"},{id:"building-list",title:"Building Your First Structure",description:"Here you can see all available buildings. The Woodcutter will automatically harvest wood for you. Now you have the required resources to build one!",target:'[data-tutorial="building-list"]',position:"right"},{id:"build-woodcutter",title:"Build a Woodcutter",description:'Click "Build" on the Woodcutter to construct your first automated building. This will consume 10 Wood and 5 Stone, then produce wood automatically over time.',target:'[data-tutorial="woodcutter-build"]',position:"left",action:"click",actionTarget:'[data-tutorial="woodcutter-build"]',validation:e=>e.buildings.woodcutter.level>0},{id:"automation-works",title:"Automation in Action",description:"Excellent! Your Woodcutter is now producing wood automatically. Watch your wood count increase over time without clicking.",position:"bottom"},{id:"research-panel",title:"Research System",description:"Research unlocks new resources, buildings, and technologies. Click the Research button in the sidebar to open the research panel.",target:'[data-tutorial="research-list"]',position:"left",action:"click",actionTarget:'[data-tutorial="research-list"] button'},{id:"research-explanation",title:"Explore Research Technologies",description:'This is the Research Tree! Here you can see available technologies like "Mining Technology" which unlocks Iron and Copper resources, and "Basic Click Efficiency" which improves your manual gathering. Research items when you have enough resources to unlock new game features.',position:"bottom"},{id:"tutorial-complete",title:"Tutorial Complete!",description:"Congratulations! You now know the basics: gather resources, build structures for automation, and research new technologies. Continue exploring to build your industrial empire!",position:"bottom"}],kw=()=>{const{gameState:e,nextTutorialStep:t,previousTutorialStep:n,skipTutorial:r,completeTutorial:s}=lh(),[i,a]=G.useState(null),[o,l]=G.useState({x:0,y:0}),c=ww[e.tutorial.currentStep],u=e.tutorial.currentStep>=ww.length-1;G.useEffect(()=>{if(e.tutorial.isActive&&c){if(c.validation&&c.validation(e)){const e=setTimeout(()=>{d()},1500);return()=>clearTimeout(e)}if(c.target){const e=document.querySelector(c.target);if(e){a(e);const t=e.getBoundingClientRect(),n=window.pageXOffset,r=window.pageYOffset;let s=t.left+n+t.width/2,i=t.top+r;const o=320,c=250,u=[{x:t.right+n+20,y:t.top+r,pos:"right"},{x:t.left+n-o-20,y:t.top+r,pos:"left"},{x:t.left+n+t.width/2-o/2,y:t.bottom+r+20,pos:"bottom"},{x:t.left+n+t.width/2-o/2,y:t.top+r-c-20,pos:"top"}];let d=u[0];for(const e of u){const t=e.x>=10&&e.x+o<=window.innerWidth-10,n=e.y>=10&&e.y+c<=window.innerHeight-10;if(t&&n){d=e;break}}s=Math.max(10,Math.min(d.x,window.innerWidth-o-10)),i=Math.max(10,Math.min(d.y,window.innerHeight-c-10)),l({x:s,y:i})}}else{a(null);const e=400,t=250,n=20;if(c.target){const r=document.querySelector(c.target);if(r){const s=r.getBoundingClientRect();let i=0,a=0;switch(c.position){case"top":i=s.left+s.width/2,a=s.top-t-n;break;case"bottom":default:i=s.left+s.width/2,a=s.bottom+n;break;case"left":i=s.left-e-n,a=s.top+s.height/2;break;case"right":i=s.right+n,a=s.top+s.height/2}i=Math.max(e/2+n,Math.min(i,window.innerWidth-e/2-n)),a=Math.max(t/2+n,Math.min(a,window.innerHeight-t/2-n)),l({x:i,y:a})}else l({x:window.innerWidth/2,y:window.innerHeight/2})}else{const e=window.innerWidth/2,r=window.innerHeight/2;l({x:e,y:Math.max(t/2+n,Math.min(r,window.innerHeight-t/2-n))})}}}},[e.tutorial.currentStep,e.tutorial.isActive,c,e]);const d=()=>{if("navigate"===c.action&&c.actionTarget){const e=document.querySelector(`[data-tutorial="${c.actionTarget}-tab"]`);e&&e.click()}u?s():t()};return null};function jw(){const[e,t]=G.useState(!1),{startBackgroundMusicAfterInteraction:n}=Id();return G.useEffect(()=>{const e=e=>{e.preventDefault()};return document.addEventListener("contextmenu",e),()=>{document.removeEventListener("contextmenu",e)}},[]),G.useEffect(()=>{if(e){const e=setTimeout(()=>{n().then(()=>{console.log("Background music started successfully")}).catch(e=>{console.log("Background music failed to start:",e)})},200);return()=>clearTimeout(e)}},[e,n]),e?ne.jsx(bh,{children:ne.jsxs("div",{className:"min-h-screen bg-gray-900 text-white overflow-x-hidden max-w-full",children:[ne.jsx(gw,{}),ne.jsx(fw,{}),ne.jsx(hw,{}),ne.jsx(mw,{}),ne.jsx(pw,{}),ne.jsx(lw,{}),ne.jsx(dw,{}),ne.jsx(xw,{}),ne.jsx(bw,{}),ne.jsx(uw,{}),ne.jsx(vw,{}),ne.jsx(ah,{}),ne.jsx(kw,{})]})}):ne.jsx(cw,{onGameStart:()=>t(!0)})}function Nw(){return ne.jsx(nh,{children:ne.jsx(Dd,{children:ne.jsx(ih,{children:ne.jsx(uh,{children:ne.jsx(Ud,{children:ne.jsx(jw,{})})})})})})}ud(document.getElementById("root")).render(ne.jsx(G.StrictMode,{children:ne.jsx(Nw,{})}))}},function(){return t||(0,e[i(e)[0]])((t={exports:{}}).exports,t),t.exports});export default g();
